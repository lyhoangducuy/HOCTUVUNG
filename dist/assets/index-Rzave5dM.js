function f$(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function zi(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var K1={exports:{}},ld={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yj;function h$(){if(Yj)return ld;Yj=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var c in i)c!=="key"&&(a[c]=i[c])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:a}}return ld.Fragment=e,ld.jsx=n,ld.jsxs=n,ld}var Xj;function d$(){return Xj||(Xj=1,K1.exports=h$()),K1.exports}var d=d$(),G1={exports:{}},st={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qj;function m$(){if(Qj)return st;Qj=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;function y(H){return H===null||typeof H!="object"?null:(H=p&&H[p]||H["@@iterator"],typeof H=="function"?H:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,T={};function S(H,Z,te){this.props=H,this.context=Z,this.refs=T,this.updater=te||b}S.prototype.isReactComponent={},S.prototype.setState=function(H,Z){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,Z,"setState")},S.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function E(){}E.prototype=S.prototype;function N(H,Z,te){this.props=H,this.context=Z,this.refs=T,this.updater=te||b}var C=N.prototype=new E;C.constructor=N,_(C,S.prototype),C.isPureReactComponent=!0;var L=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},R=Object.prototype.hasOwnProperty;function k(H,Z,te,fe,Ce,Ie){return te=Ie.ref,{$$typeof:t,type:H,key:Z,ref:te!==void 0?te:null,props:Ie}}function I(H,Z){return k(H.type,Z,void 0,void 0,void 0,H.props)}function O(H){return typeof H=="object"&&H!==null&&H.$$typeof===t}function U(H){var Z={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(te){return Z[te]})}var $=/\/+/g;function V(H,Z){return typeof H=="object"&&H!==null&&H.key!=null?U(""+H.key):Z.toString(36)}function B(){}function Y(H){switch(H.status){case"fulfilled":return H.value;case"rejected":throw H.reason;default:switch(typeof H.status=="string"?H.then(B,B):(H.status="pending",H.then(function(Z){H.status==="pending"&&(H.status="fulfilled",H.value=Z)},function(Z){H.status==="pending"&&(H.status="rejected",H.reason=Z)})),H.status){case"fulfilled":return H.value;case"rejected":throw H.reason}}throw H}function ee(H,Z,te,fe,Ce){var Ie=typeof H;(Ie==="undefined"||Ie==="boolean")&&(H=null);var Fe=!1;if(H===null)Fe=!0;else switch(Ie){case"bigint":case"string":case"number":Fe=!0;break;case"object":switch(H.$$typeof){case t:case e:Fe=!0;break;case m:return Fe=H._init,ee(Fe(H._payload),Z,te,fe,Ce)}}if(Fe)return Ce=Ce(H),Fe=fe===""?"."+V(H,0):fe,L(Ce)?(te="",Fe!=null&&(te=Fe.replace($,"$&/")+"/"),ee(Ce,Z,te,"",function(we){return we})):Ce!=null&&(O(Ce)&&(Ce=I(Ce,te+(Ce.key==null||H&&H.key===Ce.key?"":(""+Ce.key).replace($,"$&/")+"/")+Fe)),Z.push(Ce)),1;Fe=0;var Pt=fe===""?".":fe+":";if(L(H))for(var Ne=0;Ne<H.length;Ne++)fe=H[Ne],Ie=Pt+V(fe,Ne),Fe+=ee(fe,Z,te,Ie,Ce);else if(Ne=y(H),typeof Ne=="function")for(H=Ne.call(H),Ne=0;!(fe=H.next()).done;)fe=fe.value,Ie=Pt+V(fe,Ne++),Fe+=ee(fe,Z,te,Ie,Ce);else if(Ie==="object"){if(typeof H.then=="function")return ee(Y(H),Z,te,fe,Ce);throw Z=String(H),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Fe}function q(H,Z,te){if(H==null)return H;var fe=[],Ce=0;return ee(H,fe,"","",function(Ie){return Z.call(te,Ie,Ce++)}),fe}function G(H){if(H._status===-1){var Z=H._result;Z=Z(),Z.then(function(te){(H._status===0||H._status===-1)&&(H._status=1,H._result=te)},function(te){(H._status===0||H._status===-1)&&(H._status=2,H._result=te)}),H._status===-1&&(H._status=0,H._result=Z)}if(H._status===1)return H._result.default;throw H._result}var K=typeof reportError=="function"?reportError:function(H){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof H=="object"&&H!==null&&typeof H.message=="string"?String(H.message):String(H),error:H});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",H);return}console.error(H)};function oe(){}return st.Children={map:q,forEach:function(H,Z,te){q(H,function(){Z.apply(this,arguments)},te)},count:function(H){var Z=0;return q(H,function(){Z++}),Z},toArray:function(H){return q(H,function(Z){return Z})||[]},only:function(H){if(!O(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},st.Component=S,st.Fragment=n,st.Profiler=i,st.PureComponent=N,st.StrictMode=r,st.Suspense=u,st.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,st.__COMPILER_RUNTIME={__proto__:null,c:function(H){return D.H.useMemoCache(H)}},st.cache=function(H){return function(){return H.apply(null,arguments)}},st.cloneElement=function(H,Z,te){if(H==null)throw Error("The argument must be a React element, but you passed "+H+".");var fe=_({},H.props),Ce=H.key,Ie=void 0;if(Z!=null)for(Fe in Z.ref!==void 0&&(Ie=void 0),Z.key!==void 0&&(Ce=""+Z.key),Z)!R.call(Z,Fe)||Fe==="key"||Fe==="__self"||Fe==="__source"||Fe==="ref"&&Z.ref===void 0||(fe[Fe]=Z[Fe]);var Fe=arguments.length-2;if(Fe===1)fe.children=te;else if(1<Fe){for(var Pt=Array(Fe),Ne=0;Ne<Fe;Ne++)Pt[Ne]=arguments[Ne+2];fe.children=Pt}return k(H.type,Ce,void 0,void 0,Ie,fe)},st.createContext=function(H){return H={$$typeof:o,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null},H.Provider=H,H.Consumer={$$typeof:a,_context:H},H},st.createElement=function(H,Z,te){var fe,Ce={},Ie=null;if(Z!=null)for(fe in Z.key!==void 0&&(Ie=""+Z.key),Z)R.call(Z,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(Ce[fe]=Z[fe]);var Fe=arguments.length-2;if(Fe===1)Ce.children=te;else if(1<Fe){for(var Pt=Array(Fe),Ne=0;Ne<Fe;Ne++)Pt[Ne]=arguments[Ne+2];Ce.children=Pt}if(H&&H.defaultProps)for(fe in Fe=H.defaultProps,Fe)Ce[fe]===void 0&&(Ce[fe]=Fe[fe]);return k(H,Ie,void 0,void 0,null,Ce)},st.createRef=function(){return{current:null}},st.forwardRef=function(H){return{$$typeof:c,render:H}},st.isValidElement=O,st.lazy=function(H){return{$$typeof:m,_payload:{_status:-1,_result:H},_init:G}},st.memo=function(H,Z){return{$$typeof:h,type:H,compare:Z===void 0?null:Z}},st.startTransition=function(H){var Z=D.T,te={};D.T=te;try{var fe=H(),Ce=D.S;Ce!==null&&Ce(te,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(oe,K)}catch(Ie){K(Ie)}finally{D.T=Z}},st.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},st.use=function(H){return D.H.use(H)},st.useActionState=function(H,Z,te){return D.H.useActionState(H,Z,te)},st.useCallback=function(H,Z){return D.H.useCallback(H,Z)},st.useContext=function(H){return D.H.useContext(H)},st.useDebugValue=function(){},st.useDeferredValue=function(H,Z){return D.H.useDeferredValue(H,Z)},st.useEffect=function(H,Z,te){var fe=D.H;if(typeof te=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return fe.useEffect(H,Z)},st.useId=function(){return D.H.useId()},st.useImperativeHandle=function(H,Z,te){return D.H.useImperativeHandle(H,Z,te)},st.useInsertionEffect=function(H,Z){return D.H.useInsertionEffect(H,Z)},st.useLayoutEffect=function(H,Z){return D.H.useLayoutEffect(H,Z)},st.useMemo=function(H,Z){return D.H.useMemo(H,Z)},st.useOptimistic=function(H,Z){return D.H.useOptimistic(H,Z)},st.useReducer=function(H,Z,te){return D.H.useReducer(H,Z,te)},st.useRef=function(H){return D.H.useRef(H)},st.useState=function(H){return D.H.useState(H)},st.useSyncExternalStore=function(H,Z,te){return D.H.useSyncExternalStore(H,Z,te)},st.useTransition=function(){return D.H.useTransition()},st.version="19.1.1",st}var Zj;function Pf(){return Zj||(Zj=1,G1.exports=m$()),G1.exports}var w=Pf();const fn=zi(w),g$=f$({__proto__:null,default:fn},[w]);var W1={exports:{}},cd={},Y1={exports:{}},X1={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jj;function p$(){return Jj||(Jj=1,function(t){function e(q,G){var K=q.length;q.push(G);e:for(;0<K;){var oe=K-1>>>1,H=q[oe];if(0<i(H,G))q[oe]=G,q[K]=H,K=oe;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var G=q[0],K=q.pop();if(K!==G){q[0]=K;e:for(var oe=0,H=q.length,Z=H>>>1;oe<Z;){var te=2*(oe+1)-1,fe=q[te],Ce=te+1,Ie=q[Ce];if(0>i(fe,K))Ce<H&&0>i(Ie,fe)?(q[oe]=Ie,q[Ce]=K,oe=Ce):(q[oe]=fe,q[te]=K,oe=te);else if(Ce<H&&0>i(Ie,K))q[oe]=Ie,q[Ce]=K,oe=Ce;else break e}}return G}function i(q,G){var K=q.sortIndex-G.sortIndex;return K!==0?K:q.id-G.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],h=[],m=1,p=null,y=3,b=!1,_=!1,T=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function L(q){for(var G=n(h);G!==null;){if(G.callback===null)r(h);else if(G.startTime<=q)r(h),G.sortIndex=G.expirationTime,e(u,G);else break;G=n(h)}}function D(q){if(T=!1,L(q),!_)if(n(u)!==null)_=!0,R||(R=!0,V());else{var G=n(h);G!==null&&ee(D,G.startTime-q)}}var R=!1,k=-1,I=5,O=-1;function U(){return S?!0:!(t.unstable_now()-O<I)}function $(){if(S=!1,R){var q=t.unstable_now();O=q;var G=!0;try{e:{_=!1,T&&(T=!1,N(k),k=-1),b=!0;var K=y;try{t:{for(L(q),p=n(u);p!==null&&!(p.expirationTime>q&&U());){var oe=p.callback;if(typeof oe=="function"){p.callback=null,y=p.priorityLevel;var H=oe(p.expirationTime<=q);if(q=t.unstable_now(),typeof H=="function"){p.callback=H,L(q),G=!0;break t}p===n(u)&&r(u),L(q)}else r(u);p=n(u)}if(p!==null)G=!0;else{var Z=n(h);Z!==null&&ee(D,Z.startTime-q),G=!1}}break e}finally{p=null,y=K,b=!1}G=void 0}}finally{G?V():R=!1}}}var V;if(typeof C=="function")V=function(){C($)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,Y=B.port2;B.port1.onmessage=$,V=function(){Y.postMessage(null)}}else V=function(){E($,0)};function ee(q,G){k=E(function(){q(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(q){switch(y){case 1:case 2:case 3:var G=3;break;default:G=y}var K=y;y=G;try{return q()}finally{y=K}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(q,G){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var K=y;y=q;try{return G()}finally{y=K}},t.unstable_scheduleCallback=function(q,G,K){var oe=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?oe+K:oe):K=oe,q){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=K+H,q={id:m++,callback:G,priorityLevel:q,startTime:K,expirationTime:H,sortIndex:-1},K>oe?(q.sortIndex=K,e(h,q),n(u)===null&&q===n(h)&&(T?(N(k),k=-1):T=!0,ee(D,K-oe))):(q.sortIndex=H,e(u,q),_||b||(_=!0,R||(R=!0,V()))),q},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(q){var G=y;return function(){var K=y;y=G;try{return q.apply(this,arguments)}finally{y=K}}}}(X1)),X1}var eD;function y$(){return eD||(eD=1,Y1.exports=p$()),Y1.exports}var Q1={exports:{}},gr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tD;function v$(){if(tD)return gr;tD=1;var t=Pf();function e(u){var h="https://react.dev/errors/"+u;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(u,h,m){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:h,implementation:m}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,h){if(u==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return gr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,gr.createPortal=function(u,h){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(u,h,null,m)},gr.flushSync=function(u){var h=o.T,m=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=h,r.p=m,r.d.f()}},gr.preconnect=function(u,h){typeof u=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(u,h))},gr.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},gr.preinit=function(u,h){if(typeof u=="string"&&h&&typeof h.as=="string"){var m=h.as,p=c(m,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;m==="style"?r.d.S(u,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:b}):m==="script"&&r.d.X(u,{crossOrigin:p,integrity:y,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},gr.preinitModule=function(u,h){if(typeof u=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var m=c(h.as,h.crossOrigin);r.d.M(u,{crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(u)},gr.preload=function(u,h){if(typeof u=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var m=h.as,p=c(m,h.crossOrigin);r.d.L(u,m,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},gr.preloadModule=function(u,h){if(typeof u=="string")if(h){var m=c(h.as,h.crossOrigin);r.d.m(u,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:m,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(u)},gr.requestFormReset=function(u){r.d.r(u)},gr.unstable_batchedUpdates=function(u,h){return u(h)},gr.useFormState=function(u,h,m){return o.H.useFormState(u,h,m)},gr.useFormStatus=function(){return o.H.useHostTransitionStatus()},gr.version="19.1.1",gr}var nD;function T3(){if(nD)return Q1.exports;nD=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Q1.exports=v$(),Q1.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rD;function b$(){if(rD)return cd;rD=1;var t=y$(),e=Pf(),n=T3();function r(s){var l="https://react.dev/errors/"+s;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)l+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+s+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var l=s,f=s;if(s.alternate)for(;l.return;)l=l.return;else{s=l;do l=s,(l.flags&4098)!==0&&(f=l.return),s=l.return;while(s)}return l.tag===3?f:null}function o(s){if(s.tag===13){var l=s.memoizedState;if(l===null&&(s=s.alternate,s!==null&&(l=s.memoizedState)),l!==null)return l.dehydrated}return null}function c(s){if(a(s)!==s)throw Error(r(188))}function u(s){var l=s.alternate;if(!l){if(l=a(s),l===null)throw Error(r(188));return l!==s?null:s}for(var f=s,g=l;;){var x=f.return;if(x===null)break;var A=x.alternate;if(A===null){if(g=x.return,g!==null){f=g;continue}break}if(x.child===A.child){for(A=x.child;A;){if(A===f)return c(x),s;if(A===g)return c(x),l;A=A.sibling}throw Error(r(188))}if(f.return!==g.return)f=x,g=A;else{for(var M=!1,F=x.child;F;){if(F===f){M=!0,f=x,g=A;break}if(F===g){M=!0,g=x,f=A;break}F=F.sibling}if(!M){for(F=A.child;F;){if(F===f){M=!0,f=A,g=x;break}if(F===g){M=!0,g=A,f=x;break}F=F.sibling}if(!M)throw Error(r(189))}}if(f.alternate!==g)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?s:l}function h(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s;for(s=s.child;s!==null;){if(l=h(s),l!==null)return l;s=s.sibling}return null}var m=Object.assign,p=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),C=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function V(s){return s===null||typeof s!="object"?null:(s=$&&s[$]||s["@@iterator"],typeof s=="function"?s:null)}var B=Symbol.for("react.client.reference");function Y(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===B?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case _:return"Fragment";case S:return"Profiler";case T:return"StrictMode";case D:return"Suspense";case R:return"SuspenseList";case O:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case b:return"Portal";case C:return(s.displayName||"Context")+".Provider";case N:return(s._context.displayName||"Context")+".Consumer";case L:var l=s.render;return s=s.displayName,s||(s=l.displayName||l.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case k:return l=s.displayName||null,l!==null?l:Y(s.type)||"Memo";case I:l=s._payload,s=s._init;try{return Y(s(l))}catch{}}return null}var ee=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},oe=[],H=-1;function Z(s){return{current:s}}function te(s){0>H||(s.current=oe[H],oe[H]=null,H--)}function fe(s,l){H++,oe[H]=s.current,s.current=l}var Ce=Z(null),Ie=Z(null),Fe=Z(null),Pt=Z(null);function Ne(s,l){switch(fe(Fe,l),fe(Ie,s),fe(Ce,null),l.nodeType){case 9:case 11:s=(s=l.documentElement)&&(s=s.namespaceURI)?Sj(s):0;break;default:if(s=l.tagName,l=l.namespaceURI)l=Sj(l),s=Tj(l,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}te(Ce),fe(Ce,s)}function we(){te(Ce),te(Ie),te(Fe)}function Le(s){s.memoizedState!==null&&fe(Pt,s);var l=Ce.current,f=Tj(l,s.type);l!==f&&(fe(Ie,s),fe(Ce,f))}function xe(s){Ie.current===s&&(te(Ce),te(Ie)),Pt.current===s&&(te(Pt),rd._currentValue=K)}var ce=Object.prototype.hasOwnProperty,Pe=t.unstable_scheduleCallback,qe=t.unstable_cancelCallback,Ke=t.unstable_shouldYield,kt=t.unstable_requestPaint,Rt=t.unstable_now,Gr=t.unstable_getCurrentPriorityLevel,Wr=t.unstable_ImmediatePriority,X=t.unstable_UserBlockingPriority,ae=t.unstable_NormalPriority,me=t.unstable_LowPriority,De=t.unstable_IdlePriority,Ee=t.log,Se=t.unstable_setDisableYieldValue,je=null,$e=null;function ot(s){if(typeof Ee=="function"&&Se(s),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(je,s)}catch{}}var Bt=Math.clz32?Math.clz32:ns,ts=Math.log,bi=Math.LN2;function ns(s){return s>>>=0,s===0?32:31-(ts(s)/bi|0)|0}var Gi=256,Wi=4194304;function Yr(s){var l=s&42;if(l!==0)return l;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function rs(s,l,f){var g=s.pendingLanes;if(g===0)return 0;var x=0,A=s.suspendedLanes,M=s.pingedLanes;s=s.warmLanes;var F=g&134217727;return F!==0?(g=F&~A,g!==0?x=Yr(g):(M&=F,M!==0?x=Yr(M):f||(f=F&~s,f!==0&&(x=Yr(f))))):(F=g&~A,F!==0?x=Yr(F):M!==0?x=Yr(M):f||(f=g&~s,f!==0&&(x=Yr(f)))),x===0?0:l!==0&&l!==x&&(l&A)===0&&(A=x&-x,f=l&-l,A>=f||A===32&&(f&4194048)!==0)?l:x}function is(s,l){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&l)===0}function fo(s,l){switch(s){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ih(){var s=Gi;return Gi<<=1,(Gi&4194048)===0&&(Gi=256),s}function ah(){var s=Wi;return Wi<<=1,(Wi&62914560)===0&&(Wi=4194304),s}function as(s){for(var l=[],f=0;31>f;f++)l.push(s);return l}function ss(s,l){s.pendingLanes|=l,l!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function sh(s,l,f,g,x,A){var M=s.pendingLanes;s.pendingLanes=f,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=f,s.entangledLanes&=f,s.errorRecoveryDisabledLanes&=f,s.shellSuspendCounter=0;var F=s.entanglements,W=s.expirationTimes,ie=s.hiddenUpdates;for(f=M&~f;0<f;){var ge=31-Bt(f),ve=1<<ge;F[ge]=0,W[ge]=-1;var le=ie[ge];if(le!==null)for(ie[ge]=null,ge=0;ge<le.length;ge++){var ue=le[ge];ue!==null&&(ue.lane&=-536870913)}f&=~ve}g!==0&&va(s,g,0),A!==0&&x===0&&s.tag!==0&&(s.suspendedLanes|=A&~(M&~l))}function va(s,l,f){s.pendingLanes|=l,s.suspendedLanes&=~l;var g=31-Bt(l);s.entangledLanes|=l,s.entanglements[g]=s.entanglements[g]|1073741824|f&4194090}function oh(s,l){var f=s.entangledLanes|=l;for(s=s.entanglements;f;){var g=31-Bt(f),x=1<<g;x&l|s[g]&l&&(s[g]|=l),f&=~x}}function ho(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Jc(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function mo(){var s=G.p;return s!==0?s:(s=window.event,s===void 0?32:zj(s.type))}function Zm(s,l){var f=G.p;try{return G.p=s,l()}finally{G.p=f}}var sn=Math.random().toString(36).slice(2),Mn="__reactFiber$"+sn,Tn="__reactProps$"+sn,xi="__reactContainer$"+sn,lh="__reactEvents$"+sn,Y0="__reactListeners$"+sn,go="__reactHandles$"+sn,Jm="__reactResources$"+sn,Ol="__reactMarker$"+sn;function po(s){delete s[Mn],delete s[Tn],delete s[lh],delete s[Y0],delete s[go]}function os(s){var l=s[Mn];if(l)return l;for(var f=s.parentNode;f;){if(l=f[xi]||f[Mn]){if(f=l.alternate,l.child!==null||f!==null&&f.child!==null)for(s=Cj(s);s!==null;){if(f=s[Mn])return f;s=Cj(s)}return l}s=f,f=s.parentNode}return null}function ba(s){if(s=s[Mn]||s[xi]){var l=s.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return s}return null}function xa(s){var l=s.tag;if(l===5||l===26||l===27||l===6)return s.stateNode;throw Error(r(33))}function Tr(s){var l=s[Jm];return l||(l=s[Jm]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function bn(s){s[Ol]=!0}var ch=new Set,eu={};function Yi(s,l){ls(s,l),ls(s+"Capture",l)}function ls(s,l){for(eu[s]=l,s=0;s<l.length;s++)ch.add(l[s])}var eg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tg={},Il={};function ng(s){return ce.call(Il,s)?!0:ce.call(tg,s)?!1:eg.test(s)?Il[s]=!0:(tg[s]=!0,!1)}function yo(s,l,f){if(ng(l))if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":s.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){s.removeAttribute(l);return}}s.setAttribute(l,""+f)}}function wa(s,l,f){if(f===null)s.removeAttribute(l);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(l);return}s.setAttribute(l,""+f)}}function rr(s,l,f,g){if(g===null)s.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttributeNS(l,f,""+g)}}var Pl,rg;function cs(s){if(Pl===void 0)try{throw Error()}catch(f){var l=f.stack.trim().match(/\n( *(at )?)/);Pl=l&&l[1]||"",rg=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pl+s+rg}var tu=!1;function nu(s,l){if(!s||tu)return"";tu=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var ve=function(){throw Error()};if(Object.defineProperty(ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ve,[])}catch(ue){var le=ue}Reflect.construct(s,[],ve)}else{try{ve.call()}catch(ue){le=ue}s.call(ve.prototype)}}else{try{throw Error()}catch(ue){le=ue}(ve=s())&&typeof ve.catch=="function"&&ve.catch(function(){})}}catch(ue){if(ue&&le&&typeof ue.stack=="string")return[ue.stack,le.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=g.DetermineComponentFrameRoot(),M=A[0],F=A[1];if(M&&F){var W=M.split(`
`),ie=F.split(`
`);for(x=g=0;g<W.length&&!W[g].includes("DetermineComponentFrameRoot");)g++;for(;x<ie.length&&!ie[x].includes("DetermineComponentFrameRoot");)x++;if(g===W.length||x===ie.length)for(g=W.length-1,x=ie.length-1;1<=g&&0<=x&&W[g]!==ie[x];)x--;for(;1<=g&&0<=x;g--,x--)if(W[g]!==ie[x]){if(g!==1||x!==1)do if(g--,x--,0>x||W[g]!==ie[x]){var ge=`
`+W[g].replace(" at new "," at ");return s.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",s.displayName)),ge}while(1<=g&&0<=x);break}}}finally{tu=!1,Error.prepareStackTrace=f}return(f=s?s.displayName||s.name:"")?cs(f):""}function uh(s){switch(s.tag){case 26:case 27:case 5:return cs(s.type);case 16:return cs("Lazy");case 13:return cs("Suspense");case 19:return cs("SuspenseList");case 0:case 15:return nu(s.type,!1);case 11:return nu(s.type.render,!1);case 1:return nu(s.type,!0);case 31:return cs("Activity");default:return""}}function ru(s){try{var l="";do l+=uh(s),s=s.return;while(s);return l}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function Er(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function fh(s){var l=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function X0(s){var l=fh(s)?"checked":"value",f=Object.getOwnPropertyDescriptor(s.constructor.prototype,l),g=""+s[l];if(!s.hasOwnProperty(l)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var x=f.get,A=f.set;return Object.defineProperty(s,l,{configurable:!0,get:function(){return x.call(this)},set:function(M){g=""+M,A.call(this,M)}}),Object.defineProperty(s,l,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(M){g=""+M},stopTracking:function(){s._valueTracker=null,delete s[l]}}}}function iu(s){s._valueTracker||(s._valueTracker=X0(s))}function hh(s){if(!s)return!1;var l=s._valueTracker;if(!l)return!0;var f=l.getValue(),g="";return s&&(g=fh(s)?s.checked?"true":"false":s.value),s=g,s!==f?(l.setValue(s),!0):!1}function Rl(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Q0=/[\n"\\]/g;function En(s){return s.replace(Q0,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Xr(s,l,f,g,x,A,M,F){s.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?s.type=M:s.removeAttribute("type"),l!=null?M==="number"?(l===0&&s.value===""||s.value!=l)&&(s.value=""+Er(l)):s.value!==""+Er(l)&&(s.value=""+Er(l)):M!=="submit"&&M!=="reset"||s.removeAttribute("value"),l!=null?vo(s,M,Er(l)):f!=null?vo(s,M,Er(f)):g!=null&&s.removeAttribute("value"),x==null&&A!=null&&(s.defaultChecked=!!A),x!=null&&(s.checked=x&&typeof x!="function"&&typeof x!="symbol"),F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?s.name=""+Er(F):s.removeAttribute("name")}function Ml(s,l,f,g,x,A,M,F){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(s.type=A),l!=null||f!=null){if(!(A!=="submit"&&A!=="reset"||l!=null))return;f=f!=null?""+Er(f):"",l=l!=null?""+Er(l):f,F||l===s.value||(s.value=l),s.defaultValue=l}g=g??x,g=typeof g!="function"&&typeof g!="symbol"&&!!g,s.checked=F?s.checked:!!g,s.defaultChecked=!!g,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(s.name=M)}function vo(s,l,f){l==="number"&&Rl(s.ownerDocument)===s||s.defaultValue===""+f||(s.defaultValue=""+f)}function us(s,l,f,g){if(s=s.options,l){l={};for(var x=0;x<f.length;x++)l["$"+f[x]]=!0;for(f=0;f<s.length;f++)x=l.hasOwnProperty("$"+s[f].value),s[f].selected!==x&&(s[f].selected=x),x&&g&&(s[f].defaultSelected=!0)}else{for(f=""+Er(f),l=null,x=0;x<s.length;x++){if(s[x].value===f){s[x].selected=!0,g&&(s[x].defaultSelected=!0);return}l!==null||s[x].disabled||(l=s[x])}l!==null&&(l.selected=!0)}}function Ht(s,l,f){if(l!=null&&(l=""+Er(l),l!==s.value&&(s.value=l),f==null)){s.defaultValue!==l&&(s.defaultValue=l);return}s.defaultValue=f!=null?""+Er(f):""}function Ll(s,l,f,g){if(l==null){if(g!=null){if(f!=null)throw Error(r(92));if(ee(g)){if(1<g.length)throw Error(r(93));g=g[0]}f=g}f==null&&(f=""),l=f}f=Er(l),s.defaultValue=f,g=s.textContent,g===f&&g!==""&&g!==null&&(s.value=g)}function wi(s,l){if(l){var f=s.firstChild;if(f&&f===s.lastChild&&f.nodeType===3){f.nodeValue=l;return}}s.textContent=l}var Vl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ig(s,l,f){var g=l.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?s.setProperty(l,""):l==="float"?s.cssFloat="":s[l]="":g?s.setProperty(l,f):typeof f!="number"||f===0||Vl.has(l)?l==="float"?s.cssFloat=f:s[l]=(""+f).trim():s[l]=f+"px"}function dh(s,l,f){if(l!=null&&typeof l!="object")throw Error(r(62));if(s=s.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?s.setProperty(g,""):g==="float"?s.cssFloat="":s[g]="");for(var x in l)g=l[x],l.hasOwnProperty(x)&&f[x]!==g&&ig(s,x,g)}else for(var A in l)l.hasOwnProperty(A)&&ig(s,A,l[A])}function mh(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Z0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),J0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function au(s){return J0.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var fs=null;function _i(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var hs=null,ds=null;function gh(s){var l=ba(s);if(l&&(s=l.stateNode)){var f=s[Tn]||null;e:switch(s=l.stateNode,l.type){case"input":if(Xr(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),l=f.name,f.type==="radio"&&l!=null){for(f=s;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+En(""+l)+'"][type="radio"]'),l=0;l<f.length;l++){var g=f[l];if(g!==s&&g.form===s.form){var x=g[Tn]||null;if(!x)throw Error(r(90));Xr(g,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(l=0;l<f.length;l++)g=f[l],g.form===s.form&&hh(g)}break e;case"textarea":Ht(s,f.value,f.defaultValue);break e;case"select":l=f.value,l!=null&&us(s,!!f.multiple,l,!1)}}}var _a=!1;function ag(s,l,f){if(_a)return s(l,f);_a=!0;try{var g=s(l);return g}finally{if(_a=!1,(hs!==null||ds!==null)&&(Zg(),hs&&(l=hs,s=ds,ds=hs=null,gh(l),s)))for(l=0;l<s.length;l++)gh(s[l])}}function Bl(s,l){var f=s.stateNode;if(f===null)return null;var g=f[Tn]||null;if(g===null)return null;f=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(s=s.type,g=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!g;break e;default:s=!1}if(s)return null;if(f&&typeof f!="function")throw Error(r(231,l,typeof f));return f}var Xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Si=!1;if(Xi)try{var Ul={};Object.defineProperty(Ul,"passive",{get:function(){Si=!0}}),window.addEventListener("test",Ul,Ul),window.removeEventListener("test",Ul,Ul)}catch{Si=!1}var Sa=null,bo=null,ms=null;function ph(){if(ms)return ms;var s,l=bo,f=l.length,g,x="value"in Sa?Sa.value:Sa.textContent,A=x.length;for(s=0;s<f&&l[s]===x[s];s++);var M=f-s;for(g=1;g<=M&&l[f-g]===x[A-g];g++);return ms=x.slice(s,1<g?1-g:void 0)}function Ta(s){var l=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&l===13&&(s=13)):s=l,s===10&&(s=13),32<=s||s===13?s:0}function Ea(){return!0}function yh(){return!1}function Kn(s){function l(f,g,x,A,M){this._reactName=f,this._targetInst=x,this.type=g,this.nativeEvent=A,this.target=M,this.currentTarget=null;for(var F in s)s.hasOwnProperty(F)&&(f=s[F],this[F]=f?f(A):A[F]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?Ea:yh,this.isPropagationStopped=yh,this}return m(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Ea)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Ea)},persist:function(){},isPersistent:Ea}),l}var Mt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},su=Kn(Mt),$l=m({},Mt,{view:0,detail:0}),sg=Kn($l),ou,lu,Aa,Fl=m({},$l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ql,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Aa&&(Aa&&s.type==="mousemove"?(ou=s.screenX-Aa.screenX,lu=s.screenY-Aa.screenY):lu=ou=0,Aa=s),ou)},movementY:function(s){return"movementY"in s?s.movementY:lu}}),Ti=Kn(Fl),og=m({},Fl,{dataTransfer:0}),eb=Kn(og),zl=m({},$l,{relatedTarget:0}),cu=Kn(zl),vh=m({},Mt,{animationName:0,elapsedTime:0,pseudoElement:0}),uu=Kn(vh),lg=m({},Mt,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),fu=Kn(lg),tb=m({},Mt,{data:0}),bh=Kn(tb),Hl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ug={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xh(s){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(s):(s=ug[s])?!!l[s]:!1}function ql(){return xh}var fg=m({},$l,{key:function(s){if(s.key){var l=Hl[s.key]||s.key;if(l!=="Unidentified")return l}return s.type==="keypress"?(s=Ta(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?cg[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ql,charCode:function(s){return s.type==="keypress"?Ta(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ta(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),hu=Kn(fg),hg=m({},Fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wh=Kn(hg),gs=m({},$l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ql}),dg=Kn(gs),mg=m({},Mt,{propertyName:0,elapsedTime:0,pseudoElement:0}),gg=Kn(mg),pg=m({},Fl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),du=Kn(pg),Ar=m({},Mt,{newState:0,oldState:0}),yg=Kn(Ar),vg=[9,13,27,32],Na=Xi&&"CompositionEvent"in window,v=null;Xi&&"documentMode"in document&&(v=document.documentMode);var j=Xi&&"TextEvent"in window&&!v,P=Xi&&(!Na||v&&8<v&&11>=v),z=" ",ne=!1;function he(s,l){switch(s){case"keyup":return vg.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Te(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var St=!1;function Ln(s,l){switch(s){case"compositionend":return Te(l);case"keypress":return l.which!==32?null:(ne=!0,z);case"textInput":return s=l.data,s===z&&ne?null:s;default:return null}}function Tt(s,l){if(St)return s==="compositionend"||!Na&&he(s,l)?(s=ph(),ms=bo=Sa=null,St=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return P&&l.locale!=="ko"?null:l.data;default:return null}}var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l==="input"?!!Gn[s.type]:l==="textarea"}function ps(s,l,f,g){hs?ds?ds.push(g):ds=[g]:hs=g,l=ip(l,"onChange"),0<l.length&&(f=new su("onChange","change",null,f,g),s.push({event:f,listeners:l}))}var ir=null,Ca=null;function _h(s){vj(s,0)}function bg(s){var l=xa(s);if(hh(l))return s}function B2(s,l){if(s==="change")return l}var U2=!1;if(Xi){var nb;if(Xi){var rb="oninput"in document;if(!rb){var $2=document.createElement("div");$2.setAttribute("oninput","return;"),rb=typeof $2.oninput=="function"}nb=rb}else nb=!1;U2=nb&&(!document.documentMode||9<document.documentMode)}function F2(){ir&&(ir.detachEvent("onpropertychange",z2),Ca=ir=null)}function z2(s){if(s.propertyName==="value"&&bg(Ca)){var l=[];ps(l,Ca,s,_i(s)),ag(_h,l)}}function $B(s,l,f){s==="focusin"?(F2(),ir=l,Ca=f,ir.attachEvent("onpropertychange",z2)):s==="focusout"&&F2()}function FB(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return bg(Ca)}function zB(s,l){if(s==="click")return bg(l)}function HB(s,l){if(s==="input"||s==="change")return bg(l)}function qB(s,l){return s===l&&(s!==0||1/s===1/l)||s!==s&&l!==l}var Qr=typeof Object.is=="function"?Object.is:qB;function Sh(s,l){if(Qr(s,l))return!0;if(typeof s!="object"||s===null||typeof l!="object"||l===null)return!1;var f=Object.keys(s),g=Object.keys(l);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var x=f[g];if(!ce.call(l,x)||!Qr(s[x],l[x]))return!1}return!0}function H2(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function q2(s,l){var f=H2(s);s=0;for(var g;f;){if(f.nodeType===3){if(g=s+f.textContent.length,s<=l&&g>=l)return{node:f,offset:l-s};s=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=H2(f)}}function K2(s,l){return s&&l?s===l?!0:s&&s.nodeType===3?!1:l&&l.nodeType===3?K2(s,l.parentNode):"contains"in s?s.contains(l):s.compareDocumentPosition?!!(s.compareDocumentPosition(l)&16):!1:!1}function G2(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var l=Rl(s.document);l instanceof s.HTMLIFrameElement;){try{var f=typeof l.contentWindow.location.href=="string"}catch{f=!1}if(f)s=l.contentWindow;else break;l=Rl(s.document)}return l}function ib(s){var l=s&&s.nodeName&&s.nodeName.toLowerCase();return l&&(l==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||l==="textarea"||s.contentEditable==="true")}var KB=Xi&&"documentMode"in document&&11>=document.documentMode,mu=null,ab=null,Th=null,sb=!1;function W2(s,l,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;sb||mu==null||mu!==Rl(g)||(g=mu,"selectionStart"in g&&ib(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Th&&Sh(Th,g)||(Th=g,g=ip(ab,"onSelect"),0<g.length&&(l=new su("onSelect","select",null,l,f),s.push({event:l,listeners:g}),l.target=mu)))}function Kl(s,l){var f={};return f[s.toLowerCase()]=l.toLowerCase(),f["Webkit"+s]="webkit"+l,f["Moz"+s]="moz"+l,f}var gu={animationend:Kl("Animation","AnimationEnd"),animationiteration:Kl("Animation","AnimationIteration"),animationstart:Kl("Animation","AnimationStart"),transitionrun:Kl("Transition","TransitionRun"),transitionstart:Kl("Transition","TransitionStart"),transitioncancel:Kl("Transition","TransitionCancel"),transitionend:Kl("Transition","TransitionEnd")},ob={},Y2={};Xi&&(Y2=document.createElement("div").style,"AnimationEvent"in window||(delete gu.animationend.animation,delete gu.animationiteration.animation,delete gu.animationstart.animation),"TransitionEvent"in window||delete gu.transitionend.transition);function Gl(s){if(ob[s])return ob[s];if(!gu[s])return s;var l=gu[s],f;for(f in l)if(l.hasOwnProperty(f)&&f in Y2)return ob[s]=l[f];return s}var X2=Gl("animationend"),Q2=Gl("animationiteration"),Z2=Gl("animationstart"),GB=Gl("transitionrun"),WB=Gl("transitionstart"),YB=Gl("transitioncancel"),J2=Gl("transitionend"),eN=new Map,lb="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lb.push("scrollEnd");function Qi(s,l){eN.set(s,l),Yi(l,[s])}var tN=new WeakMap;function Ei(s,l){if(typeof s=="object"&&s!==null){var f=tN.get(s);return f!==void 0?f:(l={value:s,source:l,stack:ru(l)},tN.set(s,l),l)}return{value:s,source:l,stack:ru(l)}}var Ai=[],pu=0,cb=0;function xg(){for(var s=pu,l=cb=pu=0;l<s;){var f=Ai[l];Ai[l++]=null;var g=Ai[l];Ai[l++]=null;var x=Ai[l];Ai[l++]=null;var A=Ai[l];if(Ai[l++]=null,g!==null&&x!==null){var M=g.pending;M===null?x.next=x:(x.next=M.next,M.next=x),g.pending=x}A!==0&&nN(f,x,A)}}function wg(s,l,f,g){Ai[pu++]=s,Ai[pu++]=l,Ai[pu++]=f,Ai[pu++]=g,cb|=g,s.lanes|=g,s=s.alternate,s!==null&&(s.lanes|=g)}function ub(s,l,f,g){return wg(s,l,f,g),_g(s)}function yu(s,l){return wg(s,null,null,l),_g(s)}function nN(s,l,f){s.lanes|=f;var g=s.alternate;g!==null&&(g.lanes|=f);for(var x=!1,A=s.return;A!==null;)A.childLanes|=f,g=A.alternate,g!==null&&(g.childLanes|=f),A.tag===22&&(s=A.stateNode,s===null||s._visibility&1||(x=!0)),s=A,A=A.return;return s.tag===3?(A=s.stateNode,x&&l!==null&&(x=31-Bt(f),s=A.hiddenUpdates,g=s[x],g===null?s[x]=[l]:g.push(l),l.lane=f|536870912),A):null}function _g(s){if(50<Yh)throw Yh=0,p1=null,Error(r(185));for(var l=s.return;l!==null;)s=l,l=s.return;return s.tag===3?s.stateNode:null}var vu={};function XB(s,l,f,g){this.tag=s,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zr(s,l,f,g){return new XB(s,l,f,g)}function fb(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ys(s,l){var f=s.alternate;return f===null?(f=Zr(s.tag,l,s.key,s.mode),f.elementType=s.elementType,f.type=s.type,f.stateNode=s.stateNode,f.alternate=s,s.alternate=f):(f.pendingProps=l,f.type=s.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=s.flags&65011712,f.childLanes=s.childLanes,f.lanes=s.lanes,f.child=s.child,f.memoizedProps=s.memoizedProps,f.memoizedState=s.memoizedState,f.updateQueue=s.updateQueue,l=s.dependencies,f.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},f.sibling=s.sibling,f.index=s.index,f.ref=s.ref,f.refCleanup=s.refCleanup,f}function rN(s,l){s.flags&=65011714;var f=s.alternate;return f===null?(s.childLanes=0,s.lanes=l,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=f.childLanes,s.lanes=f.lanes,s.child=f.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=f.memoizedProps,s.memoizedState=f.memoizedState,s.updateQueue=f.updateQueue,s.type=f.type,l=f.dependencies,s.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s}function Sg(s,l,f,g,x,A){var M=0;if(g=s,typeof s=="function")fb(s)&&(M=1);else if(typeof s=="string")M=ZU(s,f,Ce.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case O:return s=Zr(31,f,l,x),s.elementType=O,s.lanes=A,s;case _:return Wl(f.children,x,A,l);case T:M=8,x|=24;break;case S:return s=Zr(12,f,l,x|2),s.elementType=S,s.lanes=A,s;case D:return s=Zr(13,f,l,x),s.elementType=D,s.lanes=A,s;case R:return s=Zr(19,f,l,x),s.elementType=R,s.lanes=A,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case E:case C:M=10;break e;case N:M=9;break e;case L:M=11;break e;case k:M=14;break e;case I:M=16,g=null;break e}M=29,f=Error(r(130,s===null?"null":typeof s,"")),g=null}return l=Zr(M,f,l,x),l.elementType=s,l.type=g,l.lanes=A,l}function Wl(s,l,f,g){return s=Zr(7,s,g,l),s.lanes=f,s}function hb(s,l,f){return s=Zr(6,s,null,l),s.lanes=f,s}function db(s,l,f){return l=Zr(4,s.children!==null?s.children:[],s.key,l),l.lanes=f,l.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},l}var bu=[],xu=0,Tg=null,Eg=0,Ni=[],Ci=0,Yl=null,vs=1,bs="";function Xl(s,l){bu[xu++]=Eg,bu[xu++]=Tg,Tg=s,Eg=l}function iN(s,l,f){Ni[Ci++]=vs,Ni[Ci++]=bs,Ni[Ci++]=Yl,Yl=s;var g=vs;s=bs;var x=32-Bt(g)-1;g&=~(1<<x),f+=1;var A=32-Bt(l)+x;if(30<A){var M=x-x%5;A=(g&(1<<M)-1).toString(32),g>>=M,x-=M,vs=1<<32-Bt(l)+x|f<<x|g,bs=A+s}else vs=1<<A|f<<x|g,bs=s}function mb(s){s.return!==null&&(Xl(s,1),iN(s,1,0))}function gb(s){for(;s===Tg;)Tg=bu[--xu],bu[xu]=null,Eg=bu[--xu],bu[xu]=null;for(;s===Yl;)Yl=Ni[--Ci],Ni[Ci]=null,bs=Ni[--Ci],Ni[Ci]=null,vs=Ni[--Ci],Ni[Ci]=null}var Nr=null,dn=null,Ot=!1,Ql=null,ja=!1,pb=Error(r(519));function Zl(s){var l=Error(r(418,""));throw Nh(Ei(l,s)),pb}function aN(s){var l=s.stateNode,f=s.type,g=s.memoizedProps;switch(l[Mn]=s,l[Tn]=g,f){case"dialog":pt("cancel",l),pt("close",l);break;case"iframe":case"object":case"embed":pt("load",l);break;case"video":case"audio":for(f=0;f<Qh.length;f++)pt(Qh[f],l);break;case"source":pt("error",l);break;case"img":case"image":case"link":pt("error",l),pt("load",l);break;case"details":pt("toggle",l);break;case"input":pt("invalid",l),Ml(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),iu(l);break;case"select":pt("invalid",l);break;case"textarea":pt("invalid",l),Ll(l,g.value,g.defaultValue,g.children),iu(l)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||l.textContent===""+f||g.suppressHydrationWarning===!0||_j(l.textContent,f)?(g.popover!=null&&(pt("beforetoggle",l),pt("toggle",l)),g.onScroll!=null&&pt("scroll",l),g.onScrollEnd!=null&&pt("scrollend",l),g.onClick!=null&&(l.onclick=ap),l=!0):l=!1,l||Zl(s)}function sN(s){for(Nr=s.return;Nr;)switch(Nr.tag){case 5:case 13:ja=!1;return;case 27:case 3:ja=!0;return;default:Nr=Nr.return}}function Eh(s){if(s!==Nr)return!1;if(!Ot)return sN(s),Ot=!0,!1;var l=s.tag,f;if((f=l!==3&&l!==27)&&((f=l===5)&&(f=s.type,f=!(f!=="form"&&f!=="button")||O1(s.type,s.memoizedProps)),f=!f),f&&dn&&Zl(s),sN(s),l===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,l=0;s;){if(s.nodeType===8)if(f=s.data,f==="/$"){if(l===0){dn=Ji(s.nextSibling);break e}l--}else f!=="$"&&f!=="$!"&&f!=="$?"||l++;s=s.nextSibling}dn=null}}else l===27?(l=dn,Ro(s.type)?(s=M1,M1=null,dn=s):dn=l):dn=Nr?Ji(s.stateNode.nextSibling):null;return!0}function Ah(){dn=Nr=null,Ot=!1}function oN(){var s=Ql;return s!==null&&(Mr===null?Mr=s:Mr.push.apply(Mr,s),Ql=null),s}function Nh(s){Ql===null?Ql=[s]:Ql.push(s)}var yb=Z(null),Jl=null,xs=null;function xo(s,l,f){fe(yb,l._currentValue),l._currentValue=f}function ws(s){s._currentValue=yb.current,te(yb)}function vb(s,l,f){for(;s!==null;){var g=s.alternate;if((s.childLanes&l)!==l?(s.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),s===f)break;s=s.return}}function bb(s,l,f,g){var x=s.child;for(x!==null&&(x.return=s);x!==null;){var A=x.dependencies;if(A!==null){var M=x.child;A=A.firstContext;e:for(;A!==null;){var F=A;A=x;for(var W=0;W<l.length;W++)if(F.context===l[W]){A.lanes|=f,F=A.alternate,F!==null&&(F.lanes|=f),vb(A.return,f,s),g||(M=null);break e}A=F.next}}else if(x.tag===18){if(M=x.return,M===null)throw Error(r(341));M.lanes|=f,A=M.alternate,A!==null&&(A.lanes|=f),vb(M,f,s),M=null}else M=x.child;if(M!==null)M.return=x;else for(M=x;M!==null;){if(M===s){M=null;break}if(x=M.sibling,x!==null){x.return=M.return,M=x;break}M=M.return}x=M}}function Ch(s,l,f,g){s=null;for(var x=l,A=!1;x!==null;){if(!A){if((x.flags&524288)!==0)A=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var M=x.alternate;if(M===null)throw Error(r(387));if(M=M.memoizedProps,M!==null){var F=x.type;Qr(x.pendingProps.value,M.value)||(s!==null?s.push(F):s=[F])}}else if(x===Pt.current){if(M=x.alternate,M===null)throw Error(r(387));M.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(s!==null?s.push(rd):s=[rd])}x=x.return}s!==null&&bb(l,s,f,g),l.flags|=262144}function Ag(s){for(s=s.firstContext;s!==null;){if(!Qr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function ec(s){Jl=s,xs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function mr(s){return lN(Jl,s)}function Ng(s,l){return Jl===null&&ec(s),lN(s,l)}function lN(s,l){var f=l._currentValue;if(l={context:l,memoizedValue:f,next:null},xs===null){if(s===null)throw Error(r(308));xs=l,s.dependencies={lanes:0,firstContext:l},s.flags|=524288}else xs=xs.next=l;return f}var QB=typeof AbortController<"u"?AbortController:function(){var s=[],l=this.signal={aborted:!1,addEventListener:function(f,g){s.push(g)}};this.abort=function(){l.aborted=!0,s.forEach(function(f){return f()})}},ZB=t.unstable_scheduleCallback,JB=t.unstable_NormalPriority,Bn={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xb(){return{controller:new QB,data:new Map,refCount:0}}function jh(s){s.refCount--,s.refCount===0&&ZB(JB,function(){s.controller.abort()})}var Dh=null,wb=0,wu=0,_u=null;function eU(s,l){if(Dh===null){var f=Dh=[];wb=0,wu=S1(),_u={status:"pending",value:void 0,then:function(g){f.push(g)}}}return wb++,l.then(cN,cN),l}function cN(){if(--wb===0&&Dh!==null){_u!==null&&(_u.status="fulfilled");var s=Dh;Dh=null,wu=0,_u=null;for(var l=0;l<s.length;l++)(0,s[l])()}}function tU(s,l){var f=[],g={status:"pending",value:null,reason:null,then:function(x){f.push(x)}};return s.then(function(){g.status="fulfilled",g.value=l;for(var x=0;x<f.length;x++)(0,f[x])(l)},function(x){for(g.status="rejected",g.reason=x,x=0;x<f.length;x++)(0,f[x])(void 0)}),g}var uN=q.S;q.S=function(s,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&eU(s,l),uN!==null&&uN(s,l)};var tc=Z(null);function _b(){var s=tc.current;return s!==null?s:Zt.pooledCache}function Cg(s,l){l===null?fe(tc,tc.current):fe(tc,l.pool)}function fN(){var s=_b();return s===null?null:{parent:Bn._currentValue,pool:s}}var kh=Error(r(460)),hN=Error(r(474)),jg=Error(r(542)),Sb={then:function(){}};function dN(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Dg(){}function mN(s,l,f){switch(f=s[f],f===void 0?s.push(l):f!==l&&(l.then(Dg,Dg),l=f),l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,pN(s),s;default:if(typeof l.status=="string")l.then(Dg,Dg);else{if(s=Zt,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=l,s.status="pending",s.then(function(g){if(l.status==="pending"){var x=l;x.status="fulfilled",x.value=g}},function(g){if(l.status==="pending"){var x=l;x.status="rejected",x.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw s=l.reason,pN(s),s}throw Oh=l,kh}}var Oh=null;function gN(){if(Oh===null)throw Error(r(459));var s=Oh;return Oh=null,s}function pN(s){if(s===kh||s===jg)throw Error(r(483))}var wo=!1;function Tb(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Eb(s,l){s=s.updateQueue,l.updateQueue===s&&(l.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function _o(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function So(s,l,f){var g=s.updateQueue;if(g===null)return null;if(g=g.shared,(Ut&2)!==0){var x=g.pending;return x===null?l.next=l:(l.next=x.next,x.next=l),g.pending=l,l=_g(s),nN(s,null,f),l}return wg(s,g,l,f),_g(s)}function Ih(s,l,f){if(l=l.updateQueue,l!==null&&(l=l.shared,(f&4194048)!==0)){var g=l.lanes;g&=s.pendingLanes,f|=g,l.lanes=f,oh(s,f)}}function Ab(s,l){var f=s.updateQueue,g=s.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var x=null,A=null;if(f=f.firstBaseUpdate,f!==null){do{var M={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};A===null?x=A=M:A=A.next=M,f=f.next}while(f!==null);A===null?x=A=l:A=A.next=l}else x=A=l;f={baseState:g.baseState,firstBaseUpdate:x,lastBaseUpdate:A,shared:g.shared,callbacks:g.callbacks},s.updateQueue=f;return}s=f.lastBaseUpdate,s===null?f.firstBaseUpdate=l:s.next=l,f.lastBaseUpdate=l}var Nb=!1;function Ph(){if(Nb){var s=_u;if(s!==null)throw s}}function Rh(s,l,f,g){Nb=!1;var x=s.updateQueue;wo=!1;var A=x.firstBaseUpdate,M=x.lastBaseUpdate,F=x.shared.pending;if(F!==null){x.shared.pending=null;var W=F,ie=W.next;W.next=null,M===null?A=ie:M.next=ie,M=W;var ge=s.alternate;ge!==null&&(ge=ge.updateQueue,F=ge.lastBaseUpdate,F!==M&&(F===null?ge.firstBaseUpdate=ie:F.next=ie,ge.lastBaseUpdate=W))}if(A!==null){var ve=x.baseState;M=0,ge=ie=W=null,F=A;do{var le=F.lane&-536870913,ue=le!==F.lane;if(ue?(Et&le)===le:(g&le)===le){le!==0&&le===wu&&(Nb=!0),ge!==null&&(ge=ge.next={lane:0,tag:F.tag,payload:F.payload,callback:null,next:null});e:{var tt=s,Ze=F;le=l;var Gt=f;switch(Ze.tag){case 1:if(tt=Ze.payload,typeof tt=="function"){ve=tt.call(Gt,ve,le);break e}ve=tt;break e;case 3:tt.flags=tt.flags&-65537|128;case 0:if(tt=Ze.payload,le=typeof tt=="function"?tt.call(Gt,ve,le):tt,le==null)break e;ve=m({},ve,le);break e;case 2:wo=!0}}le=F.callback,le!==null&&(s.flags|=64,ue&&(s.flags|=8192),ue=x.callbacks,ue===null?x.callbacks=[le]:ue.push(le))}else ue={lane:le,tag:F.tag,payload:F.payload,callback:F.callback,next:null},ge===null?(ie=ge=ue,W=ve):ge=ge.next=ue,M|=le;if(F=F.next,F===null){if(F=x.shared.pending,F===null)break;ue=F,F=ue.next,ue.next=null,x.lastBaseUpdate=ue,x.shared.pending=null}}while(!0);ge===null&&(W=ve),x.baseState=W,x.firstBaseUpdate=ie,x.lastBaseUpdate=ge,A===null&&(x.shared.lanes=0),ko|=M,s.lanes=M,s.memoizedState=ve}}function yN(s,l){if(typeof s!="function")throw Error(r(191,s));s.call(l)}function vN(s,l){var f=s.callbacks;if(f!==null)for(s.callbacks=null,s=0;s<f.length;s++)yN(f[s],l)}var Su=Z(null),kg=Z(0);function bN(s,l){s=Cs,fe(kg,s),fe(Su,l),Cs=s|l.baseLanes}function Cb(){fe(kg,Cs),fe(Su,Su.current)}function jb(){Cs=kg.current,te(Su),te(kg)}var To=0,ut=null,qt=null,An=null,Og=!1,Tu=!1,nc=!1,Ig=0,Mh=0,Eu=null,nU=0;function xn(){throw Error(r(321))}function Db(s,l){if(l===null)return!1;for(var f=0;f<l.length&&f<s.length;f++)if(!Qr(s[f],l[f]))return!1;return!0}function kb(s,l,f,g,x,A){return To=A,ut=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,q.H=s===null||s.memoizedState===null?nC:rC,nc=!1,A=f(g,x),nc=!1,Tu&&(A=wN(l,f,g,x)),xN(s),A}function xN(s){q.H=Bg;var l=qt!==null&&qt.next!==null;if(To=0,An=qt=ut=null,Og=!1,Mh=0,Eu=null,l)throw Error(r(300));s===null||Wn||(s=s.dependencies,s!==null&&Ag(s)&&(Wn=!0))}function wN(s,l,f,g){ut=s;var x=0;do{if(Tu&&(Eu=null),Mh=0,Tu=!1,25<=x)throw Error(r(301));if(x+=1,An=qt=null,s.updateQueue!=null){var A=s.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}q.H=cU,A=l(f,g)}while(Tu);return A}function rU(){var s=q.H,l=s.useState()[0];return l=typeof l.then=="function"?Lh(l):l,s=s.useState()[0],(qt!==null?qt.memoizedState:null)!==s&&(ut.flags|=1024),l}function Ob(){var s=Ig!==0;return Ig=0,s}function Ib(s,l,f){l.updateQueue=s.updateQueue,l.flags&=-2053,s.lanes&=~f}function Pb(s){if(Og){for(s=s.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Og=!1}To=0,An=qt=ut=null,Tu=!1,Mh=Ig=0,Eu=null}function Pr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?ut.memoizedState=An=s:An=An.next=s,An}function Nn(){if(qt===null){var s=ut.alternate;s=s!==null?s.memoizedState:null}else s=qt.next;var l=An===null?ut.memoizedState:An.next;if(l!==null)An=l,qt=s;else{if(s===null)throw ut.alternate===null?Error(r(467)):Error(r(310));qt=s,s={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},An===null?ut.memoizedState=An=s:An=An.next=s}return An}function Rb(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Lh(s){var l=Mh;return Mh+=1,Eu===null&&(Eu=[]),s=mN(Eu,s,l),l=ut,(An===null?l.memoizedState:An.next)===null&&(l=l.alternate,q.H=l===null||l.memoizedState===null?nC:rC),s}function Pg(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Lh(s);if(s.$$typeof===C)return mr(s)}throw Error(r(438,String(s)))}function Mb(s){var l=null,f=ut.updateQueue;if(f!==null&&(l=f.memoCache),l==null){var g=ut.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(x){return x.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),f===null&&(f=Rb(),ut.updateQueue=f),f.memoCache=l,f=l.data[l.index],f===void 0)for(f=l.data[l.index]=Array(s),g=0;g<s;g++)f[g]=U;return l.index++,f}function _s(s,l){return typeof l=="function"?l(s):l}function Rg(s){var l=Nn();return Lb(l,qt,s)}function Lb(s,l,f){var g=s.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=f;var x=s.baseQueue,A=g.pending;if(A!==null){if(x!==null){var M=x.next;x.next=A.next,A.next=M}l.baseQueue=x=A,g.pending=null}if(A=s.baseState,x===null)s.memoizedState=A;else{l=x.next;var F=M=null,W=null,ie=l,ge=!1;do{var ve=ie.lane&-536870913;if(ve!==ie.lane?(Et&ve)===ve:(To&ve)===ve){var le=ie.revertLane;if(le===0)W!==null&&(W=W.next={lane:0,revertLane:0,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),ve===wu&&(ge=!0);else if((To&le)===le){ie=ie.next,le===wu&&(ge=!0);continue}else ve={lane:0,revertLane:ie.revertLane,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},W===null?(F=W=ve,M=A):W=W.next=ve,ut.lanes|=le,ko|=le;ve=ie.action,nc&&f(A,ve),A=ie.hasEagerState?ie.eagerState:f(A,ve)}else le={lane:ve,revertLane:ie.revertLane,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},W===null?(F=W=le,M=A):W=W.next=le,ut.lanes|=ve,ko|=ve;ie=ie.next}while(ie!==null&&ie!==l);if(W===null?M=A:W.next=F,!Qr(A,s.memoizedState)&&(Wn=!0,ge&&(f=_u,f!==null)))throw f;s.memoizedState=A,s.baseState=M,s.baseQueue=W,g.lastRenderedState=A}return x===null&&(g.lanes=0),[s.memoizedState,g.dispatch]}function Vb(s){var l=Nn(),f=l.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=s;var g=f.dispatch,x=f.pending,A=l.memoizedState;if(x!==null){f.pending=null;var M=x=x.next;do A=s(A,M.action),M=M.next;while(M!==x);Qr(A,l.memoizedState)||(Wn=!0),l.memoizedState=A,l.baseQueue===null&&(l.baseState=A),f.lastRenderedState=A}return[A,g]}function _N(s,l,f){var g=ut,x=Nn(),A=Ot;if(A){if(f===void 0)throw Error(r(407));f=f()}else f=l();var M=!Qr((qt||x).memoizedState,f);M&&(x.memoizedState=f,Wn=!0),x=x.queue;var F=EN.bind(null,g,x,s);if(Vh(2048,8,F,[s]),x.getSnapshot!==l||M||An!==null&&An.memoizedState.tag&1){if(g.flags|=2048,Au(9,Mg(),TN.bind(null,g,x,f,l),null),Zt===null)throw Error(r(349));A||(To&124)!==0||SN(g,l,f)}return f}function SN(s,l,f){s.flags|=16384,s={getSnapshot:l,value:f},l=ut.updateQueue,l===null?(l=Rb(),ut.updateQueue=l,l.stores=[s]):(f=l.stores,f===null?l.stores=[s]:f.push(s))}function TN(s,l,f,g){l.value=f,l.getSnapshot=g,AN(l)&&NN(s)}function EN(s,l,f){return f(function(){AN(l)&&NN(s)})}function AN(s){var l=s.getSnapshot;s=s.value;try{var f=l();return!Qr(s,f)}catch{return!0}}function NN(s){var l=yu(s,2);l!==null&&ri(l,s,2)}function Bb(s){var l=Pr();if(typeof s=="function"){var f=s;if(s=f(),nc){ot(!0);try{f()}finally{ot(!1)}}}return l.memoizedState=l.baseState=s,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:s},l}function CN(s,l,f,g){return s.baseState=f,Lb(s,qt,typeof g=="function"?g:_s)}function iU(s,l,f,g,x){if(Vg(s))throw Error(r(485));if(s=l.action,s!==null){var A={payload:x,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){A.listeners.push(M)}};q.T!==null?f(!0):A.isTransition=!1,g(A),f=l.pending,f===null?(A.next=l.pending=A,jN(l,A)):(A.next=f.next,l.pending=f.next=A)}}function jN(s,l){var f=l.action,g=l.payload,x=s.state;if(l.isTransition){var A=q.T,M={};q.T=M;try{var F=f(x,g),W=q.S;W!==null&&W(M,F),DN(s,l,F)}catch(ie){Ub(s,l,ie)}finally{q.T=A}}else try{A=f(x,g),DN(s,l,A)}catch(ie){Ub(s,l,ie)}}function DN(s,l,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){kN(s,l,g)},function(g){return Ub(s,l,g)}):kN(s,l,f)}function kN(s,l,f){l.status="fulfilled",l.value=f,ON(l),s.state=f,l=s.pending,l!==null&&(f=l.next,f===l?s.pending=null:(f=f.next,l.next=f,jN(s,f)))}function Ub(s,l,f){var g=s.pending;if(s.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=f,ON(l),l=l.next;while(l!==g)}s.action=null}function ON(s){s=s.listeners;for(var l=0;l<s.length;l++)(0,s[l])()}function IN(s,l){return l}function PN(s,l){if(Ot){var f=Zt.formState;if(f!==null){e:{var g=ut;if(Ot){if(dn){t:{for(var x=dn,A=ja;x.nodeType!==8;){if(!A){x=null;break t}if(x=Ji(x.nextSibling),x===null){x=null;break t}}A=x.data,x=A==="F!"||A==="F"?x:null}if(x){dn=Ji(x.nextSibling),g=x.data==="F!";break e}}Zl(g)}g=!1}g&&(l=f[0])}}return f=Pr(),f.memoizedState=f.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:IN,lastRenderedState:l},f.queue=g,f=JN.bind(null,ut,g),g.dispatch=f,g=Bb(!1),A=qb.bind(null,ut,!1,g.queue),g=Pr(),x={state:l,dispatch:null,action:s,pending:null},g.queue=x,f=iU.bind(null,ut,x,A,f),x.dispatch=f,g.memoizedState=s,[l,f,!1]}function RN(s){var l=Nn();return MN(l,qt,s)}function MN(s,l,f){if(l=Lb(s,l,IN)[0],s=Rg(_s)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=Lh(l)}catch(M){throw M===kh?jg:M}else g=l;l=Nn();var x=l.queue,A=x.dispatch;return f!==l.memoizedState&&(ut.flags|=2048,Au(9,Mg(),aU.bind(null,x,f),null)),[g,A,s]}function aU(s,l){s.action=l}function LN(s){var l=Nn(),f=qt;if(f!==null)return MN(l,f,s);Nn(),l=l.memoizedState,f=Nn();var g=f.queue.dispatch;return f.memoizedState=s,[l,g,!1]}function Au(s,l,f,g){return s={tag:s,create:f,deps:g,inst:l,next:null},l=ut.updateQueue,l===null&&(l=Rb(),ut.updateQueue=l),f=l.lastEffect,f===null?l.lastEffect=s.next=s:(g=f.next,f.next=s,s.next=g,l.lastEffect=s),s}function Mg(){return{destroy:void 0,resource:void 0}}function VN(){return Nn().memoizedState}function Lg(s,l,f,g){var x=Pr();g=g===void 0?null:g,ut.flags|=s,x.memoizedState=Au(1|l,Mg(),f,g)}function Vh(s,l,f,g){var x=Nn();g=g===void 0?null:g;var A=x.memoizedState.inst;qt!==null&&g!==null&&Db(g,qt.memoizedState.deps)?x.memoizedState=Au(l,A,f,g):(ut.flags|=s,x.memoizedState=Au(1|l,A,f,g))}function BN(s,l){Lg(8390656,8,s,l)}function UN(s,l){Vh(2048,8,s,l)}function $N(s,l){return Vh(4,2,s,l)}function FN(s,l){return Vh(4,4,s,l)}function zN(s,l){if(typeof l=="function"){s=s();var f=l(s);return function(){typeof f=="function"?f():l(null)}}if(l!=null)return s=s(),l.current=s,function(){l.current=null}}function HN(s,l,f){f=f!=null?f.concat([s]):null,Vh(4,4,zN.bind(null,l,s),f)}function $b(){}function qN(s,l){var f=Nn();l=l===void 0?null:l;var g=f.memoizedState;return l!==null&&Db(l,g[1])?g[0]:(f.memoizedState=[s,l],s)}function KN(s,l){var f=Nn();l=l===void 0?null:l;var g=f.memoizedState;if(l!==null&&Db(l,g[1]))return g[0];if(g=s(),nc){ot(!0);try{s()}finally{ot(!1)}}return f.memoizedState=[g,l],g}function Fb(s,l,f){return f===void 0||(To&1073741824)!==0?s.memoizedState=l:(s.memoizedState=f,s=YC(),ut.lanes|=s,ko|=s,f)}function GN(s,l,f,g){return Qr(f,l)?f:Su.current!==null?(s=Fb(s,f,g),Qr(s,l)||(Wn=!0),s):(To&42)===0?(Wn=!0,s.memoizedState=f):(s=YC(),ut.lanes|=s,ko|=s,l)}function WN(s,l,f,g,x){var A=G.p;G.p=A!==0&&8>A?A:8;var M=q.T,F={};q.T=F,qb(s,!1,l,f);try{var W=x(),ie=q.S;if(ie!==null&&ie(F,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var ge=tU(W,g);Bh(s,l,ge,ni(s))}else Bh(s,l,g,ni(s))}catch(ve){Bh(s,l,{then:function(){},status:"rejected",reason:ve},ni())}finally{G.p=A,q.T=M}}function sU(){}function zb(s,l,f,g){if(s.tag!==5)throw Error(r(476));var x=YN(s).queue;WN(s,x,l,K,f===null?sU:function(){return XN(s),f(g)})}function YN(s){var l=s.memoizedState;if(l!==null)return l;l={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:K},next:null};var f={};return l.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_s,lastRenderedState:f},next:null},s.memoizedState=l,s=s.alternate,s!==null&&(s.memoizedState=l),l}function XN(s){var l=YN(s).next.queue;Bh(s,l,{},ni())}function Hb(){return mr(rd)}function QN(){return Nn().memoizedState}function ZN(){return Nn().memoizedState}function oU(s){for(var l=s.return;l!==null;){switch(l.tag){case 24:case 3:var f=ni();s=_o(f);var g=So(l,s,f);g!==null&&(ri(g,l,f),Ih(g,l,f)),l={cache:xb()},s.payload=l;return}l=l.return}}function lU(s,l,f){var g=ni();f={lane:g,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},Vg(s)?eC(l,f):(f=ub(s,l,f,g),f!==null&&(ri(f,s,g),tC(f,l,g)))}function JN(s,l,f){var g=ni();Bh(s,l,f,g)}function Bh(s,l,f,g){var x={lane:g,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(Vg(s))eC(l,x);else{var A=s.alternate;if(s.lanes===0&&(A===null||A.lanes===0)&&(A=l.lastRenderedReducer,A!==null))try{var M=l.lastRenderedState,F=A(M,f);if(x.hasEagerState=!0,x.eagerState=F,Qr(F,M))return wg(s,l,x,0),Zt===null&&xg(),!1}catch{}finally{}if(f=ub(s,l,x,g),f!==null)return ri(f,s,g),tC(f,l,g),!0}return!1}function qb(s,l,f,g){if(g={lane:2,revertLane:S1(),action:g,hasEagerState:!1,eagerState:null,next:null},Vg(s)){if(l)throw Error(r(479))}else l=ub(s,f,g,2),l!==null&&ri(l,s,2)}function Vg(s){var l=s.alternate;return s===ut||l!==null&&l===ut}function eC(s,l){Tu=Og=!0;var f=s.pending;f===null?l.next=l:(l.next=f.next,f.next=l),s.pending=l}function tC(s,l,f){if((f&4194048)!==0){var g=l.lanes;g&=s.pendingLanes,f|=g,l.lanes=f,oh(s,f)}}var Bg={readContext:mr,use:Pg,useCallback:xn,useContext:xn,useEffect:xn,useImperativeHandle:xn,useLayoutEffect:xn,useInsertionEffect:xn,useMemo:xn,useReducer:xn,useRef:xn,useState:xn,useDebugValue:xn,useDeferredValue:xn,useTransition:xn,useSyncExternalStore:xn,useId:xn,useHostTransitionStatus:xn,useFormState:xn,useActionState:xn,useOptimistic:xn,useMemoCache:xn,useCacheRefresh:xn},nC={readContext:mr,use:Pg,useCallback:function(s,l){return Pr().memoizedState=[s,l===void 0?null:l],s},useContext:mr,useEffect:BN,useImperativeHandle:function(s,l,f){f=f!=null?f.concat([s]):null,Lg(4194308,4,zN.bind(null,l,s),f)},useLayoutEffect:function(s,l){return Lg(4194308,4,s,l)},useInsertionEffect:function(s,l){Lg(4,2,s,l)},useMemo:function(s,l){var f=Pr();l=l===void 0?null:l;var g=s();if(nc){ot(!0);try{s()}finally{ot(!1)}}return f.memoizedState=[g,l],g},useReducer:function(s,l,f){var g=Pr();if(f!==void 0){var x=f(l);if(nc){ot(!0);try{f(l)}finally{ot(!1)}}}else x=l;return g.memoizedState=g.baseState=x,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:x},g.queue=s,s=s.dispatch=lU.bind(null,ut,s),[g.memoizedState,s]},useRef:function(s){var l=Pr();return s={current:s},l.memoizedState=s},useState:function(s){s=Bb(s);var l=s.queue,f=JN.bind(null,ut,l);return l.dispatch=f,[s.memoizedState,f]},useDebugValue:$b,useDeferredValue:function(s,l){var f=Pr();return Fb(f,s,l)},useTransition:function(){var s=Bb(!1);return s=WN.bind(null,ut,s.queue,!0,!1),Pr().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,l,f){var g=ut,x=Pr();if(Ot){if(f===void 0)throw Error(r(407));f=f()}else{if(f=l(),Zt===null)throw Error(r(349));(Et&124)!==0||SN(g,l,f)}x.memoizedState=f;var A={value:f,getSnapshot:l};return x.queue=A,BN(EN.bind(null,g,A,s),[s]),g.flags|=2048,Au(9,Mg(),TN.bind(null,g,A,f,l),null),f},useId:function(){var s=Pr(),l=Zt.identifierPrefix;if(Ot){var f=bs,g=vs;f=(g&~(1<<32-Bt(g)-1)).toString(32)+f,l="«"+l+"R"+f,f=Ig++,0<f&&(l+="H"+f.toString(32)),l+="»"}else f=nU++,l="«"+l+"r"+f.toString(32)+"»";return s.memoizedState=l},useHostTransitionStatus:Hb,useFormState:PN,useActionState:PN,useOptimistic:function(s){var l=Pr();l.memoizedState=l.baseState=s;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=f,l=qb.bind(null,ut,!0,f),f.dispatch=l,[s,l]},useMemoCache:Mb,useCacheRefresh:function(){return Pr().memoizedState=oU.bind(null,ut)}},rC={readContext:mr,use:Pg,useCallback:qN,useContext:mr,useEffect:UN,useImperativeHandle:HN,useInsertionEffect:$N,useLayoutEffect:FN,useMemo:KN,useReducer:Rg,useRef:VN,useState:function(){return Rg(_s)},useDebugValue:$b,useDeferredValue:function(s,l){var f=Nn();return GN(f,qt.memoizedState,s,l)},useTransition:function(){var s=Rg(_s)[0],l=Nn().memoizedState;return[typeof s=="boolean"?s:Lh(s),l]},useSyncExternalStore:_N,useId:QN,useHostTransitionStatus:Hb,useFormState:RN,useActionState:RN,useOptimistic:function(s,l){var f=Nn();return CN(f,qt,s,l)},useMemoCache:Mb,useCacheRefresh:ZN},cU={readContext:mr,use:Pg,useCallback:qN,useContext:mr,useEffect:UN,useImperativeHandle:HN,useInsertionEffect:$N,useLayoutEffect:FN,useMemo:KN,useReducer:Vb,useRef:VN,useState:function(){return Vb(_s)},useDebugValue:$b,useDeferredValue:function(s,l){var f=Nn();return qt===null?Fb(f,s,l):GN(f,qt.memoizedState,s,l)},useTransition:function(){var s=Vb(_s)[0],l=Nn().memoizedState;return[typeof s=="boolean"?s:Lh(s),l]},useSyncExternalStore:_N,useId:QN,useHostTransitionStatus:Hb,useFormState:LN,useActionState:LN,useOptimistic:function(s,l){var f=Nn();return qt!==null?CN(f,qt,s,l):(f.baseState=s,[s,f.queue.dispatch])},useMemoCache:Mb,useCacheRefresh:ZN},Nu=null,Uh=0;function Ug(s){var l=Uh;return Uh+=1,Nu===null&&(Nu=[]),mN(Nu,s,l)}function $h(s,l){l=l.props.ref,s.ref=l!==void 0?l:null}function $g(s,l){throw l.$$typeof===p?Error(r(525)):(s=Object.prototype.toString.call(l),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":s)))}function iC(s){var l=s._init;return l(s._payload)}function aC(s){function l(J,Q){if(s){var re=J.deletions;re===null?(J.deletions=[Q],J.flags|=16):re.push(Q)}}function f(J,Q){if(!s)return null;for(;Q!==null;)l(J,Q),Q=Q.sibling;return null}function g(J){for(var Q=new Map;J!==null;)J.key!==null?Q.set(J.key,J):Q.set(J.index,J),J=J.sibling;return Q}function x(J,Q){return J=ys(J,Q),J.index=0,J.sibling=null,J}function A(J,Q,re){return J.index=re,s?(re=J.alternate,re!==null?(re=re.index,re<Q?(J.flags|=67108866,Q):re):(J.flags|=67108866,Q)):(J.flags|=1048576,Q)}function M(J){return s&&J.alternate===null&&(J.flags|=67108866),J}function F(J,Q,re,ye){return Q===null||Q.tag!==6?(Q=hb(re,J.mode,ye),Q.return=J,Q):(Q=x(Q,re),Q.return=J,Q)}function W(J,Q,re,ye){var Ve=re.type;return Ve===_?ge(J,Q,re.props.children,ye,re.key):Q!==null&&(Q.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===I&&iC(Ve)===Q.type)?(Q=x(Q,re.props),$h(Q,re),Q.return=J,Q):(Q=Sg(re.type,re.key,re.props,null,J.mode,ye),$h(Q,re),Q.return=J,Q)}function ie(J,Q,re,ye){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==re.containerInfo||Q.stateNode.implementation!==re.implementation?(Q=db(re,J.mode,ye),Q.return=J,Q):(Q=x(Q,re.children||[]),Q.return=J,Q)}function ge(J,Q,re,ye,Ve){return Q===null||Q.tag!==7?(Q=Wl(re,J.mode,ye,Ve),Q.return=J,Q):(Q=x(Q,re),Q.return=J,Q)}function ve(J,Q,re){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=hb(""+Q,J.mode,re),Q.return=J,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case y:return re=Sg(Q.type,Q.key,Q.props,null,J.mode,re),$h(re,Q),re.return=J,re;case b:return Q=db(Q,J.mode,re),Q.return=J,Q;case I:var ye=Q._init;return Q=ye(Q._payload),ve(J,Q,re)}if(ee(Q)||V(Q))return Q=Wl(Q,J.mode,re,null),Q.return=J,Q;if(typeof Q.then=="function")return ve(J,Ug(Q),re);if(Q.$$typeof===C)return ve(J,Ng(J,Q),re);$g(J,Q)}return null}function le(J,Q,re,ye){var Ve=Q!==null?Q.key:null;if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return Ve!==null?null:F(J,Q,""+re,ye);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case y:return re.key===Ve?W(J,Q,re,ye):null;case b:return re.key===Ve?ie(J,Q,re,ye):null;case I:return Ve=re._init,re=Ve(re._payload),le(J,Q,re,ye)}if(ee(re)||V(re))return Ve!==null?null:ge(J,Q,re,ye,null);if(typeof re.then=="function")return le(J,Q,Ug(re),ye);if(re.$$typeof===C)return le(J,Q,Ng(J,re),ye);$g(J,re)}return null}function ue(J,Q,re,ye,Ve){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return J=J.get(re)||null,F(Q,J,""+ye,Ve);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case y:return J=J.get(ye.key===null?re:ye.key)||null,W(Q,J,ye,Ve);case b:return J=J.get(ye.key===null?re:ye.key)||null,ie(Q,J,ye,Ve);case I:var dt=ye._init;return ye=dt(ye._payload),ue(J,Q,re,ye,Ve)}if(ee(ye)||V(ye))return J=J.get(re)||null,ge(Q,J,ye,Ve,null);if(typeof ye.then=="function")return ue(J,Q,re,Ug(ye),Ve);if(ye.$$typeof===C)return ue(J,Q,re,Ng(Q,ye),Ve);$g(Q,ye)}return null}function tt(J,Q,re,ye){for(var Ve=null,dt=null,ze=Q,Je=Q=0,Xn=null;ze!==null&&Je<re.length;Je++){ze.index>Je?(Xn=ze,ze=null):Xn=ze.sibling;var Ct=le(J,ze,re[Je],ye);if(Ct===null){ze===null&&(ze=Xn);break}s&&ze&&Ct.alternate===null&&l(J,ze),Q=A(Ct,Q,Je),dt===null?Ve=Ct:dt.sibling=Ct,dt=Ct,ze=Xn}if(Je===re.length)return f(J,ze),Ot&&Xl(J,Je),Ve;if(ze===null){for(;Je<re.length;Je++)ze=ve(J,re[Je],ye),ze!==null&&(Q=A(ze,Q,Je),dt===null?Ve=ze:dt.sibling=ze,dt=ze);return Ot&&Xl(J,Je),Ve}for(ze=g(ze);Je<re.length;Je++)Xn=ue(ze,J,Je,re[Je],ye),Xn!==null&&(s&&Xn.alternate!==null&&ze.delete(Xn.key===null?Je:Xn.key),Q=A(Xn,Q,Je),dt===null?Ve=Xn:dt.sibling=Xn,dt=Xn);return s&&ze.forEach(function(Uo){return l(J,Uo)}),Ot&&Xl(J,Je),Ve}function Ze(J,Q,re,ye){if(re==null)throw Error(r(151));for(var Ve=null,dt=null,ze=Q,Je=Q=0,Xn=null,Ct=re.next();ze!==null&&!Ct.done;Je++,Ct=re.next()){ze.index>Je?(Xn=ze,ze=null):Xn=ze.sibling;var Uo=le(J,ze,Ct.value,ye);if(Uo===null){ze===null&&(ze=Xn);break}s&&ze&&Uo.alternate===null&&l(J,ze),Q=A(Uo,Q,Je),dt===null?Ve=Uo:dt.sibling=Uo,dt=Uo,ze=Xn}if(Ct.done)return f(J,ze),Ot&&Xl(J,Je),Ve;if(ze===null){for(;!Ct.done;Je++,Ct=re.next())Ct=ve(J,Ct.value,ye),Ct!==null&&(Q=A(Ct,Q,Je),dt===null?Ve=Ct:dt.sibling=Ct,dt=Ct);return Ot&&Xl(J,Je),Ve}for(ze=g(ze);!Ct.done;Je++,Ct=re.next())Ct=ue(ze,J,Je,Ct.value,ye),Ct!==null&&(s&&Ct.alternate!==null&&ze.delete(Ct.key===null?Je:Ct.key),Q=A(Ct,Q,Je),dt===null?Ve=Ct:dt.sibling=Ct,dt=Ct);return s&&ze.forEach(function(u$){return l(J,u$)}),Ot&&Xl(J,Je),Ve}function Gt(J,Q,re,ye){if(typeof re=="object"&&re!==null&&re.type===_&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case y:e:{for(var Ve=re.key;Q!==null;){if(Q.key===Ve){if(Ve=re.type,Ve===_){if(Q.tag===7){f(J,Q.sibling),ye=x(Q,re.props.children),ye.return=J,J=ye;break e}}else if(Q.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===I&&iC(Ve)===Q.type){f(J,Q.sibling),ye=x(Q,re.props),$h(ye,re),ye.return=J,J=ye;break e}f(J,Q);break}else l(J,Q);Q=Q.sibling}re.type===_?(ye=Wl(re.props.children,J.mode,ye,re.key),ye.return=J,J=ye):(ye=Sg(re.type,re.key,re.props,null,J.mode,ye),$h(ye,re),ye.return=J,J=ye)}return M(J);case b:e:{for(Ve=re.key;Q!==null;){if(Q.key===Ve)if(Q.tag===4&&Q.stateNode.containerInfo===re.containerInfo&&Q.stateNode.implementation===re.implementation){f(J,Q.sibling),ye=x(Q,re.children||[]),ye.return=J,J=ye;break e}else{f(J,Q);break}else l(J,Q);Q=Q.sibling}ye=db(re,J.mode,ye),ye.return=J,J=ye}return M(J);case I:return Ve=re._init,re=Ve(re._payload),Gt(J,Q,re,ye)}if(ee(re))return tt(J,Q,re,ye);if(V(re)){if(Ve=V(re),typeof Ve!="function")throw Error(r(150));return re=Ve.call(re),Ze(J,Q,re,ye)}if(typeof re.then=="function")return Gt(J,Q,Ug(re),ye);if(re.$$typeof===C)return Gt(J,Q,Ng(J,re),ye);$g(J,re)}return typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint"?(re=""+re,Q!==null&&Q.tag===6?(f(J,Q.sibling),ye=x(Q,re),ye.return=J,J=ye):(f(J,Q),ye=hb(re,J.mode,ye),ye.return=J,J=ye),M(J)):f(J,Q)}return function(J,Q,re,ye){try{Uh=0;var Ve=Gt(J,Q,re,ye);return Nu=null,Ve}catch(ze){if(ze===kh||ze===jg)throw ze;var dt=Zr(29,ze,null,J.mode);return dt.lanes=ye,dt.return=J,dt}finally{}}}var Cu=aC(!0),sC=aC(!1),ji=Z(null),Da=null;function Eo(s){var l=s.alternate;fe(Un,Un.current&1),fe(ji,s),Da===null&&(l===null||Su.current!==null||l.memoizedState!==null)&&(Da=s)}function oC(s){if(s.tag===22){if(fe(Un,Un.current),fe(ji,s),Da===null){var l=s.alternate;l!==null&&l.memoizedState!==null&&(Da=s)}}else Ao()}function Ao(){fe(Un,Un.current),fe(ji,ji.current)}function Ss(s){te(ji),Da===s&&(Da=null),te(Un)}var Un=Z(0);function Fg(s){for(var l=s;l!==null;){if(l.tag===13){var f=l.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||R1(f)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function Kb(s,l,f,g){l=s.memoizedState,f=f(g,l),f=f==null?l:m({},l,f),s.memoizedState=f,s.lanes===0&&(s.updateQueue.baseState=f)}var Gb={enqueueSetState:function(s,l,f){s=s._reactInternals;var g=ni(),x=_o(g);x.payload=l,f!=null&&(x.callback=f),l=So(s,x,g),l!==null&&(ri(l,s,g),Ih(l,s,g))},enqueueReplaceState:function(s,l,f){s=s._reactInternals;var g=ni(),x=_o(g);x.tag=1,x.payload=l,f!=null&&(x.callback=f),l=So(s,x,g),l!==null&&(ri(l,s,g),Ih(l,s,g))},enqueueForceUpdate:function(s,l){s=s._reactInternals;var f=ni(),g=_o(f);g.tag=2,l!=null&&(g.callback=l),l=So(s,g,f),l!==null&&(ri(l,s,f),Ih(l,s,f))}};function lC(s,l,f,g,x,A,M){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(g,A,M):l.prototype&&l.prototype.isPureReactComponent?!Sh(f,g)||!Sh(x,A):!0}function cC(s,l,f,g){s=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(f,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(f,g),l.state!==s&&Gb.enqueueReplaceState(l,l.state,null)}function rc(s,l){var f=l;if("ref"in l){f={};for(var g in l)g!=="ref"&&(f[g]=l[g])}if(s=s.defaultProps){f===l&&(f=m({},f));for(var x in s)f[x]===void 0&&(f[x]=s[x])}return f}var zg=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function uC(s){zg(s)}function fC(s){console.error(s)}function hC(s){zg(s)}function Hg(s,l){try{var f=s.onUncaughtError;f(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function dC(s,l,f){try{var g=s.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Wb(s,l,f){return f=_o(f),f.tag=3,f.payload={element:null},f.callback=function(){Hg(s,l)},f}function mC(s){return s=_o(s),s.tag=3,s}function gC(s,l,f,g){var x=f.type.getDerivedStateFromError;if(typeof x=="function"){var A=g.value;s.payload=function(){return x(A)},s.callback=function(){dC(l,f,g)}}var M=f.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(s.callback=function(){dC(l,f,g),typeof x!="function"&&(Oo===null?Oo=new Set([this]):Oo.add(this));var F=g.stack;this.componentDidCatch(g.value,{componentStack:F!==null?F:""})})}function uU(s,l,f,g,x){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=f.alternate,l!==null&&Ch(l,f,x,!0),f=ji.current,f!==null){switch(f.tag){case 13:return Da===null?v1():f.alternate===null&&mn===0&&(mn=3),f.flags&=-257,f.flags|=65536,f.lanes=x,g===Sb?f.flags|=16384:(l=f.updateQueue,l===null?f.updateQueue=new Set([g]):l.add(g),x1(s,g,x)),!1;case 22:return f.flags|=65536,g===Sb?f.flags|=16384:(l=f.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=l):(f=l.retryQueue,f===null?l.retryQueue=new Set([g]):f.add(g)),x1(s,g,x)),!1}throw Error(r(435,f.tag))}return x1(s,g,x),v1(),!1}if(Ot)return l=ji.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=x,g!==pb&&(s=Error(r(422),{cause:g}),Nh(Ei(s,f)))):(g!==pb&&(l=Error(r(423),{cause:g}),Nh(Ei(l,f))),s=s.current.alternate,s.flags|=65536,x&=-x,s.lanes|=x,g=Ei(g,f),x=Wb(s.stateNode,g,x),Ab(s,x),mn!==4&&(mn=2)),!1;var A=Error(r(520),{cause:g});if(A=Ei(A,f),Wh===null?Wh=[A]:Wh.push(A),mn!==4&&(mn=2),l===null)return!0;g=Ei(g,f),f=l;do{switch(f.tag){case 3:return f.flags|=65536,s=x&-x,f.lanes|=s,s=Wb(f.stateNode,g,s),Ab(f,s),!1;case 1:if(l=f.type,A=f.stateNode,(f.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Oo===null||!Oo.has(A))))return f.flags|=65536,x&=-x,f.lanes|=x,x=mC(x),gC(x,s,f,g),Ab(f,x),!1}f=f.return}while(f!==null);return!1}var pC=Error(r(461)),Wn=!1;function ar(s,l,f,g){l.child=s===null?sC(l,null,f,g):Cu(l,s.child,f,g)}function yC(s,l,f,g,x){f=f.render;var A=l.ref;if("ref"in g){var M={};for(var F in g)F!=="ref"&&(M[F]=g[F])}else M=g;return ec(l),g=kb(s,l,f,M,A,x),F=Ob(),s!==null&&!Wn?(Ib(s,l,x),Ts(s,l,x)):(Ot&&F&&mb(l),l.flags|=1,ar(s,l,g,x),l.child)}function vC(s,l,f,g,x){if(s===null){var A=f.type;return typeof A=="function"&&!fb(A)&&A.defaultProps===void 0&&f.compare===null?(l.tag=15,l.type=A,bC(s,l,A,g,x)):(s=Sg(f.type,null,g,l,l.mode,x),s.ref=l.ref,s.return=l,l.child=s)}if(A=s.child,!n1(s,x)){var M=A.memoizedProps;if(f=f.compare,f=f!==null?f:Sh,f(M,g)&&s.ref===l.ref)return Ts(s,l,x)}return l.flags|=1,s=ys(A,g),s.ref=l.ref,s.return=l,l.child=s}function bC(s,l,f,g,x){if(s!==null){var A=s.memoizedProps;if(Sh(A,g)&&s.ref===l.ref)if(Wn=!1,l.pendingProps=g=A,n1(s,x))(s.flags&131072)!==0&&(Wn=!0);else return l.lanes=s.lanes,Ts(s,l,x)}return Yb(s,l,f,g,x)}function xC(s,l,f){var g=l.pendingProps,x=g.children,A=s!==null?s.memoizedState:null;if(g.mode==="hidden"){if((l.flags&128)!==0){if(g=A!==null?A.baseLanes|f:f,s!==null){for(x=l.child=s.child,A=0;x!==null;)A=A|x.lanes|x.childLanes,x=x.sibling;l.childLanes=A&~g}else l.childLanes=0,l.child=null;return wC(s,l,g,f)}if((f&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},s!==null&&Cg(l,A!==null?A.cachePool:null),A!==null?bN(l,A):Cb(),oC(l);else return l.lanes=l.childLanes=536870912,wC(s,l,A!==null?A.baseLanes|f:f,f)}else A!==null?(Cg(l,A.cachePool),bN(l,A),Ao(),l.memoizedState=null):(s!==null&&Cg(l,null),Cb(),Ao());return ar(s,l,x,f),l.child}function wC(s,l,f,g){var x=_b();return x=x===null?null:{parent:Bn._currentValue,pool:x},l.memoizedState={baseLanes:f,cachePool:x},s!==null&&Cg(l,null),Cb(),oC(l),s!==null&&Ch(s,l,g,!0),null}function qg(s,l){var f=l.ref;if(f===null)s!==null&&s.ref!==null&&(l.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(s===null||s.ref!==f)&&(l.flags|=4194816)}}function Yb(s,l,f,g,x){return ec(l),f=kb(s,l,f,g,void 0,x),g=Ob(),s!==null&&!Wn?(Ib(s,l,x),Ts(s,l,x)):(Ot&&g&&mb(l),l.flags|=1,ar(s,l,f,x),l.child)}function _C(s,l,f,g,x,A){return ec(l),l.updateQueue=null,f=wN(l,g,f,x),xN(s),g=Ob(),s!==null&&!Wn?(Ib(s,l,A),Ts(s,l,A)):(Ot&&g&&mb(l),l.flags|=1,ar(s,l,f,A),l.child)}function SC(s,l,f,g,x){if(ec(l),l.stateNode===null){var A=vu,M=f.contextType;typeof M=="object"&&M!==null&&(A=mr(M)),A=new f(g,A),l.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Gb,l.stateNode=A,A._reactInternals=l,A=l.stateNode,A.props=g,A.state=l.memoizedState,A.refs={},Tb(l),M=f.contextType,A.context=typeof M=="object"&&M!==null?mr(M):vu,A.state=l.memoizedState,M=f.getDerivedStateFromProps,typeof M=="function"&&(Kb(l,f,M,g),A.state=l.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(M=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),M!==A.state&&Gb.enqueueReplaceState(A,A.state,null),Rh(l,g,A,x),Ph(),A.state=l.memoizedState),typeof A.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(s===null){A=l.stateNode;var F=l.memoizedProps,W=rc(f,F);A.props=W;var ie=A.context,ge=f.contextType;M=vu,typeof ge=="object"&&ge!==null&&(M=mr(ge));var ve=f.getDerivedStateFromProps;ge=typeof ve=="function"||typeof A.getSnapshotBeforeUpdate=="function",F=l.pendingProps!==F,ge||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(F||ie!==M)&&cC(l,A,g,M),wo=!1;var le=l.memoizedState;A.state=le,Rh(l,g,A,x),Ph(),ie=l.memoizedState,F||le!==ie||wo?(typeof ve=="function"&&(Kb(l,f,ve,g),ie=l.memoizedState),(W=wo||lC(l,f,W,g,le,ie,M))?(ge||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(l.flags|=4194308)):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=ie),A.props=g,A.state=ie,A.context=M,g=W):(typeof A.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{A=l.stateNode,Eb(s,l),M=l.memoizedProps,ge=rc(f,M),A.props=ge,ve=l.pendingProps,le=A.context,ie=f.contextType,W=vu,typeof ie=="object"&&ie!==null&&(W=mr(ie)),F=f.getDerivedStateFromProps,(ie=typeof F=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(M!==ve||le!==W)&&cC(l,A,g,W),wo=!1,le=l.memoizedState,A.state=le,Rh(l,g,A,x),Ph();var ue=l.memoizedState;M!==ve||le!==ue||wo||s!==null&&s.dependencies!==null&&Ag(s.dependencies)?(typeof F=="function"&&(Kb(l,f,F,g),ue=l.memoizedState),(ge=wo||lC(l,f,ge,g,le,ue,W)||s!==null&&s.dependencies!==null&&Ag(s.dependencies))?(ie||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(g,ue,W),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(g,ue,W)),typeof A.componentDidUpdate=="function"&&(l.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof A.componentDidUpdate!="function"||M===s.memoizedProps&&le===s.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&le===s.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=ue),A.props=g,A.state=ue,A.context=W,g=ge):(typeof A.componentDidUpdate!="function"||M===s.memoizedProps&&le===s.memoizedState||(l.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||M===s.memoizedProps&&le===s.memoizedState||(l.flags|=1024),g=!1)}return A=g,qg(s,l),g=(l.flags&128)!==0,A||g?(A=l.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:A.render(),l.flags|=1,s!==null&&g?(l.child=Cu(l,s.child,null,x),l.child=Cu(l,null,f,x)):ar(s,l,f,x),l.memoizedState=A.state,s=l.child):s=Ts(s,l,x),s}function TC(s,l,f,g){return Ah(),l.flags|=256,ar(s,l,f,g),l.child}var Xb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qb(s){return{baseLanes:s,cachePool:fN()}}function Zb(s,l,f){return s=s!==null?s.childLanes&~f:0,l&&(s|=Di),s}function EC(s,l,f){var g=l.pendingProps,x=!1,A=(l.flags&128)!==0,M;if((M=A)||(M=s!==null&&s.memoizedState===null?!1:(Un.current&2)!==0),M&&(x=!0,l.flags&=-129),M=(l.flags&32)!==0,l.flags&=-33,s===null){if(Ot){if(x?Eo(l):Ao(),Ot){var F=dn,W;if(W=F){e:{for(W=F,F=ja;W.nodeType!==8;){if(!F){F=null;break e}if(W=Ji(W.nextSibling),W===null){F=null;break e}}F=W}F!==null?(l.memoizedState={dehydrated:F,treeContext:Yl!==null?{id:vs,overflow:bs}:null,retryLane:536870912,hydrationErrors:null},W=Zr(18,null,null,0),W.stateNode=F,W.return=l,l.child=W,Nr=l,dn=null,W=!0):W=!1}W||Zl(l)}if(F=l.memoizedState,F!==null&&(F=F.dehydrated,F!==null))return R1(F)?l.lanes=32:l.lanes=536870912,null;Ss(l)}return F=g.children,g=g.fallback,x?(Ao(),x=l.mode,F=Kg({mode:"hidden",children:F},x),g=Wl(g,x,f,null),F.return=l,g.return=l,F.sibling=g,l.child=F,x=l.child,x.memoizedState=Qb(f),x.childLanes=Zb(s,M,f),l.memoizedState=Xb,g):(Eo(l),Jb(l,F))}if(W=s.memoizedState,W!==null&&(F=W.dehydrated,F!==null)){if(A)l.flags&256?(Eo(l),l.flags&=-257,l=e1(s,l,f)):l.memoizedState!==null?(Ao(),l.child=s.child,l.flags|=128,l=null):(Ao(),x=g.fallback,F=l.mode,g=Kg({mode:"visible",children:g.children},F),x=Wl(x,F,f,null),x.flags|=2,g.return=l,x.return=l,g.sibling=x,l.child=g,Cu(l,s.child,null,f),g=l.child,g.memoizedState=Qb(f),g.childLanes=Zb(s,M,f),l.memoizedState=Xb,l=x);else if(Eo(l),R1(F)){if(M=F.nextSibling&&F.nextSibling.dataset,M)var ie=M.dgst;M=ie,g=Error(r(419)),g.stack="",g.digest=M,Nh({value:g,source:null,stack:null}),l=e1(s,l,f)}else if(Wn||Ch(s,l,f,!1),M=(f&s.childLanes)!==0,Wn||M){if(M=Zt,M!==null&&(g=f&-f,g=(g&42)!==0?1:ho(g),g=(g&(M.suspendedLanes|f))!==0?0:g,g!==0&&g!==W.retryLane))throw W.retryLane=g,yu(s,g),ri(M,s,g),pC;F.data==="$?"||v1(),l=e1(s,l,f)}else F.data==="$?"?(l.flags|=192,l.child=s.child,l=null):(s=W.treeContext,dn=Ji(F.nextSibling),Nr=l,Ot=!0,Ql=null,ja=!1,s!==null&&(Ni[Ci++]=vs,Ni[Ci++]=bs,Ni[Ci++]=Yl,vs=s.id,bs=s.overflow,Yl=l),l=Jb(l,g.children),l.flags|=4096);return l}return x?(Ao(),x=g.fallback,F=l.mode,W=s.child,ie=W.sibling,g=ys(W,{mode:"hidden",children:g.children}),g.subtreeFlags=W.subtreeFlags&65011712,ie!==null?x=ys(ie,x):(x=Wl(x,F,f,null),x.flags|=2),x.return=l,g.return=l,g.sibling=x,l.child=g,g=x,x=l.child,F=s.child.memoizedState,F===null?F=Qb(f):(W=F.cachePool,W!==null?(ie=Bn._currentValue,W=W.parent!==ie?{parent:ie,pool:ie}:W):W=fN(),F={baseLanes:F.baseLanes|f,cachePool:W}),x.memoizedState=F,x.childLanes=Zb(s,M,f),l.memoizedState=Xb,g):(Eo(l),f=s.child,s=f.sibling,f=ys(f,{mode:"visible",children:g.children}),f.return=l,f.sibling=null,s!==null&&(M=l.deletions,M===null?(l.deletions=[s],l.flags|=16):M.push(s)),l.child=f,l.memoizedState=null,f)}function Jb(s,l){return l=Kg({mode:"visible",children:l},s.mode),l.return=s,s.child=l}function Kg(s,l){return s=Zr(22,s,null,l),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function e1(s,l,f){return Cu(l,s.child,null,f),s=Jb(l,l.pendingProps.children),s.flags|=2,l.memoizedState=null,s}function AC(s,l,f){s.lanes|=l;var g=s.alternate;g!==null&&(g.lanes|=l),vb(s.return,l,f)}function t1(s,l,f,g,x){var A=s.memoizedState;A===null?s.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:x}:(A.isBackwards=l,A.rendering=null,A.renderingStartTime=0,A.last=g,A.tail=f,A.tailMode=x)}function NC(s,l,f){var g=l.pendingProps,x=g.revealOrder,A=g.tail;if(ar(s,l,g.children,f),g=Un.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=l.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&AC(s,f,l);else if(s.tag===19)AC(s,f,l);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===l)break e;for(;s.sibling===null;){if(s.return===null||s.return===l)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}g&=1}switch(fe(Un,g),x){case"forwards":for(f=l.child,x=null;f!==null;)s=f.alternate,s!==null&&Fg(s)===null&&(x=f),f=f.sibling;f=x,f===null?(x=l.child,l.child=null):(x=f.sibling,f.sibling=null),t1(l,!1,x,f,A);break;case"backwards":for(f=null,x=l.child,l.child=null;x!==null;){if(s=x.alternate,s!==null&&Fg(s)===null){l.child=x;break}s=x.sibling,x.sibling=f,f=x,x=s}t1(l,!0,f,null,A);break;case"together":t1(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function Ts(s,l,f){if(s!==null&&(l.dependencies=s.dependencies),ko|=l.lanes,(f&l.childLanes)===0)if(s!==null){if(Ch(s,l,f,!1),(f&l.childLanes)===0)return null}else return null;if(s!==null&&l.child!==s.child)throw Error(r(153));if(l.child!==null){for(s=l.child,f=ys(s,s.pendingProps),l.child=f,f.return=l;s.sibling!==null;)s=s.sibling,f=f.sibling=ys(s,s.pendingProps),f.return=l;f.sibling=null}return l.child}function n1(s,l){return(s.lanes&l)!==0?!0:(s=s.dependencies,!!(s!==null&&Ag(s)))}function fU(s,l,f){switch(l.tag){case 3:Ne(l,l.stateNode.containerInfo),xo(l,Bn,s.memoizedState.cache),Ah();break;case 27:case 5:Le(l);break;case 4:Ne(l,l.stateNode.containerInfo);break;case 10:xo(l,l.type,l.memoizedProps.value);break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(Eo(l),l.flags|=128,null):(f&l.child.childLanes)!==0?EC(s,l,f):(Eo(l),s=Ts(s,l,f),s!==null?s.sibling:null);Eo(l);break;case 19:var x=(s.flags&128)!==0;if(g=(f&l.childLanes)!==0,g||(Ch(s,l,f,!1),g=(f&l.childLanes)!==0),x){if(g)return NC(s,l,f);l.flags|=128}if(x=l.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),fe(Un,Un.current),g)break;return null;case 22:case 23:return l.lanes=0,xC(s,l,f);case 24:xo(l,Bn,s.memoizedState.cache)}return Ts(s,l,f)}function CC(s,l,f){if(s!==null)if(s.memoizedProps!==l.pendingProps)Wn=!0;else{if(!n1(s,f)&&(l.flags&128)===0)return Wn=!1,fU(s,l,f);Wn=(s.flags&131072)!==0}else Wn=!1,Ot&&(l.flags&1048576)!==0&&iN(l,Eg,l.index);switch(l.lanes=0,l.tag){case 16:e:{s=l.pendingProps;var g=l.elementType,x=g._init;if(g=x(g._payload),l.type=g,typeof g=="function")fb(g)?(s=rc(g,s),l.tag=1,l=SC(null,l,g,s,f)):(l.tag=0,l=Yb(null,l,g,s,f));else{if(g!=null){if(x=g.$$typeof,x===L){l.tag=11,l=yC(null,l,g,s,f);break e}else if(x===k){l.tag=14,l=vC(null,l,g,s,f);break e}}throw l=Y(g)||g,Error(r(306,l,""))}}return l;case 0:return Yb(s,l,l.type,l.pendingProps,f);case 1:return g=l.type,x=rc(g,l.pendingProps),SC(s,l,g,x,f);case 3:e:{if(Ne(l,l.stateNode.containerInfo),s===null)throw Error(r(387));g=l.pendingProps;var A=l.memoizedState;x=A.element,Eb(s,l),Rh(l,g,null,f);var M=l.memoizedState;if(g=M.cache,xo(l,Bn,g),g!==A.cache&&bb(l,[Bn],f,!0),Ph(),g=M.element,A.isDehydrated)if(A={element:g,isDehydrated:!1,cache:M.cache},l.updateQueue.baseState=A,l.memoizedState=A,l.flags&256){l=TC(s,l,g,f);break e}else if(g!==x){x=Ei(Error(r(424)),l),Nh(x),l=TC(s,l,g,f);break e}else{switch(s=l.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(dn=Ji(s.firstChild),Nr=l,Ot=!0,Ql=null,ja=!0,f=sC(l,null,g,f),l.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Ah(),g===x){l=Ts(s,l,f);break e}ar(s,l,g,f)}l=l.child}return l;case 26:return qg(s,l),s===null?(f=Oj(l.type,null,l.pendingProps,null))?l.memoizedState=f:Ot||(f=l.type,s=l.pendingProps,g=sp(Fe.current).createElement(f),g[Mn]=l,g[Tn]=s,or(g,f,s),bn(g),l.stateNode=g):l.memoizedState=Oj(l.type,s.memoizedProps,l.pendingProps,s.memoizedState),null;case 27:return Le(l),s===null&&Ot&&(g=l.stateNode=jj(l.type,l.pendingProps,Fe.current),Nr=l,ja=!0,x=dn,Ro(l.type)?(M1=x,dn=Ji(g.firstChild)):dn=x),ar(s,l,l.pendingProps.children,f),qg(s,l),s===null&&(l.flags|=4194304),l.child;case 5:return s===null&&Ot&&((x=g=dn)&&(g=BU(g,l.type,l.pendingProps,ja),g!==null?(l.stateNode=g,Nr=l,dn=Ji(g.firstChild),ja=!1,x=!0):x=!1),x||Zl(l)),Le(l),x=l.type,A=l.pendingProps,M=s!==null?s.memoizedProps:null,g=A.children,O1(x,A)?g=null:M!==null&&O1(x,M)&&(l.flags|=32),l.memoizedState!==null&&(x=kb(s,l,rU,null,null,f),rd._currentValue=x),qg(s,l),ar(s,l,g,f),l.child;case 6:return s===null&&Ot&&((s=f=dn)&&(f=UU(f,l.pendingProps,ja),f!==null?(l.stateNode=f,Nr=l,dn=null,s=!0):s=!1),s||Zl(l)),null;case 13:return EC(s,l,f);case 4:return Ne(l,l.stateNode.containerInfo),g=l.pendingProps,s===null?l.child=Cu(l,null,g,f):ar(s,l,g,f),l.child;case 11:return yC(s,l,l.type,l.pendingProps,f);case 7:return ar(s,l,l.pendingProps,f),l.child;case 8:return ar(s,l,l.pendingProps.children,f),l.child;case 12:return ar(s,l,l.pendingProps.children,f),l.child;case 10:return g=l.pendingProps,xo(l,l.type,g.value),ar(s,l,g.children,f),l.child;case 9:return x=l.type._context,g=l.pendingProps.children,ec(l),x=mr(x),g=g(x),l.flags|=1,ar(s,l,g,f),l.child;case 14:return vC(s,l,l.type,l.pendingProps,f);case 15:return bC(s,l,l.type,l.pendingProps,f);case 19:return NC(s,l,f);case 31:return g=l.pendingProps,f=l.mode,g={mode:g.mode,children:g.children},s===null?(f=Kg(g,f),f.ref=l.ref,l.child=f,f.return=l,l=f):(f=ys(s.child,g),f.ref=l.ref,l.child=f,f.return=l,l=f),l;case 22:return xC(s,l,f);case 24:return ec(l),g=mr(Bn),s===null?(x=_b(),x===null&&(x=Zt,A=xb(),x.pooledCache=A,A.refCount++,A!==null&&(x.pooledCacheLanes|=f),x=A),l.memoizedState={parent:g,cache:x},Tb(l),xo(l,Bn,x)):((s.lanes&f)!==0&&(Eb(s,l),Rh(l,null,null,f),Ph()),x=s.memoizedState,A=l.memoizedState,x.parent!==g?(x={parent:g,cache:g},l.memoizedState=x,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=x),xo(l,Bn,g)):(g=A.cache,xo(l,Bn,g),g!==x.cache&&bb(l,[Bn],f,!0))),ar(s,l,l.pendingProps.children,f),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function Es(s){s.flags|=4}function jC(s,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Lj(l)){if(l=ji.current,l!==null&&((Et&4194048)===Et?Da!==null:(Et&62914560)!==Et&&(Et&536870912)===0||l!==Da))throw Oh=Sb,hN;s.flags|=8192}}function Gg(s,l){l!==null&&(s.flags|=4),s.flags&16384&&(l=s.tag!==22?ah():536870912,s.lanes|=l,Ou|=l)}function Fh(s,l){if(!Ot)switch(s.tailMode){case"hidden":l=s.tail;for(var f=null;l!==null;)l.alternate!==null&&(f=l),l=l.sibling;f===null?s.tail=null:f.sibling=null;break;case"collapsed":f=s.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?l||s.tail===null?s.tail=null:s.tail.sibling=null:g.sibling=null}}function un(s){var l=s.alternate!==null&&s.alternate.child===s.child,f=0,g=0;if(l)for(var x=s.child;x!==null;)f|=x.lanes|x.childLanes,g|=x.subtreeFlags&65011712,g|=x.flags&65011712,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)f|=x.lanes|x.childLanes,g|=x.subtreeFlags,g|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=g,s.childLanes=f,l}function hU(s,l,f){var g=l.pendingProps;switch(gb(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(l),null;case 1:return un(l),null;case 3:return f=l.stateNode,g=null,s!==null&&(g=s.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),ws(Bn),we(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(s===null||s.child===null)&&(Eh(l)?Es(l):s===null||s.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,oN())),un(l),null;case 26:return f=l.memoizedState,s===null?(Es(l),f!==null?(un(l),jC(l,f)):(un(l),l.flags&=-16777217)):f?f!==s.memoizedState?(Es(l),un(l),jC(l,f)):(un(l),l.flags&=-16777217):(s.memoizedProps!==g&&Es(l),un(l),l.flags&=-16777217),null;case 27:xe(l),f=Fe.current;var x=l.type;if(s!==null&&l.stateNode!=null)s.memoizedProps!==g&&Es(l);else{if(!g){if(l.stateNode===null)throw Error(r(166));return un(l),null}s=Ce.current,Eh(l)?aN(l):(s=jj(x,g,f),l.stateNode=s,Es(l))}return un(l),null;case 5:if(xe(l),f=l.type,s!==null&&l.stateNode!=null)s.memoizedProps!==g&&Es(l);else{if(!g){if(l.stateNode===null)throw Error(r(166));return un(l),null}if(s=Ce.current,Eh(l))aN(l);else{switch(x=sp(Fe.current),s){case 1:s=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:s=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":s=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":s=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":s=x.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof g.is=="string"?x.createElement("select",{is:g.is}):x.createElement("select"),g.multiple?s.multiple=!0:g.size&&(s.size=g.size);break;default:s=typeof g.is=="string"?x.createElement(f,{is:g.is}):x.createElement(f)}}s[Mn]=l,s[Tn]=g;e:for(x=l.child;x!==null;){if(x.tag===5||x.tag===6)s.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===l)break e;for(;x.sibling===null;){if(x.return===null||x.return===l)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}l.stateNode=s;e:switch(or(s,f,g),f){case"button":case"input":case"select":case"textarea":s=!!g.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Es(l)}}return un(l),l.flags&=-16777217,null;case 6:if(s&&l.stateNode!=null)s.memoizedProps!==g&&Es(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(r(166));if(s=Fe.current,Eh(l)){if(s=l.stateNode,f=l.memoizedProps,g=null,x=Nr,x!==null)switch(x.tag){case 27:case 5:g=x.memoizedProps}s[Mn]=l,s=!!(s.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||_j(s.nodeValue,f)),s||Zl(l)}else s=sp(s).createTextNode(g),s[Mn]=l,l.stateNode=s}return un(l),null;case 13:if(g=l.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(x=Eh(l),g!==null&&g.dehydrated!==null){if(s===null){if(!x)throw Error(r(318));if(x=l.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[Mn]=l}else Ah(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;un(l),x=!1}else x=oN(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=x),x=!0;if(!x)return l.flags&256?(Ss(l),l):(Ss(l),null)}if(Ss(l),(l.flags&128)!==0)return l.lanes=f,l;if(f=g!==null,s=s!==null&&s.memoizedState!==null,f){g=l.child,x=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(x=g.alternate.memoizedState.cachePool.pool);var A=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(A=g.memoizedState.cachePool.pool),A!==x&&(g.flags|=2048)}return f!==s&&f&&(l.child.flags|=8192),Gg(l,l.updateQueue),un(l),null;case 4:return we(),s===null&&N1(l.stateNode.containerInfo),un(l),null;case 10:return ws(l.type),un(l),null;case 19:if(te(Un),x=l.memoizedState,x===null)return un(l),null;if(g=(l.flags&128)!==0,A=x.rendering,A===null)if(g)Fh(x,!1);else{if(mn!==0||s!==null&&(s.flags&128)!==0)for(s=l.child;s!==null;){if(A=Fg(s),A!==null){for(l.flags|=128,Fh(x,!1),s=A.updateQueue,l.updateQueue=s,Gg(l,s),l.subtreeFlags=0,s=f,f=l.child;f!==null;)rN(f,s),f=f.sibling;return fe(Un,Un.current&1|2),l.child}s=s.sibling}x.tail!==null&&Rt()>Xg&&(l.flags|=128,g=!0,Fh(x,!1),l.lanes=4194304)}else{if(!g)if(s=Fg(A),s!==null){if(l.flags|=128,g=!0,s=s.updateQueue,l.updateQueue=s,Gg(l,s),Fh(x,!0),x.tail===null&&x.tailMode==="hidden"&&!A.alternate&&!Ot)return un(l),null}else 2*Rt()-x.renderingStartTime>Xg&&f!==536870912&&(l.flags|=128,g=!0,Fh(x,!1),l.lanes=4194304);x.isBackwards?(A.sibling=l.child,l.child=A):(s=x.last,s!==null?s.sibling=A:l.child=A,x.last=A)}return x.tail!==null?(l=x.tail,x.rendering=l,x.tail=l.sibling,x.renderingStartTime=Rt(),l.sibling=null,s=Un.current,fe(Un,g?s&1|2:s&1),l):(un(l),null);case 22:case 23:return Ss(l),jb(),g=l.memoizedState!==null,s!==null?s.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(f&536870912)!==0&&(l.flags&128)===0&&(un(l),l.subtreeFlags&6&&(l.flags|=8192)):un(l),f=l.updateQueue,f!==null&&Gg(l,f.retryQueue),f=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==f&&(l.flags|=2048),s!==null&&te(tc),null;case 24:return f=null,s!==null&&(f=s.memoizedState.cache),l.memoizedState.cache!==f&&(l.flags|=2048),ws(Bn),un(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function dU(s,l){switch(gb(l),l.tag){case 1:return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 3:return ws(Bn),we(),s=l.flags,(s&65536)!==0&&(s&128)===0?(l.flags=s&-65537|128,l):null;case 26:case 27:case 5:return xe(l),null;case 13:if(Ss(l),s=l.memoizedState,s!==null&&s.dehydrated!==null){if(l.alternate===null)throw Error(r(340));Ah()}return s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 19:return te(Un),null;case 4:return we(),null;case 10:return ws(l.type),null;case 22:case 23:return Ss(l),jb(),s!==null&&te(tc),s=l.flags,s&65536?(l.flags=s&-65537|128,l):null;case 24:return ws(Bn),null;case 25:return null;default:return null}}function DC(s,l){switch(gb(l),l.tag){case 3:ws(Bn),we();break;case 26:case 27:case 5:xe(l);break;case 4:we();break;case 13:Ss(l);break;case 19:te(Un);break;case 10:ws(l.type);break;case 22:case 23:Ss(l),jb(),s!==null&&te(tc);break;case 24:ws(Bn)}}function zh(s,l){try{var f=l.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var x=g.next;f=x;do{if((f.tag&s)===s){g=void 0;var A=f.create,M=f.inst;g=A(),M.destroy=g}f=f.next}while(f!==x)}}catch(F){Wt(l,l.return,F)}}function No(s,l,f){try{var g=l.updateQueue,x=g!==null?g.lastEffect:null;if(x!==null){var A=x.next;g=A;do{if((g.tag&s)===s){var M=g.inst,F=M.destroy;if(F!==void 0){M.destroy=void 0,x=l;var W=f,ie=F;try{ie()}catch(ge){Wt(x,W,ge)}}}g=g.next}while(g!==A)}}catch(ge){Wt(l,l.return,ge)}}function kC(s){var l=s.updateQueue;if(l!==null){var f=s.stateNode;try{vN(l,f)}catch(g){Wt(s,s.return,g)}}}function OC(s,l,f){f.props=rc(s.type,s.memoizedProps),f.state=s.memoizedState;try{f.componentWillUnmount()}catch(g){Wt(s,l,g)}}function Hh(s,l){try{var f=s.ref;if(f!==null){switch(s.tag){case 26:case 27:case 5:var g=s.stateNode;break;case 30:g=s.stateNode;break;default:g=s.stateNode}typeof f=="function"?s.refCleanup=f(g):f.current=g}}catch(x){Wt(s,l,x)}}function ka(s,l){var f=s.ref,g=s.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(x){Wt(s,l,x)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(x){Wt(s,l,x)}else f.current=null}function IC(s){var l=s.type,f=s.memoizedProps,g=s.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(x){Wt(s,s.return,x)}}function r1(s,l,f){try{var g=s.stateNode;PU(g,s.type,f,l),g[Tn]=l}catch(x){Wt(s,s.return,x)}}function PC(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ro(s.type)||s.tag===4}function i1(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||PC(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ro(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function a1(s,l,f){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(s,l):(l=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,l.appendChild(s),f=f._reactRootContainer,f!=null||l.onclick!==null||(l.onclick=ap));else if(g!==4&&(g===27&&Ro(s.type)&&(f=s.stateNode,l=null),s=s.child,s!==null))for(a1(s,l,f),s=s.sibling;s!==null;)a1(s,l,f),s=s.sibling}function Wg(s,l,f){var g=s.tag;if(g===5||g===6)s=s.stateNode,l?f.insertBefore(s,l):f.appendChild(s);else if(g!==4&&(g===27&&Ro(s.type)&&(f=s.stateNode),s=s.child,s!==null))for(Wg(s,l,f),s=s.sibling;s!==null;)Wg(s,l,f),s=s.sibling}function RC(s){var l=s.stateNode,f=s.memoizedProps;try{for(var g=s.type,x=l.attributes;x.length;)l.removeAttributeNode(x[0]);or(l,g,f),l[Mn]=s,l[Tn]=f}catch(A){Wt(s,s.return,A)}}var As=!1,wn=!1,s1=!1,MC=typeof WeakSet=="function"?WeakSet:Set,Yn=null;function mU(s,l){if(s=s.containerInfo,D1=hp,s=G2(s),ib(s)){if("selectionStart"in s)var f={start:s.selectionStart,end:s.selectionEnd};else e:{f=(f=s.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var x=g.anchorOffset,A=g.focusNode;g=g.focusOffset;try{f.nodeType,A.nodeType}catch{f=null;break e}var M=0,F=-1,W=-1,ie=0,ge=0,ve=s,le=null;t:for(;;){for(var ue;ve!==f||x!==0&&ve.nodeType!==3||(F=M+x),ve!==A||g!==0&&ve.nodeType!==3||(W=M+g),ve.nodeType===3&&(M+=ve.nodeValue.length),(ue=ve.firstChild)!==null;)le=ve,ve=ue;for(;;){if(ve===s)break t;if(le===f&&++ie===x&&(F=M),le===A&&++ge===g&&(W=M),(ue=ve.nextSibling)!==null)break;ve=le,le=ve.parentNode}ve=ue}f=F===-1||W===-1?null:{start:F,end:W}}else f=null}f=f||{start:0,end:0}}else f=null;for(k1={focusedElem:s,selectionRange:f},hp=!1,Yn=l;Yn!==null;)if(l=Yn,s=l.child,(l.subtreeFlags&1024)!==0&&s!==null)s.return=l,Yn=s;else for(;Yn!==null;){switch(l=Yn,A=l.alternate,s=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&A!==null){s=void 0,f=l,x=A.memoizedProps,A=A.memoizedState,g=f.stateNode;try{var tt=rc(f.type,x,f.elementType===f.type);s=g.getSnapshotBeforeUpdate(tt,A),g.__reactInternalSnapshotBeforeUpdate=s}catch(Ze){Wt(f,f.return,Ze)}}break;case 3:if((s&1024)!==0){if(s=l.stateNode.containerInfo,f=s.nodeType,f===9)P1(s);else if(f===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":P1(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=l.sibling,s!==null){s.return=l.return,Yn=s;break}Yn=l.return}}function LC(s,l,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:Co(s,f),g&4&&zh(5,f);break;case 1:if(Co(s,f),g&4)if(s=f.stateNode,l===null)try{s.componentDidMount()}catch(M){Wt(f,f.return,M)}else{var x=rc(f.type,l.memoizedProps);l=l.memoizedState;try{s.componentDidUpdate(x,l,s.__reactInternalSnapshotBeforeUpdate)}catch(M){Wt(f,f.return,M)}}g&64&&kC(f),g&512&&Hh(f,f.return);break;case 3:if(Co(s,f),g&64&&(s=f.updateQueue,s!==null)){if(l=null,f.child!==null)switch(f.child.tag){case 27:case 5:l=f.child.stateNode;break;case 1:l=f.child.stateNode}try{vN(s,l)}catch(M){Wt(f,f.return,M)}}break;case 27:l===null&&g&4&&RC(f);case 26:case 5:Co(s,f),l===null&&g&4&&IC(f),g&512&&Hh(f,f.return);break;case 12:Co(s,f);break;case 13:Co(s,f),g&4&&UC(s,f),g&64&&(s=f.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(f=SU.bind(null,f),$U(s,f))));break;case 22:if(g=f.memoizedState!==null||As,!g){l=l!==null&&l.memoizedState!==null||wn,x=As;var A=wn;As=g,(wn=l)&&!A?jo(s,f,(f.subtreeFlags&8772)!==0):Co(s,f),As=x,wn=A}break;case 30:break;default:Co(s,f)}}function VC(s){var l=s.alternate;l!==null&&(s.alternate=null,VC(l)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(l=s.stateNode,l!==null&&po(l)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var on=null,Rr=!1;function Ns(s,l,f){for(f=f.child;f!==null;)BC(s,l,f),f=f.sibling}function BC(s,l,f){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(je,f)}catch{}switch(f.tag){case 26:wn||ka(f,l),Ns(s,l,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:wn||ka(f,l);var g=on,x=Rr;Ro(f.type)&&(on=f.stateNode,Rr=!1),Ns(s,l,f),Jh(f.stateNode),on=g,Rr=x;break;case 5:wn||ka(f,l);case 6:if(g=on,x=Rr,on=null,Ns(s,l,f),on=g,Rr=x,on!==null)if(Rr)try{(on.nodeType===9?on.body:on.nodeName==="HTML"?on.ownerDocument.body:on).removeChild(f.stateNode)}catch(A){Wt(f,l,A)}else try{on.removeChild(f.stateNode)}catch(A){Wt(f,l,A)}break;case 18:on!==null&&(Rr?(s=on,Nj(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,f.stateNode),od(s)):Nj(on,f.stateNode));break;case 4:g=on,x=Rr,on=f.stateNode.containerInfo,Rr=!0,Ns(s,l,f),on=g,Rr=x;break;case 0:case 11:case 14:case 15:wn||No(2,f,l),wn||No(4,f,l),Ns(s,l,f);break;case 1:wn||(ka(f,l),g=f.stateNode,typeof g.componentWillUnmount=="function"&&OC(f,l,g)),Ns(s,l,f);break;case 21:Ns(s,l,f);break;case 22:wn=(g=wn)||f.memoizedState!==null,Ns(s,l,f),wn=g;break;default:Ns(s,l,f)}}function UC(s,l){if(l.memoizedState===null&&(s=l.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{od(s)}catch(f){Wt(l,l.return,f)}}function gU(s){switch(s.tag){case 13:case 19:var l=s.stateNode;return l===null&&(l=s.stateNode=new MC),l;case 22:return s=s.stateNode,l=s._retryCache,l===null&&(l=s._retryCache=new MC),l;default:throw Error(r(435,s.tag))}}function o1(s,l){var f=gU(s);l.forEach(function(g){var x=TU.bind(null,s,g);f.has(g)||(f.add(g),g.then(x,x))})}function Jr(s,l){var f=l.deletions;if(f!==null)for(var g=0;g<f.length;g++){var x=f[g],A=s,M=l,F=M;e:for(;F!==null;){switch(F.tag){case 27:if(Ro(F.type)){on=F.stateNode,Rr=!1;break e}break;case 5:on=F.stateNode,Rr=!1;break e;case 3:case 4:on=F.stateNode.containerInfo,Rr=!0;break e}F=F.return}if(on===null)throw Error(r(160));BC(A,M,x),on=null,Rr=!1,A=x.alternate,A!==null&&(A.return=null),x.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)$C(l,s),l=l.sibling}var Zi=null;function $C(s,l){var f=s.alternate,g=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Jr(l,s),ei(s),g&4&&(No(3,s,s.return),zh(3,s),No(5,s,s.return));break;case 1:Jr(l,s),ei(s),g&512&&(wn||f===null||ka(f,f.return)),g&64&&As&&(s=s.updateQueue,s!==null&&(g=s.callbacks,g!==null&&(f=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var x=Zi;if(Jr(l,s),ei(s),g&512&&(wn||f===null||ka(f,f.return)),g&4){var A=f!==null?f.memoizedState:null;if(g=s.memoizedState,f===null)if(g===null)if(s.stateNode===null){e:{g=s.type,f=s.memoizedProps,x=x.ownerDocument||x;t:switch(g){case"title":A=x.getElementsByTagName("title")[0],(!A||A[Ol]||A[Mn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=x.createElement(g),x.head.insertBefore(A,x.querySelector("head > title"))),or(A,g,f),A[Mn]=s,bn(A),g=A;break e;case"link":var M=Rj("link","href",x).get(g+(f.href||""));if(M){for(var F=0;F<M.length;F++)if(A=M[F],A.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&A.getAttribute("rel")===(f.rel==null?null:f.rel)&&A.getAttribute("title")===(f.title==null?null:f.title)&&A.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){M.splice(F,1);break t}}A=x.createElement(g),or(A,g,f),x.head.appendChild(A);break;case"meta":if(M=Rj("meta","content",x).get(g+(f.content||""))){for(F=0;F<M.length;F++)if(A=M[F],A.getAttribute("content")===(f.content==null?null:""+f.content)&&A.getAttribute("name")===(f.name==null?null:f.name)&&A.getAttribute("property")===(f.property==null?null:f.property)&&A.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&A.getAttribute("charset")===(f.charSet==null?null:f.charSet)){M.splice(F,1);break t}}A=x.createElement(g),or(A,g,f),x.head.appendChild(A);break;default:throw Error(r(468,g))}A[Mn]=s,bn(A),g=A}s.stateNode=g}else Mj(x,s.type,s.stateNode);else s.stateNode=Pj(x,g,s.memoizedProps);else A!==g?(A===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):A.count--,g===null?Mj(x,s.type,s.stateNode):Pj(x,g,s.memoizedProps)):g===null&&s.stateNode!==null&&r1(s,s.memoizedProps,f.memoizedProps)}break;case 27:Jr(l,s),ei(s),g&512&&(wn||f===null||ka(f,f.return)),f!==null&&g&4&&r1(s,s.memoizedProps,f.memoizedProps);break;case 5:if(Jr(l,s),ei(s),g&512&&(wn||f===null||ka(f,f.return)),s.flags&32){x=s.stateNode;try{wi(x,"")}catch(ue){Wt(s,s.return,ue)}}g&4&&s.stateNode!=null&&(x=s.memoizedProps,r1(s,x,f!==null?f.memoizedProps:x)),g&1024&&(s1=!0);break;case 6:if(Jr(l,s),ei(s),g&4){if(s.stateNode===null)throw Error(r(162));g=s.memoizedProps,f=s.stateNode;try{f.nodeValue=g}catch(ue){Wt(s,s.return,ue)}}break;case 3:if(cp=null,x=Zi,Zi=op(l.containerInfo),Jr(l,s),Zi=x,ei(s),g&4&&f!==null&&f.memoizedState.isDehydrated)try{od(l.containerInfo)}catch(ue){Wt(s,s.return,ue)}s1&&(s1=!1,FC(s));break;case 4:g=Zi,Zi=op(s.stateNode.containerInfo),Jr(l,s),ei(s),Zi=g;break;case 12:Jr(l,s),ei(s);break;case 13:Jr(l,s),ei(s),s.child.flags&8192&&s.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(d1=Rt()),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,o1(s,g)));break;case 22:x=s.memoizedState!==null;var W=f!==null&&f.memoizedState!==null,ie=As,ge=wn;if(As=ie||x,wn=ge||W,Jr(l,s),wn=ge,As=ie,ei(s),g&8192)e:for(l=s.stateNode,l._visibility=x?l._visibility&-2:l._visibility|1,x&&(f===null||W||As||wn||ic(s)),f=null,l=s;;){if(l.tag===5||l.tag===26){if(f===null){W=f=l;try{if(A=W.stateNode,x)M=A.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{F=W.stateNode;var ve=W.memoizedProps.style,le=ve!=null&&ve.hasOwnProperty("display")?ve.display:null;F.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(ue){Wt(W,W.return,ue)}}}else if(l.tag===6){if(f===null){W=l;try{W.stateNode.nodeValue=x?"":W.memoizedProps}catch(ue){Wt(W,W.return,ue)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===s)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===s)break e;for(;l.sibling===null;){if(l.return===null||l.return===s)break e;f===l&&(f=null),l=l.return}f===l&&(f=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=s.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,o1(s,f))));break;case 19:Jr(l,s),ei(s),g&4&&(g=s.updateQueue,g!==null&&(s.updateQueue=null,o1(s,g)));break;case 30:break;case 21:break;default:Jr(l,s),ei(s)}}function ei(s){var l=s.flags;if(l&2){try{for(var f,g=s.return;g!==null;){if(PC(g)){f=g;break}g=g.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var x=f.stateNode,A=i1(s);Wg(s,A,x);break;case 5:var M=f.stateNode;f.flags&32&&(wi(M,""),f.flags&=-33);var F=i1(s);Wg(s,F,M);break;case 3:case 4:var W=f.stateNode.containerInfo,ie=i1(s);a1(s,ie,W);break;default:throw Error(r(161))}}catch(ge){Wt(s,s.return,ge)}s.flags&=-3}l&4096&&(s.flags&=-4097)}function FC(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var l=s;FC(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),s=s.sibling}}function Co(s,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)LC(s,l.alternate,l),l=l.sibling}function ic(s){for(s=s.child;s!==null;){var l=s;switch(l.tag){case 0:case 11:case 14:case 15:No(4,l,l.return),ic(l);break;case 1:ka(l,l.return);var f=l.stateNode;typeof f.componentWillUnmount=="function"&&OC(l,l.return,f),ic(l);break;case 27:Jh(l.stateNode);case 26:case 5:ka(l,l.return),ic(l);break;case 22:l.memoizedState===null&&ic(l);break;case 30:ic(l);break;default:ic(l)}s=s.sibling}}function jo(s,l,f){for(f=f&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,x=s,A=l,M=A.flags;switch(A.tag){case 0:case 11:case 15:jo(x,A,f),zh(4,A);break;case 1:if(jo(x,A,f),g=A,x=g.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(ie){Wt(g,g.return,ie)}if(g=A,x=g.updateQueue,x!==null){var F=g.stateNode;try{var W=x.shared.hiddenCallbacks;if(W!==null)for(x.shared.hiddenCallbacks=null,x=0;x<W.length;x++)yN(W[x],F)}catch(ie){Wt(g,g.return,ie)}}f&&M&64&&kC(A),Hh(A,A.return);break;case 27:RC(A);case 26:case 5:jo(x,A,f),f&&g===null&&M&4&&IC(A),Hh(A,A.return);break;case 12:jo(x,A,f);break;case 13:jo(x,A,f),f&&M&4&&UC(x,A);break;case 22:A.memoizedState===null&&jo(x,A,f),Hh(A,A.return);break;case 30:break;default:jo(x,A,f)}l=l.sibling}}function l1(s,l){var f=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(f=s.memoizedState.cachePool.pool),s=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(s=l.memoizedState.cachePool.pool),s!==f&&(s!=null&&s.refCount++,f!=null&&jh(f))}function c1(s,l){s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&jh(s))}function Oa(s,l,f,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)zC(s,l,f,g),l=l.sibling}function zC(s,l,f,g){var x=l.flags;switch(l.tag){case 0:case 11:case 15:Oa(s,l,f,g),x&2048&&zh(9,l);break;case 1:Oa(s,l,f,g);break;case 3:Oa(s,l,f,g),x&2048&&(s=null,l.alternate!==null&&(s=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==s&&(l.refCount++,s!=null&&jh(s)));break;case 12:if(x&2048){Oa(s,l,f,g),s=l.stateNode;try{var A=l.memoizedProps,M=A.id,F=A.onPostCommit;typeof F=="function"&&F(M,l.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(W){Wt(l,l.return,W)}}else Oa(s,l,f,g);break;case 13:Oa(s,l,f,g);break;case 23:break;case 22:A=l.stateNode,M=l.alternate,l.memoizedState!==null?A._visibility&2?Oa(s,l,f,g):qh(s,l):A._visibility&2?Oa(s,l,f,g):(A._visibility|=2,ju(s,l,f,g,(l.subtreeFlags&10256)!==0)),x&2048&&l1(M,l);break;case 24:Oa(s,l,f,g),x&2048&&c1(l.alternate,l);break;default:Oa(s,l,f,g)}}function ju(s,l,f,g,x){for(x=x&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var A=s,M=l,F=f,W=g,ie=M.flags;switch(M.tag){case 0:case 11:case 15:ju(A,M,F,W,x),zh(8,M);break;case 23:break;case 22:var ge=M.stateNode;M.memoizedState!==null?ge._visibility&2?ju(A,M,F,W,x):qh(A,M):(ge._visibility|=2,ju(A,M,F,W,x)),x&&ie&2048&&l1(M.alternate,M);break;case 24:ju(A,M,F,W,x),x&&ie&2048&&c1(M.alternate,M);break;default:ju(A,M,F,W,x)}l=l.sibling}}function qh(s,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var f=s,g=l,x=g.flags;switch(g.tag){case 22:qh(f,g),x&2048&&l1(g.alternate,g);break;case 24:qh(f,g),x&2048&&c1(g.alternate,g);break;default:qh(f,g)}l=l.sibling}}var Kh=8192;function Du(s){if(s.subtreeFlags&Kh)for(s=s.child;s!==null;)HC(s),s=s.sibling}function HC(s){switch(s.tag){case 26:Du(s),s.flags&Kh&&s.memoizedState!==null&&e$(Zi,s.memoizedState,s.memoizedProps);break;case 5:Du(s);break;case 3:case 4:var l=Zi;Zi=op(s.stateNode.containerInfo),Du(s),Zi=l;break;case 22:s.memoizedState===null&&(l=s.alternate,l!==null&&l.memoizedState!==null?(l=Kh,Kh=16777216,Du(s),Kh=l):Du(s));break;default:Du(s)}}function qC(s){var l=s.alternate;if(l!==null&&(s=l.child,s!==null)){l.child=null;do l=s.sibling,s.sibling=null,s=l;while(s!==null)}}function Gh(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var g=l[f];Yn=g,GC(g,s)}qC(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)KC(s),s=s.sibling}function KC(s){switch(s.tag){case 0:case 11:case 15:Gh(s),s.flags&2048&&No(9,s,s.return);break;case 3:Gh(s);break;case 12:Gh(s);break;case 22:var l=s.stateNode;s.memoizedState!==null&&l._visibility&2&&(s.return===null||s.return.tag!==13)?(l._visibility&=-3,Yg(s)):Gh(s);break;default:Gh(s)}}function Yg(s){var l=s.deletions;if((s.flags&16)!==0){if(l!==null)for(var f=0;f<l.length;f++){var g=l[f];Yn=g,GC(g,s)}qC(s)}for(s=s.child;s!==null;){switch(l=s,l.tag){case 0:case 11:case 15:No(8,l,l.return),Yg(l);break;case 22:f=l.stateNode,f._visibility&2&&(f._visibility&=-3,Yg(l));break;default:Yg(l)}s=s.sibling}}function GC(s,l){for(;Yn!==null;){var f=Yn;switch(f.tag){case 0:case 11:case 15:No(8,f,l);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:jh(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,Yn=g;else e:for(f=s;Yn!==null;){g=Yn;var x=g.sibling,A=g.return;if(VC(g),g===f){Yn=null;break e}if(x!==null){x.return=A,Yn=x;break e}Yn=A}}}var pU={getCacheForType:function(s){var l=mr(Bn),f=l.data.get(s);return f===void 0&&(f=s(),l.data.set(s,f)),f}},yU=typeof WeakMap=="function"?WeakMap:Map,Ut=0,Zt=null,gt=null,Et=0,$t=0,ti=null,Do=!1,ku=!1,u1=!1,Cs=0,mn=0,ko=0,ac=0,f1=0,Di=0,Ou=0,Wh=null,Mr=null,h1=!1,d1=0,Xg=1/0,Qg=null,Oo=null,sr=0,Io=null,Iu=null,Pu=0,m1=0,g1=null,WC=null,Yh=0,p1=null;function ni(){if((Ut&2)!==0&&Et!==0)return Et&-Et;if(q.T!==null){var s=wu;return s!==0?s:S1()}return mo()}function YC(){Di===0&&(Di=(Et&536870912)===0||Ot?ih():536870912);var s=ji.current;return s!==null&&(s.flags|=32),Di}function ri(s,l,f){(s===Zt&&($t===2||$t===9)||s.cancelPendingCommit!==null)&&(Ru(s,0),Po(s,Et,Di,!1)),ss(s,f),((Ut&2)===0||s!==Zt)&&(s===Zt&&((Ut&2)===0&&(ac|=f),mn===4&&Po(s,Et,Di,!1)),Ia(s))}function XC(s,l,f){if((Ut&6)!==0)throw Error(r(327));var g=!f&&(l&124)===0&&(l&s.expiredLanes)===0||is(s,l),x=g?xU(s,l):b1(s,l,!0),A=g;do{if(x===0){ku&&!g&&Po(s,l,0,!1);break}else{if(f=s.current.alternate,A&&!vU(f)){x=b1(s,l,!1),A=!1;continue}if(x===2){if(A=l,s.errorRecoveryDisabledLanes&A)var M=0;else M=s.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){l=M;e:{var F=s;x=Wh;var W=F.current.memoizedState.isDehydrated;if(W&&(Ru(F,M).flags|=256),M=b1(F,M,!1),M!==2){if(u1&&!W){F.errorRecoveryDisabledLanes|=A,ac|=A,x=4;break e}A=Mr,Mr=x,A!==null&&(Mr===null?Mr=A:Mr.push.apply(Mr,A))}x=M}if(A=!1,x!==2)continue}}if(x===1){Ru(s,0),Po(s,l,0,!0);break}e:{switch(g=s,A=x,A){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:Po(g,l,Di,!Do);break e;case 2:Mr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(x=d1+300-Rt(),10<x)){if(Po(g,l,Di,!Do),rs(g,0,!0)!==0)break e;g.timeoutHandle=Ej(QC.bind(null,g,f,Mr,Qg,h1,l,Di,ac,Ou,Do,A,2,-0,0),x);break e}QC(g,f,Mr,Qg,h1,l,Di,ac,Ou,Do,A,0,-0,0)}}break}while(!0);Ia(s)}function QC(s,l,f,g,x,A,M,F,W,ie,ge,ve,le,ue){if(s.timeoutHandle=-1,ve=l.subtreeFlags,(ve&8192||(ve&16785408)===16785408)&&(nd={stylesheets:null,count:0,unsuspend:JU},HC(l),ve=t$(),ve!==null)){s.cancelPendingCommit=ve(ij.bind(null,s,l,A,f,g,x,M,F,W,ge,1,le,ue)),Po(s,A,M,!ie);return}ij(s,l,A,f,g,x,M,F,W)}function vU(s){for(var l=s;;){var f=l.tag;if((f===0||f===11||f===15)&&l.flags&16384&&(f=l.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var x=f[g],A=x.getSnapshot;x=x.value;try{if(!Qr(A(),x))return!1}catch{return!1}}if(f=l.child,l.subtreeFlags&16384&&f!==null)f.return=l,l=f;else{if(l===s)break;for(;l.sibling===null;){if(l.return===null||l.return===s)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Po(s,l,f,g){l&=~f1,l&=~ac,s.suspendedLanes|=l,s.pingedLanes&=~l,g&&(s.warmLanes|=l),g=s.expirationTimes;for(var x=l;0<x;){var A=31-Bt(x),M=1<<A;g[A]=-1,x&=~M}f!==0&&va(s,f,l)}function Zg(){return(Ut&6)===0?(Xh(0),!1):!0}function y1(){if(gt!==null){if($t===0)var s=gt.return;else s=gt,xs=Jl=null,Pb(s),Nu=null,Uh=0,s=gt;for(;s!==null;)DC(s.alternate,s),s=s.return;gt=null}}function Ru(s,l){var f=s.timeoutHandle;f!==-1&&(s.timeoutHandle=-1,MU(f)),f=s.cancelPendingCommit,f!==null&&(s.cancelPendingCommit=null,f()),y1(),Zt=s,gt=f=ys(s.current,null),Et=l,$t=0,ti=null,Do=!1,ku=is(s,l),u1=!1,Ou=Di=f1=ac=ko=mn=0,Mr=Wh=null,h1=!1,(l&8)!==0&&(l|=l&32);var g=s.entangledLanes;if(g!==0)for(s=s.entanglements,g&=l;0<g;){var x=31-Bt(g),A=1<<x;l|=s[x],g&=~A}return Cs=l,xg(),f}function ZC(s,l){ut=null,q.H=Bg,l===kh||l===jg?(l=gN(),$t=3):l===hN?(l=gN(),$t=4):$t=l===pC?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,ti=l,gt===null&&(mn=1,Hg(s,Ei(l,s.current)))}function JC(){var s=q.H;return q.H=Bg,s===null?Bg:s}function ej(){var s=q.A;return q.A=pU,s}function v1(){mn=4,Do||(Et&4194048)!==Et&&ji.current!==null||(ku=!0),(ko&134217727)===0&&(ac&134217727)===0||Zt===null||Po(Zt,Et,Di,!1)}function b1(s,l,f){var g=Ut;Ut|=2;var x=JC(),A=ej();(Zt!==s||Et!==l)&&(Qg=null,Ru(s,l)),l=!1;var M=mn;e:do try{if($t!==0&&gt!==null){var F=gt,W=ti;switch($t){case 8:y1(),M=6;break e;case 3:case 2:case 9:case 6:ji.current===null&&(l=!0);var ie=$t;if($t=0,ti=null,Mu(s,F,W,ie),f&&ku){M=0;break e}break;default:ie=$t,$t=0,ti=null,Mu(s,F,W,ie)}}bU(),M=mn;break}catch(ge){ZC(s,ge)}while(!0);return l&&s.shellSuspendCounter++,xs=Jl=null,Ut=g,q.H=x,q.A=A,gt===null&&(Zt=null,Et=0,xg()),M}function bU(){for(;gt!==null;)tj(gt)}function xU(s,l){var f=Ut;Ut|=2;var g=JC(),x=ej();Zt!==s||Et!==l?(Qg=null,Xg=Rt()+500,Ru(s,l)):ku=is(s,l);e:do try{if($t!==0&&gt!==null){l=gt;var A=ti;t:switch($t){case 1:$t=0,ti=null,Mu(s,l,A,1);break;case 2:case 9:if(dN(A)){$t=0,ti=null,nj(l);break}l=function(){$t!==2&&$t!==9||Zt!==s||($t=7),Ia(s)},A.then(l,l);break e;case 3:$t=7;break e;case 4:$t=5;break e;case 7:dN(A)?($t=0,ti=null,nj(l)):($t=0,ti=null,Mu(s,l,A,7));break;case 5:var M=null;switch(gt.tag){case 26:M=gt.memoizedState;case 5:case 27:var F=gt;if(!M||Lj(M)){$t=0,ti=null;var W=F.sibling;if(W!==null)gt=W;else{var ie=F.return;ie!==null?(gt=ie,Jg(ie)):gt=null}break t}}$t=0,ti=null,Mu(s,l,A,5);break;case 6:$t=0,ti=null,Mu(s,l,A,6);break;case 8:y1(),mn=6;break e;default:throw Error(r(462))}}wU();break}catch(ge){ZC(s,ge)}while(!0);return xs=Jl=null,q.H=g,q.A=x,Ut=f,gt!==null?0:(Zt=null,Et=0,xg(),mn)}function wU(){for(;gt!==null&&!Ke();)tj(gt)}function tj(s){var l=CC(s.alternate,s,Cs);s.memoizedProps=s.pendingProps,l===null?Jg(s):gt=l}function nj(s){var l=s,f=l.alternate;switch(l.tag){case 15:case 0:l=_C(f,l,l.pendingProps,l.type,void 0,Et);break;case 11:l=_C(f,l,l.pendingProps,l.type.render,l.ref,Et);break;case 5:Pb(l);default:DC(f,l),l=gt=rN(l,Cs),l=CC(f,l,Cs)}s.memoizedProps=s.pendingProps,l===null?Jg(s):gt=l}function Mu(s,l,f,g){xs=Jl=null,Pb(l),Nu=null,Uh=0;var x=l.return;try{if(uU(s,x,l,f,Et)){mn=1,Hg(s,Ei(f,s.current)),gt=null;return}}catch(A){if(x!==null)throw gt=x,A;mn=1,Hg(s,Ei(f,s.current)),gt=null;return}l.flags&32768?(Ot||g===1?s=!0:ku||(Et&536870912)!==0?s=!1:(Do=s=!0,(g===2||g===9||g===3||g===6)&&(g=ji.current,g!==null&&g.tag===13&&(g.flags|=16384))),rj(l,s)):Jg(l)}function Jg(s){var l=s;do{if((l.flags&32768)!==0){rj(l,Do);return}s=l.return;var f=hU(l.alternate,l,Cs);if(f!==null){gt=f;return}if(l=l.sibling,l!==null){gt=l;return}gt=l=s}while(l!==null);mn===0&&(mn=5)}function rj(s,l){do{var f=dU(s.alternate,s);if(f!==null){f.flags&=32767,gt=f;return}if(f=s.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!l&&(s=s.sibling,s!==null)){gt=s;return}gt=s=f}while(s!==null);mn=6,gt=null}function ij(s,l,f,g,x,A,M,F,W){s.cancelPendingCommit=null;do ep();while(sr!==0);if((Ut&6)!==0)throw Error(r(327));if(l!==null){if(l===s.current)throw Error(r(177));if(A=l.lanes|l.childLanes,A|=cb,sh(s,f,A,M,F,W),s===Zt&&(gt=Zt=null,Et=0),Iu=l,Io=s,Pu=f,m1=A,g1=x,WC=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,EU(ae,function(){return cj(),null})):(s.callbackNode=null,s.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=q.T,q.T=null,x=G.p,G.p=2,M=Ut,Ut|=4;try{mU(s,l,f)}finally{Ut=M,G.p=x,q.T=g}}sr=1,aj(),sj(),oj()}}function aj(){if(sr===1){sr=0;var s=Io,l=Iu,f=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||f){f=q.T,q.T=null;var g=G.p;G.p=2;var x=Ut;Ut|=4;try{$C(l,s);var A=k1,M=G2(s.containerInfo),F=A.focusedElem,W=A.selectionRange;if(M!==F&&F&&F.ownerDocument&&K2(F.ownerDocument.documentElement,F)){if(W!==null&&ib(F)){var ie=W.start,ge=W.end;if(ge===void 0&&(ge=ie),"selectionStart"in F)F.selectionStart=ie,F.selectionEnd=Math.min(ge,F.value.length);else{var ve=F.ownerDocument||document,le=ve&&ve.defaultView||window;if(le.getSelection){var ue=le.getSelection(),tt=F.textContent.length,Ze=Math.min(W.start,tt),Gt=W.end===void 0?Ze:Math.min(W.end,tt);!ue.extend&&Ze>Gt&&(M=Gt,Gt=Ze,Ze=M);var J=q2(F,Ze),Q=q2(F,Gt);if(J&&Q&&(ue.rangeCount!==1||ue.anchorNode!==J.node||ue.anchorOffset!==J.offset||ue.focusNode!==Q.node||ue.focusOffset!==Q.offset)){var re=ve.createRange();re.setStart(J.node,J.offset),ue.removeAllRanges(),Ze>Gt?(ue.addRange(re),ue.extend(Q.node,Q.offset)):(re.setEnd(Q.node,Q.offset),ue.addRange(re))}}}}for(ve=[],ue=F;ue=ue.parentNode;)ue.nodeType===1&&ve.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof F.focus=="function"&&F.focus(),F=0;F<ve.length;F++){var ye=ve[F];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}hp=!!D1,k1=D1=null}finally{Ut=x,G.p=g,q.T=f}}s.current=l,sr=2}}function sj(){if(sr===2){sr=0;var s=Io,l=Iu,f=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||f){f=q.T,q.T=null;var g=G.p;G.p=2;var x=Ut;Ut|=4;try{LC(s,l.alternate,l)}finally{Ut=x,G.p=g,q.T=f}}sr=3}}function oj(){if(sr===4||sr===3){sr=0,kt();var s=Io,l=Iu,f=Pu,g=WC;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?sr=5:(sr=0,Iu=Io=null,lj(s,s.pendingLanes));var x=s.pendingLanes;if(x===0&&(Oo=null),Jc(f),l=l.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(je,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=q.T,x=G.p,G.p=2,q.T=null;try{for(var A=s.onRecoverableError,M=0;M<g.length;M++){var F=g[M];A(F.value,{componentStack:F.stack})}}finally{q.T=l,G.p=x}}(Pu&3)!==0&&ep(),Ia(s),x=s.pendingLanes,(f&4194090)!==0&&(x&42)!==0?s===p1?Yh++:(Yh=0,p1=s):Yh=0,Xh(0)}}function lj(s,l){(s.pooledCacheLanes&=l)===0&&(l=s.pooledCache,l!=null&&(s.pooledCache=null,jh(l)))}function ep(s){return aj(),sj(),oj(),cj()}function cj(){if(sr!==5)return!1;var s=Io,l=m1;m1=0;var f=Jc(Pu),g=q.T,x=G.p;try{G.p=32>f?32:f,q.T=null,f=g1,g1=null;var A=Io,M=Pu;if(sr=0,Iu=Io=null,Pu=0,(Ut&6)!==0)throw Error(r(331));var F=Ut;if(Ut|=4,KC(A.current),zC(A,A.current,M,f),Ut=F,Xh(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(je,A)}catch{}return!0}finally{G.p=x,q.T=g,lj(s,l)}}function uj(s,l,f){l=Ei(f,l),l=Wb(s.stateNode,l,2),s=So(s,l,2),s!==null&&(ss(s,2),Ia(s))}function Wt(s,l,f){if(s.tag===3)uj(s,s,f);else for(;l!==null;){if(l.tag===3){uj(l,s,f);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Oo===null||!Oo.has(g))){s=Ei(f,s),f=mC(2),g=So(l,f,2),g!==null&&(gC(f,g,l,s),ss(g,2),Ia(g));break}}l=l.return}}function x1(s,l,f){var g=s.pingCache;if(g===null){g=s.pingCache=new yU;var x=new Set;g.set(l,x)}else x=g.get(l),x===void 0&&(x=new Set,g.set(l,x));x.has(f)||(u1=!0,x.add(f),s=_U.bind(null,s,l,f),l.then(s,s))}function _U(s,l,f){var g=s.pingCache;g!==null&&g.delete(l),s.pingedLanes|=s.suspendedLanes&f,s.warmLanes&=~f,Zt===s&&(Et&f)===f&&(mn===4||mn===3&&(Et&62914560)===Et&&300>Rt()-d1?(Ut&2)===0&&Ru(s,0):f1|=f,Ou===Et&&(Ou=0)),Ia(s)}function fj(s,l){l===0&&(l=ah()),s=yu(s,l),s!==null&&(ss(s,l),Ia(s))}function SU(s){var l=s.memoizedState,f=0;l!==null&&(f=l.retryLane),fj(s,f)}function TU(s,l){var f=0;switch(s.tag){case 13:var g=s.stateNode,x=s.memoizedState;x!==null&&(f=x.retryLane);break;case 19:g=s.stateNode;break;case 22:g=s.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(l),fj(s,f)}function EU(s,l){return Pe(s,l)}var tp=null,Lu=null,w1=!1,np=!1,_1=!1,sc=0;function Ia(s){s!==Lu&&s.next===null&&(Lu===null?tp=Lu=s:Lu=Lu.next=s),np=!0,w1||(w1=!0,NU())}function Xh(s,l){if(!_1&&np){_1=!0;do for(var f=!1,g=tp;g!==null;){if(s!==0){var x=g.pendingLanes;if(x===0)var A=0;else{var M=g.suspendedLanes,F=g.pingedLanes;A=(1<<31-Bt(42|s)+1)-1,A&=x&~(M&~F),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(f=!0,gj(g,A))}else A=Et,A=rs(g,g===Zt?A:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(A&3)===0||is(g,A)||(f=!0,gj(g,A));g=g.next}while(f);_1=!1}}function AU(){hj()}function hj(){np=w1=!1;var s=0;sc!==0&&(RU()&&(s=sc),sc=0);for(var l=Rt(),f=null,g=tp;g!==null;){var x=g.next,A=dj(g,l);A===0?(g.next=null,f===null?tp=x:f.next=x,x===null&&(Lu=f)):(f=g,(s!==0||(A&3)!==0)&&(np=!0)),g=x}Xh(s)}function dj(s,l){for(var f=s.suspendedLanes,g=s.pingedLanes,x=s.expirationTimes,A=s.pendingLanes&-62914561;0<A;){var M=31-Bt(A),F=1<<M,W=x[M];W===-1?((F&f)===0||(F&g)!==0)&&(x[M]=fo(F,l)):W<=l&&(s.expiredLanes|=F),A&=~F}if(l=Zt,f=Et,f=rs(s,s===l?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),g=s.callbackNode,f===0||s===l&&($t===2||$t===9)||s.cancelPendingCommit!==null)return g!==null&&g!==null&&qe(g),s.callbackNode=null,s.callbackPriority=0;if((f&3)===0||is(s,f)){if(l=f&-f,l===s.callbackPriority)return l;switch(g!==null&&qe(g),Jc(f)){case 2:case 8:f=X;break;case 32:f=ae;break;case 268435456:f=De;break;default:f=ae}return g=mj.bind(null,s),f=Pe(f,g),s.callbackPriority=l,s.callbackNode=f,l}return g!==null&&g!==null&&qe(g),s.callbackPriority=2,s.callbackNode=null,2}function mj(s,l){if(sr!==0&&sr!==5)return s.callbackNode=null,s.callbackPriority=0,null;var f=s.callbackNode;if(ep()&&s.callbackNode!==f)return null;var g=Et;return g=rs(s,s===Zt?g:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),g===0?null:(XC(s,g,l),dj(s,Rt()),s.callbackNode!=null&&s.callbackNode===f?mj.bind(null,s):null)}function gj(s,l){if(ep())return null;XC(s,l,!0)}function NU(){LU(function(){(Ut&6)!==0?Pe(Wr,AU):hj()})}function S1(){return sc===0&&(sc=ih()),sc}function pj(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:au(""+s)}function yj(s,l){var f=l.ownerDocument.createElement("input");return f.name=l.name,f.value=l.value,s.id&&f.setAttribute("form",s.id),l.parentNode.insertBefore(f,l),s=new FormData(s),f.parentNode.removeChild(f),s}function CU(s,l,f,g,x){if(l==="submit"&&f&&f.stateNode===x){var A=pj((x[Tn]||null).action),M=g.submitter;M&&(l=(l=M[Tn]||null)?pj(l.formAction):M.getAttribute("formAction"),l!==null&&(A=l,M=null));var F=new su("action","action",null,g,x);s.push({event:F,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(sc!==0){var W=M?yj(x,M):new FormData(x);zb(f,{pending:!0,data:W,method:x.method,action:A},null,W)}}else typeof A=="function"&&(F.preventDefault(),W=M?yj(x,M):new FormData(x),zb(f,{pending:!0,data:W,method:x.method,action:A},A,W))},currentTarget:x}]})}}for(var T1=0;T1<lb.length;T1++){var E1=lb[T1],jU=E1.toLowerCase(),DU=E1[0].toUpperCase()+E1.slice(1);Qi(jU,"on"+DU)}Qi(X2,"onAnimationEnd"),Qi(Q2,"onAnimationIteration"),Qi(Z2,"onAnimationStart"),Qi("dblclick","onDoubleClick"),Qi("focusin","onFocus"),Qi("focusout","onBlur"),Qi(GB,"onTransitionRun"),Qi(WB,"onTransitionStart"),Qi(YB,"onTransitionCancel"),Qi(J2,"onTransitionEnd"),ls("onMouseEnter",["mouseout","mouseover"]),ls("onMouseLeave",["mouseout","mouseover"]),ls("onPointerEnter",["pointerout","pointerover"]),ls("onPointerLeave",["pointerout","pointerover"]),Yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kU=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qh));function vj(s,l){l=(l&4)!==0;for(var f=0;f<s.length;f++){var g=s[f],x=g.event;g=g.listeners;e:{var A=void 0;if(l)for(var M=g.length-1;0<=M;M--){var F=g[M],W=F.instance,ie=F.currentTarget;if(F=F.listener,W!==A&&x.isPropagationStopped())break e;A=F,x.currentTarget=ie;try{A(x)}catch(ge){zg(ge)}x.currentTarget=null,A=W}else for(M=0;M<g.length;M++){if(F=g[M],W=F.instance,ie=F.currentTarget,F=F.listener,W!==A&&x.isPropagationStopped())break e;A=F,x.currentTarget=ie;try{A(x)}catch(ge){zg(ge)}x.currentTarget=null,A=W}}}}function pt(s,l){var f=l[lh];f===void 0&&(f=l[lh]=new Set);var g=s+"__bubble";f.has(g)||(bj(l,s,2,!1),f.add(g))}function A1(s,l,f){var g=0;l&&(g|=4),bj(f,s,g,l)}var rp="_reactListening"+Math.random().toString(36).slice(2);function N1(s){if(!s[rp]){s[rp]=!0,ch.forEach(function(f){f!=="selectionchange"&&(kU.has(f)||A1(f,!1,s),A1(f,!0,s))});var l=s.nodeType===9?s:s.ownerDocument;l===null||l[rp]||(l[rp]=!0,A1("selectionchange",!1,l))}}function bj(s,l,f,g){switch(zj(l)){case 2:var x=i$;break;case 8:x=a$;break;default:x=$1}f=x.bind(null,l,f,s),x=void 0,!Si||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(x=!0),g?x!==void 0?s.addEventListener(l,f,{capture:!0,passive:x}):s.addEventListener(l,f,!0):x!==void 0?s.addEventListener(l,f,{passive:x}):s.addEventListener(l,f,!1)}function C1(s,l,f,g,x){var A=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var M=g.tag;if(M===3||M===4){var F=g.stateNode.containerInfo;if(F===x)break;if(M===4)for(M=g.return;M!==null;){var W=M.tag;if((W===3||W===4)&&M.stateNode.containerInfo===x)return;M=M.return}for(;F!==null;){if(M=os(F),M===null)return;if(W=M.tag,W===5||W===6||W===26||W===27){g=A=M;continue e}F=F.parentNode}}g=g.return}ag(function(){var ie=A,ge=_i(f),ve=[];e:{var le=eN.get(s);if(le!==void 0){var ue=su,tt=s;switch(s){case"keypress":if(Ta(f)===0)break e;case"keydown":case"keyup":ue=hu;break;case"focusin":tt="focus",ue=cu;break;case"focusout":tt="blur",ue=cu;break;case"beforeblur":case"afterblur":ue=cu;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Ti;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=eb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=dg;break;case X2:case Q2:case Z2:ue=uu;break;case J2:ue=gg;break;case"scroll":case"scrollend":ue=sg;break;case"wheel":ue=du;break;case"copy":case"cut":case"paste":ue=fu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=wh;break;case"toggle":case"beforetoggle":ue=yg}var Ze=(l&4)!==0,Gt=!Ze&&(s==="scroll"||s==="scrollend"),J=Ze?le!==null?le+"Capture":null:le;Ze=[];for(var Q=ie,re;Q!==null;){var ye=Q;if(re=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||re===null||J===null||(ye=Bl(Q,J),ye!=null&&Ze.push(Zh(Q,ye,re))),Gt)break;Q=Q.return}0<Ze.length&&(le=new ue(le,tt,null,f,ge),ve.push({event:le,listeners:Ze}))}}if((l&7)===0){e:{if(le=s==="mouseover"||s==="pointerover",ue=s==="mouseout"||s==="pointerout",le&&f!==fs&&(tt=f.relatedTarget||f.fromElement)&&(os(tt)||tt[xi]))break e;if((ue||le)&&(le=ge.window===ge?ge:(le=ge.ownerDocument)?le.defaultView||le.parentWindow:window,ue?(tt=f.relatedTarget||f.toElement,ue=ie,tt=tt?os(tt):null,tt!==null&&(Gt=a(tt),Ze=tt.tag,tt!==Gt||Ze!==5&&Ze!==27&&Ze!==6)&&(tt=null)):(ue=null,tt=ie),ue!==tt)){if(Ze=Ti,ye="onMouseLeave",J="onMouseEnter",Q="mouse",(s==="pointerout"||s==="pointerover")&&(Ze=wh,ye="onPointerLeave",J="onPointerEnter",Q="pointer"),Gt=ue==null?le:xa(ue),re=tt==null?le:xa(tt),le=new Ze(ye,Q+"leave",ue,f,ge),le.target=Gt,le.relatedTarget=re,ye=null,os(ge)===ie&&(Ze=new Ze(J,Q+"enter",tt,f,ge),Ze.target=re,Ze.relatedTarget=Gt,ye=Ze),Gt=ye,ue&&tt)t:{for(Ze=ue,J=tt,Q=0,re=Ze;re;re=Vu(re))Q++;for(re=0,ye=J;ye;ye=Vu(ye))re++;for(;0<Q-re;)Ze=Vu(Ze),Q--;for(;0<re-Q;)J=Vu(J),re--;for(;Q--;){if(Ze===J||J!==null&&Ze===J.alternate)break t;Ze=Vu(Ze),J=Vu(J)}Ze=null}else Ze=null;ue!==null&&xj(ve,le,ue,Ze,!1),tt!==null&&Gt!==null&&xj(ve,Gt,tt,Ze,!0)}}e:{if(le=ie?xa(ie):window,ue=le.nodeName&&le.nodeName.toLowerCase(),ue==="select"||ue==="input"&&le.type==="file")var Ve=B2;else if(Vn(le))if(U2)Ve=HB;else{Ve=FB;var dt=$B}else ue=le.nodeName,!ue||ue.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?ie&&mh(ie.elementType)&&(Ve=B2):Ve=zB;if(Ve&&(Ve=Ve(s,ie))){ps(ve,Ve,f,ge);break e}dt&&dt(s,le,ie),s==="focusout"&&ie&&le.type==="number"&&ie.memoizedProps.value!=null&&vo(le,"number",le.value)}switch(dt=ie?xa(ie):window,s){case"focusin":(Vn(dt)||dt.contentEditable==="true")&&(mu=dt,ab=ie,Th=null);break;case"focusout":Th=ab=mu=null;break;case"mousedown":sb=!0;break;case"contextmenu":case"mouseup":case"dragend":sb=!1,W2(ve,f,ge);break;case"selectionchange":if(KB)break;case"keydown":case"keyup":W2(ve,f,ge)}var ze;if(Na)e:{switch(s){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else St?he(s,f)&&(Je="onCompositionEnd"):s==="keydown"&&f.keyCode===229&&(Je="onCompositionStart");Je&&(P&&f.locale!=="ko"&&(St||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&St&&(ze=ph()):(Sa=ge,bo="value"in Sa?Sa.value:Sa.textContent,St=!0)),dt=ip(ie,Je),0<dt.length&&(Je=new bh(Je,s,null,f,ge),ve.push({event:Je,listeners:dt}),ze?Je.data=ze:(ze=Te(f),ze!==null&&(Je.data=ze)))),(ze=j?Ln(s,f):Tt(s,f))&&(Je=ip(ie,"onBeforeInput"),0<Je.length&&(dt=new bh("onBeforeInput","beforeinput",null,f,ge),ve.push({event:dt,listeners:Je}),dt.data=ze)),CU(ve,s,ie,f,ge)}vj(ve,l)})}function Zh(s,l,f){return{instance:s,listener:l,currentTarget:f}}function ip(s,l){for(var f=l+"Capture",g=[];s!==null;){var x=s,A=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||A===null||(x=Bl(s,f),x!=null&&g.unshift(Zh(s,x,A)),x=Bl(s,l),x!=null&&g.push(Zh(s,x,A))),s.tag===3)return g;s=s.return}return[]}function Vu(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function xj(s,l,f,g,x){for(var A=l._reactName,M=[];f!==null&&f!==g;){var F=f,W=F.alternate,ie=F.stateNode;if(F=F.tag,W!==null&&W===g)break;F!==5&&F!==26&&F!==27||ie===null||(W=ie,x?(ie=Bl(f,A),ie!=null&&M.unshift(Zh(f,ie,W))):x||(ie=Bl(f,A),ie!=null&&M.push(Zh(f,ie,W)))),f=f.return}M.length!==0&&s.push({event:l,listeners:M})}var OU=/\r\n?/g,IU=/\u0000|\uFFFD/g;function wj(s){return(typeof s=="string"?s:""+s).replace(OU,`
`).replace(IU,"")}function _j(s,l){return l=wj(l),wj(s)===l}function ap(){}function Kt(s,l,f,g,x,A){switch(f){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||wi(s,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&wi(s,""+g);break;case"className":wa(s,"class",g);break;case"tabIndex":wa(s,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":wa(s,f,g);break;case"style":dh(s,g,A);break;case"data":if(l!=="object"){wa(s,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||f!=="href")){s.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){s.removeAttribute(f);break}g=au(""+g),s.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){s.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(f==="formAction"?(l!=="input"&&Kt(s,l,"name",x.name,x,null),Kt(s,l,"formEncType",x.formEncType,x,null),Kt(s,l,"formMethod",x.formMethod,x,null),Kt(s,l,"formTarget",x.formTarget,x,null)):(Kt(s,l,"encType",x.encType,x,null),Kt(s,l,"method",x.method,x,null),Kt(s,l,"target",x.target,x,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){s.removeAttribute(f);break}g=au(""+g),s.setAttribute(f,g);break;case"onClick":g!=null&&(s.onclick=ap);break;case"onScroll":g!=null&&pt("scroll",s);break;case"onScrollEnd":g!=null&&pt("scrollend",s);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(x.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"multiple":s.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":s.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){s.removeAttribute("xlink:href");break}f=au(""+g),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(f,""+g):s.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(f,""):s.removeAttribute(f);break;case"capture":case"download":g===!0?s.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?s.setAttribute(f,g):s.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?s.setAttribute(f,g):s.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?s.removeAttribute(f):s.setAttribute(f,g);break;case"popover":pt("beforetoggle",s),pt("toggle",s),yo(s,"popover",g);break;case"xlinkActuate":rr(s,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":rr(s,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":rr(s,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":rr(s,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":rr(s,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":rr(s,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":rr(s,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":rr(s,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":rr(s,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":yo(s,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Z0.get(f)||f,yo(s,f,g))}}function j1(s,l,f,g,x,A){switch(f){case"style":dh(s,g,A);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(x.children!=null)throw Error(r(60));s.innerHTML=f}}break;case"children":typeof g=="string"?wi(s,g):(typeof g=="number"||typeof g=="bigint")&&wi(s,""+g);break;case"onScroll":g!=null&&pt("scroll",s);break;case"onScrollEnd":g!=null&&pt("scrollend",s);break;case"onClick":g!=null&&(s.onclick=ap);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!eu.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(x=f.endsWith("Capture"),l=f.slice(2,x?f.length-7:void 0),A=s[Tn]||null,A=A!=null?A[f]:null,typeof A=="function"&&s.removeEventListener(l,A,x),typeof g=="function")){typeof A!="function"&&A!==null&&(f in s?s[f]=null:s.hasAttribute(f)&&s.removeAttribute(f)),s.addEventListener(l,g,x);break e}f in s?s[f]=g:g===!0?s.setAttribute(f,""):yo(s,f,g)}}}function or(s,l,f){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",s),pt("load",s);var g=!1,x=!1,A;for(A in f)if(f.hasOwnProperty(A)){var M=f[A];if(M!=null)switch(A){case"src":g=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Kt(s,l,A,M,f,null)}}x&&Kt(s,l,"srcSet",f.srcSet,f,null),g&&Kt(s,l,"src",f.src,f,null);return;case"input":pt("invalid",s);var F=A=M=x=null,W=null,ie=null;for(g in f)if(f.hasOwnProperty(g)){var ge=f[g];if(ge!=null)switch(g){case"name":x=ge;break;case"type":M=ge;break;case"checked":W=ge;break;case"defaultChecked":ie=ge;break;case"value":A=ge;break;case"defaultValue":F=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(r(137,l));break;default:Kt(s,l,g,ge,f,null)}}Ml(s,A,F,W,ie,M,x,!1),iu(s);return;case"select":pt("invalid",s),g=M=A=null;for(x in f)if(f.hasOwnProperty(x)&&(F=f[x],F!=null))switch(x){case"value":A=F;break;case"defaultValue":M=F;break;case"multiple":g=F;default:Kt(s,l,x,F,f,null)}l=A,f=M,s.multiple=!!g,l!=null?us(s,!!g,l,!1):f!=null&&us(s,!!g,f,!0);return;case"textarea":pt("invalid",s),A=x=g=null;for(M in f)if(f.hasOwnProperty(M)&&(F=f[M],F!=null))switch(M){case"value":g=F;break;case"defaultValue":x=F;break;case"children":A=F;break;case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(91));break;default:Kt(s,l,M,F,f,null)}Ll(s,g,x,A),iu(s);return;case"option":for(W in f)if(f.hasOwnProperty(W)&&(g=f[W],g!=null))switch(W){case"selected":s.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Kt(s,l,W,g,f,null)}return;case"dialog":pt("beforetoggle",s),pt("toggle",s),pt("cancel",s),pt("close",s);break;case"iframe":case"object":pt("load",s);break;case"video":case"audio":for(g=0;g<Qh.length;g++)pt(Qh[g],s);break;case"image":pt("error",s),pt("load",s);break;case"details":pt("toggle",s);break;case"embed":case"source":case"link":pt("error",s),pt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in f)if(f.hasOwnProperty(ie)&&(g=f[ie],g!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:Kt(s,l,ie,g,f,null)}return;default:if(mh(l)){for(ge in f)f.hasOwnProperty(ge)&&(g=f[ge],g!==void 0&&j1(s,l,ge,g,f,void 0));return}}for(F in f)f.hasOwnProperty(F)&&(g=f[F],g!=null&&Kt(s,l,F,g,f,null))}function PU(s,l,f,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,A=null,M=null,F=null,W=null,ie=null,ge=null;for(ue in f){var ve=f[ue];if(f.hasOwnProperty(ue)&&ve!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":W=ve;default:g.hasOwnProperty(ue)||Kt(s,l,ue,null,g,ve)}}for(var le in g){var ue=g[le];if(ve=f[le],g.hasOwnProperty(le)&&(ue!=null||ve!=null))switch(le){case"type":A=ue;break;case"name":x=ue;break;case"checked":ie=ue;break;case"defaultChecked":ge=ue;break;case"value":M=ue;break;case"defaultValue":F=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,l));break;default:ue!==ve&&Kt(s,l,le,ue,g,ve)}}Xr(s,M,F,W,ie,ge,A,x);return;case"select":ue=M=F=le=null;for(A in f)if(W=f[A],f.hasOwnProperty(A)&&W!=null)switch(A){case"value":break;case"multiple":ue=W;default:g.hasOwnProperty(A)||Kt(s,l,A,null,g,W)}for(x in g)if(A=g[x],W=f[x],g.hasOwnProperty(x)&&(A!=null||W!=null))switch(x){case"value":le=A;break;case"defaultValue":F=A;break;case"multiple":M=A;default:A!==W&&Kt(s,l,x,A,g,W)}l=F,f=M,g=ue,le!=null?us(s,!!f,le,!1):!!g!=!!f&&(l!=null?us(s,!!f,l,!0):us(s,!!f,f?[]:"",!1));return;case"textarea":ue=le=null;for(F in f)if(x=f[F],f.hasOwnProperty(F)&&x!=null&&!g.hasOwnProperty(F))switch(F){case"value":break;case"children":break;default:Kt(s,l,F,null,g,x)}for(M in g)if(x=g[M],A=f[M],g.hasOwnProperty(M)&&(x!=null||A!=null))switch(M){case"value":le=x;break;case"defaultValue":ue=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:x!==A&&Kt(s,l,M,x,g,A)}Ht(s,le,ue);return;case"option":for(var tt in f)if(le=f[tt],f.hasOwnProperty(tt)&&le!=null&&!g.hasOwnProperty(tt))switch(tt){case"selected":s.selected=!1;break;default:Kt(s,l,tt,null,g,le)}for(W in g)if(le=g[W],ue=f[W],g.hasOwnProperty(W)&&le!==ue&&(le!=null||ue!=null))switch(W){case"selected":s.selected=le&&typeof le!="function"&&typeof le!="symbol";break;default:Kt(s,l,W,le,g,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ze in f)le=f[Ze],f.hasOwnProperty(Ze)&&le!=null&&!g.hasOwnProperty(Ze)&&Kt(s,l,Ze,null,g,le);for(ie in g)if(le=g[ie],ue=f[ie],g.hasOwnProperty(ie)&&le!==ue&&(le!=null||ue!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,l));break;default:Kt(s,l,ie,le,g,ue)}return;default:if(mh(l)){for(var Gt in f)le=f[Gt],f.hasOwnProperty(Gt)&&le!==void 0&&!g.hasOwnProperty(Gt)&&j1(s,l,Gt,void 0,g,le);for(ge in g)le=g[ge],ue=f[ge],!g.hasOwnProperty(ge)||le===ue||le===void 0&&ue===void 0||j1(s,l,ge,le,g,ue);return}}for(var J in f)le=f[J],f.hasOwnProperty(J)&&le!=null&&!g.hasOwnProperty(J)&&Kt(s,l,J,null,g,le);for(ve in g)le=g[ve],ue=f[ve],!g.hasOwnProperty(ve)||le===ue||le==null&&ue==null||Kt(s,l,ve,le,g,ue)}var D1=null,k1=null;function sp(s){return s.nodeType===9?s:s.ownerDocument}function Sj(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Tj(s,l){if(s===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&l==="foreignObject"?0:s}function O1(s,l){return s==="textarea"||s==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var I1=null;function RU(){var s=window.event;return s&&s.type==="popstate"?s===I1?!1:(I1=s,!0):(I1=null,!1)}var Ej=typeof setTimeout=="function"?setTimeout:void 0,MU=typeof clearTimeout=="function"?clearTimeout:void 0,Aj=typeof Promise=="function"?Promise:void 0,LU=typeof queueMicrotask=="function"?queueMicrotask:typeof Aj<"u"?function(s){return Aj.resolve(null).then(s).catch(VU)}:Ej;function VU(s){setTimeout(function(){throw s})}function Ro(s){return s==="head"}function Nj(s,l){var f=l,g=0,x=0;do{var A=f.nextSibling;if(s.removeChild(f),A&&A.nodeType===8)if(f=A.data,f==="/$"){if(0<g&&8>g){f=g;var M=s.ownerDocument;if(f&1&&Jh(M.documentElement),f&2&&Jh(M.body),f&4)for(f=M.head,Jh(f),M=f.firstChild;M;){var F=M.nextSibling,W=M.nodeName;M[Ol]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&M.rel.toLowerCase()==="stylesheet"||f.removeChild(M),M=F}}if(x===0){s.removeChild(A),od(l);return}x--}else f==="$"||f==="$?"||f==="$!"?x++:g=f.charCodeAt(0)-48;else g=0;f=A}while(f);od(l)}function P1(s){var l=s.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var f=l;switch(l=l.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":P1(f),po(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}s.removeChild(f)}}function BU(s,l,f,g){for(;s.nodeType===1;){var x=f;if(s.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(g){if(!s[Ol])switch(l){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(A=s.getAttribute("rel"),A==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(A!==x.rel||s.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||s.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||s.getAttribute("title")!==(x.title==null?null:x.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(A=s.getAttribute("src"),(A!==(x.src==null?null:x.src)||s.getAttribute("type")!==(x.type==null?null:x.type)||s.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&A&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(l==="input"&&s.type==="hidden"){var A=x.name==null?null:""+x.name;if(x.type==="hidden"&&s.getAttribute("name")===A)return s}else return s;if(s=Ji(s.nextSibling),s===null)break}return null}function UU(s,l,f){if(l==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!f||(s=Ji(s.nextSibling),s===null))return null;return s}function R1(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function $U(s,l){var f=s.ownerDocument;if(s.data!=="$?"||f.readyState==="complete")l();else{var g=function(){l(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),s._reactRetry=g}}function Ji(s){for(;s!=null;s=s.nextSibling){var l=s.nodeType;if(l===1||l===3)break;if(l===8){if(l=s.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return s}var M1=null;function Cj(s){s=s.previousSibling;for(var l=0;s;){if(s.nodeType===8){var f=s.data;if(f==="$"||f==="$!"||f==="$?"){if(l===0)return s;l--}else f==="/$"&&l++}s=s.previousSibling}return null}function jj(s,l,f){switch(l=sp(f),s){case"html":if(s=l.documentElement,!s)throw Error(r(452));return s;case"head":if(s=l.head,!s)throw Error(r(453));return s;case"body":if(s=l.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Jh(s){for(var l=s.attributes;l.length;)s.removeAttributeNode(l[0]);po(s)}var ki=new Map,Dj=new Set;function op(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var js=G.d;G.d={f:FU,r:zU,D:HU,C:qU,L:KU,m:GU,X:YU,S:WU,M:XU};function FU(){var s=js.f(),l=Zg();return s||l}function zU(s){var l=ba(s);l!==null&&l.tag===5&&l.type==="form"?XN(l):js.r(s)}var Bu=typeof document>"u"?null:document;function kj(s,l,f){var g=Bu;if(g&&typeof l=="string"&&l){var x=En(l);x='link[rel="'+s+'"][href="'+x+'"]',typeof f=="string"&&(x+='[crossorigin="'+f+'"]'),Dj.has(x)||(Dj.add(x),s={rel:s,crossOrigin:f,href:l},g.querySelector(x)===null&&(l=g.createElement("link"),or(l,"link",s),bn(l),g.head.appendChild(l)))}}function HU(s){js.D(s),kj("dns-prefetch",s,null)}function qU(s,l){js.C(s,l),kj("preconnect",s,l)}function KU(s,l,f){js.L(s,l,f);var g=Bu;if(g&&s&&l){var x='link[rel="preload"][as="'+En(l)+'"]';l==="image"&&f&&f.imageSrcSet?(x+='[imagesrcset="'+En(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(x+='[imagesizes="'+En(f.imageSizes)+'"]')):x+='[href="'+En(s)+'"]';var A=x;switch(l){case"style":A=Uu(s);break;case"script":A=$u(s)}ki.has(A)||(s=m({rel:"preload",href:l==="image"&&f&&f.imageSrcSet?void 0:s,as:l},f),ki.set(A,s),g.querySelector(x)!==null||l==="style"&&g.querySelector(ed(A))||l==="script"&&g.querySelector(td(A))||(l=g.createElement("link"),or(l,"link",s),bn(l),g.head.appendChild(l)))}}function GU(s,l){js.m(s,l);var f=Bu;if(f&&s){var g=l&&typeof l.as=="string"?l.as:"script",x='link[rel="modulepreload"][as="'+En(g)+'"][href="'+En(s)+'"]',A=x;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=$u(s)}if(!ki.has(A)&&(s=m({rel:"modulepreload",href:s},l),ki.set(A,s),f.querySelector(x)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(td(A)))return}g=f.createElement("link"),or(g,"link",s),bn(g),f.head.appendChild(g)}}}function WU(s,l,f){js.S(s,l,f);var g=Bu;if(g&&s){var x=Tr(g).hoistableStyles,A=Uu(s);l=l||"default";var M=x.get(A);if(!M){var F={loading:0,preload:null};if(M=g.querySelector(ed(A)))F.loading=5;else{s=m({rel:"stylesheet",href:s,"data-precedence":l},f),(f=ki.get(A))&&L1(s,f);var W=M=g.createElement("link");bn(W),or(W,"link",s),W._p=new Promise(function(ie,ge){W.onload=ie,W.onerror=ge}),W.addEventListener("load",function(){F.loading|=1}),W.addEventListener("error",function(){F.loading|=2}),F.loading|=4,lp(M,l,g)}M={type:"stylesheet",instance:M,count:1,state:F},x.set(A,M)}}}function YU(s,l){js.X(s,l);var f=Bu;if(f&&s){var g=Tr(f).hoistableScripts,x=$u(s),A=g.get(x);A||(A=f.querySelector(td(x)),A||(s=m({src:s,async:!0},l),(l=ki.get(x))&&V1(s,l),A=f.createElement("script"),bn(A),or(A,"link",s),f.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},g.set(x,A))}}function XU(s,l){js.M(s,l);var f=Bu;if(f&&s){var g=Tr(f).hoistableScripts,x=$u(s),A=g.get(x);A||(A=f.querySelector(td(x)),A||(s=m({src:s,async:!0,type:"module"},l),(l=ki.get(x))&&V1(s,l),A=f.createElement("script"),bn(A),or(A,"link",s),f.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},g.set(x,A))}}function Oj(s,l,f,g){var x=(x=Fe.current)?op(x):null;if(!x)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(l=Uu(f.href),f=Tr(x).hoistableStyles,g=f.get(l),g||(g={type:"style",instance:null,count:0,state:null},f.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){s=Uu(f.href);var A=Tr(x).hoistableStyles,M=A.get(s);if(M||(x=x.ownerDocument||x,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(s,M),(A=x.querySelector(ed(s)))&&!A._p&&(M.instance=A,M.state.loading=5),ki.has(s)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},ki.set(s,f),A||QU(x,s,f,M.state))),l&&g===null)throw Error(r(528,""));return M}if(l&&g!==null)throw Error(r(529,""));return null;case"script":return l=f.async,f=f.src,typeof f=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=$u(f),f=Tr(x).hoistableScripts,g=f.get(l),g||(g={type:"script",instance:null,count:0,state:null},f.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Uu(s){return'href="'+En(s)+'"'}function ed(s){return'link[rel="stylesheet"]['+s+"]"}function Ij(s){return m({},s,{"data-precedence":s.precedence,precedence:null})}function QU(s,l,f,g){s.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=s.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),or(l,"link",f),bn(l),s.head.appendChild(l))}function $u(s){return'[src="'+En(s)+'"]'}function td(s){return"script[async]"+s}function Pj(s,l,f){if(l.count++,l.instance===null)switch(l.type){case"style":var g=s.querySelector('style[data-href~="'+En(f.href)+'"]');if(g)return l.instance=g,bn(g),g;var x=m({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(s.ownerDocument||s).createElement("style"),bn(g),or(g,"style",x),lp(g,f.precedence,s),l.instance=g;case"stylesheet":x=Uu(f.href);var A=s.querySelector(ed(x));if(A)return l.state.loading|=4,l.instance=A,bn(A),A;g=Ij(f),(x=ki.get(x))&&L1(g,x),A=(s.ownerDocument||s).createElement("link"),bn(A);var M=A;return M._p=new Promise(function(F,W){M.onload=F,M.onerror=W}),or(A,"link",g),l.state.loading|=4,lp(A,f.precedence,s),l.instance=A;case"script":return A=$u(f.src),(x=s.querySelector(td(A)))?(l.instance=x,bn(x),x):(g=f,(x=ki.get(A))&&(g=m({},f),V1(g,x)),s=s.ownerDocument||s,x=s.createElement("script"),bn(x),or(x,"link",g),s.head.appendChild(x),l.instance=x);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,lp(g,f.precedence,s));return l.instance}function lp(s,l,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=g.length?g[g.length-1]:null,A=x,M=0;M<g.length;M++){var F=g[M];if(F.dataset.precedence===l)A=F;else if(A!==x)break}A?A.parentNode.insertBefore(s,A.nextSibling):(l=f.nodeType===9?f.head:f,l.insertBefore(s,l.firstChild))}function L1(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.title==null&&(s.title=l.title)}function V1(s,l){s.crossOrigin==null&&(s.crossOrigin=l.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=l.referrerPolicy),s.integrity==null&&(s.integrity=l.integrity)}var cp=null;function Rj(s,l,f){if(cp===null){var g=new Map,x=cp=new Map;x.set(f,g)}else x=cp,g=x.get(f),g||(g=new Map,x.set(f,g));if(g.has(s))return g;for(g.set(s,null),f=f.getElementsByTagName(s),x=0;x<f.length;x++){var A=f[x];if(!(A[Ol]||A[Mn]||s==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var M=A.getAttribute(l)||"";M=s+M;var F=g.get(M);F?F.push(A):g.set(M,[A])}}return g}function Mj(s,l,f){s=s.ownerDocument||s,s.head.insertBefore(f,l==="title"?s.querySelector("head > title"):null)}function ZU(s,l,f){if(f===1||l.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return s=l.disabled,typeof l.precedence=="string"&&s==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Lj(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var nd=null;function JU(){}function e$(s,l,f){if(nd===null)throw Error(r(475));var g=nd;if(l.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var x=Uu(f.href),A=s.querySelector(ed(x));if(A){s=A._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(g.count++,g=up.bind(g),s.then(g,g)),l.state.loading|=4,l.instance=A,bn(A);return}A=s.ownerDocument||s,f=Ij(f),(x=ki.get(x))&&L1(f,x),A=A.createElement("link"),bn(A);var M=A;M._p=new Promise(function(F,W){M.onload=F,M.onerror=W}),or(A,"link",f),l.instance=A}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(l,s),(s=l.state.preload)&&(l.state.loading&3)===0&&(g.count++,l=up.bind(g),s.addEventListener("load",l),s.addEventListener("error",l))}}function t$(){if(nd===null)throw Error(r(475));var s=nd;return s.stylesheets&&s.count===0&&B1(s,s.stylesheets),0<s.count?function(l){var f=setTimeout(function(){if(s.stylesheets&&B1(s,s.stylesheets),s.unsuspend){var g=s.unsuspend;s.unsuspend=null,g()}},6e4);return s.unsuspend=l,function(){s.unsuspend=null,clearTimeout(f)}}:null}function up(){if(this.count--,this.count===0){if(this.stylesheets)B1(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var fp=null;function B1(s,l){s.stylesheets=null,s.unsuspend!==null&&(s.count++,fp=new Map,l.forEach(n$,s),fp=null,up.call(s))}function n$(s,l){if(!(l.state.loading&4)){var f=fp.get(s);if(f)var g=f.get(null);else{f=new Map,fp.set(s,f);for(var x=s.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<x.length;A++){var M=x[A];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(f.set(M.dataset.precedence,M),g=M)}g&&f.set(null,g)}x=l.instance,M=x.getAttribute("data-precedence"),A=f.get(M)||g,A===g&&f.set(null,x),f.set(M,x),this.count++,g=up.bind(this),x.addEventListener("load",g),x.addEventListener("error",g),A?A.parentNode.insertBefore(x,A.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(x,s.firstChild)),l.state.loading|=4}}var rd={$$typeof:C,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function r$(s,l,f,g,x,A,M,F){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=as(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=as(0),this.hiddenUpdates=as(null),this.identifierPrefix=g,this.onUncaughtError=x,this.onCaughtError=A,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function Vj(s,l,f,g,x,A,M,F,W,ie,ge,ve){return s=new r$(s,l,f,M,F,W,ie,ve),l=1,A===!0&&(l|=24),A=Zr(3,null,null,l),s.current=A,A.stateNode=s,l=xb(),l.refCount++,s.pooledCache=l,l.refCount++,A.memoizedState={element:g,isDehydrated:f,cache:l},Tb(A),s}function Bj(s){return s?(s=vu,s):vu}function Uj(s,l,f,g,x,A){x=Bj(x),g.context===null?g.context=x:g.pendingContext=x,g=_o(l),g.payload={element:f},A=A===void 0?null:A,A!==null&&(g.callback=A),f=So(s,g,l),f!==null&&(ri(f,s,l),Ih(f,s,l))}function $j(s,l){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var f=s.retryLane;s.retryLane=f!==0&&f<l?f:l}}function U1(s,l){$j(s,l),(s=s.alternate)&&$j(s,l)}function Fj(s){if(s.tag===13){var l=yu(s,67108864);l!==null&&ri(l,s,67108864),U1(s,67108864)}}var hp=!0;function i$(s,l,f,g){var x=q.T;q.T=null;var A=G.p;try{G.p=2,$1(s,l,f,g)}finally{G.p=A,q.T=x}}function a$(s,l,f,g){var x=q.T;q.T=null;var A=G.p;try{G.p=8,$1(s,l,f,g)}finally{G.p=A,q.T=x}}function $1(s,l,f,g){if(hp){var x=F1(g);if(x===null)C1(s,l,g,dp,f),Hj(s,g);else if(o$(x,s,l,f,g))g.stopPropagation();else if(Hj(s,g),l&4&&-1<s$.indexOf(s)){for(;x!==null;){var A=ba(x);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var M=Yr(A.pendingLanes);if(M!==0){var F=A;for(F.pendingLanes|=2,F.entangledLanes|=2;M;){var W=1<<31-Bt(M);F.entanglements[1]|=W,M&=~W}Ia(A),(Ut&6)===0&&(Xg=Rt()+500,Xh(0))}}break;case 13:F=yu(A,2),F!==null&&ri(F,A,2),Zg(),U1(A,2)}if(A=F1(g),A===null&&C1(s,l,g,dp,f),A===x)break;x=A}x!==null&&g.stopPropagation()}else C1(s,l,g,null,f)}}function F1(s){return s=_i(s),z1(s)}var dp=null;function z1(s){if(dp=null,s=os(s),s!==null){var l=a(s);if(l===null)s=null;else{var f=l.tag;if(f===13){if(s=o(l),s!==null)return s;s=null}else if(f===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;s=null}else l!==s&&(s=null)}}return dp=s,null}function zj(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gr()){case Wr:return 2;case X:return 8;case ae:case me:return 32;case De:return 268435456;default:return 32}default:return 32}}var H1=!1,Mo=null,Lo=null,Vo=null,id=new Map,ad=new Map,Bo=[],s$="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hj(s,l){switch(s){case"focusin":case"focusout":Mo=null;break;case"dragenter":case"dragleave":Lo=null;break;case"mouseover":case"mouseout":Vo=null;break;case"pointerover":case"pointerout":id.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":ad.delete(l.pointerId)}}function sd(s,l,f,g,x,A){return s===null||s.nativeEvent!==A?(s={blockedOn:l,domEventName:f,eventSystemFlags:g,nativeEvent:A,targetContainers:[x]},l!==null&&(l=ba(l),l!==null&&Fj(l)),s):(s.eventSystemFlags|=g,l=s.targetContainers,x!==null&&l.indexOf(x)===-1&&l.push(x),s)}function o$(s,l,f,g,x){switch(l){case"focusin":return Mo=sd(Mo,s,l,f,g,x),!0;case"dragenter":return Lo=sd(Lo,s,l,f,g,x),!0;case"mouseover":return Vo=sd(Vo,s,l,f,g,x),!0;case"pointerover":var A=x.pointerId;return id.set(A,sd(id.get(A)||null,s,l,f,g,x)),!0;case"gotpointercapture":return A=x.pointerId,ad.set(A,sd(ad.get(A)||null,s,l,f,g,x)),!0}return!1}function qj(s){var l=os(s.target);if(l!==null){var f=a(l);if(f!==null){if(l=f.tag,l===13){if(l=o(f),l!==null){s.blockedOn=l,Zm(s.priority,function(){if(f.tag===13){var g=ni();g=ho(g);var x=yu(f,g);x!==null&&ri(x,f,g),U1(f,g)}});return}}else if(l===3&&f.stateNode.current.memoizedState.isDehydrated){s.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}s.blockedOn=null}function mp(s){if(s.blockedOn!==null)return!1;for(var l=s.targetContainers;0<l.length;){var f=F1(s.nativeEvent);if(f===null){f=s.nativeEvent;var g=new f.constructor(f.type,f);fs=g,f.target.dispatchEvent(g),fs=null}else return l=ba(f),l!==null&&Fj(l),s.blockedOn=f,!1;l.shift()}return!0}function Kj(s,l,f){mp(s)&&f.delete(l)}function l$(){H1=!1,Mo!==null&&mp(Mo)&&(Mo=null),Lo!==null&&mp(Lo)&&(Lo=null),Vo!==null&&mp(Vo)&&(Vo=null),id.forEach(Kj),ad.forEach(Kj)}function gp(s,l){s.blockedOn===l&&(s.blockedOn=null,H1||(H1=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,l$)))}var pp=null;function Gj(s){pp!==s&&(pp=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){pp===s&&(pp=null);for(var l=0;l<s.length;l+=3){var f=s[l],g=s[l+1],x=s[l+2];if(typeof g!="function"){if(z1(g||f)===null)continue;break}var A=ba(f);A!==null&&(s.splice(l,3),l-=3,zb(A,{pending:!0,data:x,method:f.method,action:g},g,x))}}))}function od(s){function l(W){return gp(W,s)}Mo!==null&&gp(Mo,s),Lo!==null&&gp(Lo,s),Vo!==null&&gp(Vo,s),id.forEach(l),ad.forEach(l);for(var f=0;f<Bo.length;f++){var g=Bo[f];g.blockedOn===s&&(g.blockedOn=null)}for(;0<Bo.length&&(f=Bo[0],f.blockedOn===null);)qj(f),f.blockedOn===null&&Bo.shift();if(f=(s.ownerDocument||s).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var x=f[g],A=f[g+1],M=x[Tn]||null;if(typeof A=="function")M||Gj(f);else if(M){var F=null;if(A&&A.hasAttribute("formAction")){if(x=A,M=A[Tn]||null)F=M.formAction;else if(z1(x)!==null)continue}else F=M.action;typeof F=="function"?f[g+1]=F:(f.splice(g,3),g-=3),Gj(f)}}}function q1(s){this._internalRoot=s}yp.prototype.render=q1.prototype.render=function(s){var l=this._internalRoot;if(l===null)throw Error(r(409));var f=l.current,g=ni();Uj(f,g,s,l,null,null)},yp.prototype.unmount=q1.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var l=s.containerInfo;Uj(s.current,2,null,s,null,null),Zg(),l[xi]=null}};function yp(s){this._internalRoot=s}yp.prototype.unstable_scheduleHydration=function(s){if(s){var l=mo();s={blockedOn:null,target:s,priority:l};for(var f=0;f<Bo.length&&l!==0&&l<Bo[f].priority;f++);Bo.splice(f,0,s),f===0&&qj(s)}};var Wj=e.version;if(Wj!=="19.1.1")throw Error(r(527,Wj,"19.1.1"));G.findDOMNode=function(s){var l=s._reactInternals;if(l===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=u(l),s=s!==null?h(s):null,s=s===null?null:s.stateNode,s};var c$={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vp.isDisabled&&vp.supportsFiber)try{je=vp.inject(c$),$e=vp}catch{}}return cd.createRoot=function(s,l){if(!i(s))throw Error(r(299));var f=!1,g="",x=uC,A=fC,M=hC,F=null;return l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(x=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(M=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(F=l.unstable_transitionCallbacks)),l=Vj(s,1,!1,null,null,f,g,x,A,M,F,null),s[xi]=l.current,N1(s),new q1(l)},cd.hydrateRoot=function(s,l,f){if(!i(s))throw Error(r(299));var g=!1,x="",A=uC,M=fC,F=hC,W=null,ie=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(x=f.identifierPrefix),f.onUncaughtError!==void 0&&(A=f.onUncaughtError),f.onCaughtError!==void 0&&(M=f.onCaughtError),f.onRecoverableError!==void 0&&(F=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(W=f.unstable_transitionCallbacks),f.formState!==void 0&&(ie=f.formState)),l=Vj(s,1,!0,l,f??null,g,x,A,M,F,W,ie),l.context=Bj(null),f=l.current,g=ni(),g=ho(g),x=_o(g),x.callback=null,So(f,x,g),f=g,l.current.lanes=f,ss(l,f),Ia(l),s[xi]=l.current,N1(s),new yp(l)},cd.version="19.1.1",cd}var iD;function x$(){if(iD)return W1.exports;iD=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),W1.exports=b$(),W1.exports}var w$=x$();/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var aD="popstate";function _$(t={}){function e(r,i){let{pathname:a,search:o,hash:c}=r.location;return __("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Hd(i)}return T$(e,n,null,t)}function cn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Bi(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function S$(){return Math.random().toString(36).substring(2,10)}function sD(t,e){return{usr:t.state,key:t.key,idx:e}}function __(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Rf(e):e,state:n,key:e&&e.key||r||S$()}}function Hd({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Rf(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function T$(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,o=i.history,c="POP",u=null,h=m();h==null&&(h=0,o.replaceState({...o.state,idx:h},""));function m(){return(o.state||{idx:null}).idx}function p(){c="POP";let S=m(),E=S==null?null:S-h;h=S,u&&u({action:c,location:T.location,delta:E})}function y(S,E){c="PUSH";let N=__(T.location,S,E);h=m()+1;let C=sD(N,h),L=T.createHref(N);try{o.pushState(C,"",L)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(L)}a&&u&&u({action:c,location:T.location,delta:1})}function b(S,E){c="REPLACE";let N=__(T.location,S,E);h=m();let C=sD(N,h),L=T.createHref(N);o.replaceState(C,"",L),a&&u&&u({action:c,location:T.location,delta:0})}function _(S){return E$(S)}let T={get action(){return c},get location(){return t(i,o)},listen(S){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(aD,p),u=S,()=>{i.removeEventListener(aD,p),u=null}},createHref(S){return e(i,S)},createURL:_,encodeLocation(S){let E=_(S);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:y,replace:b,go(S){return o.go(S)}};return T}function E$(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),cn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Hd(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function E3(t,e,n="/"){return A$(t,e,n,!1)}function A$(t,e,n,r){let i=typeof e=="string"?Rf(e):e,a=zs(i.pathname||"/",n);if(a==null)return null;let o=A3(t);N$(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let h=V$(a);c=M$(o[u],h,r)}return c}function A3(t,e=[],n=[],r=""){let i=(a,o,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(cn(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let h=Bs([r,u.relativePath]),m=n.concat(u);a.children&&a.children.length>0&&(cn(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),A3(a.children,e,m,h)),!(a.path==null&&!a.index)&&e.push({path:h,score:P$(h,a.index),routesMeta:m})};return t.forEach((a,o)=>{if(a.path===""||!a.path?.includes("?"))i(a,o);else for(let c of N3(a.path))i(a,o,c)}),e}function N3(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let o=N3(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),i&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function N$(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:R$(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var C$=/^:[\w-]+$/,j$=3,D$=2,k$=1,O$=10,I$=-2,oD=t=>t==="*";function P$(t,e){let n=t.split("/"),r=n.length;return n.some(oD)&&(r+=I$),e&&(r+=D$),n.filter(i=>!oD(i)).reduce((i,a)=>i+(C$.test(a)?j$:a===""?k$:O$),r)}function R$(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function M$(t,e,n=!1){let{routesMeta:r}=t,i={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],h=c===r.length-1,m=a==="/"?e:e.slice(a.length)||"/",p=hy({path:u.relativePath,caseSensitive:u.caseSensitive,end:h},m),y=u.route;if(!p&&h&&n&&!r[r.length-1].route.index&&(p=hy({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},m)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Bs([a,p.pathname]),pathnameBase:F$(Bs([a,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(a=Bs([a,p.pathnameBase]))}return o}function hy(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=L$(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((h,{paramName:m,isOptional:p},y)=>{if(m==="*"){let _=c[y]||"";o=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const b=c[y];return p&&!b?h[m]=void 0:h[m]=(b||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:o,pattern:t}}function L$(t,e=!1,n=!0){Bi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function V$(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Bi(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function zs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function B$(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Rf(t):t;return{pathname:n?n.startsWith("/")?n:U$(n,e):e,search:z$(r),hash:H$(i)}}function U$(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Z1(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function $$(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function vT(t){let e=$$(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function bT(t,e,n,r=!1){let i;typeof t=="string"?i=Rf(t):(i={...t},cn(!i.pathname||!i.pathname.includes("?"),Z1("?","pathname","search",i)),cn(!i.pathname||!i.pathname.includes("#"),Z1("#","pathname","hash",i)),cn(!i.search||!i.search.includes("#"),Z1("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),p-=1;i.pathname=y.join("/")}c=p>=0?e[p]:"/"}let u=B$(i,c),h=o&&o!=="/"&&o.endsWith("/"),m=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(h||m)&&(u.pathname+="/"),u}var Bs=t=>t.join("/").replace(/\/\/+/g,"/"),F$=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),z$=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,H$=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function q$(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var C3=["POST","PUT","PATCH","DELETE"];new Set(C3);var K$=["GET",...C3];new Set(K$);var Mf=w.createContext(null);Mf.displayName="DataRouter";var kv=w.createContext(null);kv.displayName="DataRouterState";w.createContext(!1);var j3=w.createContext({isTransitioning:!1});j3.displayName="ViewTransition";var G$=w.createContext(new Map);G$.displayName="Fetchers";var W$=w.createContext(null);W$.displayName="Await";var da=w.createContext(null);da.displayName="Navigation";var mm=w.createContext(null);mm.displayName="Location";var Hi=w.createContext({outlet:null,matches:[],isDataRoute:!1});Hi.displayName="Route";var xT=w.createContext(null);xT.displayName="RouteError";function Y$(t,{relative:e}={}){cn(Lf(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=w.useContext(da),{hash:i,pathname:a,search:o}=gm(t,{relative:e}),c=a;return n!=="/"&&(c=a==="/"?n:Bs([n,a])),r.createHref({pathname:c,search:o,hash:i})}function Lf(){return w.useContext(mm)!=null}function Ir(){return cn(Lf(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(mm).location}var D3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function k3(t){w.useContext(da).static||w.useLayoutEffect(t)}function wt(){let{isDataRoute:t}=w.useContext(Hi);return t?uF():X$()}function X$(){cn(Lf(),"useNavigate() may be used only in the context of a <Router> component.");let t=w.useContext(Mf),{basename:e,navigator:n}=w.useContext(da),{matches:r}=w.useContext(Hi),{pathname:i}=Ir(),a=JSON.stringify(vT(r)),o=w.useRef(!1);return k3(()=>{o.current=!0}),w.useCallback((u,h={})=>{if(Bi(o.current,D3),!o.current)return;if(typeof u=="number"){n.go(u);return}let m=bT(u,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Bs([e,m.pathname])),(h.replace?n.replace:n.push)(m,h.state,h)},[e,n,a,i,t])}var Q$=w.createContext(null);function Z$(t){let e=w.useContext(Hi).outlet;return e&&w.createElement(Q$.Provider,{value:t},e)}function ma(){let{matches:t}=w.useContext(Hi),e=t[t.length-1];return e?e.params:{}}function gm(t,{relative:e}={}){let{matches:n}=w.useContext(Hi),{pathname:r}=Ir(),i=JSON.stringify(vT(n));return w.useMemo(()=>bT(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function J$(t,e){return O3(t,e)}function O3(t,e,n,r){cn(Lf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=w.useContext(da),{matches:a}=w.useContext(Hi),o=a[a.length-1],c=o?o.params:{},u=o?o.pathname:"/",h=o?o.pathnameBase:"/",m=o&&o.route;{let E=m&&m.path||"";I3(u,!m||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let p=Ir(),y;if(e){let E=typeof e=="string"?Rf(e):e;cn(h==="/"||E.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${E.pathname}" was given in the \`location\` prop.`),y=E}else y=p;let b=y.pathname||"/",_=b;if(h!=="/"){let E=h.replace(/^\//,"").split("/");_="/"+b.replace(/^\//,"").split("/").slice(E.length).join("/")}let T=E3(t,{pathname:_});Bi(m||T!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Bi(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=iF(T&&T.map(E=>Object.assign({},E,{params:Object.assign({},c,E.params),pathname:Bs([h,i.encodeLocation?i.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?h:Bs([h,i.encodeLocation?i.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),a,n,r);return e&&S?w.createElement(mm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},S):S}function eF(){let t=cF(),e=q$(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=w.createElement(w.Fragment,null,w.createElement("p",null,"💿 Hey developer 👋"),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:a},"ErrorBoundary")," or"," ",w.createElement("code",{style:a},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:i},n):null,o)}var tF=w.createElement(eF,null),nF=class extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?w.createElement(Hi.Provider,{value:this.props.routeContext},w.createElement(xT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rF({routeContext:t,match:e,children:n}){let r=w.useContext(Mf);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(Hi.Provider,{value:t},n)}function iF(t,e=[],n=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let i=t,a=n?.errors;if(a!=null){let u=i.findIndex(h=>h.route.id&&a?.[h.route.id]!==void 0);cn(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,c=-1;if(n)for(let u=0;u<i.length;u++){let h=i[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:m,errors:p}=n,y=h.route.loader&&!m.hasOwnProperty(h.route.id)&&(!p||p[h.route.id]===void 0);if(h.route.lazy||y){o=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((u,h,m)=>{let p,y=!1,b=null,_=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,b=h.route.errorElement||tF,o&&(c<0&&m===0?(I3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,_=null):c===m&&(y=!0,_=h.route.hydrateFallbackElement||null)));let T=e.concat(i.slice(0,m+1)),S=()=>{let E;return p?E=b:y?E=_:h.route.Component?E=w.createElement(h.route.Component,null):h.route.element?E=h.route.element:E=u,w.createElement(rF,{match:h,routeContext:{outlet:u,matches:T,isDataRoute:n!=null},children:E})};return n&&(h.route.ErrorBoundary||h.route.errorElement||m===0)?w.createElement(nF,{location:n.location,revalidation:n.revalidation,component:b,error:p,children:S(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):S()},null)}function wT(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function aF(t){let e=w.useContext(Mf);return cn(e,wT(t)),e}function sF(t){let e=w.useContext(kv);return cn(e,wT(t)),e}function oF(t){let e=w.useContext(Hi);return cn(e,wT(t)),e}function _T(t){let e=oF(t),n=e.matches[e.matches.length-1];return cn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function lF(){return _T("useRouteId")}function cF(){let t=w.useContext(xT),e=sF("useRouteError"),n=_T("useRouteError");return t!==void 0?t:e.errors?.[n]}function uF(){let{router:t}=aF("useNavigate"),e=_T("useNavigate"),n=w.useRef(!1);return k3(()=>{n.current=!0}),w.useCallback(async(i,a={})=>{Bi(n.current,D3),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...a}))},[t,e])}var lD={};function I3(t,e,n){!e&&!lD[t]&&(lD[t]=!0,Bi(!1,n))}w.memo(fF);function fF({routes:t,future:e,state:n}){return O3(t,void 0,n,e)}function qd({to:t,replace:e,state:n,relative:r}){cn(Lf(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=w.useContext(da);Bi(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=w.useContext(Hi),{pathname:o}=Ir(),c=wt(),u=bT(t,vT(a),o,r==="path"),h=JSON.stringify(u);return w.useEffect(()=>{c(JSON.parse(h),{replace:e,state:n,relative:r})},[c,h,r,e,n]),null}function Vf(t){return Z$(t.context)}function at(t){cn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function hF({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){cn(!Lf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),c=w.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof n=="string"&&(n=Rf(n));let{pathname:u="/",search:h="",hash:m="",state:p=null,key:y="default"}=n,b=w.useMemo(()=>{let _=zs(u,o);return _==null?null:{location:{pathname:_,search:h,hash:m,state:p,key:y},navigationType:r}},[o,u,h,m,p,y,r]);return Bi(b!=null,`<Router basename="${o}"> is not able to match the URL "${u}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:w.createElement(da.Provider,{value:c},w.createElement(mm.Provider,{children:e,value:b}))}function dF({children:t,location:e}){return J$(S_(t),e)}function S_(t,e=[]){let n=[];return w.Children.forEach(t,(r,i)=>{if(!w.isValidElement(r))return;let a=[...e,i];if(r.type===w.Fragment){n.push.apply(n,S_(r.props.children,a));return}cn(r.type===at,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),cn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=S_(r.props.children,a)),n.push(o)}),n}var Kp="get",Gp="application/x-www-form-urlencoded";function Ov(t){return t!=null&&typeof t.tagName=="string"}function mF(t){return Ov(t)&&t.tagName.toLowerCase()==="button"}function gF(t){return Ov(t)&&t.tagName.toLowerCase()==="form"}function pF(t){return Ov(t)&&t.tagName.toLowerCase()==="input"}function yF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function vF(t,e){return t.button===0&&(!e||e==="_self")&&!yF(t)}function T_(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function bF(t,e){let n=T_(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(a=>{n.append(i,a)})}),n}var bp=null;function xF(){if(bp===null)try{new FormData(document.createElement("form"),0),bp=!1}catch{bp=!0}return bp}var wF=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function J1(t){return t!=null&&!wF.has(t)?(Bi(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gp}"`),null):t}function _F(t,e){let n,r,i,a,o;if(gF(t)){let c=t.getAttribute("action");r=c?zs(c,e):null,n=t.getAttribute("method")||Kp,i=J1(t.getAttribute("enctype"))||Gp,a=new FormData(t)}else if(mF(t)||pF(t)&&(t.type==="submit"||t.type==="image")){let c=t.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||c.getAttribute("action");if(r=u?zs(u,e):null,n=t.getAttribute("formmethod")||c.getAttribute("method")||Kp,i=J1(t.getAttribute("formenctype"))||J1(c.getAttribute("enctype"))||Gp,a=new FormData(c,t),!xF()){let{name:h,type:m,value:p}=t;if(m==="image"){let y=h?`${h}.`:"";a.append(`${y}x`,"0"),a.append(`${y}y`,"0")}else h&&a.append(h,p)}}else{if(Ov(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Kp,r=null,i=Gp,o=t}return a&&i==="text/plain"&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ST(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function SF(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&zs(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function TF(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function EF(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function AF(t,e,n){let r=await Promise.all(t.map(async i=>{let a=e.routes[i.route.id];if(a){let o=await TF(a,n);return o.links?o.links():[]}return[]}));return DF(r.flat(1).filter(EF).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function cD(t,e,n,r,i,a){let o=(u,h)=>n[h]?u.route.id!==n[h].route.id:!0,c=(u,h)=>n[h].pathname!==u.pathname||n[h].route.path?.endsWith("*")&&n[h].params["*"]!==u.params["*"];return a==="assets"?e.filter((u,h)=>o(u,h)||c(u,h)):a==="data"?e.filter((u,h)=>{let m=r.routes[u.route.id];if(!m||!m.hasLoader)return!1;if(o(u,h)||c(u,h))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function NF(t,e,{includeHydrateFallback:n}={}){return CF(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function CF(t){return[...new Set(t)]}function jF(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function DF(t,e){let n=new Set;return new Set(e),t.reduce((r,i)=>{let a=JSON.stringify(jF(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function P3(){let t=w.useContext(Mf);return ST(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function kF(){let t=w.useContext(kv);return ST(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var TT=w.createContext(void 0);TT.displayName="FrameworkContext";function R3(){let t=w.useContext(TT);return ST(t,"You must render this element inside a <HydratedRouter> element"),t}function OF(t,e){let n=w.useContext(TT),[r,i]=w.useState(!1),[a,o]=w.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:h,onMouseLeave:m,onTouchStart:p}=e,y=w.useRef(null);w.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let T=E=>{E.forEach(N=>{o(N.isIntersecting)})},S=new IntersectionObserver(T,{threshold:.5});return y.current&&S.observe(y.current),()=>{S.disconnect()}}},[t]),w.useEffect(()=>{if(r){let T=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(T)}}},[r]);let b=()=>{i(!0)},_=()=>{i(!1),o(!1)};return n?t!=="intent"?[a,y,{}]:[a,y,{onFocus:ud(c,b),onBlur:ud(u,_),onMouseEnter:ud(h,b),onMouseLeave:ud(m,_),onTouchStart:ud(p,b)}]:[!1,y,{}]}function ud(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function IF({page:t,...e}){let{router:n}=P3(),r=w.useMemo(()=>E3(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?w.createElement(RF,{page:t,matches:r,...e}):null}function PF(t){let{manifest:e,routeModules:n}=R3(),[r,i]=w.useState([]);return w.useEffect(()=>{let a=!1;return AF(t,e,n).then(o=>{a||i(o)}),()=>{a=!0}},[t,e,n]),r}function RF({page:t,matches:e,...n}){let r=Ir(),{manifest:i,routeModules:a}=R3(),{basename:o}=P3(),{loaderData:c,matches:u}=kF(),h=w.useMemo(()=>cD(t,e,u,i,r,"data"),[t,e,u,i,r]),m=w.useMemo(()=>cD(t,e,u,i,r,"assets"),[t,e,u,i,r]),p=w.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let _=new Set,T=!1;if(e.forEach(E=>{let N=i.routes[E.route.id];!N||!N.hasLoader||(!h.some(C=>C.route.id===E.route.id)&&E.route.id in c&&a[E.route.id]?.shouldRevalidate||N.hasClientLoader?T=!0:_.add(E.route.id))}),_.size===0)return[];let S=SF(t,o,"data");return T&&_.size>0&&S.searchParams.set("_routes",e.filter(E=>_.has(E.route.id)).map(E=>E.route.id).join(",")),[S.pathname+S.search]},[o,c,r,i,h,e,t,a]),y=w.useMemo(()=>NF(m,i),[m,i]),b=PF(m);return w.createElement(w.Fragment,null,p.map(_=>w.createElement("link",{key:_,rel:"prefetch",as:"fetch",href:_,...n})),y.map(_=>w.createElement("link",{key:_,rel:"modulepreload",href:_,...n})),b.map(({key:_,link:T})=>w.createElement("link",{key:_,...T})))}function MF(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var M3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{M3&&(window.__reactRouterVersion="7.7.1")}catch{}function LF({basename:t,children:e,window:n}){let r=w.useRef();r.current==null&&(r.current=_$({window:n,v5Compat:!0}));let i=r.current,[a,o]=w.useState({action:i.action,location:i.location}),c=w.useCallback(u=>{w.startTransition(()=>o(u))},[o]);return w.useLayoutEffect(()=>i.listen(c),[i,c]),w.createElement(hF,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:i})}var L3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Iv=w.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:o,state:c,target:u,to:h,preventScrollReset:m,viewTransition:p,...y},b){let{basename:_}=w.useContext(da),T=typeof h=="string"&&L3.test(h),S,E=!1;if(typeof h=="string"&&T&&(S=h,M3))try{let O=new URL(window.location.href),U=h.startsWith("//")?new URL(O.protocol+h):new URL(h),$=zs(U.pathname,_);U.origin===O.origin&&$!=null?h=$+U.search+U.hash:E=!0}catch{Bi(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=Y$(h,{relative:i}),[C,L,D]=OF(r,y),R=$F(h,{replace:o,state:c,target:u,preventScrollReset:m,relative:i,viewTransition:p});function k(O){e&&e(O),O.defaultPrevented||R(O)}let I=w.createElement("a",{...y,...D,href:S||N,onClick:E||a?e:k,ref:MF(b,L),target:u,"data-discover":!T&&n==="render"?"true":void 0});return C&&!T?w.createElement(w.Fragment,null,I,w.createElement(IF,{page:N})):I});Iv.displayName="Link";var VF=w.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:o,viewTransition:c,children:u,...h},m){let p=gm(o,{relative:h.relative}),y=Ir(),b=w.useContext(kv),{navigator:_,basename:T}=w.useContext(da),S=b!=null&&GF(p)&&c===!0,E=_.encodeLocation?_.encodeLocation(p).pathname:p.pathname,N=y.pathname,C=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;n||(N=N.toLowerCase(),C=C?C.toLowerCase():null,E=E.toLowerCase()),C&&T&&(C=zs(C,T)||C);const L=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let D=N===E||!i&&N.startsWith(E)&&N.charAt(L)==="/",R=C!=null&&(C===E||!i&&C.startsWith(E)&&C.charAt(E.length)==="/"),k={isActive:D,isPending:R,isTransitioning:S},I=D?e:void 0,O;typeof r=="function"?O=r(k):O=[r,D?"active":null,R?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let U=typeof a=="function"?a(k):a;return w.createElement(Iv,{...h,"aria-current":I,className:O,ref:m,style:U,to:o,viewTransition:c},typeof u=="function"?u(k):u)});VF.displayName="NavLink";var BF=w.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:a,method:o=Kp,action:c,onSubmit:u,relative:h,preventScrollReset:m,viewTransition:p,...y},b)=>{let _=qF(),T=KF(c,{relative:h}),S=o.toLowerCase()==="get"?"get":"post",E=typeof c=="string"&&L3.test(c),N=C=>{if(u&&u(C),C.defaultPrevented)return;C.preventDefault();let L=C.nativeEvent.submitter,D=L?.getAttribute("formmethod")||o;_(L||C.currentTarget,{fetcherKey:e,method:D,navigate:n,replace:i,state:a,relative:h,preventScrollReset:m,viewTransition:p})};return w.createElement("form",{ref:b,method:S,action:T,onSubmit:r?u:N,...y,"data-discover":!E&&t==="render"?"true":void 0})});BF.displayName="Form";function UF(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function V3(t){let e=w.useContext(Mf);return cn(e,UF(t)),e}function $F(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:o}={}){let c=wt(),u=Ir(),h=gm(t,{relative:a});return w.useCallback(m=>{if(vF(m,e)){m.preventDefault();let p=n!==void 0?n:Hd(u)===Hd(h);c(t,{replace:p,state:r,preventScrollReset:i,relative:a,viewTransition:o})}},[u,c,h,n,r,e,t,i,a,o])}function FF(t){Bi(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=w.useRef(T_(t)),n=w.useRef(!1),r=Ir(),i=w.useMemo(()=>bF(r.search,n.current?null:e.current),[r.search]),a=wt(),o=w.useCallback((c,u)=>{const h=T_(typeof c=="function"?c(new URLSearchParams(i)):c);n.current=!0,a("?"+h,u)},[a,i]);return[i,o]}var zF=0,HF=()=>`__${String(++zF)}__`;function qF(){let{router:t}=V3("useSubmit"),{basename:e}=w.useContext(da),n=lF();return w.useCallback(async(r,i={})=>{let{action:a,method:o,encType:c,formData:u,body:h}=_F(r,e);if(i.navigate===!1){let m=i.fetcherKey||HF();await t.fetch(m,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await t.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:u,body:h,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function KF(t,{relative:e}={}){let{basename:n}=w.useContext(da),r=w.useContext(Hi);cn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...gm(t||".",{relative:e})},o=Ir();if(t==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(m=>m==="")){c.delete("index"),u.filter(p=>p).forEach(p=>c.append("index",p));let m=c.toString();a.search=m?`?${m}`:""}}return(!t||t===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Bs([n,a.pathname])),Hd(a)}function GF(t,{relative:e}={}){let n=w.useContext(j3);cn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=V3("useViewTransitionState"),i=gm(t,{relative:e});if(!n.isTransitioning)return!1;let a=zs(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=zs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return hy(i.pathname,o)!=null||hy(i.pathname,a)!=null}var B3=T3();function U3(){try{const t=sessionStorage.getItem("session");return t?JSON.parse(t):null}catch{return null}}function WF(){const t=Ir();return U3()?d.jsx(Vf,{}):d.jsx(qd,{to:"/dang-nhap",replace:!0,state:{from:t}})}function ex({allowed:t=[]}){const e=Ir(),n=U3();return n?t.length&&!t.includes(n.vaiTro)?d.jsx(qd,{to:"/error-404",replace:!0}):d.jsx(Vf,{}):d.jsx(qd,{to:"/dang-nhap",replace:!0,state:{from:e}})}function YF(){return d.jsx("header",{className:"header-container",children:d.jsx("div",{className:"header-wrapper",children:d.jsx("nav",{className:"header-nav",children:d.jsx(Iv,{to:"/",children:d.jsx("svg",{className:"logo-svg",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("text",{x:"0",y:"35",fontWeight:"bold",fontFamily:"Arial, sans-serif",fill:"#2953F3",children:"HOCTUVUNG"})})})})})})}function $3(){return d.jsxs("footer",{className:"footer",children:[d.jsxs("div",{className:"footer-container",children:[d.jsxs("div",{className:"footer-col",children:[d.jsx("h2",{className:"footer-logo",children:"HOCTUVUNG"}),d.jsx("p",{children:"Nền tảng học từ vựng thông minh dành cho sinh viên và người đi làm."})]}),d.jsxs("div",{className:"footer-col",children:[d.jsx("h4",{children:"Liên kết nhanh"}),d.jsxs("ul",{children:[d.jsx("li",{children:d.jsx("a",{href:"/landingpage",children:"Trang chủ"})}),d.jsx("li",{children:d.jsx("a",{href:"/landingpage",children:"Giới thiệu"})}),d.jsx("li",{children:d.jsx("a",{href:"/courses",children:"Khóa học"})}),d.jsx("li",{children:d.jsx("a",{href:"/contact",children:"Liên hệ"})})]})]}),d.jsxs("div",{className:"footer-col",children:[d.jsx("h4",{children:"Liên hệ"}),d.jsxs("p",{children:["Email: ",d.jsx("a",{href:"mailto:support@hoctuvung.com",children:"support@hoctuvung.com"})]}),d.jsxs("p",{children:["Điện thoại: ",d.jsx("a",{href:"tel:+84123456789",children:"+84 123 456 789"})]}),d.jsxs("div",{className:"social-icons",children:[d.jsx("a",{href:"#",children:d.jsx("i",{className:"fab fa-facebook"})}),d.jsx("a",{href:"#",children:d.jsx("i",{className:"fab fa-youtube"})}),d.jsx("a",{href:"#",children:d.jsx("i",{className:"fab fa-github"})})]})]})]}),d.jsx("div",{className:"footer-bottom",children:d.jsx("p",{children:"© 2025 HOCTUVUNG. All rights reserved."})})]})}const XF=()=>{};var uD={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},QF=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],c=t[n++],u=((i&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},z3={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,c=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,m=a>>2,p=(a&3)<<4|c>>4;let y=(c&15)<<2|h>>6,b=h&63;u||(b=64,o||(y=64)),r.push(n[m],n[p],n[y],n[b])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(F3(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):QF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||c==null||h==null||p==null)throw new ZF;const y=a<<2|c>>4;if(r.push(y),h!==64){const b=c<<4&240|h>>2;if(r.push(b),p!==64){const _=h<<6&192|p;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ZF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JF=function(t){const e=F3(t);return z3.encodeByteArray(e,!0)},dy=function(t){return JF(t).replace(/\./g,"")},H3=function(t){try{return z3.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ez(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tz=()=>ez().__FIREBASE_DEFAULTS__,nz=()=>{if(typeof process>"u"||typeof uD>"u")return;const t=uD.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rz=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&H3(t[1]);return e&&JSON.parse(e)},Pv=()=>{try{return XF()||tz()||nz()||rz()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},q3=t=>Pv()?.emulatorHosts?.[t],iz=t=>{const e=q3(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},K3=()=>Pv()?.config,G3=t=>Pv()?.[`_${t}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function W3(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sz(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[dy(JSON.stringify(n)),dy(JSON.stringify(o)),""].join(".")}const kd={};function oz(){const t={prod:[],emulator:[]};for(const e of Object.keys(kd))kd[e]?t.emulator.push(e):t.prod.push(e);return t}function lz(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let fD=!1;function Y3(t,e){if(typeof window>"u"||typeof document>"u"||!Bf(window.location.host)||kd[t]===e||kd[t]||fD)return;kd[t]=e;function n(y){return`__firebase__banner__${y}`}const r="__firebase__banner",a=oz().prod.length>0;function o(){const y=document.getElementById(r);y&&y.remove()}function c(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function u(y,b){y.setAttribute("width","24"),y.setAttribute("id",b),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function h(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{fD=!0,o()},y}function m(y,b){y.setAttribute("id",b),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function p(){const y=lz(r),b=n("text"),_=document.getElementById(b)||document.createElement("span"),T=n("learnmore"),S=document.getElementById(T)||document.createElement("a"),E=n("preprendIcon"),N=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const C=y.element;c(C),m(S,T);const L=h();u(N,E),C.append(N,_,S,L),document.body.appendChild(C)}a?(_.innerText="Preview backend disconnected.",N.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(N.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cz(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_r())}function uz(){const t=Pv()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fz(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hz(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function dz(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mz(){const t=_r();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gz(){return!uz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pz(){try{return typeof indexedDB=="object"}catch{return!1}}function yz(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vz="FirebaseError";class no extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=vz,Object.setPrototypeOf(this,no.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pm.prototype.create)}}class pm{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?bz(a,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new no(i,c,r)}}function bz(t,e){return t.replace(xz,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const xz=/\{\$([^}]+)}/g;function wz(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(hD(a)&&hD(o)){if(!Hs(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function hD(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function wd(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,a]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(a)}}),e}function _d(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function _z(t,e){const n=new Sz(t,e);return n.subscribe.bind(n)}class Sz{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Tz(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=tx),i.error===void 0&&(i.error=tx),i.complete===void 0&&(i.complete=tx);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Tz(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function tx(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(t){return t&&t._delegate?t._delegate:t}class Dc{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ez=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new az;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Nz(e))try{this.getOrInitializeService({instanceIdentifier:uc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=uc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=uc){return this.instances.has(e)}getOptions(e=uc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Az(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=uc){return this.component?this.component.multipleInstances?e:uc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Az(t){return t===uc?void 0:t}function Nz(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Ez(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(vt||(vt={}));const jz={debug:vt.DEBUG,verbose:vt.VERBOSE,info:vt.INFO,warn:vt.WARN,error:vt.ERROR,silent:vt.SILENT},Dz=vt.INFO,kz={[vt.DEBUG]:"log",[vt.VERBOSE]:"log",[vt.INFO]:"info",[vt.WARN]:"warn",[vt.ERROR]:"error"},Oz=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=kz[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ET{constructor(e){this.name=e,this._logLevel=Dz,this._logHandler=Oz,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in vt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,vt.DEBUG,...e),this._logHandler(this,vt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,vt.VERBOSE,...e),this._logHandler(this,vt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,vt.INFO,...e),this._logHandler(this,vt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,vt.WARN,...e),this._logHandler(this,vt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,vt.ERROR,...e),this._logHandler(this,vt.ERROR,...e)}}const Iz=(t,e)=>e.some(n=>t instanceof n);let dD,mD;function Pz(){return dD||(dD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Rz(){return mD||(mD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const X3=new WeakMap,E_=new WeakMap,Q3=new WeakMap,nx=new WeakMap,AT=new WeakMap;function Mz(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(nl(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&X3.set(n,t)}).catch(()=>{}),AT.set(e,t),e}function Lz(t){if(E_.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});E_.set(t,e)}let A_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return E_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Q3.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nl(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Vz(t){A_=t(A_)}function Bz(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(rx(this),e,...n);return Q3.set(r,e.sort?e.sort():[e]),nl(r)}:Rz().includes(t)?function(...e){return t.apply(rx(this),e),nl(X3.get(this))}:function(...e){return nl(t.apply(rx(this),e))}}function Uz(t){return typeof t=="function"?Bz(t):(t instanceof IDBTransaction&&Lz(t),Iz(t,Pz())?new Proxy(t,A_):t)}function nl(t){if(t instanceof IDBRequest)return Mz(t);if(nx.has(t))return nx.get(t);const e=Uz(t);return e!==t&&(nx.set(t,e),AT.set(e,t)),e}const rx=t=>AT.get(t);function $z(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),c=nl(o);return r&&o.addEventListener("upgradeneeded",u=>{r(nl(o.result),u.oldVersion,u.newVersion,nl(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),c}const Fz=["get","getKey","getAll","getAllKeys","count"],zz=["put","add","delete","clear"],ix=new Map;function gD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ix.get(e))return ix.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=zz.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Fz.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(c.shift())),(await Promise.all([h[n](...c),i&&u.done]))[0]};return ix.set(e,a),a}Vz(t=>({...t,get:(e,n,r)=>gD(e,n)||t.get(e,n,r),has:(e,n)=>!!gD(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qz(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function qz(t){return t.getComponent()?.type==="VERSION"}const N_="@firebase/app",pD="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new ET("@firebase/app"),Kz="@firebase/app-compat",Gz="@firebase/analytics-compat",Wz="@firebase/analytics",Yz="@firebase/app-check-compat",Xz="@firebase/app-check",Qz="@firebase/auth",Zz="@firebase/auth-compat",Jz="@firebase/database",eH="@firebase/data-connect",tH="@firebase/database-compat",nH="@firebase/functions",rH="@firebase/functions-compat",iH="@firebase/installations",aH="@firebase/installations-compat",sH="@firebase/messaging",oH="@firebase/messaging-compat",lH="@firebase/performance",cH="@firebase/performance-compat",uH="@firebase/remote-config",fH="@firebase/remote-config-compat",hH="@firebase/storage",dH="@firebase/storage-compat",mH="@firebase/firestore",gH="@firebase/ai",pH="@firebase/firestore-compat",yH="firebase",vH="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C_="[DEFAULT]",bH={[N_]:"fire-core",[Kz]:"fire-core-compat",[Wz]:"fire-analytics",[Gz]:"fire-analytics-compat",[Xz]:"fire-app-check",[Yz]:"fire-app-check-compat",[Qz]:"fire-auth",[Zz]:"fire-auth-compat",[Jz]:"fire-rtdb",[eH]:"fire-data-connect",[tH]:"fire-rtdb-compat",[nH]:"fire-fn",[rH]:"fire-fn-compat",[iH]:"fire-iid",[aH]:"fire-iid-compat",[sH]:"fire-fcm",[oH]:"fire-fcm-compat",[lH]:"fire-perf",[cH]:"fire-perf-compat",[uH]:"fire-rc",[fH]:"fire-rc-compat",[hH]:"fire-gcs",[dH]:"fire-gcs-compat",[mH]:"fire-fst",[pH]:"fire-fst-compat",[gH]:"fire-vertex","fire-js":"fire-js",[yH]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const my=new Map,xH=new Map,j_=new Map;function yD(t,e){try{t.container.addComponent(e)}catch(n){qs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function df(t){const e=t.name;if(j_.has(e))return qs.debug(`There were multiple attempts to register component ${e}.`),!1;j_.set(e,t);for(const n of my.values())yD(n,t);for(const n of xH.values())yD(n,t);return!0}function NT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function li(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rl=new pm("app","Firebase",wH);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _H{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=vH;function Z3(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:C_,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw rl.create("bad-app-name",{appName:String(i)});if(n||(n=K3()),!n)throw rl.create("no-options");const a=my.get(i);if(a){if(Hs(n,a.options)&&Hs(r,a.config))return a;throw rl.create("duplicate-app",{appName:i})}const o=new Cz(i);for(const u of j_.values())o.addComponent(u);const c=new _H(n,r,o);return my.set(i,c),c}function J3(t=C_){const e=my.get(t);if(!e&&t===C_&&K3())return Z3();if(!e)throw rl.create("no-app",{appName:t});return e}function il(t,e,n){let r=bH[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),qs.warn(o.join(" "));return}df(new Dc(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SH="firebase-heartbeat-database",TH=1,Kd="firebase-heartbeat-store";let ax=null;function eM(){return ax||(ax=$z(SH,TH,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Kd)}catch(n){console.warn(n)}}}}).catch(t=>{throw rl.create("idb-open",{originalErrorMessage:t.message})})),ax}async function EH(t){try{const n=(await eM()).transaction(Kd),r=await n.objectStore(Kd).get(tM(t));return await n.done,r}catch(e){if(e instanceof no)qs.warn(e.message);else{const n=rl.create("idb-get",{originalErrorMessage:e?.message});qs.warn(n.message)}}}async function vD(t,e){try{const r=(await eM()).transaction(Kd,"readwrite");await r.objectStore(Kd).put(e,tM(t)),await r.done}catch(n){if(n instanceof no)qs.warn(n.message);else{const r=rl.create("idb-set",{originalErrorMessage:n?.message});qs.warn(r.message)}}}function tM(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AH=1024,NH=30;class CH{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DH(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=bD();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>NH){const i=kH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){qs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=bD(),{heartbeatsToSend:n,unsentEntries:r}=jH(this._heartbeatsCache.heartbeats),i=dy(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return qs.warn(e),""}}}function bD(){return new Date().toISOString().substring(0,10)}function jH(t,e=AH){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),xD(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),xD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class DH{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pz()?yz().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await EH(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return vD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return vD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function xD(t){return dy(JSON.stringify({version:2,heartbeats:t})).length}function kH(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OH(t){df(new Dc("platform-logger",e=>new Hz(e),"PRIVATE")),df(new Dc("heartbeat",e=>new CH(e),"PRIVATE")),il(N_,pD,t),il(N_,pD,"esm2020"),il("fire-js","")}OH("");function nM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IH=nM,rM=new pm("auth","Firebase",nM());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=new ET("@firebase/auth");function PH(t,...e){gy.logLevel<=vt.WARN&&gy.warn(`Auth (${Uf}): ${t}`,...e)}function Wp(t,...e){gy.logLevel<=vt.ERROR&&gy.error(`Auth (${Uf}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(t,...e){throw CT(t,...e)}function $a(t,...e){return CT(t,...e)}function iM(t,e,n){const r={...IH(),[e]:n};return new pm("auth","Firebase",r).create(e,{appName:t.name})}function Fa(t){return iM(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function CT(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return rM.create(t,...e)}function Xe(t,e,...n){if(!t)throw CT(e,...n)}function Ps(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Wp(e),new Error(e)}function Ks(t,e){t||Ps(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(){return typeof self<"u"&&self.location?.href||""}function RH(){return wD()==="http:"||wD()==="https:"}function wD(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RH()||hz()||"connection"in navigator)?navigator.onLine:!0}function LH(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ks(n>e,"Short delay should be less than long delay!"),this.isMobile=cz()||dz()}get(){return MH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t,e){Ks(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ps("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ps("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ps("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VH={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],UH=new vm(3e4,6e4);function Ja(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function qi(t,e,n,r,i={}){return sM(t,i,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=ym({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:u,...a};return fz()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Bf(t.emulatorConfig.host)&&(h.credentials="include"),aM.fetch()(await oM(t,t.config.apiHost,n,c),h)})}async function sM(t,e,n){t._canInitEmulator=!1;const r={...VH,...e};try{const i=new FH(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw xp(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,h]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw xp(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw xp(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw xp(t,"user-disabled",o);const m=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw iM(t,m,h);Ui(t,m)}}catch(i){if(i instanceof no)throw i;Ui(t,"network-request-failed",{message:String(i)})}}async function bm(t,e,n,r,i={}){const a=await qi(t,e,n,r,i);return"mfaPendingCredential"in a&&Ui(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function oM(t,e,n,r){const i=`${e}${n}?${r}`,a=t,o=a.config.emulator?jT(t.config,i):`${t.config.apiScheme}://${i}`;return BH.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function $H(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class FH{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($a(this.auth,"network-request-failed")),UH.get())})}}function xp(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=$a(t,e,r);return i.customData._tokenResponse=n,i}function _D(t){return t!==void 0&&t.enterprise!==void 0}class zH{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return $H(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function HH(t,e){return qi(t,"GET","/v2/recaptchaConfig",Ja(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qH(t,e){return qi(t,"POST","/v1/accounts:delete",e)}async function py(t,e){return qi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function KH(t,e=!1){const n=Qt(t),r=await n.getIdToken(e),i=DT(r);Xe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,o=a?.sign_in_provider;return{claims:i,token:r,authTime:Od(sx(i.auth_time)),issuedAtTime:Od(sx(i.iat)),expirationTime:Od(sx(i.exp)),signInProvider:o||null,signInSecondFactor:a?.sign_in_second_factor||null}}function sx(t){return Number(t)*1e3}function DT(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Wp("JWT malformed, contained fewer than 3 sections"),null;try{const i=H3(n);return i?JSON.parse(i):(Wp("Failed to decode base64 JWT payload"),null)}catch(i){return Wp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function SD(t){const e=DT(t);return Xe(e,"internal-error"),Xe(typeof e.exp<"u","internal-error"),Xe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof no&&GH(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function GH({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WH{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Od(this.lastLoginAt),this.creationTime=Od(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yy(t){const e=t.auth,n=await t.getIdToken(),r=await kc(t,py(e,{idToken:n}));Xe(r?.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const a=i.providerUserInfo?.length?lM(i.providerUserInfo):[],o=XH(t.providerData,a),c=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!o?.length,h=c?u:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new k_(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,m)}async function YH(t){const e=Qt(t);await yy(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XH(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function lM(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QH(t,e){const n=await sM(t,{},async()=>{const r=ym({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,o=await oM(t,i,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:c,body:r};return t.emulatorConfig&&Bf(t.emulatorConfig.host)&&(u.credentials="include"),aM.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ZH(t,e){return qi(t,"POST","/v2/accounts:revokeToken",Ja(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Xe(e.idToken,"internal-error"),Xe(typeof e.idToken<"u","internal-error"),Xe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):SD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Xe(e.length!==0,"internal-error");const n=SD(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Xe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await QH(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,o=new af;return r&&(Xe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Xe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),a&&(Xe(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new af,this.toJSON())}_performRefresh(){return Ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(t,e){Xe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class sa{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new WH(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new k_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await kc(this,this.stsTokenManager.getToken(this.auth,e));return Xe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return KH(this,e)}reload(){return YH(this)}_assign(e){this!==e&&(Xe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new sa({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Xe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await yy(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(li(this.auth.app))return Promise.reject(Fa(this.auth));const e=await this.getIdToken();return await kc(this,qH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:p,emailVerified:y,isAnonymous:b,providerData:_,stsTokenManager:T}=n;Xe(p&&T,e,"internal-error");const S=af.fromJSON(this.name,T);Xe(typeof p=="string",e,"internal-error"),$o(r,e.name),$o(i,e.name),Xe(typeof y=="boolean",e,"internal-error"),Xe(typeof b=="boolean",e,"internal-error"),$o(a,e.name),$o(o,e.name),$o(c,e.name),$o(u,e.name),$o(h,e.name),$o(m,e.name);const E=new sa({uid:p,auth:e,email:i,emailVerified:y,displayName:r,isAnonymous:b,photoURL:o,phoneNumber:a,tenantId:c,stsTokenManager:S,createdAt:h,lastLoginAt:m});return _&&Array.isArray(_)&&(E.providerData=_.map(N=>({...N}))),u&&(E._redirectEventId=u),E}static async _fromIdTokenResponse(e,n,r=!1){const i=new af;i.updateFromServerResponse(n);const a=new sa({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await yy(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Xe(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?lM(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!a?.length,c=new af;c.updateFromIdToken(r);const u=new sa({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new k_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=new Map;function Rs(t){Ks(t instanceof Function,"Expected a class definition");let e=TD.get(t);return e?(Ks(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,TD.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}cM.type="NONE";const ED=cM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(t,e,n){return`firebase:${t}:${e}:${n}`}class sf{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Yp(this.userKey,i.apiKey,a),this.fullPersistenceKey=Yp("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await py(this.auth,{idToken:e}).catch(()=>{});return n?sa._fromGetAccountInfoResponse(this.auth,n,e):null}return sa._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new sf(Rs(ED),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=i[0]||Rs(ED);const o=Yp(r,e.config.apiKey,e.name);let c=null;for(const h of n)try{const m=await h._get(o);if(m){let p;if(typeof m=="string"){const y=await py(e,{idToken:m}).catch(()=>{});if(!y)break;p=await sa._fromGetAccountInfoResponse(e,y,m)}else p=sa._fromJSON(e,m);h!==a&&(c=p),a=h;break}}catch{}const u=i.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new sf(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(n.map(async h=>{if(h!==a)try{await h._remove(o)}catch{}})),new sf(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AD(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gM(e))return"Blackberry";if(pM(e))return"Webos";if(fM(e))return"Safari";if((e.includes("chrome/")||hM(e))&&!e.includes("edge/"))return"Chrome";if(mM(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function uM(t=_r()){return/firefox\//i.test(t)}function fM(t=_r()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hM(t=_r()){return/crios\//i.test(t)}function dM(t=_r()){return/iemobile/i.test(t)}function mM(t=_r()){return/android/i.test(t)}function gM(t=_r()){return/blackberry/i.test(t)}function pM(t=_r()){return/webos/i.test(t)}function kT(t=_r()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function JH(t=_r()){return kT(t)&&!!window.navigator?.standalone}function eq(){return mz()&&document.documentMode===10}function yM(t=_r()){return kT(t)||mM(t)||pM(t)||gM(t)||/windows phone/i.test(t)||dM(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(t,e=[]){let n;switch(t){case"Browser":n=AD(_r());break;case"Worker":n=`${AD(_r())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Uf}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tq{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nq(t,e={}){return qi(t,"GET","/v2/passwordPolicy",Ja(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rq=6;class iq{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??rq,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aq{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ND(this),this.idTokenSubscription=new ND(this),this.beforeStateQueue=new tq(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Rs(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await sf.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await py(this,{idToken:e}),r=await sa._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(li(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=this.redirectUser?._redirectEventId,o=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Xe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await yy(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=LH()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(li(this.app))return Promise.reject(Fa(this));const n=e?Qt(e):null;return n&&Xe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Xe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return li(this.app)?Promise.reject(Fa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return li(this.app)?Promise.reject(Fa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nq(this),n=new iq(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new pm("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ZH(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Rs(e)||this._popupRedirectResolver;Xe(n,this,"argument-error"),this.redirectPersistenceManager=await sf.create(this,[Rs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Xe(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Xe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(li(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&PH(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ro(t){return Qt(t)}class ND{constructor(e){this.auth=e,this.observer=null,this.addObserver=_z(n=>this.observer=n)}get next(){return Xe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sq(t){Rv=t}function bM(t){return Rv.loadJS(t)}function oq(){return Rv.recaptchaEnterpriseScript}function lq(){return Rv.gapiScript}function cq(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class uq{constructor(){this.enterprise=new fq}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class fq{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const hq="recaptcha-enterprise",xM="NO_RECAPTCHA";class dq{constructor(e){this.type=hq,this.auth=ro(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{HH(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const h=new zH(u);return a.tenantId==null?a._agentRecaptchaConfig=h:a._tenantRecaptchaConfigs[a.tenantId]=h,o(h.siteKey)}}).catch(u=>{c(u)})})}function i(a,o,c){const u=window.grecaptcha;_D(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(h=>{o(h)}).catch(()=>{o(xM)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new uq().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(c=>{if(!n&&_D(window.grecaptcha))i(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=oq();u.length!==0&&(u+=c),bM(u).then(()=>{i(c,a,o)}).catch(h=>{o(h)})}}).catch(c=>{o(c)})})}}async function CD(t,e,n,r=!1,i=!1){const a=new dq(t);let o;if(i)o=xM;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}const c={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const u=c.phoneEnrollmentInfo.phoneNumber,h=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const u=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function vy(t,e,n,r,i){if(t._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await CD(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await CD(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mq(t,e){const n=NT(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(Hs(a,e??{}))return i;Ui(i,"already-initialized")}return n.initialize({options:e})}function gq(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Rs);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function pq(t,e,n){const r=ro(t);Xe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=wM(e),{host:o,port:c}=yq(e),u=c===null?"":`:${c}`,h={url:`${a}//${o}${u}/`},m=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Xe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Xe(Hs(h,r.config.emulator)&&Hs(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,Bf(o)?(W3(`${a}//${o}${u}`),Y3("Auth",!0)):vq()}function wM(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yq(t){const e=wM(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:jD(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:jD(o)}}}function jD(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function vq(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ps("not implemented")}_getIdTokenResponse(e){return Ps("not implemented")}_linkToIdToken(e,n){return Ps("not implemented")}_getReauthenticationResolver(e){return Ps("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _M(t,e){return qi(t,"POST","/v1/accounts:resetPassword",Ja(t,e))}async function bq(t,e){return qi(t,"POST","/v1/accounts:update",e)}async function xq(t,e){return qi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wq(t,e){return bm(t,"POST","/v1/accounts:signInWithPassword",Ja(t,e))}async function _q(t,e){return qi(t,"POST","/v1/accounts:sendOobCode",Ja(t,e))}async function Sq(t,e){return _q(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tq(t,e){return bm(t,"POST","/v1/accounts:signInWithEmailLink",Ja(t,e))}async function Eq(t,e){return bm(t,"POST","/v1/accounts:signInWithEmailLink",Ja(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd extends OT{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Gd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Gd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vy(e,n,"signInWithPassword",wq);case"emailLink":return Tq(e,{email:this._email,oobCode:this._password});default:Ui(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return vy(e,r,"signUpPassword",xq);case"emailLink":return Eq(e,{idToken:n,email:this._email,oobCode:this._password});default:Ui(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function of(t,e){return bm(t,"POST","/v1/accounts:signInWithIdp",Ja(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aq="http://localhost";class Oc extends OT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Oc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ui("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=n;if(!r||!i)return null;const o=new Oc(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return of(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,of(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,of(e,n)}buildRequest(){const e={requestUri:Aq,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ym(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nq(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Cq(t){const e=wd(_d(t)).link,n=e?wd(_d(e)).deep_link_id:null,r=wd(_d(t)).deep_link_id;return(r?wd(_d(r)).link:null)||r||n||e||t}class IT{constructor(e){const n=wd(_d(e)),r=n.apiKey??null,i=n.oobCode??null,a=Nq(n.mode??null);Xe(r&&i&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=Cq(e);try{return new IT(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(){this.providerId=$f.PROVIDER_ID}static credential(e,n){return Gd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=IT.parseLink(n);return Xe(r,"argument-error"),Gd._fromEmailAndCode(e,r.code,r.tenantId)}}$f.PROVIDER_ID="password";$f.EMAIL_PASSWORD_SIGN_IN_METHOD="password";$f.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm extends SM{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo extends xm{constructor(){super("facebook.com")}static credential(e){return Oc._fromParams({providerId:Yo.PROVIDER_ID,signInMethod:Yo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yo.credentialFromTaggedObject(e)}static credentialFromError(e){return Yo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yo.credential(e.oauthAccessToken)}catch{return null}}}Yo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo extends xm{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Oc._fromParams({providerId:Xo.PROVIDER_ID,signInMethod:Xo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Xo.credentialFromTaggedObject(e)}static credentialFromError(e){return Xo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Xo.credential(n,r)}catch{return null}}}Xo.GOOGLE_SIGN_IN_METHOD="google.com";Xo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo extends xm{constructor(){super("github.com")}static credential(e){return Oc._fromParams({providerId:Qo.PROVIDER_ID,signInMethod:Qo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qo.credentialFromTaggedObject(e)}static credentialFromError(e){return Qo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qo.credential(e.oauthAccessToken)}catch{return null}}}Qo.GITHUB_SIGN_IN_METHOD="github.com";Qo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo extends xm{constructor(){super("twitter.com")}static credential(e,n){return Oc._fromParams({providerId:Zo.PROVIDER_ID,signInMethod:Zo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Zo.credentialFromTaggedObject(e)}static credentialFromError(e){return Zo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Zo.credential(n,r)}catch{return null}}}Zo.TWITTER_SIGN_IN_METHOD="twitter.com";Zo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jq(t,e){return bm(t,"POST","/v1/accounts:signUp",Ja(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await sa._fromIdTokenResponse(e,r,i),o=DD(r);return new Ic({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=DD(r);return new Ic({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function DD(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by extends no{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,by.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new by(e,n,r,i)}}function TM(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?by._fromErrorAndOperation(t,a,e,r):a})}async function Dq(t,e,n=!1){const r=await kc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ic._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kq(t,e,n=!1){const{auth:r}=t;if(li(r.app))return Promise.reject(Fa(r));const i="reauthenticate";try{const a=await kc(t,TM(r,i,e,t),n);Xe(a.idToken,r,"internal-error");const o=DT(a.idToken);Xe(o,r,"internal-error");const{sub:c}=o;return Xe(t.uid===c,r,"user-mismatch"),Ic._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&Ui(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EM(t,e,n=!1){if(li(t.app))return Promise.reject(Fa(t));const r="signIn",i=await TM(t,r,e),a=await Ic._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}async function Oq(t,e){return EM(ro(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?RT._fromServerResponse(e,n):"totpInfo"in n?MT._fromServerResponse(e,n):Ui(e,"internal-error")}}class RT extends PT{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new RT(n)}}class MT extends PT{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new MT(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LT(t){const e=ro(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Iq(t,e,n){const r=ro(t);await vy(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Sq)}async function Pq(t,e,n){await _M(Qt(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&LT(t),r})}async function Rq(t,e){const n=Qt(t),r=await _M(n,{oobCode:e}),i=r.requestType;switch(Xe(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Xe(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Xe(r.mfaInfo,n,"internal-error");default:Xe(r.email,n,"internal-error")}let a=null;return r.mfaInfo&&(a=PT._fromServerResponse(ro(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:a},operation:i}}async function Mq(t,e){const{data:n}=await Rq(Qt(t),e);return n.email}async function Lq(t,e,n){if(li(t.app))return Promise.reject(Fa(t));const r=ro(t),o=await vy(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",jq).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&LT(t),u}),c=await Ic._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function Vq(t,e,n){return li(t.app)?Promise.reject(Fa(t)):Oq(Qt(t),$f.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&LT(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bq(t,e){return qi(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uq(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Qt(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await kc(r,Bq(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function $q(t,e){const n=Qt(t);return li(n.auth.app)?Promise.reject(Fa(n.auth)):AM(n,e,null)}function Fq(t,e){return AM(Qt(t),null,e)}async function AM(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(a.email=e),n&&(a.password=n);const o=await kc(t,bq(r,a));await t._updateTokensIfNecessary(o,!0)}function zq(t,e,n,r){return Qt(t).onIdTokenChanged(e,n,r)}function Hq(t,e,n){return Qt(t).beforeAuthStateChanged(e,n)}function ga(t,e,n,r){return Qt(t).onAuthStateChanged(e,n,r)}function NM(t){return Qt(t).signOut()}const xy="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(xy,"1"),this.storage.removeItem(xy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qq=1e3,Kq=10;class jM extends CM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yM(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);eq()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Kq):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},qq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}jM.type="LOCAL";const Gq=jM;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM extends CM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}DM.type="SESSION";const kM=DM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wq(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Mv(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,o=this.handlersMap[i];if(!o?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async h=>h(n.origin,a)),u=await Wq(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mv.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VT(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yq{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const h=VT("",20);i.port1.start();const m=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const y=p;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(m),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(y.data.response);break;default:clearTimeout(m),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(){return window}function Xq(t){za().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OM(){return typeof za().WorkerGlobalScope<"u"&&typeof za().importScripts=="function"}async function Qq(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Zq(){return navigator?.serviceWorker?.controller||null}function Jq(){return OM()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM="firebaseLocalStorageDb",eK=1,wy="firebaseLocalStorage",PM="fbase_key";class wm{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Lv(t,e){return t.transaction([wy],e?"readwrite":"readonly").objectStore(wy)}function tK(){const t=indexedDB.deleteDatabase(IM);return new wm(t).toPromise()}function O_(){const t=indexedDB.open(IM,eK);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(wy,{keyPath:PM})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(wy)?e(r):(r.close(),await tK(),e(await O_()))})})}async function kD(t,e,n){const r=Lv(t,!0).put({[PM]:e,value:n});return new wm(r).toPromise()}async function nK(t,e){const n=Lv(t,!1).get(e),r=await new wm(n).toPromise();return r===void 0?null:r.value}function OD(t,e){const n=Lv(t,!0).delete(e);return new wm(n).toPromise()}const rK=800,iK=3;class RM{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await O_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>iK)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OM()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mv._getInstance(Jq()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Qq(),!this.activeServiceWorker)return;this.sender=new Yq(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Zq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await O_();return await kD(e,xy,"1"),await OD(e,xy),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>kD(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>nK(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>OD(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Lv(i,!1).getAll();return new wm(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RM.type="LOCAL";const aK=RM;new vm(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sK(t,e){return e?Rs(e):(Xe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT extends OT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return of(e,this._buildIdpRequest())}_linkToIdToken(e,n){return of(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return of(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function oK(t){return EM(t.auth,new BT(t),t.bypassAuthState)}function lK(t){const{auth:e,user:n}=t;return Xe(n,e,"internal-error"),kq(n,new BT(t),t.bypassAuthState)}async function cK(t){const{auth:e,user:n}=t;return Xe(n,e,"internal-error"),Dq(n,new BT(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oK;case"linkViaPopup":case"linkViaRedirect":return cK;case"reauthViaPopup":case"reauthViaRedirect":return lK;default:Ui(this.auth,"internal-error")}}resolve(e){Ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uK=new vm(2e3,1e4);class Ju extends MM{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Ju.currentPopupAction&&Ju.currentPopupAction.cancel(),Ju.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Xe(e,this.auth,"internal-error"),e}async onExecution(){Ks(this.filter.length===1,"Popup operations only handle one event");const e=VT();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($a(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject($a(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ju.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($a(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,uK.get())};e()}}Ju.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fK="pendingRedirect",Xp=new Map;class hK extends MM{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Xp.get(this.auth._key());if(!e){try{const r=await dK(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Xp.set(this.auth._key(),e)}return this.bypassAuthState||Xp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dK(t,e){const n=pK(e),r=gK(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function mK(t,e){Xp.set(t._key(),e)}function gK(t){return Rs(t._redirectPersistence)}function pK(t){return Yp(fK,t.config.apiKey,t.name)}async function yK(t,e,n=!1){if(li(t.app))return Promise.reject(Fa(t));const r=ro(t),i=sK(r,e),o=await new hK(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vK=600*1e3;class bK{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xK(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!LM(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";n.onError($a(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=vK&&this.cachedEventUids.clear(),this.cachedEventUids.has(ID(e))}saveEventToCache(e){this.cachedEventUids.add(ID(e)),this.lastProcessedEventTime=Date.now()}}function ID(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function LM({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function xK(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LM(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wK(t,e={}){return qi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _K=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SK=/^https?/;async function TK(t){if(t.config.emulator)return;const{authorizedDomains:e}=await wK(t);for(const n of e)try{if(EK(n))return}catch{}Ui(t,"unauthorized-domain")}function EK(t){const e=D_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!SK.test(n))return!1;if(_K.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AK=new vm(3e4,6e4);function PD(){const t=za().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function NK(t){return new Promise((e,n)=>{function r(){PD(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{PD(),n($a(t,"network-request-failed"))},timeout:AK.get()})}if(za().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(za().gapi?.load)r();else{const i=cq("iframefcb");return za()[i]=()=>{gapi.load?r():n($a(t,"network-request-failed"))},bM(`${lq()}?onload=${i}`).catch(a=>n(a))}}).catch(e=>{throw Qp=null,e})}let Qp=null;function CK(t){return Qp=Qp||NK(t),Qp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jK=new vm(5e3,15e3),DK="__/auth/iframe",kK="emulator/auth/iframe",OK={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IK=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PK(t){const e=t.config;Xe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?jT(e,kK):`https://${t.config.authDomain}/${DK}`,r={apiKey:e.apiKey,appName:t.name,v:Uf},i=IK.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${ym(r).slice(1)}`}async function RK(t){const e=await CK(t),n=za().gapi;return Xe(n,t,"internal-error"),e.open({where:document.body,url:PK(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OK,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const o=$a(t,"network-request-failed"),c=za().setTimeout(()=>{a(o)},jK.get());function u(){za().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MK={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},LK=500,VK=600,BK="_blank",UK="http://localhost";class RD{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $K(t,e,n,r=LK,i=VK){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u={...MK,width:r.toString(),height:i.toString(),top:a,left:o},h=_r().toLowerCase();n&&(c=hM(h)?BK:n),uM(h)&&(e=e||UK,u.scrollbars="yes");const m=Object.entries(u).reduce((y,[b,_])=>`${y}${b}=${_},`,"");if(JH(h)&&c!=="_self")return FK(e||"",c),new RD(null);const p=window.open(e||"",c,m);Xe(p,t,"popup-blocked");try{p.focus()}catch{}return new RD(p)}function FK(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zK="__/auth/handler",HK="emulator/auth/handler",qK=encodeURIComponent("fac");async function MD(t,e,n,r,i,a){Xe(t.config.authDomain,t,"auth-domain-config-required"),Xe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Uf,eventId:i};if(e instanceof SM){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",wz(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,p]of Object.entries({}))o[m]=p}if(e instanceof xm){const m=e.getScopes().filter(p=>p!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const m of Object.keys(c))c[m]===void 0&&delete c[m];const u=await t._getAppCheckToken(),h=u?`#${qK}=${encodeURIComponent(u)}`:"";return`${KK(t)}?${ym(c).slice(1)}${h}`}function KK({config:t}){return t.emulator?jT(t,HK):`https://${t.authDomain}/${zK}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="webStorageSupport";class GK{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kM,this._completeRedirectFn=yK,this._overrideRedirectResult=mK}async _openPopup(e,n,r,i){Ks(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const a=await MD(e,n,r,D_(),i);return $K(e,a,VT())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await MD(e,n,r,D_(),i);return Xq(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(Ks(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await RK(e),r=new bK(e);return n.register("authEvent",i=>(Xe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ox,{type:ox},i=>{const a=i?.[0]?.[ox];a!==void 0&&n(!!a),Ui(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=TK(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return yM()||fM()||kT()}}const WK=GK;var LD="@firebase/auth",VD="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YK{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Xe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XK(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QK(t){df(new Dc("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;Xe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vM(t)},h=new aq(r,i,a,u);return gq(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),df(new Dc("auth-internal",e=>{const n=ro(e.getProvider("auth").getImmediate());return(r=>new YK(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),il(LD,VD,XK(t)),il(LD,VD,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZK=300,JK=G3("authIdTokenMaxAge")||ZK;let BD=null;const eG=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>JK)return;const i=n?.token;BD!==i&&(BD=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function tG(t=J3()){const e=NT(t,"auth");if(e.isInitialized())return e.getImmediate();const n=mq(t,{popupRedirectResolver:WK,persistence:[aK,Gq,kM]}),r=G3("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=eG(a.toString());Hq(n,o,()=>o(n.currentUser)),zq(n,c=>o(c))}}const i=q3("auth");return i&&pq(n,`http://${i}`),n}function nG(){return document.getElementsByTagName("head")?.[0]??document}sq({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=$a("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",nG().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QK("Browser");var rG="firebase",iG="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */il(rG,iG,"app");var UD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var al,VM;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,I){function O(){}O.prototype=I.prototype,k.D=I.prototype,k.prototype=new O,k.prototype.constructor=k,k.C=function(U,$,V){for(var B=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)B[Y-2]=arguments[Y];return I.prototype[$].apply(U,B)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,I,O){O||(O=0);var U=Array(16);if(typeof I=="string")for(var $=0;16>$;++$)U[$]=I.charCodeAt(O++)|I.charCodeAt(O++)<<8|I.charCodeAt(O++)<<16|I.charCodeAt(O++)<<24;else for($=0;16>$;++$)U[$]=I[O++]|I[O++]<<8|I[O++]<<16|I[O++]<<24;I=k.g[0],O=k.g[1],$=k.g[2];var V=k.g[3],B=I+(V^O&($^V))+U[0]+3614090360&4294967295;I=O+(B<<7&4294967295|B>>>25),B=V+($^I&(O^$))+U[1]+3905402710&4294967295,V=I+(B<<12&4294967295|B>>>20),B=$+(O^V&(I^O))+U[2]+606105819&4294967295,$=V+(B<<17&4294967295|B>>>15),B=O+(I^$&(V^I))+U[3]+3250441966&4294967295,O=$+(B<<22&4294967295|B>>>10),B=I+(V^O&($^V))+U[4]+4118548399&4294967295,I=O+(B<<7&4294967295|B>>>25),B=V+($^I&(O^$))+U[5]+1200080426&4294967295,V=I+(B<<12&4294967295|B>>>20),B=$+(O^V&(I^O))+U[6]+2821735955&4294967295,$=V+(B<<17&4294967295|B>>>15),B=O+(I^$&(V^I))+U[7]+4249261313&4294967295,O=$+(B<<22&4294967295|B>>>10),B=I+(V^O&($^V))+U[8]+1770035416&4294967295,I=O+(B<<7&4294967295|B>>>25),B=V+($^I&(O^$))+U[9]+2336552879&4294967295,V=I+(B<<12&4294967295|B>>>20),B=$+(O^V&(I^O))+U[10]+4294925233&4294967295,$=V+(B<<17&4294967295|B>>>15),B=O+(I^$&(V^I))+U[11]+2304563134&4294967295,O=$+(B<<22&4294967295|B>>>10),B=I+(V^O&($^V))+U[12]+1804603682&4294967295,I=O+(B<<7&4294967295|B>>>25),B=V+($^I&(O^$))+U[13]+4254626195&4294967295,V=I+(B<<12&4294967295|B>>>20),B=$+(O^V&(I^O))+U[14]+2792965006&4294967295,$=V+(B<<17&4294967295|B>>>15),B=O+(I^$&(V^I))+U[15]+1236535329&4294967295,O=$+(B<<22&4294967295|B>>>10),B=I+($^V&(O^$))+U[1]+4129170786&4294967295,I=O+(B<<5&4294967295|B>>>27),B=V+(O^$&(I^O))+U[6]+3225465664&4294967295,V=I+(B<<9&4294967295|B>>>23),B=$+(I^O&(V^I))+U[11]+643717713&4294967295,$=V+(B<<14&4294967295|B>>>18),B=O+(V^I&($^V))+U[0]+3921069994&4294967295,O=$+(B<<20&4294967295|B>>>12),B=I+($^V&(O^$))+U[5]+3593408605&4294967295,I=O+(B<<5&4294967295|B>>>27),B=V+(O^$&(I^O))+U[10]+38016083&4294967295,V=I+(B<<9&4294967295|B>>>23),B=$+(I^O&(V^I))+U[15]+3634488961&4294967295,$=V+(B<<14&4294967295|B>>>18),B=O+(V^I&($^V))+U[4]+3889429448&4294967295,O=$+(B<<20&4294967295|B>>>12),B=I+($^V&(O^$))+U[9]+568446438&4294967295,I=O+(B<<5&4294967295|B>>>27),B=V+(O^$&(I^O))+U[14]+3275163606&4294967295,V=I+(B<<9&4294967295|B>>>23),B=$+(I^O&(V^I))+U[3]+4107603335&4294967295,$=V+(B<<14&4294967295|B>>>18),B=O+(V^I&($^V))+U[8]+1163531501&4294967295,O=$+(B<<20&4294967295|B>>>12),B=I+($^V&(O^$))+U[13]+2850285829&4294967295,I=O+(B<<5&4294967295|B>>>27),B=V+(O^$&(I^O))+U[2]+4243563512&4294967295,V=I+(B<<9&4294967295|B>>>23),B=$+(I^O&(V^I))+U[7]+1735328473&4294967295,$=V+(B<<14&4294967295|B>>>18),B=O+(V^I&($^V))+U[12]+2368359562&4294967295,O=$+(B<<20&4294967295|B>>>12),B=I+(O^$^V)+U[5]+4294588738&4294967295,I=O+(B<<4&4294967295|B>>>28),B=V+(I^O^$)+U[8]+2272392833&4294967295,V=I+(B<<11&4294967295|B>>>21),B=$+(V^I^O)+U[11]+1839030562&4294967295,$=V+(B<<16&4294967295|B>>>16),B=O+($^V^I)+U[14]+4259657740&4294967295,O=$+(B<<23&4294967295|B>>>9),B=I+(O^$^V)+U[1]+2763975236&4294967295,I=O+(B<<4&4294967295|B>>>28),B=V+(I^O^$)+U[4]+1272893353&4294967295,V=I+(B<<11&4294967295|B>>>21),B=$+(V^I^O)+U[7]+4139469664&4294967295,$=V+(B<<16&4294967295|B>>>16),B=O+($^V^I)+U[10]+3200236656&4294967295,O=$+(B<<23&4294967295|B>>>9),B=I+(O^$^V)+U[13]+681279174&4294967295,I=O+(B<<4&4294967295|B>>>28),B=V+(I^O^$)+U[0]+3936430074&4294967295,V=I+(B<<11&4294967295|B>>>21),B=$+(V^I^O)+U[3]+3572445317&4294967295,$=V+(B<<16&4294967295|B>>>16),B=O+($^V^I)+U[6]+76029189&4294967295,O=$+(B<<23&4294967295|B>>>9),B=I+(O^$^V)+U[9]+3654602809&4294967295,I=O+(B<<4&4294967295|B>>>28),B=V+(I^O^$)+U[12]+3873151461&4294967295,V=I+(B<<11&4294967295|B>>>21),B=$+(V^I^O)+U[15]+530742520&4294967295,$=V+(B<<16&4294967295|B>>>16),B=O+($^V^I)+U[2]+3299628645&4294967295,O=$+(B<<23&4294967295|B>>>9),B=I+($^(O|~V))+U[0]+4096336452&4294967295,I=O+(B<<6&4294967295|B>>>26),B=V+(O^(I|~$))+U[7]+1126891415&4294967295,V=I+(B<<10&4294967295|B>>>22),B=$+(I^(V|~O))+U[14]+2878612391&4294967295,$=V+(B<<15&4294967295|B>>>17),B=O+(V^($|~I))+U[5]+4237533241&4294967295,O=$+(B<<21&4294967295|B>>>11),B=I+($^(O|~V))+U[12]+1700485571&4294967295,I=O+(B<<6&4294967295|B>>>26),B=V+(O^(I|~$))+U[3]+2399980690&4294967295,V=I+(B<<10&4294967295|B>>>22),B=$+(I^(V|~O))+U[10]+4293915773&4294967295,$=V+(B<<15&4294967295|B>>>17),B=O+(V^($|~I))+U[1]+2240044497&4294967295,O=$+(B<<21&4294967295|B>>>11),B=I+($^(O|~V))+U[8]+1873313359&4294967295,I=O+(B<<6&4294967295|B>>>26),B=V+(O^(I|~$))+U[15]+4264355552&4294967295,V=I+(B<<10&4294967295|B>>>22),B=$+(I^(V|~O))+U[6]+2734768916&4294967295,$=V+(B<<15&4294967295|B>>>17),B=O+(V^($|~I))+U[13]+1309151649&4294967295,O=$+(B<<21&4294967295|B>>>11),B=I+($^(O|~V))+U[4]+4149444226&4294967295,I=O+(B<<6&4294967295|B>>>26),B=V+(O^(I|~$))+U[11]+3174756917&4294967295,V=I+(B<<10&4294967295|B>>>22),B=$+(I^(V|~O))+U[2]+718787259&4294967295,$=V+(B<<15&4294967295|B>>>17),B=O+(V^($|~I))+U[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+($+(B<<21&4294967295|B>>>11))&4294967295,k.g[2]=k.g[2]+$&4294967295,k.g[3]=k.g[3]+V&4294967295}r.prototype.u=function(k,I){I===void 0&&(I=k.length);for(var O=I-this.blockSize,U=this.B,$=this.h,V=0;V<I;){if($==0)for(;V<=O;)i(this,k,V),V+=this.blockSize;if(typeof k=="string"){for(;V<I;)if(U[$++]=k.charCodeAt(V++),$==this.blockSize){i(this,U),$=0;break}}else for(;V<I;)if(U[$++]=k[V++],$==this.blockSize){i(this,U),$=0;break}}this.h=$,this.o+=I},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;var O=8*this.o;for(I=k.length-8;I<k.length;++I)k[I]=O&255,O/=256;for(this.u(k),k=Array(16),I=O=0;4>I;++I)for(var U=0;32>U;U+=8)k[O++]=this.g[I]>>>U&255;return k};function a(k,I){var O=c;return Object.prototype.hasOwnProperty.call(O,k)?O[k]:O[k]=I(k)}function o(k,I){this.h=I;for(var O=[],U=!0,$=k.length-1;0<=$;$--){var V=k[$]|0;U&&V==I||(O[$]=V,U=!1)}this.g=O}var c={};function u(k){return-128<=k&&128>k?a(k,function(I){return new o([I|0],0>I?-1:0)}):new o([k|0],0>k?-1:0)}function h(k){if(isNaN(k)||!isFinite(k))return p;if(0>k)return S(h(-k));for(var I=[],O=1,U=0;k>=O;U++)I[U]=k/O|0,O*=4294967296;return new o(I,0)}function m(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return S(m(k.substring(1),I));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=h(Math.pow(I,8)),U=p,$=0;$<k.length;$+=8){var V=Math.min(8,k.length-$),B=parseInt(k.substring($,$+V),I);8>V?(V=h(Math.pow(I,V)),U=U.j(V).add(h(B))):(U=U.j(O),U=U.add(h(B)))}return U}var p=u(0),y=u(1),b=u(16777216);t=o.prototype,t.m=function(){if(T(this))return-S(this).m();for(var k=0,I=1,O=0;O<this.g.length;O++){var U=this.i(O);k+=(0<=U?U:4294967296+U)*I,I*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(_(this))return"0";if(T(this))return"-"+S(this).toString(k);for(var I=h(Math.pow(k,6)),O=this,U="";;){var $=L(O,I).g;O=E(O,$.j(I));var V=((0<O.g.length?O.g[0]:O.h)>>>0).toString(k);if(O=$,_(O))return V+U;for(;6>V.length;)V="0"+V;U=V+U}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function _(k){if(k.h!=0)return!1;for(var I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function T(k){return k.h==-1}t.l=function(k){return k=E(this,k),T(k)?-1:_(k)?0:1};function S(k){for(var I=k.g.length,O=[],U=0;U<I;U++)O[U]=~k.g[U];return new o(O,~k.h).add(y)}t.abs=function(){return T(this)?S(this):this},t.add=function(k){for(var I=Math.max(this.g.length,k.g.length),O=[],U=0,$=0;$<=I;$++){var V=U+(this.i($)&65535)+(k.i($)&65535),B=(V>>>16)+(this.i($)>>>16)+(k.i($)>>>16);U=B>>>16,V&=65535,B&=65535,O[$]=B<<16|V}return new o(O,O[O.length-1]&-2147483648?-1:0)};function E(k,I){return k.add(S(I))}t.j=function(k){if(_(this)||_(k))return p;if(T(this))return T(k)?S(this).j(S(k)):S(S(this).j(k));if(T(k))return S(this.j(S(k)));if(0>this.l(b)&&0>k.l(b))return h(this.m()*k.m());for(var I=this.g.length+k.g.length,O=[],U=0;U<2*I;U++)O[U]=0;for(U=0;U<this.g.length;U++)for(var $=0;$<k.g.length;$++){var V=this.i(U)>>>16,B=this.i(U)&65535,Y=k.i($)>>>16,ee=k.i($)&65535;O[2*U+2*$]+=B*ee,N(O,2*U+2*$),O[2*U+2*$+1]+=V*ee,N(O,2*U+2*$+1),O[2*U+2*$+1]+=B*Y,N(O,2*U+2*$+1),O[2*U+2*$+2]+=V*Y,N(O,2*U+2*$+2)}for(U=0;U<I;U++)O[U]=O[2*U+1]<<16|O[2*U];for(U=I;U<2*I;U++)O[U]=0;return new o(O,0)};function N(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function C(k,I){this.g=k,this.h=I}function L(k,I){if(_(I))throw Error("division by zero");if(_(k))return new C(p,p);if(T(k))return I=L(S(k),I),new C(S(I.g),S(I.h));if(T(I))return I=L(k,S(I)),new C(S(I.g),I.h);if(30<k.g.length){if(T(k)||T(I))throw Error("slowDivide_ only works with positive integers.");for(var O=y,U=I;0>=U.l(k);)O=D(O),U=D(U);var $=R(O,1),V=R(U,1);for(U=R(U,2),O=R(O,2);!_(U);){var B=V.add(U);0>=B.l(k)&&($=$.add(O),V=B),U=R(U,1),O=R(O,1)}return I=E(k,$.j(I)),new C($,I)}for($=p;0<=k.l(I);){for(O=Math.max(1,Math.floor(k.m()/I.m())),U=Math.ceil(Math.log(O)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),V=h(O),B=V.j(I);T(B)||0<B.l(k);)O-=U,V=h(O),B=V.j(I);_(V)&&(V=y),$=$.add(V),k=E(k,B)}return new C($,k)}t.A=function(k){return L(this,k).h},t.and=function(k){for(var I=Math.max(this.g.length,k.g.length),O=[],U=0;U<I;U++)O[U]=this.i(U)&k.i(U);return new o(O,this.h&k.h)},t.or=function(k){for(var I=Math.max(this.g.length,k.g.length),O=[],U=0;U<I;U++)O[U]=this.i(U)|k.i(U);return new o(O,this.h|k.h)},t.xor=function(k){for(var I=Math.max(this.g.length,k.g.length),O=[],U=0;U<I;U++)O[U]=this.i(U)^k.i(U);return new o(O,this.h^k.h)};function D(k){for(var I=k.g.length+1,O=[],U=0;U<I;U++)O[U]=k.i(U)<<1|k.i(U-1)>>>31;return new o(O,k.h)}function R(k,I){var O=I>>5;I%=32;for(var U=k.g.length-O,$=[],V=0;V<U;V++)$[V]=0<I?k.i(V+O)>>>I|k.i(V+O+1)<<32-I:k.i(V+O);return new o($,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,VM=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=m,al=o}).apply(typeof UD<"u"?UD:typeof self<"u"?self:typeof window<"u"?window:{});var wp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var BM,Sd,UM,Zp,I_,$M,FM,zM;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(v,j,P){return v==Array.prototype||v==Object.prototype||(v[j]=P.value),v};function n(v){v=[typeof globalThis=="object"&&globalThis,v,typeof window=="object"&&window,typeof self=="object"&&self,typeof wp=="object"&&wp];for(var j=0;j<v.length;++j){var P=v[j];if(P&&P.Math==Math)return P}throw Error("Cannot find global object")}var r=n(this);function i(v,j){if(j)e:{var P=r;v=v.split(".");for(var z=0;z<v.length-1;z++){var ne=v[z];if(!(ne in P))break e;P=P[ne]}v=v[v.length-1],z=P[v],j=j(z),j!=z&&j!=null&&e(P,v,{configurable:!0,writable:!0,value:j})}}function a(v,j){v instanceof String&&(v+="");var P=0,z=!1,ne={next:function(){if(!z&&P<v.length){var he=P++;return{value:j(he,v[he]),done:!1}}return z=!0,{done:!0,value:void 0}}};return ne[Symbol.iterator]=function(){return ne},ne}i("Array.prototype.values",function(v){return v||function(){return a(this,function(j,P){return P})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(v){var j=typeof v;return j=j!="object"?j:v?Array.isArray(v)?"array":j:"null",j=="array"||j=="object"&&typeof v.length=="number"}function h(v){var j=typeof v;return j=="object"&&v!=null||j=="function"}function m(v,j,P){return v.call.apply(v.bind,arguments)}function p(v,j,P){if(!v)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var ne=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ne,z),v.apply(j,ne)}}return function(){return v.apply(j,arguments)}}function y(v,j,P){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:p,y.apply(null,arguments)}function b(v,j){var P=Array.prototype.slice.call(arguments,1);return function(){var z=P.slice();return z.push.apply(z,arguments),v.apply(this,z)}}function _(v,j){function P(){}P.prototype=j.prototype,v.aa=j.prototype,v.prototype=new P,v.prototype.constructor=v,v.Qb=function(z,ne,he){for(var Te=Array(arguments.length-2),St=2;St<arguments.length;St++)Te[St-2]=arguments[St];return j.prototype[ne].apply(z,Te)}}function T(v){const j=v.length;if(0<j){const P=Array(j);for(let z=0;z<j;z++)P[z]=v[z];return P}return[]}function S(v,j){for(let P=1;P<arguments.length;P++){const z=arguments[P];if(u(z)){const ne=v.length||0,he=z.length||0;v.length=ne+he;for(let Te=0;Te<he;Te++)v[ne+Te]=z[Te]}else v.push(z)}}class E{constructor(j,P){this.i=j,this.j=P,this.h=0,this.g=null}get(){let j;return 0<this.h?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function N(v){return/^[\s\xa0]*$/.test(v)}function C(){var v=c.navigator;return v&&(v=v.userAgent)?v:""}function L(v){return L[" "](v),v}L[" "]=function(){};var D=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function R(v,j,P){for(const z in v)j.call(P,v[z],z,v)}function k(v,j){for(const P in v)j.call(void 0,v[P],P,v)}function I(v){const j={};for(const P in v)j[P]=v[P];return j}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(v,j){let P,z;for(let ne=1;ne<arguments.length;ne++){z=arguments[ne];for(P in z)v[P]=z[P];for(let he=0;he<O.length;he++)P=O[he],Object.prototype.hasOwnProperty.call(z,P)&&(v[P]=z[P])}}function $(v){var j=1;v=v.split(":");const P=[];for(;0<j&&v.length;)P.push(v.shift()),j--;return v.length&&P.push(v.join(":")),P}function V(v){c.setTimeout(()=>{throw v},0)}function B(){var v=oe;let j=null;return v.g&&(j=v.g,v.g=v.g.next,v.g||(v.h=null),j.next=null),j}class Y{constructor(){this.h=this.g=null}add(j,P){const z=ee.get();z.set(j,P),this.h?this.h.next=z:this.g=z,this.h=z}}var ee=new E(()=>new q,v=>v.reset());class q{constructor(){this.next=this.g=this.h=null}set(j,P){this.h=j,this.g=P,this.next=null}reset(){this.next=this.g=this.h=null}}let G,K=!1,oe=new Y,H=()=>{const v=c.Promise.resolve(void 0);G=()=>{v.then(Z)}};var Z=()=>{for(var v;v=B();){try{v.h.call(v.g)}catch(P){V(P)}var j=ee;j.j(v),100>j.h&&(j.h++,v.next=j.g,j.g=v)}K=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(v,j){this.type=v,this.g=this.target=j,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var v=!1,j=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const P=()=>{};c.addEventListener("test",P,j),c.removeEventListener("test",P,j)}catch{}return v}();function Ie(v,j){if(fe.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var P=this.type=v.type,z=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=j,j=v.relatedTarget){if(D){e:{try{L(j.nodeName);var ne=!0;break e}catch{}ne=!1}ne||(j=null)}}else P=="mouseover"?j=v.fromElement:P=="mouseout"&&(j=v.toElement);this.relatedTarget=j,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType=typeof v.pointerType=="string"?v.pointerType:Fe[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&Ie.aa.h.call(this)}}_(Ie,fe);var Fe={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var Pt="closure_listenable_"+(1e6*Math.random()|0),Ne=0;function we(v,j,P,z,ne){this.listener=v,this.proxy=null,this.src=j,this.type=P,this.capture=!!z,this.ha=ne,this.key=++Ne,this.da=this.fa=!1}function Le(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function xe(v){this.src=v,this.g={},this.h=0}xe.prototype.add=function(v,j,P,z,ne){var he=v.toString();v=this.g[he],v||(v=this.g[he]=[],this.h++);var Te=Pe(v,j,z,ne);return-1<Te?(j=v[Te],P||(j.fa=!1)):(j=new we(j,this.src,he,!!z,ne),j.fa=P,v.push(j)),j};function ce(v,j){var P=j.type;if(P in v.g){var z=v.g[P],ne=Array.prototype.indexOf.call(z,j,void 0),he;(he=0<=ne)&&Array.prototype.splice.call(z,ne,1),he&&(Le(j),v.g[P].length==0&&(delete v.g[P],v.h--))}}function Pe(v,j,P,z){for(var ne=0;ne<v.length;++ne){var he=v[ne];if(!he.da&&he.listener==j&&he.capture==!!P&&he.ha==z)return ne}return-1}var qe="closure_lm_"+(1e6*Math.random()|0),Ke={};function kt(v,j,P,z,ne){if(Array.isArray(j)){for(var he=0;he<j.length;he++)kt(v,j[he],P,z,ne);return null}return P=Se(P),v&&v[Pt]?v.K(j,P,h(z)?!!z.capture:!1,ne):Rt(v,j,P,!1,z,ne)}function Rt(v,j,P,z,ne,he){if(!j)throw Error("Invalid event type");var Te=h(ne)?!!ne.capture:!!ne,St=De(v);if(St||(v[qe]=St=new xe(v)),P=St.add(j,P,z,Te,he),P.proxy)return P;if(z=Gr(),P.proxy=z,z.src=v,z.listener=P,v.addEventListener)Ce||(ne=Te),ne===void 0&&(ne=!1),v.addEventListener(j.toString(),z,ne);else if(v.attachEvent)v.attachEvent(ae(j.toString()),z);else if(v.addListener&&v.removeListener)v.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return P}function Gr(){function v(P){return j.call(v.src,v.listener,P)}const j=me;return v}function Wr(v,j,P,z,ne){if(Array.isArray(j))for(var he=0;he<j.length;he++)Wr(v,j[he],P,z,ne);else z=h(z)?!!z.capture:!!z,P=Se(P),v&&v[Pt]?(v=v.i,j=String(j).toString(),j in v.g&&(he=v.g[j],P=Pe(he,P,z,ne),-1<P&&(Le(he[P]),Array.prototype.splice.call(he,P,1),he.length==0&&(delete v.g[j],v.h--)))):v&&(v=De(v))&&(j=v.g[j.toString()],v=-1,j&&(v=Pe(j,P,z,ne)),(P=-1<v?j[v]:null)&&X(P))}function X(v){if(typeof v!="number"&&v&&!v.da){var j=v.src;if(j&&j[Pt])ce(j.i,v);else{var P=v.type,z=v.proxy;j.removeEventListener?j.removeEventListener(P,z,v.capture):j.detachEvent?j.detachEvent(ae(P),z):j.addListener&&j.removeListener&&j.removeListener(z),(P=De(j))?(ce(P,v),P.h==0&&(P.src=null,j[qe]=null)):Le(v)}}}function ae(v){return v in Ke?Ke[v]:Ke[v]="on"+v}function me(v,j){if(v.da)v=!0;else{j=new Ie(j,this);var P=v.listener,z=v.ha||v.src;v.fa&&X(v),v=P.call(z,j)}return v}function De(v){return v=v[qe],v instanceof xe?v:null}var Ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function Se(v){return typeof v=="function"?v:(v[Ee]||(v[Ee]=function(j){return v.handleEvent(j)}),v[Ee])}function je(){te.call(this),this.i=new xe(this),this.M=this,this.F=null}_(je,te),je.prototype[Pt]=!0,je.prototype.removeEventListener=function(v,j,P,z){Wr(this,v,j,P,z)};function $e(v,j){var P,z=v.F;if(z)for(P=[];z;z=z.F)P.push(z);if(v=v.M,z=j.type||j,typeof j=="string")j=new fe(j,v);else if(j instanceof fe)j.target=j.target||v;else{var ne=j;j=new fe(z,v),U(j,ne)}if(ne=!0,P)for(var he=P.length-1;0<=he;he--){var Te=j.g=P[he];ne=ot(Te,z,!0,j)&&ne}if(Te=j.g=v,ne=ot(Te,z,!0,j)&&ne,ne=ot(Te,z,!1,j)&&ne,P)for(he=0;he<P.length;he++)Te=j.g=P[he],ne=ot(Te,z,!1,j)&&ne}je.prototype.N=function(){if(je.aa.N.call(this),this.i){var v=this.i,j;for(j in v.g){for(var P=v.g[j],z=0;z<P.length;z++)Le(P[z]);delete v.g[j],v.h--}}this.F=null},je.prototype.K=function(v,j,P,z){return this.i.add(String(v),j,!1,P,z)},je.prototype.L=function(v,j,P,z){return this.i.add(String(v),j,!0,P,z)};function ot(v,j,P,z){if(j=v.i.g[String(j)],!j)return!0;j=j.concat();for(var ne=!0,he=0;he<j.length;++he){var Te=j[he];if(Te&&!Te.da&&Te.capture==P){var St=Te.listener,Ln=Te.ha||Te.src;Te.fa&&ce(v.i,Te),ne=St.call(Ln,z)!==!1&&ne}}return ne&&!z.defaultPrevented}function Bt(v,j,P){if(typeof v=="function")P&&(v=y(v,P));else if(v&&typeof v.handleEvent=="function")v=y(v.handleEvent,v);else throw Error("Invalid listener argument");return 2147483647<Number(j)?-1:c.setTimeout(v,j||0)}function ts(v){v.g=Bt(()=>{v.g=null,v.i&&(v.i=!1,ts(v))},v.l);const j=v.h;v.h=null,v.m.apply(null,j)}class bi extends te{constructor(j,P){super(),this.m=j,this.l=P,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:ts(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ns(v){te.call(this),this.h=v,this.g={}}_(ns,te);var Gi=[];function Wi(v){R(v.g,function(j,P){this.g.hasOwnProperty(P)&&X(j)},v),v.g={}}ns.prototype.N=function(){ns.aa.N.call(this),Wi(this)},ns.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yr=c.JSON.stringify,rs=c.JSON.parse,is=class{stringify(v){return c.JSON.stringify(v,void 0)}parse(v){return c.JSON.parse(v,void 0)}};function fo(){}fo.prototype.h=null;function ih(v){return v.h||(v.h=v.i())}function ah(){}var as={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ss(){fe.call(this,"d")}_(ss,fe);function sh(){fe.call(this,"c")}_(sh,fe);var va={},oh=null;function ho(){return oh=oh||new je}va.La="serverreachability";function Jc(v){fe.call(this,va.La,v)}_(Jc,fe);function mo(v){const j=ho();$e(j,new Jc(j))}va.STAT_EVENT="statevent";function Zm(v,j){fe.call(this,va.STAT_EVENT,v),this.stat=j}_(Zm,fe);function sn(v){const j=ho();$e(j,new Zm(j,v))}va.Ma="timingevent";function Mn(v,j){fe.call(this,va.Ma,v),this.size=j}_(Mn,fe);function Tn(v,j){if(typeof v!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){v()},j)}function xi(){this.g=!0}xi.prototype.xa=function(){this.g=!1};function lh(v,j,P,z,ne,he){v.info(function(){if(v.g)if(he)for(var Te="",St=he.split("&"),Ln=0;Ln<St.length;Ln++){var Tt=St[Ln].split("=");if(1<Tt.length){var Gn=Tt[0];Tt=Tt[1];var Vn=Gn.split("_");Te=2<=Vn.length&&Vn[1]=="type"?Te+(Gn+"="+Tt+"&"):Te+(Gn+"=redacted&")}}else Te=null;else Te=he;return"XMLHTTP REQ ("+z+") [attempt "+ne+"]: "+j+`
`+P+`
`+Te})}function Y0(v,j,P,z,ne,he,Te){v.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+ne+"]: "+j+`
`+P+`
`+he+" "+Te})}function go(v,j,P,z){v.info(function(){return"XMLHTTP TEXT ("+j+"): "+Ol(v,P)+(z?" "+z:"")})}function Jm(v,j){v.info(function(){return"TIMEOUT: "+j})}xi.prototype.info=function(){};function Ol(v,j){if(!v.g)return j;if(!j)return null;try{var P=JSON.parse(j);if(P){for(v=0;v<P.length;v++)if(Array.isArray(P[v])){var z=P[v];if(!(2>z.length)){var ne=z[1];if(Array.isArray(ne)&&!(1>ne.length)){var he=ne[0];if(he!="noop"&&he!="stop"&&he!="close")for(var Te=1;Te<ne.length;Te++)ne[Te]=""}}}}return Yr(P)}catch{return j}}var po={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},os={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ba;function xa(){}_(xa,fo),xa.prototype.g=function(){return new XMLHttpRequest},xa.prototype.i=function(){return{}},ba=new xa;function Tr(v,j,P,z){this.j=v,this.i=j,this.l=P,this.R=z||1,this.U=new ns(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bn}function bn(){this.i=null,this.g="",this.h=!1}var ch={},eu={};function Yi(v,j,P){v.L=1,v.v=Ll(Xr(j)),v.m=P,v.P=!0,ls(v,null)}function ls(v,j){v.F=Date.now(),Il(v),v.A=Xr(v.v);var P=v.A,z=v.R;Array.isArray(z)||(z=[String(z)]),gh(P.i,"t",z),v.C=0,P=v.j.J,v.h=new bn,v.g=gg(v.j,P?j:null,!v.m),0<v.O&&(v.M=new bi(y(v.Y,v,v.g),v.O)),j=v.U,P=v.g,z=v.ca;var ne="readystatechange";Array.isArray(ne)||(ne&&(Gi[0]=ne.toString()),ne=Gi);for(var he=0;he<ne.length;he++){var Te=kt(P,ne[he],z||j.handleEvent,!1,j.h||j);if(!Te)break;j.g[Te.key]=Te}j=v.H?I(v.H):{},v.m?(v.u||(v.u="POST"),j["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,j)):(v.u="GET",v.g.ea(v.A,v.u,null,j)),mo(),lh(v.i,v.u,v.A,v.l,v.R,v.m)}Tr.prototype.ca=function(v){v=v.target;const j=this.M;j&&Ti(v)==3?j.j():this.Y(v)},Tr.prototype.Y=function(v){try{if(v==this.g)e:{const Vn=Ti(this.g);var j=this.g.Ba();const ps=this.g.Z();if(!(3>Vn)&&(Vn!=3||this.g&&(this.h.h||this.g.oa()||og(this.g)))){this.J||Vn!=4||j==7||(j==8||0>=ps?mo(3):mo(2)),yo(this);var P=this.g.Z();this.X=P;t:if(eg(this)){var z=og(this.g);v="";var ne=z.length,he=Ti(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){rr(this),wa(this);var Te="";break t}this.h.i=new c.TextDecoder}for(j=0;j<ne;j++)this.h.h=!0,v+=this.h.i.decode(z[j],{stream:!(he&&j==ne-1)});z.length=0,this.h.g+=v,this.C=0,Te=this.h.g}else Te=this.g.oa();if(this.o=P==200,Y0(this.i,this.u,this.A,this.l,this.R,Vn,P),this.o){if(this.T&&!this.K){t:{if(this.g){var St,Ln=this.g;if((St=Ln.g?Ln.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(St)){var Tt=St;break t}}Tt=null}if(P=Tt)go(this.i,this.l,P,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pl(this,P);else{this.o=!1,this.s=3,sn(12),rr(this),wa(this);break e}}if(this.P){P=!0;let ir;for(;!this.J&&this.C<Te.length;)if(ir=tg(this,Te),ir==eu){Vn==4&&(this.s=4,sn(14),P=!1),go(this.i,this.l,null,"[Incomplete Response]");break}else if(ir==ch){this.s=4,sn(15),go(this.i,this.l,Te,"[Invalid Chunk]"),P=!1;break}else go(this.i,this.l,ir,null),Pl(this,ir);if(eg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vn!=4||Te.length!=0||this.h.h||(this.s=1,sn(16),P=!1),this.o=this.o&&P,!P)go(this.i,this.l,Te,"[Invalid Chunked Response]"),rr(this),wa(this);else if(0<Te.length&&!this.W){this.W=!0;var Gn=this.j;Gn.g==this&&Gn.ba&&!Gn.M&&(Gn.j.info("Great, no buffering proxy detected. Bytes received: "+Te.length),ql(Gn),Gn.M=!0,sn(11))}}else go(this.i,this.l,Te,null),Pl(this,Te);Vn==4&&rr(this),this.o&&!this.J&&(Vn==4?hg(this.j,this):(this.o=!1,Il(this)))}else eb(this.g),P==400&&0<Te.indexOf("Unknown SID")?(this.s=3,sn(12)):(this.s=0,sn(13)),rr(this),wa(this)}}}catch{}finally{}};function eg(v){return v.g?v.u=="GET"&&v.L!=2&&v.j.Ca:!1}function tg(v,j){var P=v.C,z=j.indexOf(`
`,P);return z==-1?eu:(P=Number(j.substring(P,z)),isNaN(P)?ch:(z+=1,z+P>j.length?eu:(j=j.slice(z,z+P),v.C=z+P,j)))}Tr.prototype.cancel=function(){this.J=!0,rr(this)};function Il(v){v.S=Date.now()+v.I,ng(v,v.I)}function ng(v,j){if(v.B!=null)throw Error("WatchDog timer not null");v.B=Tn(y(v.ba,v),j)}function yo(v){v.B&&(c.clearTimeout(v.B),v.B=null)}Tr.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(Jm(this.i,this.A),this.L!=2&&(mo(),sn(17)),rr(this),this.s=2,wa(this)):ng(this,this.S-v)};function wa(v){v.j.G==0||v.J||hg(v.j,v)}function rr(v){yo(v);var j=v.M;j&&typeof j.ma=="function"&&j.ma(),v.M=null,Wi(v.U),v.g&&(j=v.g,v.g=null,j.abort(),j.ma())}function Pl(v,j){try{var P=v.j;if(P.G!=0&&(P.g==v||uh(P.h,v))){if(!v.K&&uh(P.h,v)&&P.G==3){try{var z=P.Da.g.parse(j)}catch{z=null}if(Array.isArray(z)&&z.length==3){var ne=z;if(ne[0]==0){e:if(!P.u){if(P.g)if(P.g.F+3e3<v.F)hu(P),uu(P);else break e;xh(P),sn(18)}}else P.za=ne[1],0<P.za-P.T&&37500>ne[2]&&P.F&&P.v==0&&!P.C&&(P.C=Tn(y(P.Za,P),6e3));if(1>=nu(P.h)&&P.ca){try{P.ca()}catch{}P.ca=void 0}}else gs(P,11)}else if((v.K||P.g==v)&&hu(P),!N(j))for(ne=P.Da.g.parse(j),j=0;j<ne.length;j++){let Tt=ne[j];if(P.T=Tt[0],Tt=Tt[1],P.G==2)if(Tt[0]=="c"){P.K=Tt[1],P.ia=Tt[2];const Gn=Tt[3];Gn!=null&&(P.la=Gn,P.j.info("VER="+P.la));const Vn=Tt[4];Vn!=null&&(P.Aa=Vn,P.j.info("SVER="+P.Aa));const ps=Tt[5];ps!=null&&typeof ps=="number"&&0<ps&&(z=1.5*ps,P.L=z,P.j.info("backChannelRequestTimeoutMs_="+z)),z=P;const ir=v.g;if(ir){const Ca=ir.g?ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ca){var he=z.h;he.g||Ca.indexOf("spdy")==-1&&Ca.indexOf("quic")==-1&&Ca.indexOf("h2")==-1||(he.j=he.l,he.g=new Set,he.h&&(ru(he,he.h),he.h=null))}if(z.D){const _h=ir.g?ir.g.getResponseHeader("X-HTTP-Session-Id"):null;_h&&(z.ya=_h,Ht(z.I,z.D,_h))}}P.G=3,P.l&&P.l.ua(),P.ba&&(P.R=Date.now()-v.F,P.j.info("Handshake RTT: "+P.R+"ms")),z=P;var Te=v;if(z.qa=mg(z,z.J?z.ia:null,z.W),Te.K){Er(z.h,Te);var St=Te,Ln=z.L;Ln&&(St.I=Ln),St.B&&(yo(St),Il(St)),z.g=Te}else ug(z);0<P.i.length&&fu(P)}else Tt[0]!="stop"&&Tt[0]!="close"||gs(P,7);else P.G==3&&(Tt[0]=="stop"||Tt[0]=="close"?Tt[0]=="stop"?gs(P,7):vh(P):Tt[0]!="noop"&&P.l&&P.l.ta(Tt),P.v=0)}}mo(4)}catch{}}var rg=class{constructor(v,j){this.g=v,this.map=j}};function cs(v){this.l=v||10,c.PerformanceNavigationTiming?(v=c.performance.getEntriesByType("navigation"),v=0<v.length&&(v[0].nextHopProtocol=="hq"||v[0].nextHopProtocol=="h2")):v=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tu(v){return v.h?!0:v.g?v.g.size>=v.j:!1}function nu(v){return v.h?1:v.g?v.g.size:0}function uh(v,j){return v.h?v.h==j:v.g?v.g.has(j):!1}function ru(v,j){v.g?v.g.add(j):v.h=j}function Er(v,j){v.h&&v.h==j?v.h=null:v.g&&v.g.has(j)&&v.g.delete(j)}cs.prototype.cancel=function(){if(this.i=fh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const v of this.g.values())v.cancel();this.g.clear()}};function fh(v){if(v.h!=null)return v.i.concat(v.h.D);if(v.g!=null&&v.g.size!==0){let j=v.i;for(const P of v.g.values())j=j.concat(P.D);return j}return T(v.i)}function X0(v){if(v.V&&typeof v.V=="function")return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if(typeof v=="string")return v.split("");if(u(v)){for(var j=[],P=v.length,z=0;z<P;z++)j.push(v[z]);return j}j=[],P=0;for(z in v)j[P++]=v[z];return j}function iu(v){if(v.na&&typeof v.na=="function")return v.na();if(!v.V||typeof v.V!="function"){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(u(v)||typeof v=="string"){var j=[];v=v.length;for(var P=0;P<v;P++)j.push(P);return j}j=[],P=0;for(const z in v)j[P++]=z;return j}}}function hh(v,j){if(v.forEach&&typeof v.forEach=="function")v.forEach(j,void 0);else if(u(v)||typeof v=="string")Array.prototype.forEach.call(v,j,void 0);else for(var P=iu(v),z=X0(v),ne=z.length,he=0;he<ne;he++)j.call(void 0,z[he],P&&P[he],v)}var Rl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Q0(v,j){if(v){v=v.split("&");for(var P=0;P<v.length;P++){var z=v[P].indexOf("="),ne=null;if(0<=z){var he=v[P].substring(0,z);ne=v[P].substring(z+1)}else he=v[P];j(he,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function En(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof En){this.h=v.h,Ml(this,v.j),this.o=v.o,this.g=v.g,vo(this,v.s),this.l=v.l;var j=v.i,P=new fs;P.i=j.i,j.g&&(P.g=new Map(j.g),P.h=j.h),us(this,P),this.m=v.m}else v&&(j=String(v).match(Rl))?(this.h=!1,Ml(this,j[1]||"",!0),this.o=wi(j[2]||""),this.g=wi(j[3]||"",!0),vo(this,j[4]),this.l=wi(j[5]||"",!0),us(this,j[6]||"",!0),this.m=wi(j[7]||"")):(this.h=!1,this.i=new fs(null,this.h))}En.prototype.toString=function(){var v=[],j=this.j;j&&v.push(Vl(j,dh,!0),":");var P=this.g;return(P||j=="file")&&(v.push("//"),(j=this.o)&&v.push(Vl(j,dh,!0),"@"),v.push(encodeURIComponent(String(P)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),P=this.s,P!=null&&v.push(":",String(P))),(P=this.l)&&(this.g&&P.charAt(0)!="/"&&v.push("/"),v.push(Vl(P,P.charAt(0)=="/"?Z0:mh,!0))),(P=this.i.toString())&&v.push("?",P),(P=this.m)&&v.push("#",Vl(P,au)),v.join("")};function Xr(v){return new En(v)}function Ml(v,j,P){v.j=P?wi(j,!0):j,v.j&&(v.j=v.j.replace(/:$/,""))}function vo(v,j){if(j){if(j=Number(j),isNaN(j)||0>j)throw Error("Bad port number "+j);v.s=j}else v.s=null}function us(v,j,P){j instanceof fs?(v.i=j,ag(v.i,v.h)):(P||(j=Vl(j,J0)),v.i=new fs(j,v.h))}function Ht(v,j,P){v.i.set(j,P)}function Ll(v){return Ht(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function wi(v,j){return v?j?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function Vl(v,j,P){return typeof v=="string"?(v=encodeURI(v).replace(j,ig),P&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function ig(v){return v=v.charCodeAt(0),"%"+(v>>4&15).toString(16)+(v&15).toString(16)}var dh=/[#\/\?@]/g,mh=/[#\?:]/g,Z0=/[#\?]/g,J0=/[#\?@]/g,au=/#/g;function fs(v,j){this.h=this.g=null,this.i=v||null,this.j=!!j}function _i(v){v.g||(v.g=new Map,v.h=0,v.i&&Q0(v.i,function(j,P){v.add(decodeURIComponent(j.replace(/\+/g," ")),P)}))}t=fs.prototype,t.add=function(v,j){_i(this),this.i=null,v=_a(this,v);var P=this.g.get(v);return P||this.g.set(v,P=[]),P.push(j),this.h+=1,this};function hs(v,j){_i(v),j=_a(v,j),v.g.has(j)&&(v.i=null,v.h-=v.g.get(j).length,v.g.delete(j))}function ds(v,j){return _i(v),j=_a(v,j),v.g.has(j)}t.forEach=function(v,j){_i(this),this.g.forEach(function(P,z){P.forEach(function(ne){v.call(j,ne,z,this)},this)},this)},t.na=function(){_i(this);const v=Array.from(this.g.values()),j=Array.from(this.g.keys()),P=[];for(let z=0;z<j.length;z++){const ne=v[z];for(let he=0;he<ne.length;he++)P.push(j[z])}return P},t.V=function(v){_i(this);let j=[];if(typeof v=="string")ds(this,v)&&(j=j.concat(this.g.get(_a(this,v))));else{v=Array.from(this.g.values());for(let P=0;P<v.length;P++)j=j.concat(v[P])}return j},t.set=function(v,j){return _i(this),this.i=null,v=_a(this,v),ds(this,v)&&(this.h-=this.g.get(v).length),this.g.set(v,[j]),this.h+=1,this},t.get=function(v,j){return v?(v=this.V(v),0<v.length?String(v[0]):j):j};function gh(v,j,P){hs(v,j),0<P.length&&(v.i=null,v.g.set(_a(v,j),T(P)),v.h+=P.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],j=Array.from(this.g.keys());for(var P=0;P<j.length;P++){var z=j[P];const he=encodeURIComponent(String(z)),Te=this.V(z);for(z=0;z<Te.length;z++){var ne=he;Te[z]!==""&&(ne+="="+encodeURIComponent(String(Te[z]))),v.push(ne)}}return this.i=v.join("&")};function _a(v,j){return j=String(j),v.j&&(j=j.toLowerCase()),j}function ag(v,j){j&&!v.j&&(_i(v),v.i=null,v.g.forEach(function(P,z){var ne=z.toLowerCase();z!=ne&&(hs(this,z),gh(this,ne,P))},v)),v.j=j}function Bl(v,j){const P=new xi;if(c.Image){const z=new Image;z.onload=b(Si,P,"TestLoadImage: loaded",!0,j,z),z.onerror=b(Si,P,"TestLoadImage: error",!1,j,z),z.onabort=b(Si,P,"TestLoadImage: abort",!1,j,z),z.ontimeout=b(Si,P,"TestLoadImage: timeout",!1,j,z),c.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=v}else j(!1)}function Xi(v,j){const P=new xi,z=new AbortController,ne=setTimeout(()=>{z.abort(),Si(P,"TestPingServer: timeout",!1,j)},1e4);fetch(v,{signal:z.signal}).then(he=>{clearTimeout(ne),he.ok?Si(P,"TestPingServer: ok",!0,j):Si(P,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(ne),Si(P,"TestPingServer: error",!1,j)})}function Si(v,j,P,z,ne){try{ne&&(ne.onload=null,ne.onerror=null,ne.onabort=null,ne.ontimeout=null),z(P)}catch{}}function Ul(){this.g=new is}function Sa(v,j,P){const z=P||"";try{hh(v,function(ne,he){let Te=ne;h(ne)&&(Te=Yr(ne)),j.push(z+he+"="+encodeURIComponent(Te))})}catch(ne){throw j.push(z+"type="+encodeURIComponent("_badmap")),ne}}function bo(v){this.l=v.Ub||null,this.j=v.eb||!1}_(bo,fo),bo.prototype.g=function(){return new ms(this.l,this.j)},bo.prototype.i=function(v){return function(){return v}}({});function ms(v,j){je.call(this),this.D=v,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(ms,je),t=ms.prototype,t.open=function(v,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=j,this.readyState=1,Ea(this)},t.send=function(v){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const j={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(j.body=v),(this.D||c).fetch(new Request(this.A,j)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ta(this)),this.readyState=0},t.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,Ea(this)),this.g&&(this.readyState=3,Ea(this),this.g)))if(this.responseType==="arraybuffer")v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ph(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))};function ph(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}t.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var j=v.value?v.value:new Uint8Array(0);(j=this.v.decode(j,{stream:!v.done}))&&(this.response=this.responseText+=j)}v.done?Ta(this):Ea(this),this.readyState==3&&ph(this)}},t.Ra=function(v){this.g&&(this.response=this.responseText=v,Ta(this))},t.Qa=function(v){this.g&&(this.response=v,Ta(this))},t.ga=function(){this.g&&Ta(this)};function Ta(v){v.readyState=4,v.l=null,v.j=null,v.v=null,Ea(v)}t.setRequestHeader=function(v,j){this.u.append(v,j)},t.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],j=this.h.entries();for(var P=j.next();!P.done;)P=P.value,v.push(P[0]+": "+P[1]),P=j.next();return v.join(`\r
`)};function Ea(v){v.onreadystatechange&&v.onreadystatechange.call(v)}Object.defineProperty(ms.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(v){this.m=v?"include":"same-origin"}});function yh(v){let j="";return R(v,function(P,z){j+=z,j+=":",j+=P,j+=`\r
`}),j}function Kn(v,j,P){e:{for(z in P){var z=!1;break e}z=!0}z||(P=yh(P),typeof v=="string"?P!=null&&encodeURIComponent(String(P)):Ht(v,j,P))}function Mt(v){je.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Mt,je);var su=/^https?$/i,$l=["POST","PUT"];t=Mt.prototype,t.Ha=function(v){this.J=v},t.ea=function(v,j,P,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);j=j?j.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ba.g(),this.v=this.o?ih(this.o):ih(ba),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(j,String(v),!0),this.B=!1}catch(he){sg(this,he);return}if(v=P||"",P=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var ne in z)P.set(ne,z[ne]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const he of z.keys())P.set(he,z.get(he));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(P.keys()).find(he=>he.toLowerCase()=="content-type"),ne=c.FormData&&v instanceof c.FormData,!(0<=Array.prototype.indexOf.call($l,j,void 0))||z||ne||P.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[he,Te]of P)this.g.setRequestHeader(he,Te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fl(this),this.u=!0,this.g.send(v),this.u=!1}catch(he){sg(this,he)}};function sg(v,j){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=j,v.m=5,ou(v),Aa(v)}function ou(v){v.A||(v.A=!0,$e(v,"complete"),$e(v,"error"))}t.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,$e(this,"complete"),$e(this,"abort"),Aa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Aa(this,!0)),Mt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?lu(this):this.bb())},t.bb=function(){lu(this)};function lu(v){if(v.h&&typeof o<"u"&&(!v.v[1]||Ti(v)!=4||v.Z()!=2)){if(v.u&&Ti(v)==4)Bt(v.Ea,0,v);else if($e(v,"readystatechange"),Ti(v)==4){v.h=!1;try{const Te=v.Z();e:switch(Te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var P;if(!(P=j)){var z;if(z=Te===0){var ne=String(v.D).match(Rl)[1]||null;!ne&&c.self&&c.self.location&&(ne=c.self.location.protocol.slice(0,-1)),z=!su.test(ne?ne.toLowerCase():"")}P=z}if(P)$e(v,"complete"),$e(v,"success");else{v.m=6;try{var he=2<Ti(v)?v.g.statusText:""}catch{he=""}v.l=he+" ["+v.Z()+"]",ou(v)}}finally{Aa(v)}}}}function Aa(v,j){if(v.g){Fl(v);const P=v.g,z=v.v[0]?()=>{}:null;v.g=null,v.v=null,j||$e(v,"ready");try{P.onreadystatechange=z}catch{}}}function Fl(v){v.I&&(c.clearTimeout(v.I),v.I=null)}t.isActive=function(){return!!this.g};function Ti(v){return v.g?v.g.readyState:0}t.Z=function(){try{return 2<Ti(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(v){if(this.g){var j=this.g.responseText;return v&&j.indexOf(v)==0&&(j=j.substring(v.length)),rs(j)}};function og(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function eb(v){const j={};v=(v.g&&2<=Ti(v)&&v.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<v.length;z++){if(N(v[z]))continue;var P=$(v[z]);const ne=P[0];if(P=P[1],typeof P!="string")continue;P=P.trim();const he=j[ne]||[];j[ne]=he,he.push(P)}k(j,function(z){return z.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zl(v,j,P){return P&&P.internalChannelParams&&P.internalChannelParams[v]||j}function cu(v){this.Aa=0,this.i=[],this.j=new xi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zl("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zl("baseRetryDelayMs",5e3,v),this.cb=zl("retryDelaySeedMs",1e4,v),this.Wa=zl("forwardChannelMaxRetries",2,v),this.wa=zl("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new cs(v&&v.concurrentRequestLimit),this.Da=new Ul,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=cu.prototype,t.la=8,t.G=1,t.connect=function(v,j,P,z){sn(0),this.W=v,this.H=j||{},P&&z!==void 0&&(this.H.OSID=P,this.H.OAID=z),this.F=this.X,this.I=mg(this,null,this.W),fu(this)};function vh(v){if(lg(v),v.G==3){var j=v.U++,P=Xr(v.I);if(Ht(P,"SID",v.K),Ht(P,"RID",j),Ht(P,"TYPE","terminate"),Hl(v,P),j=new Tr(v,v.j,j),j.L=2,j.v=Ll(Xr(P)),P=!1,c.navigator&&c.navigator.sendBeacon)try{P=c.navigator.sendBeacon(j.v.toString(),"")}catch{}!P&&c.Image&&(new Image().src=j.v,P=!0),P||(j.g=gg(j.j,null),j.g.ea(j.v)),j.F=Date.now(),Il(j)}dg(v)}function uu(v){v.g&&(ql(v),v.g.cancel(),v.g=null)}function lg(v){uu(v),v.u&&(c.clearTimeout(v.u),v.u=null),hu(v),v.h.cancel(),v.s&&(typeof v.s=="number"&&c.clearTimeout(v.s),v.s=null)}function fu(v){if(!tu(v.h)&&!v.s){v.s=!0;var j=v.Ga;G||H(),K||(G(),K=!0),oe.add(j,v),v.B=0}}function tb(v,j){return nu(v.h)>=v.h.j-(v.s?1:0)?!1:v.s?(v.i=j.D.concat(v.i),!0):v.G==1||v.G==2||v.B>=(v.Va?0:v.Wa)?!1:(v.s=Tn(y(v.Ga,v,j),wh(v,v.B)),v.B++,!0)}t.Ga=function(v){if(this.s)if(this.s=null,this.G==1){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const ne=new Tr(this,this.j,v);let he=this.o;if(this.S&&(he?(he=I(he),U(he,this.S)):he=this.S),this.m!==null||this.O||(ne.H=he,he=null),this.P)e:{for(var j=0,P=0;P<this.i.length;P++){t:{var z=this.i[P];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(j+=z,4096<j){j=P;break e}if(j===4096||P===this.i.length-1){j=P+1;break e}}j=1e3}else j=1e3;j=cg(this,ne,j),P=Xr(this.I),Ht(P,"RID",v),Ht(P,"CVER",22),this.D&&Ht(P,"X-HTTP-Session-Id",this.D),Hl(this,P),he&&(this.O?j="headers="+encodeURIComponent(String(yh(he)))+"&"+j:this.m&&Kn(P,this.m,he)),ru(this.h,ne),this.Ua&&Ht(P,"TYPE","init"),this.P?(Ht(P,"$req",j),Ht(P,"SID","null"),ne.T=!0,Yi(ne,P,null)):Yi(ne,P,j),this.G=2}}else this.G==3&&(v?bh(this,v):this.i.length==0||tu(this.h)||bh(this))};function bh(v,j){var P;j?P=j.l:P=v.U++;const z=Xr(v.I);Ht(z,"SID",v.K),Ht(z,"RID",P),Ht(z,"AID",v.T),Hl(v,z),v.m&&v.o&&Kn(z,v.m,v.o),P=new Tr(v,v.j,P,v.B+1),v.m===null&&(P.H=v.o),j&&(v.i=j.D.concat(v.i)),j=cg(v,P,1e3),P.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),ru(v.h,P),Yi(P,z,j)}function Hl(v,j){v.H&&R(v.H,function(P,z){Ht(j,z,P)}),v.l&&hh({},function(P,z){Ht(j,z,P)})}function cg(v,j,P){P=Math.min(v.i.length,P);var z=v.l?y(v.l.Na,v.l,v):null;e:{var ne=v.i;let he=-1;for(;;){const Te=["count="+P];he==-1?0<P?(he=ne[0].g,Te.push("ofs="+he)):he=0:Te.push("ofs="+he);let St=!0;for(let Ln=0;Ln<P;Ln++){let Tt=ne[Ln].g;const Gn=ne[Ln].map;if(Tt-=he,0>Tt)he=Math.max(0,ne[Ln].g-100),St=!1;else try{Sa(Gn,Te,"req"+Tt+"_")}catch{z&&z(Gn)}}if(St){z=Te.join("&");break e}}}return v=v.i.splice(0,P),j.D=v,z}function ug(v){if(!v.g&&!v.u){v.Y=1;var j=v.Fa;G||H(),K||(G(),K=!0),oe.add(j,v),v.v=0}}function xh(v){return v.g||v.u||3<=v.v?!1:(v.Y++,v.u=Tn(y(v.Fa,v),wh(v,v.v)),v.v++,!0)}t.Fa=function(){if(this.u=null,fg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=Tn(y(this.ab,this),v)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,sn(10),uu(this),fg(this))};function ql(v){v.A!=null&&(c.clearTimeout(v.A),v.A=null)}function fg(v){v.g=new Tr(v,v.j,"rpc",v.Y),v.m===null&&(v.g.H=v.o),v.g.O=0;var j=Xr(v.qa);Ht(j,"RID","rpc"),Ht(j,"SID",v.K),Ht(j,"AID",v.T),Ht(j,"CI",v.F?"0":"1"),!v.F&&v.ja&&Ht(j,"TO",v.ja),Ht(j,"TYPE","xmlhttp"),Hl(v,j),v.m&&v.o&&Kn(j,v.m,v.o),v.L&&(v.g.I=v.L);var P=v.g;v=v.ia,P.L=1,P.v=Ll(Xr(j)),P.m=null,P.P=!0,ls(P,v)}t.Za=function(){this.C!=null&&(this.C=null,uu(this),xh(this),sn(19))};function hu(v){v.C!=null&&(c.clearTimeout(v.C),v.C=null)}function hg(v,j){var P=null;if(v.g==j){hu(v),ql(v),v.g=null;var z=2}else if(uh(v.h,j))P=j.D,Er(v.h,j),z=1;else return;if(v.G!=0){if(j.o)if(z==1){P=j.m?j.m.length:0,j=Date.now()-j.F;var ne=v.B;z=ho(),$e(z,new Mn(z,P)),fu(v)}else ug(v);else if(ne=j.s,ne==3||ne==0&&0<j.X||!(z==1&&tb(v,j)||z==2&&xh(v)))switch(P&&0<P.length&&(j=v.h,j.i=j.i.concat(P)),ne){case 1:gs(v,5);break;case 4:gs(v,10);break;case 3:gs(v,6);break;default:gs(v,2)}}}function wh(v,j){let P=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(P*=2),P*j}function gs(v,j){if(v.j.info("Error code "+j),j==2){var P=y(v.fb,v),z=v.Xa;const ne=!z;z=new En(z||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ml(z,"https"),Ll(z),ne?Bl(z.toString(),P):Xi(z.toString(),P)}else sn(2);v.G=0,v.l&&v.l.sa(j),dg(v),lg(v)}t.fb=function(v){v?(this.j.info("Successfully pinged google.com"),sn(2)):(this.j.info("Failed to ping google.com"),sn(1))};function dg(v){if(v.G=0,v.ka=[],v.l){const j=fh(v.h);(j.length!=0||v.i.length!=0)&&(S(v.ka,j),S(v.ka,v.i),v.h.i.length=0,T(v.i),v.i.length=0),v.l.ra()}}function mg(v,j,P){var z=P instanceof En?Xr(P):new En(P);if(z.g!="")j&&(z.g=j+"."+z.g),vo(z,z.s);else{var ne=c.location;z=ne.protocol,j=j?j+"."+ne.hostname:ne.hostname,ne=+ne.port;var he=new En(null);z&&Ml(he,z),j&&(he.g=j),ne&&vo(he,ne),P&&(he.l=P),z=he}return P=v.D,j=v.ya,P&&j&&Ht(z,P,j),Ht(z,"VER",v.la),Hl(v,z),z}function gg(v,j,P){if(j&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return j=v.Ca&&!v.pa?new Mt(new bo({eb:P})):new Mt(v.pa),j.Ha(v.J),j}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function pg(){}t=pg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function du(){}du.prototype.g=function(v,j){return new Ar(v,j)};function Ar(v,j){je.call(this),this.g=new cu(j),this.l=v,this.h=j&&j.messageUrlParams||null,v=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(v?v["X-WebChannel-Content-Type"]=j.messageContentType:v={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.va&&(v?v["X-WebChannel-Client-Profile"]=j.va:v={"X-WebChannel-Client-Profile":j.va}),this.g.S=v,(v=j&&j.Sb)&&!N(v)&&(this.g.m=v),this.v=j&&j.supportsCrossDomainXhr||!1,this.u=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!N(j)&&(this.g.D=j,v=this.h,v!==null&&j in v&&(v=this.h,j in v&&delete v[j])),this.j=new Na(this)}_(Ar,je),Ar.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ar.prototype.close=function(){vh(this.g)},Ar.prototype.o=function(v){var j=this.g;if(typeof v=="string"){var P={};P.__data__=v,v=P}else this.u&&(P={},P.__data__=Yr(v),v=P);j.i.push(new rg(j.Ya++,v)),j.G==3&&fu(j)},Ar.prototype.N=function(){this.g.l=null,delete this.j,vh(this.g),delete this.g,Ar.aa.N.call(this)};function yg(v){ss.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var j=v.__sm__;if(j){e:{for(const P in j){v=P;break e}v=void 0}(this.i=v)&&(v=this.i,j=j!==null&&v in j?j[v]:void 0),this.data=j}else this.data=v}_(yg,ss);function vg(){sh.call(this),this.status=1}_(vg,sh);function Na(v){this.g=v}_(Na,pg),Na.prototype.ua=function(){$e(this.g,"a")},Na.prototype.ta=function(v){$e(this.g,new yg(v))},Na.prototype.sa=function(v){$e(this.g,new vg)},Na.prototype.ra=function(){$e(this.g,"b")},du.prototype.createWebChannel=du.prototype.g,Ar.prototype.send=Ar.prototype.o,Ar.prototype.open=Ar.prototype.m,Ar.prototype.close=Ar.prototype.close,zM=function(){return new du},FM=function(){return ho()},$M=va,I_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},po.NO_ERROR=0,po.TIMEOUT=8,po.HTTP_ERROR=6,Zp=po,os.COMPLETE="complete",UM=os,ah.EventType=as,as.OPEN="a",as.CLOSE="b",as.ERROR="c",as.MESSAGE="d",je.prototype.listen=je.prototype.K,Sd=ah,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,BM=Mt}).apply(typeof wp<"u"?wp:typeof self<"u"?self:typeof window<"u"?window:{});const $D="@firebase/firestore",FD="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vr.UNAUTHENTICATED=new vr(null),vr.GOOGLE_CREDENTIALS=new vr("google-credentials-uid"),vr.FIRST_PARTY=new vr("first-party-uid"),vr.MOCK_USER=new vr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ff="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new ET("@firebase/firestore");function Yu(){return Pc.logLevel}function Re(t,...e){if(Pc.logLevel<=vt.DEBUG){const n=e.map(UT);Pc.debug(`Firestore (${Ff}): ${t}`,...n)}}function Gs(t,...e){if(Pc.logLevel<=vt.ERROR){const n=e.map(UT);Pc.error(`Firestore (${Ff}): ${t}`,...n)}}function mf(t,...e){if(Pc.logLevel<=vt.WARN){const n=e.map(UT);Pc.warn(`Firestore (${Ff}): ${t}`,...n)}}function UT(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,HM(t,r,n)}function HM(t,e,n){let r=`FIRESTORE (${Ff}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Gs(r),new Error(r)}function Vt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||HM(e,i,r)}function it(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends no{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aG{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(vr.UNAUTHENTICATED))}shutdown(){}}class sG{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class oG{constructor(e){this.t=e,this.currentUser=vr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Vt(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new Us;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Us,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Us)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Vt(typeof r.accessToken=="string",31837,{l:r}),new qM(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Vt(e===null||typeof e=="string",2055,{h:e}),new vr(e)}}class lG{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=vr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class cG{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new lG(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(vr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uG{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,li(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Vt(this.o===void 0,3512);const r=a=>{a.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,Re("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new zD(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Vt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new zD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fG(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=fG(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function bt(t,e){return t<e?-1:t>e?1:0}function P_(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return lx(i)===lx(a)?bt(i,a):lx(i)?1:-1}return bt(t.length,e.length)}const hG=55296,dG=57343;function lx(t){const e=t.charCodeAt(0);return e>=hG&&e<=dG}function gf(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_="__name__";class Pa{constructor(e,n,r){n===void 0?n=0:n>e.length&&et(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&et(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Pa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Pa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=Pa.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return bt(e.length,n.length)}static compareSegments(e,n){const r=Pa.isNumericId(e),i=Pa.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Pa.extractNumericId(e).compare(Pa.extractNumericId(n)):P_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return al.fromString(e.substring(4,e.length-2))}}class en extends Pa{construct(e,n,r){return new en(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new en(n)}static emptyPath(){return new en([])}}const mG=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fr extends Pa{construct(e,n,r){return new fr(e,n,r)}static isValidIdentifier(e){return mG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===R_}static keyField(){return new fr([R_])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new ke(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new ke(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ke(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(a(),i++)}if(a(),o)throw new ke(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fr(n)}static emptyPath(){return new fr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.path=e}static fromPath(e){return new We(en.fromString(e))}static fromName(e){return new We(en.fromString(e).popFirst(5))}static empty(){return new We(en.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&en.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return en.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new en(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KM(t,e,n){if(!n)throw new ke(pe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gG(t,e,n,r){if(e===!0&&r===!0)throw new ke(pe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function HD(t){if(!We.isDocumentKey(t))throw new ke(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qD(t){if(We.isDocumentKey(t))throw new ke(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function GM(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Vv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":et(12329,{type:typeof t})}function kr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ke(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vv(t);throw new ke(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function pG(t,e){if(e<=0)throw new ke(pe.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t,e){const n={typeString:t};return e&&(n.value=e),n}function _m(t,e){if(!GM(t))throw new ke(pe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new ke(pe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=-62135596800,GD=1e6;class nn{static now(){return nn.fromMillis(Date.now())}static fromDate(e){return nn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*GD);return new nn(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ke(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ke(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<KD)throw new ke(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GD}_compareTo(e){return this.seconds===e.seconds?bt(this.nanoseconds,e.nanoseconds):bt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:nn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(_m(e,nn._jsonSchema))return new nn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-KD;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}nn._jsonSchemaVersion="firestore/timestamp/1.0",nn._jsonSchema={type:On("string",nn._jsonSchemaVersion),seconds:On("number"),nanoseconds:On("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{static fromTimestamp(e){return new rt(e)}static min(){return new rt(new nn(0,0))}static max(){return new rt(new nn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wd=-1;function yG(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=rt.fromTimestamp(r===1e9?new nn(n+1,0):new nn(n,r));return new fl(i,We.empty(),e)}function vG(t){return new fl(t.readTime,t.key,Wd)}class fl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new fl(rt.min(),We.empty(),Wd)}static max(){return new fl(rt.max(),We.empty(),Wd)}}function bG(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=We.comparator(t.documentKey,e.documentKey),n!==0?n:bt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wG{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zf(t){if(t.code!==pe.FAILED_PRECONDITION||t.message!==xG)throw t;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&et(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new be((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof be?n:be.resolve(n)}catch(n){return be.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):be.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):be.reject(n)}static resolve(e){return new be((n,r)=>{n(e)})}static reject(e){return new be((n,r)=>{r(e)})}static waitFor(e){return new be((n,r)=>{let i=0,a=0,o=!1;e.forEach(c=>{++i,c.next(()=>{++a,o&&a===i&&n()},u=>r(u))}),o=!0,a===i&&n()})}static or(e){let n=be.resolve(!1);for(const r of e)n=n.next(i=>i?be.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new be((r,i)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const h=u;n(e[h]).next(m=>{o[h]=m,++c,c===a&&r(o)},m=>i(m))}})}static doWhile(e,n){return new be((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function _G(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Hf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bv.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=-1;function Uv(t){return t==null}function _y(t){return t===0&&1/t==-1/0}function SG(t){return typeof t=="number"&&Number.isInteger(t)&&!_y(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WM="";function TG(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=WD(e)),e=EG(t.get(n),e);return WD(e)}function EG(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case WM:n+="";break;default:n+=a}}return n}function WD(t){return t+WM+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function _l(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function YM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,n){this.comparator=e,this.root=n||cr.EMPTY}insert(e,n){return new hn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,cr.BLACK,null,null))}remove(e){return new hn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _p(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _p(this.root,e,this.comparator,!1)}getReverseIterator(){return new _p(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _p(this.root,e,this.comparator,!0)}}class _p{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cr{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??cr.RED,this.left=i??cr.EMPTY,this.right=a??cr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new cr(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return cr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return cr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw et(43730,{key:this.key,value:this.value});if(this.right.isRed())throw et(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw et(27949);return e+(this.isRed()?0:1)}}cr.EMPTY=null,cr.RED=!0,cr.BLACK=!1;cr.EMPTY=new class{constructor(){this.size=0}get key(){throw et(57766)}get value(){throw et(16141)}get color(){throw et(16727)}get left(){throw et(29726)}get right(){throw et(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new cr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.comparator=e,this.data=new hn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new XD(this.data.getIterator())}getIteratorFrom(e){return new XD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Fn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Fn(this.comparator);return n.data=e,n}}class XD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e){this.fields=e,e.sort(fr.comparator)}static empty(){return new ui([])}unionWith(e){let n=new Fn(fr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ui(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return gf(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new XM("Invalid base64 string: "+a):a}}(e);return new dr(n)}static fromUint8Array(e){const n=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new dr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return bt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dr.EMPTY_BYTE_STRING=new dr("");const AG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hl(t){if(Vt(!!t,39018),typeof t=="string"){let e=0;const n=AG.exec(t);if(Vt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_n(t.seconds),nanos:_n(t.nanos)}}function _n(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function dl(t){return typeof t=="string"?dr.fromBase64String(t):dr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM="server_timestamp",ZM="__type__",JM="__previous_value__",e6="__local_write_time__";function zT(t){return(t?.mapValue?.fields||{})[ZM]?.stringValue===QM}function $v(t){const e=t.mapValue.fields[JM];return zT(e)?$v(e):e}function Yd(t){const e=hl(t.mapValue.fields[e6].timestampValue);return new nn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NG{constructor(e,n,r,i,a,o,c,u,h,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=m}}const Sy="(default)";class Xd{constructor(e,n){this.projectId=e,this.database=n||Sy}static empty(){return new Xd("","")}get isDefaultDatabase(){return this.database===Sy}isEqual(e){return e instanceof Xd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6="__type__",CG="__max__",Sp={mapValue:{}},n6="__vector__",Ty="value";function ml(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zT(t)?4:DG(t)?9007199254740991:jG(t)?10:11:et(28295,{value:t})}function Ya(t,e){if(t===e)return!0;const n=ml(t);if(n!==ml(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yd(t).isEqual(Yd(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=hl(i.timestampValue),c=hl(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return dl(i.bytesValue).isEqual(dl(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return _n(i.geoPointValue.latitude)===_n(a.geoPointValue.latitude)&&_n(i.geoPointValue.longitude)===_n(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return _n(i.integerValue)===_n(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=_n(i.doubleValue),c=_n(a.doubleValue);return o===c?_y(o)===_y(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return gf(t.arrayValue.values||[],e.arrayValue.values||[],Ya);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},c=a.mapValue.fields||{};if(YD(o)!==YD(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!Ya(o[u],c[u])))return!1;return!0}(t,e);default:return et(52216,{left:t})}}function Qd(t,e){return(t.values||[]).find(n=>Ya(n,e))!==void 0}function pf(t,e){if(t===e)return 0;const n=ml(t),r=ml(e);if(n!==r)return bt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return bt(t.booleanValue,e.booleanValue);case 2:return function(a,o){const c=_n(a.integerValue||a.doubleValue),u=_n(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return QD(t.timestampValue,e.timestampValue);case 4:return QD(Yd(t),Yd(e));case 5:return P_(t.stringValue,e.stringValue);case 6:return function(a,o){const c=dl(a),u=dl(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const c=a.split("/"),u=o.split("/");for(let h=0;h<c.length&&h<u.length;h++){const m=bt(c[h],u[h]);if(m!==0)return m}return bt(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const c=bt(_n(a.latitude),_n(o.latitude));return c!==0?c:bt(_n(a.longitude),_n(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ZD(t.arrayValue,e.arrayValue);case 10:return function(a,o){const c=a.fields||{},u=o.fields||{},h=c[Ty]?.arrayValue,m=u[Ty]?.arrayValue,p=bt(h?.values?.length||0,m?.values?.length||0);return p!==0?p:ZD(h,m)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===Sp.mapValue&&o===Sp.mapValue)return 0;if(a===Sp.mapValue)return 1;if(o===Sp.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),h=o.fields||{},m=Object.keys(h);u.sort(),m.sort();for(let p=0;p<u.length&&p<m.length;++p){const y=P_(u[p],m[p]);if(y!==0)return y;const b=pf(c[u[p]],h[m[p]]);if(b!==0)return b}return bt(u.length,m.length)}(t.mapValue,e.mapValue);default:throw et(23264,{he:n})}}function QD(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return bt(t,e);const n=hl(t),r=hl(e),i=bt(n.seconds,r.seconds);return i!==0?i:bt(n.nanos,r.nanos)}function ZD(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=pf(n[i],r[i]);if(a)return a}return bt(n.length,r.length)}function yf(t){return M_(t)}function M_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=hl(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return dl(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return We.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=M_(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${M_(n.fields[o])}`;return i+"}"}(t.mapValue):et(61005,{value:t})}function Jp(t){switch(ml(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=$v(t);return e?16+Jp(e):16;case 5:return 2*t.stringValue.length;case 6:return dl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+Jp(a),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return _l(r.fields,(a,o)=>{i+=a.length+Jp(o)}),i}(t.mapValue);default:throw et(13486,{value:t})}}function JD(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function L_(t){return!!t&&"integerValue"in t}function HT(t){return!!t&&"arrayValue"in t}function ek(t){return!!t&&"nullValue"in t}function tk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ey(t){return!!t&&"mapValue"in t}function jG(t){return(t?.mapValue?.fields||{})[t6]?.stringValue===n6}function Id(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return _l(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Id(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Id(t.arrayValue.values[n]);return e}return{...t}}function DG(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===CG}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this.value=e}static empty(){return new $r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ey(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Id(n)}setAll(e){let n=fr.emptyPath(),r={},i=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=Id(o):i.push(c.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());ey(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ya(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ey(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){_l(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new $r(Id(this.value))}}function r6(t){const e=[];return _l(t.fields,(n,r)=>{const i=new fr([n]);if(ey(r)){const a=r6(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new ui(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n,r,i,a,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new br(e,0,rt.min(),rt.min(),rt.min(),$r.empty(),0)}static newFoundDocument(e,n,r,i){return new br(e,1,n,rt.min(),r,i,0)}static newNoDocument(e,n){return new br(e,2,n,rt.min(),rt.min(),$r.empty(),0)}static newUnknownDocument(e,n){return new br(e,3,n,rt.min(),rt.min(),$r.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof br&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new br(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,n){this.position=e,this.inclusive=n}}function nk(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?r=We.comparator(We.fromName(o.referenceValue),n.key):r=pf(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function rk(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ya(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n="asc"){this.field=e,this.dir=n}}function kG(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{}class kn extends i6{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new IG(e,n,r):n==="array-contains"?new MG(e,r):n==="in"?new LG(e,r):n==="not-in"?new VG(e,r):n==="array-contains-any"?new BG(e,r):new kn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new PG(e,r):new RG(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(pf(n,this.value)):n!==null&&ml(this.value)===ml(n)&&this.matchesComparison(pf(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return et(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class la extends i6{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new la(e,n)}matches(e){return a6(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function a6(t){return t.op==="and"}function s6(t){return OG(t)&&a6(t)}function OG(t){for(const e of t.filters)if(e instanceof la)return!1;return!0}function V_(t){if(t instanceof kn)return t.field.canonicalString()+t.op.toString()+yf(t.value);if(s6(t))return t.filters.map(e=>V_(e)).join(",");{const e=t.filters.map(n=>V_(n)).join(",");return`${t.op}(${e})`}}function o6(t,e){return t instanceof kn?function(r,i){return i instanceof kn&&r.op===i.op&&r.field.isEqual(i.field)&&Ya(r.value,i.value)}(t,e):t instanceof la?function(r,i){return i instanceof la&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,o,c)=>a&&o6(o,i.filters[c]),!0):!1}(t,e):void et(19439)}function l6(t){return t instanceof kn?function(n){return`${n.field.canonicalString()} ${n.op} ${yf(n.value)}`}(t):t instanceof la?function(n){return n.op.toString()+" {"+n.getFilters().map(l6).join(" ,")+"}"}(t):"Filter"}class IG extends kn{constructor(e,n,r){super(e,n,r),this.key=We.fromName(r.referenceValue)}matches(e){const n=We.comparator(e.key,this.key);return this.matchesComparison(n)}}class PG extends kn{constructor(e,n){super(e,"in",n),this.keys=c6("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class RG extends kn{constructor(e,n){super(e,"not-in",n),this.keys=c6("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function c6(t,e){return(e.arrayValue?.values||[]).map(n=>We.fromName(n.referenceValue))}class MG extends kn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return HT(n)&&Qd(n.arrayValue,this.value)}}class LG extends kn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Qd(this.value.arrayValue,n)}}class VG extends kn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Qd(this.value.arrayValue,n)}}class BG extends kn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!HT(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Qd(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UG{constructor(e,n=null,r=[],i=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=c,this.Te=null}}function ik(t,e=null,n=[],r=[],i=null,a=null,o=null){return new UG(t,e,n,r,i,a,o)}function qT(t){const e=it(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>V_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Uv(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>yf(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>yf(r)).join(",")),e.Te=n}return e.Te}function KT(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kG(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!o6(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!rk(t.startAt,e.startAt)&&rk(t.endAt,e.endAt)}function B_(t){return We.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n=null,r=[],i=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function $G(t,e,n,r,i,a,o,c){return new qf(t,e,n,r,i,a,o,c)}function Fv(t){return new qf(t)}function ak(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function u6(t){return t.collectionGroup!==null}function Pd(t){const e=it(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Fn(fr.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(c=c.add(h.field))})}),c})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Zd(a,r))}),n.has(fr.keyField().canonicalString())||e.Ie.push(new Zd(fr.keyField(),r))}return e.Ie}function Ha(t){const e=it(t);return e.Ee||(e.Ee=FG(e,Pd(t))),e.Ee}function FG(t,e){if(t.limitType==="F")return ik(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Zd(i.field,a)});const n=t.endAt?new Ey(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ey(t.startAt.position,t.startAt.inclusive):null;return ik(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function U_(t,e){const n=t.filters.concat([e]);return new qf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ay(t,e,n){return new qf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zv(t,e){return KT(Ha(t),Ha(e))&&t.limitType===e.limitType}function f6(t){return`${qT(Ha(t))}|lt:${t.limitType}`}function Xu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>l6(i)).join(", ")}]`),Uv(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>yf(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>yf(i)).join(",")),`Target(${r})`}(Ha(t))}; limitType=${t.limitType})`}function Hv(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):We.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of Pd(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,c,u){const h=nk(o,c,u);return o.inclusive?h<=0:h<0}(r.startAt,Pd(r),i)||r.endAt&&!function(o,c,u){const h=nk(o,c,u);return o.inclusive?h>=0:h>0}(r.endAt,Pd(r),i))}(t,e)}function zG(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function h6(t){return(e,n)=>{let r=!1;for(const i of Pd(t)){const a=HG(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function HG(t,e,n){const r=t.field.isKeyField()?We.comparator(e.key,n.key):function(a,o,c){const u=o.data.field(a),h=c.data.field(a);return u!==null&&h!==null?pf(u,h):et(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return et(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){_l(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return YM(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qG=new hn(We.comparator);function Ws(){return qG}const d6=new hn(We.comparator);function Td(...t){let e=d6;for(const n of t)e=e.insert(n.key,n);return e}function m6(t){let e=d6;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function mc(){return Rd()}function g6(){return Rd()}function Rd(){return new qc(t=>t.toString(),(t,e)=>t.isEqual(e))}const KG=new hn(We.comparator),GG=new Fn(We.comparator);function xt(...t){let e=GG;for(const n of t)e=e.add(n);return e}const WG=new Fn(bt);function YG(){return WG}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_y(e)?"-0":e}}function p6(t){return{integerValue:""+t}}function y6(t,e){return SG(e)?p6(e):GT(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(){this._=void 0}}function XG(t,e,n){return t instanceof Jd?function(i,a){const o={fields:{[ZM]:{stringValue:QM},[e6]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&zT(a)&&(a=$v(a)),a&&(o.fields[JM]=a),{mapValue:o}}(n,e):t instanceof vf?b6(t,e):t instanceof bf?x6(t,e):function(i,a){const o=v6(i,a),c=sk(o)+sk(i.Ae);return L_(o)&&L_(i.Ae)?p6(c):GT(i.serializer,c)}(t,e)}function QG(t,e,n){return t instanceof vf?b6(t,e):t instanceof bf?x6(t,e):n}function v6(t,e){return t instanceof em?function(r){return L_(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Jd extends qv{}class vf extends qv{constructor(e){super(),this.elements=e}}function b6(t,e){const n=w6(e);for(const r of t.elements)n.some(i=>Ya(i,r))||n.push(r);return{arrayValue:{values:n}}}class bf extends qv{constructor(e){super(),this.elements=e}}function x6(t,e){let n=w6(e);for(const r of t.elements)n=n.filter(i=>!Ya(i,r));return{arrayValue:{values:n}}}class em extends qv{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function sk(t){return _n(t.integerValue||t.doubleValue)}function w6(t){return HT(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e,n){this.field=e,this.transform=n}}function ZG(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof vf&&i instanceof vf||r instanceof bf&&i instanceof bf?gf(r.elements,i.elements,Ya):r instanceof em&&i instanceof em?Ya(r.Ae,i.Ae):r instanceof Jd&&i instanceof Jd}(t.transform,e.transform)}class JG{constructor(e,n){this.version=e,this.transformResults=n}}class Or{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Or}static exists(e){return new Or(void 0,e)}static updateTime(e){return new Or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ty(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Gv{}function _6(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wv(t.key,Or.none()):new Sm(t.key,t.data,Or.none());{const n=t.data,r=$r.empty();let i=new Fn(fr.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new Sl(t.key,r,new ui(i.toArray()),Or.none())}}function eW(t,e,n){t instanceof Sm?function(i,a,o){const c=i.value.clone(),u=lk(i.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Sl?function(i,a,o){if(!ty(i.precondition,a))return void a.convertToUnknownDocument(o.version);const c=lk(i.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(S6(i)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Md(t,e,n,r){return t instanceof Sm?function(a,o,c,u){if(!ty(a.precondition,o))return c;const h=a.value.clone(),m=ck(a.fieldTransforms,u,o);return h.setAll(m),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Sl?function(a,o,c,u){if(!ty(a.precondition,o))return c;const h=ck(a.fieldTransforms,u,o),m=o.data;return m.setAll(S6(a)),m.setAll(h),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(a,o,c){return ty(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function tW(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=v6(r.transform,i||null);a!=null&&(n===null&&(n=$r.empty()),n.set(r.field,a))}return n||null}function ok(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&gf(r,i,(a,o)=>ZG(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Sm extends Gv{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Sl extends Gv{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function S6(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function lk(t,e,n){const r=new Map;Vt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,c=e.data.field(a.field);r.set(a.field,QG(o,c,n[i]))}return r}function ck(t,e,n){const r=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);r.set(i.field,XG(a,o,e))}return r}class Wv extends Gv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nW extends Gv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&eW(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Md(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Md(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=g6();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(i.key)?null:c;const u=_6(o,c);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(rt.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),xt())}isEqual(e){return this.batchId===e.batchId&&gf(this.mutations,e.mutations,(n,r)=>ok(n,r))&&gf(this.baseMutations,e.baseMutations,(n,r)=>ok(n,r))}}class WT{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Vt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return KG}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new WT(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aW{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jn,At;function sW(t){switch(t){case pe.OK:return et(64938);case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0;default:return et(15467,{code:t})}}function T6(t){if(t===void 0)return Gs("GRPC error has no .code"),pe.UNKNOWN;switch(t){case jn.OK:return pe.OK;case jn.CANCELLED:return pe.CANCELLED;case jn.UNKNOWN:return pe.UNKNOWN;case jn.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case jn.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case jn.INTERNAL:return pe.INTERNAL;case jn.UNAVAILABLE:return pe.UNAVAILABLE;case jn.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case jn.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case jn.NOT_FOUND:return pe.NOT_FOUND;case jn.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case jn.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case jn.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case jn.ABORTED:return pe.ABORTED;case jn.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case jn.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case jn.DATA_LOSS:return pe.DATA_LOSS;default:return et(39323,{code:t})}}(At=jn||(jn={}))[At.OK=0]="OK",At[At.CANCELLED=1]="CANCELLED",At[At.UNKNOWN=2]="UNKNOWN",At[At.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",At[At.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",At[At.NOT_FOUND=5]="NOT_FOUND",At[At.ALREADY_EXISTS=6]="ALREADY_EXISTS",At[At.PERMISSION_DENIED=7]="PERMISSION_DENIED",At[At.UNAUTHENTICATED=16]="UNAUTHENTICATED",At[At.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",At[At.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",At[At.ABORTED=10]="ABORTED",At[At.OUT_OF_RANGE=11]="OUT_OF_RANGE",At[At.UNIMPLEMENTED=12]="UNIMPLEMENTED",At[At.INTERNAL=13]="INTERNAL",At[At.UNAVAILABLE=14]="UNAVAILABLE",At[At.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oW(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lW=new al([4294967295,4294967295],0);function uk(t){const e=oW().encode(t),n=new VM;return n.update(e),new Uint8Array(n.digest())}function fk(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new al([n,r],0),new al([i,a],0)]}class YT{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ed(`Invalid padding: ${n}`);if(r<0)throw new Ed(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ed(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ed(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=al.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(al.fromNumber(r)));return i.compare(lW)===1&&(i=new al([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=uk(e),[r,i]=fk(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new YT(a,i,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.ge===0)return;const n=uk(e),[r,i]=fk(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ed extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Tm.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yv(rt.min(),i,new hn(bt),Ws(),xt())}}class Tm{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Tm(r,n,xt(),xt(),xt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class E6{constructor(e,n){this.targetId=e,this.Ce=n}}class A6{constructor(e,n,r=dr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class hk{constructor(){this.ve=0,this.Fe=dk(),this.Me=dr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=xt(),n=xt(),r=xt();return this.Fe.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:et(38017,{changeType:a})}}),new Tm(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=dk()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Vt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class cW{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ws(),this.Je=Tp(),this.He=Tp(),this.Ye=new hn(bt)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:et(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(B_(a))if(r===0){const o=new We(a.path);this.et(n,o,br.newNoDocument(o,rt.min()))}else Vt(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),u=c?this.ct(c,e,o):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let o,c;try{o=dl(r).toUint8Array()}catch(u){if(u instanceof XM)return mf("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new YT(o,i,a)}catch(u){return mf(u instanceof Ed?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(n,a,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((a,o)=>{const c=this.ot(o);if(c){if(a.current&&B_(c.target)){const u=new We(c.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,br.newNoDocument(u,e))}a.Be&&(n.set(o,a.ke()),a.qe())}});let r=xt();this.He.forEach((a,o)=>{let c=!0;o.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(a))}),this.je.forEach((a,o)=>o.setReadTime(e));const i=new Yv(e,n,this.Ye,this.je,r);return this.je=Ws(),this.Je=Tp(),this.He=Tp(),this.Ye=new hn(bt),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new hk,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Fn(bt),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Fn(bt),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Re("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new hk),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Tp(){return new hn(We.comparator)}function dk(){return new hn(We.comparator)}const uW={asc:"ASCENDING",desc:"DESCENDING"},fW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hW={and:"AND",or:"OR"};class dW{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $_(t,e){return t.useProto3Json||Uv(e)?e:{value:e}}function Ny(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function N6(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mW(t,e){return Ny(t,e.toTimestamp())}function qa(t){return Vt(!!t,49232),rt.fromTimestamp(function(n){const r=hl(n);return new nn(r.seconds,r.nanos)}(t))}function XT(t,e){return F_(t,e).canonicalString()}function F_(t,e){const n=function(i){return new en(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function C6(t){const e=en.fromString(t);return Vt(I6(e),10190,{key:e.toString()}),e}function z_(t,e){return XT(t.databaseId,e.path)}function cx(t,e){const n=C6(e);if(n.get(1)!==t.databaseId.projectId)throw new ke(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ke(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new We(D6(n))}function j6(t,e){return XT(t.databaseId,e)}function gW(t){const e=C6(t);return e.length===4?en.emptyPath():D6(e)}function H_(t){return new en(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function D6(t){return Vt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function mk(t,e,n){return{name:z_(t,e),fields:n.value.mapValue.fields}}function pW(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:et(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(h,m){return h.useProto3Json?(Vt(m===void 0||typeof m=="string",58123),dr.fromBase64String(m||"")):(Vt(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),dr.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(h){const m=h.code===void 0?pe.UNKNOWN:T6(h.code);return new ke(m,h.message||"")}(o);n=new A6(r,i,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=cx(t,r.document.name),a=qa(r.document.updateTime),o=r.document.createTime?qa(r.document.createTime):rt.min(),c=new $r({mapValue:{fields:r.document.fields}}),u=br.newFoundDocument(i,a,o,c),h=r.targetIds||[],m=r.removedTargetIds||[];n=new ny(h,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=cx(t,r.document),a=r.readTime?qa(r.readTime):rt.min(),o=br.newNoDocument(i,a),c=r.removedTargetIds||[];n=new ny([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=cx(t,r.document),a=r.removedTargetIds||[];n=new ny([],a,i,null)}else{if(!("filter"in e))return et(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new aW(i,a),c=r.targetId;n=new E6(c,o)}}return n}function yW(t,e){let n;if(e instanceof Sm)n={update:mk(t,e.key,e.value)};else if(e instanceof Wv)n={delete:z_(t,e.key)};else if(e instanceof Sl)n={update:mk(t,e.key,e.data),updateMask:AW(e.fieldMask)};else{if(!(e instanceof nW))return et(16599,{Vt:e.type});n={verify:z_(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const c=o.transform;if(c instanceof Jd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof vf)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof bf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof em)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw et(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:mW(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:et(27497)}(t,e.precondition)),n}function vW(t,e){return t&&t.length>0?(Vt(e!==void 0,14353),t.map(n=>function(i,a){let o=i.updateTime?qa(i.updateTime):qa(a);return o.isEqual(rt.min())&&(o=qa(a)),new JG(o,i.transformResults||[])}(n,e))):[]}function bW(t,e){return{documents:[j6(t,e.path)]}}function xW(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=j6(t,i);const a=function(h){if(h.length!==0)return O6(la.create(h,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(h){if(h.length!==0)return h.map(m=>function(y){return{field:Qu(y.field),direction:SW(y.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=$_(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:i}}function wW(t){let e=gW(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Vt(r===1,65062);const m=n.from[0];m.allDescendants?i=m.collectionId:e=e.child(m.collectionId)}let a=[];n.where&&(a=function(p){const y=k6(p);return y instanceof la&&s6(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(y=>function(_){return new Zd(Zu(_.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(y))}(n.orderBy));let c=null;n.limit&&(c=function(p){let y;return y=typeof p=="object"?p.value:p,Uv(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(p){const y=!!p.before,b=p.values||[];return new Ey(b,y)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const y=!p.before,b=p.values||[];return new Ey(b,y)}(n.endAt)),$G(e,i,o,a,c,"F",u,h)}function _W(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return et(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function k6(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Zu(n.unaryFilter.field);return kn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Zu(n.unaryFilter.field);return kn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Zu(n.unaryFilter.field);return kn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Zu(n.unaryFilter.field);return kn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return et(61313);default:return et(60726)}}(t):t.fieldFilter!==void 0?function(n){return kn.create(Zu(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return et(58110);default:return et(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return la.create(n.compositeFilter.filters.map(r=>k6(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return et(1026)}}(n.compositeFilter.op))}(t):et(30097,{filter:t})}function SW(t){return uW[t]}function TW(t){return fW[t]}function EW(t){return hW[t]}function Qu(t){return{fieldPath:t.canonicalString()}}function Zu(t){return fr.fromServerFormat(t.fieldPath)}function O6(t){return t instanceof kn?function(n){if(n.op==="=="){if(tk(n.value))return{unaryFilter:{field:Qu(n.field),op:"IS_NAN"}};if(ek(n.value))return{unaryFilter:{field:Qu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(tk(n.value))return{unaryFilter:{field:Qu(n.field),op:"IS_NOT_NAN"}};if(ek(n.value))return{unaryFilter:{field:Qu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qu(n.field),op:TW(n.op),value:n.value}}}(t):t instanceof la?function(n){const r=n.getFilters().map(i=>O6(i));return r.length===1?r[0]:{compositeFilter:{op:EW(n.op),filters:r}}}(t):et(54877,{filter:t})}function AW(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function I6(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n,r,i,a=rt.min(),o=rt.min(),c=dr.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new tl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new tl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NW{constructor(e){this.yt=e}}function CW(t){const e=wW({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ay(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jW{constructor(){this.Cn=new DW}addToCollectionParentIndex(e,n){return this.Cn.add(n),be.resolve()}getCollectionParents(e,n){return be.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return be.resolve()}deleteFieldIndex(e,n){return be.resolve()}deleteAllFieldIndexes(e){return be.resolve()}createTargetIndexes(e,n){return be.resolve()}getDocumentsMatchingTarget(e,n){return be.resolve(null)}getIndexType(e,n){return be.resolve(0)}getFieldIndexes(e,n){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}getMinOffset(e,n){return be.resolve(fl.min())}getMinOffsetFromCollectionGroup(e,n){return be.resolve(fl.min())}updateCollectionGroup(e,n,r){return be.resolve()}updateIndexEntries(e,n){return be.resolve()}}class DW{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Fn(en.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fn(en.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},P6=41943040;class Ur{static withCacheSize(e){return new Ur(e,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ur.DEFAULT_COLLECTION_PERCENTILE=10,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ur.DEFAULT=new Ur(P6,Ur.DEFAULT_COLLECTION_PERCENTILE,Ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ur.DISABLED=new Ur(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new xf(0)}static cr(){return new xf(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk="LruGarbageCollector",kW=1048576;function yk([t,e],[n,r]){const i=bt(t,n);return i===0?bt(e,r):i}class OW{constructor(e){this.Ir=e,this.buffer=new Fn(yk),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();yk(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class IW{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Re(pk,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Hf(n)?Re(pk,"Ignoring IndexedDB error during garbage collection: ",n):await zf(n)}await this.Vr(3e5)})}}class PW{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return be.resolve(Bv.ce);const r=new OW(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(gk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gk):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,a,o,c,u,h;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(a=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(h=Date.now(),Yu()<=vt.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${a} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(h-u)+`ms
Total Duration: ${h-m}ms`),be.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:p})))}}function RW(t,e){return new PW(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MW{constructor(){this.changes=new qc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,br.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?be.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LW{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VW{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Md(r.mutation,i,ui.empty(),nn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,xt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=xt()){const i=mc();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let o=Td();return a.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=mc();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,xt()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,i){let a=Ws();const o=Rd(),c=function(){return Rd()}();return n.forEach((u,h)=>{const m=r.get(h.key);i.has(h.key)&&(m===void 0||m.mutation instanceof Sl)?a=a.insert(h.key,h):m!==void 0?(o.set(h.key,m.mutation.getFieldMask()),Md(m.mutation,h,m.mutation.getFieldMask(),nn.now())):o.set(h.key,ui.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((h,m)=>o.set(h,m)),n.forEach((h,m)=>c.set(h,new LW(m,o.get(h)??null))),c))}recalculateAndSaveOverlays(e,n){const r=Rd();let i=new hn((o,c)=>o-c),a=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let m=r.get(u)||ui.empty();m=c.applyToLocalView(h,m),r.set(u,m);const p=(i.get(c.batchId)||xt()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),h=u.key,m=u.value,p=g6();m.forEach(y=>{if(!a.has(y)){const b=_6(n.get(y),r.get(y));b!==null&&p.set(y,b),a=a.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return be.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return We.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):u6(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):be.resolve(mc());let c=Wd,u=a;return o.next(h=>be.forEach(h,(m,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),a.get(m)?be.resolve():this.remoteDocumentCache.getEntry(e,m).next(y=>{u=u.insert(m,y)}))).next(()=>this.populateOverlays(e,h,a)).next(()=>this.computeViews(e,u,h,xt())).next(m=>({batchId:c,changes:m6(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new We(n)).next(r=>{let i=Td();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let o=Td();return this.indexManager.getCollectionParents(e,a).next(c=>be.forEach(c,u=>{const h=function(p,y){return new qf(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(m=>{m.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(o=>{a.forEach((u,h)=>{const m=h.getKey();o.get(m)===null&&(o=o.insert(m,br.newInvalidDocument(m)))});let c=Td();return o.forEach((u,h)=>{const m=a.get(u);m!==void 0&&Md(m.mutation,h,ui.empty(),nn.now()),Hv(n,h)&&(c=c.insert(u,h))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BW{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return be.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:qa(i.createTime)}}(n)),be.resolve()}getNamedQuery(e,n){return be.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:CW(i.bundledQuery),readTime:qa(i.readTime)}}(n)),be.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UW{constructor(){this.overlays=new hn(We.comparator),this.qr=new Map}getOverlay(e,n){return be.resolve(this.overlays.get(n))}getOverlays(e,n){const r=mc();return be.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.St(e,n,a)}),be.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(r)),be.resolve()}getOverlaysForCollection(e,n,r){const i=mc(),a=n.length+1,o=new We(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===a&&u.largestBatchId>r&&i.set(u.getKey(),u)}return be.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new hn((h,m)=>h-m);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let m=a.get(h.largestBatchId);m===null&&(m=mc(),a=a.insert(h.largestBatchId,m)),m.set(h.getKey(),h)}}const c=mc(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,m)=>c.set(h,m)),!(c.size()>=i)););return be.resolve(c)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new iW(n,r));let a=this.qr.get(n);a===void 0&&(a=xt(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $W{constructor(){this.sessionToken=dr.EMPTY_BYTE_STRING}getSessionToken(e){return be.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,be.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(){this.Qr=new Fn(Zn.$r),this.Ur=new Fn(Zn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Zn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Zn(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new We(new en([])),r=new Zn(n,e),i=new Zn(n,e+1),a=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),a.push(o.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new We(new en([])),r=new Zn(n,e),i=new Zn(n,e+1);let a=xt();return this.Ur.forEachInRange([r,i],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new Zn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Zn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return We.comparator(e.key,n.key)||bt(e.Yr,n.Yr)}static Kr(e,n){return bt(e.Yr,n.Yr)||We.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FW{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Fn(Zn.$r)}checkEmpty(e){return be.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new rW(a,n,r,i);this.mutationQueue.push(o);for(const c of i)this.Zr=this.Zr.add(new Zn(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return be.resolve(o)}lookupMutationBatch(e,n){return be.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),a=i<0?0:i;return be.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(this.mutationQueue.length===0?FT:this.tr-1)}getAllMutationBatches(e){return be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Zn(n,0),i=new Zn(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],o=>{const c=this.Xr(o.Yr);a.push(c)}),be.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Fn(bt);return n.forEach(i=>{const a=new Zn(i,0),o=new Zn(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],c=>{r=r.add(c.Yr)})}),be.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;We.isDocumentKey(a)||(a=a.child(""));const o=new Zn(new We(a),0);let c=new Fn(bt);return this.Zr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(c=c.add(u.Yr)),!0)},o),be.resolve(this.ti(c))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Vt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return be.forEach(n.mutations,i=>{const a=new Zn(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Zn(n,0),i=this.Zr.firstAfterOrEqual(r);return be.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,be.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zW{constructor(e){this.ri=e,this.docs=function(){return new hn(We.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return be.resolve(r?r.document.mutableCopy():br.newInvalidDocument(n))}getEntries(e,n){let r=Ws();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():br.newInvalidDocument(i))}),be.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=Ws();const o=n.path,c=new We(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:h,value:{document:m}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||bG(vG(m),r)<=0||(i.has(m.key)||Hv(n,m))&&(a=a.insert(m.key,m.mutableCopy()))}return be.resolve(a)}getAllFromCollectionGroup(e,n,r,i){et(9500)}ii(e,n){return be.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new HW(this)}getSize(e){return be.resolve(this.size)}}class HW extends MW{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),be.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qW{constructor(e){this.persistence=e,this.si=new qc(n=>qT(n),KT),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.oi=0,this._i=new QT,this.targetCount=0,this.ai=xf.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),be.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new xf(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,be.resolve()}updateTargetData(e,n){return this.Pr(n),be.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.si.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),be.waitFor(a).next(()=>i)}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return be.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),be.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),be.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),be.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return be.resolve(r)}containsKey(e,n){return be.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e,n){this.ui={},this.overlays={},this.ci=new Bv(0),this.li=!1,this.li=!0,this.hi=new $W,this.referenceDelegate=e(this),this.Pi=new qW(this),this.indexManager=new jW,this.remoteDocumentCache=function(i){return new zW(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new NW(n),this.Ii=new BW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new UW,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new FW(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Re("MemoryPersistence","Starting transaction:",e);const i=new KW(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ai(e,n){return be.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class KW extends wG{constructor(e){super(),this.currentSequenceNumber=e}}class ZT{constructor(e){this.persistence=e,this.Ri=new QT,this.Vi=null}static mi(e){return new ZT(e)}get fi(){if(this.Vi)return this.Vi;throw et(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),be.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),be.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),be.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.fi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.fi,r=>{const i=We.fromPath(r);return this.gi(e,i).next(a=>{a||n.removeEntry(i,rt.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return be.or([()=>be.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Cy{constructor(e,n){this.persistence=e,this.pi=new qc(r=>TG(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=RW(this,n)}static mi(e,n){return new Cy(e,n)}Ei(){}di(e){return be.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return be.forEach(this.pi,(r,i)=>this.br(e,r,i).next(a=>a?be.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(c=>{c||(r++,a.removeEntry(o,rt.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),be.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),be.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),be.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),be.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Jp(e.data.value)),n}br(e,n,r){return be.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return be.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=xt(),i=xt();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new JT(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WW{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return gz()?8:_G(_r())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ys(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ws(e,n,i,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new GW;return this.Ss(e,n,o).next(c=>{if(a.result=c,this.Vs)return this.bs(e,n,o,c.size)})}).next(()=>a.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Yu()<=vt.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",Xu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),be.resolve()):(Yu()<=vt.DEBUG&&Re("QueryEngine","Query:",Xu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Yu()<=vt.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",Xu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ha(n))):be.resolve())}ys(e,n){if(ak(n))return be.resolve(null);let r=Ha(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Ay(n,null,"F"),r=Ha(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=xt(...a);return this.ps.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.Ds(n,c);return this.Cs(n,h,o,u.readTime)?this.ys(e,Ay(n,null,"F")):this.vs(e,h,n,u)}))})))}ws(e,n,r,i){return ak(n)||i.isEqual(rt.min())?be.resolve(null):this.ps.getDocuments(e,r).next(a=>{const o=this.Ds(n,a);return this.Cs(n,o,r,i)?be.resolve(null):(Yu()<=vt.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xu(n)),this.vs(e,o,n,yG(i,Wd)).next(c=>c))})}Ds(e,n){let r=new Fn(h6(e));return n.forEach((i,a)=>{Hv(e,a)&&(r=r.add(a))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,n,r){return Yu()<=vt.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",Xu(n)),this.ps.getDocumentsMatchingQuery(e,n,fl.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="LocalStore",YW=3e8;class XW{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new hn(bt),this.xs=new qc(a=>qT(a),KT),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new VW(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function QW(t,e,n,r){return new XW(t,e,n,r)}async function M6(t,e){const n=it(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],c=[];let u=xt();for(const h of i){o.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}for(const h of a){c.push(h.batchId);for(const m of h.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ls:h,removedBatchIds:o,addedBatchIds:c}))})})}function ZW(t,e){const n=it(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return function(c,u,h,m){const p=h.batch,y=p.keys();let b=be.resolve();return y.forEach(_=>{b=b.next(()=>m.getEntry(u,_)).next(T=>{const S=h.docVersions.get(_);Vt(S!==null,48541),T.version.compareTo(S)<0&&(p.applyToRemoteDocument(T,h),T.isValidDocument()&&(T.setReadTime(h.commitVersion),m.addEntry(T)))})}),b.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=xt();for(let h=0;h<c.mutationResults.length;++h)c.mutationResults[h].transformResults.length>0&&(u=u.add(c.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function L6(t){const e=it(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function JW(t,e){const n=it(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const c=[];e.targetChanges.forEach((m,p)=>{const y=i.get(p);if(!y)return;c.push(n.Pi.removeMatchingKeys(a,m.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(a,m.addedDocuments,p)));let b=y.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?b=b.withResumeToken(dr.EMPTY_BYTE_STRING,rt.min()).withLastLimboFreeSnapshotVersion(rt.min()):m.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(m.resumeToken,r)),i=i.insert(p,b),function(T,S,E){return T.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=YW?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(y,b,m)&&c.push(n.Pi.updateTargetData(a,b))});let u=Ws(),h=xt();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,m))}),c.push(eY(a,o,e.documentUpdates).next(m=>{u=m.ks,h=m.qs})),!r.isEqual(rt.min())){const m=n.Pi.getLastRemoteSnapshotVersion(a).next(p=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r));c.push(m)}return be.waitFor(c).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,h)).next(()=>u)}).then(a=>(n.Ms=i,a))}function eY(t,e,n){let r=xt(),i=xt();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=Ws();return n.forEach((c,u)=>{const h=a.get(c);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(rt.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):Re(eE,"Ignoring outdated watch update for ",c,". Current version:",h.version," Watch version:",u.version)}),{ks:o,qs:i}})}function tY(t,e){const n=it(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=FT),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function nY(t,e){const n=it(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(a=>a?(i=a,be.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new tl(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function q_(t,e,n){const r=it(t),i=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Hf(o))throw o;Re(eE,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function vk(t,e,n){const r=it(t);let i=rt.min(),a=xt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,m){const p=it(u),y=p.xs.get(m);return y!==void 0?be.resolve(p.Ms.get(y)):p.Pi.getTargetData(h,m)}(r,o,Ha(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,c.targetId).next(u=>{a=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:rt.min(),n?a:xt())).next(c=>(rY(r,zG(e),c),{documents:c,Qs:a})))}function rY(t,e,n){let r=t.Os.get(e)||rt.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Os.set(e,r)}class bk{constructor(){this.activeTargetIds=YG()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iY{constructor(){this.Mo=new bk,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new bk,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aY{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xk="ConnectivityMonitor";class wk{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Re(xk,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Re(xk,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ep=null;function K_(){return Ep===null?Ep=function(){return 268435456+Math.round(2147483648*Math.random())}():Ep++,"0x"+Ep.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux="RestConnection",sY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oY{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Sy?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,a){const o=K_(),c=this.zo(e,n.toUriEncodedString());Re(ux,`Sending RPC '${e}' ${o}:`,c,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,a);const{host:h}=new URL(c),m=Bf(h);return this.Jo(e,c,u,r,m).then(p=>(Re(ux,`Received RPC '${e}' ${o}: `,p),p),p=>{throw mf(ux,`RPC '${e}' ${o} failed with error: `,p,"url: ",c,"request:",r),p})}Ho(e,n,r,i,a,o){return this.Go(e,n,r,i,a)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ff}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}zo(e,n){const r=sY[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lY{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr="WebChannelConnection";class cY extends oY{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,a){const o=K_();return new Promise((c,u)=>{const h=new BM;h.setWithCredentials(!0),h.listenOnce(UM.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Zp.NO_ERROR:const p=h.getResponseJson();Re(pr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),c(p);break;case Zp.TIMEOUT:Re(pr,`RPC '${e}' ${o} timed out`),u(new ke(pe.DEADLINE_EXCEEDED,"Request time out"));break;case Zp.HTTP_ERROR:const y=h.getStatus();if(Re(pr,`RPC '${e}' ${o} failed with status:`,y,"response text:",h.getResponseText()),y>0){let b=h.getResponseJson();Array.isArray(b)&&(b=b[0]);const _=b?.error;if(_&&_.status&&_.message){const T=function(E){const N=E.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(N)>=0?N:pe.UNKNOWN}(_.status);u(new ke(T,_.message))}else u(new ke(pe.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new ke(pe.UNAVAILABLE,"Connection failed."));break;default:et(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{Re(pr,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(i);Re(pr,`RPC '${e}' ${o} sending request:`,i),h.send(n,"POST",m,r,15)})}T_(e,n,r){const i=K_(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=zM(),c=FM(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(u.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const m=a.join("");Re(pr,`Creating RPC '${e}' stream ${i}: ${m}`,u);const p=o.createWebChannel(m,u);this.I_(p);let y=!1,b=!1;const _=new lY({Yo:S=>{b?Re(pr,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(y||(Re(pr,`Opening RPC '${e}' stream ${i} transport.`),p.open(),y=!0),Re(pr,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},Zo:()=>p.close()}),T=(S,E,N)=>{S.listen(E,C=>{try{N(C)}catch(L){setTimeout(()=>{throw L},0)}})};return T(p,Sd.EventType.OPEN,()=>{b||(Re(pr,`RPC '${e}' stream ${i} transport opened.`),_.o_())}),T(p,Sd.EventType.CLOSE,()=>{b||(b=!0,Re(pr,`RPC '${e}' stream ${i} transport closed`),_.a_(),this.E_(p))}),T(p,Sd.EventType.ERROR,S=>{b||(b=!0,mf(pr,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),_.a_(new ke(pe.UNAVAILABLE,"The operation could not be completed")))}),T(p,Sd.EventType.MESSAGE,S=>{if(!b){const E=S.data[0];Vt(!!E,16349);const N=E,C=N?.error||N[0]?.error;if(C){Re(pr,`RPC '${e}' stream ${i} received error:`,C);const L=C.status;let D=function(I){const O=jn[I];if(O!==void 0)return T6(O)}(L),R=C.message;D===void 0&&(D=pe.INTERNAL,R="Unknown error status: "+L+" with message "+C.message),b=!0,_.a_(new ke(D,R)),p.close()}else Re(pr,`RPC '${e}' stream ${i} received:`,E),_.u_(E)}}),T(c,$M.STAT_EVENT,S=>{S.stat===I_.PROXY?Re(pr,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===I_.NOPROXY&&Re(pr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function fx(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(t){return new dW(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k="PersistentStream";class B6{constructor(e,n,r,i,a,o,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new V6(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===pe.RESOURCE_EXHAUSTED?(Gs(n.toString()),Gs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new ke(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Re(_k,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Re(_k,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uY extends B6{constructor(e,n,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=pW(this.serializer,e),r=function(a){if(!("targetChange"in a))return rt.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?rt.min():o.readTime?qa(o.readTime):rt.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=H_(this.serializer),n.addTarget=function(a,o){let c;const u=o.target;if(c=B_(u)?{documents:bW(a,u)}:{query:xW(a,u).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=N6(a,o.resumeToken);const h=$_(a,o.expectedCount);h!==null&&(c.expectedCount=h)}else if(o.snapshotVersion.compareTo(rt.min())>0){c.readTime=Ny(a,o.snapshotVersion.toTimestamp());const h=$_(a,o.expectedCount);h!==null&&(c.expectedCount=h)}return c}(this.serializer,e);const r=_W(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=H_(this.serializer),n.removeTarget=e,this.q_(n)}}class fY extends B6{constructor(e,n,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Vt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Vt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Vt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=vW(e.writeResults,e.commitTime),r=qa(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=H_(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>yW(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hY{}class dY extends hY{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ke(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Go(e,F_(n,r),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ke(pe.UNKNOWN,a.toString())})}Ho(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Ho(e,F_(n,r),i,o,c,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ke(pe.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class mY{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gs(n),this.aa=!1):Re("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc="RemoteStore";class gY{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Kc(this)&&(Re(Rc,"Restarting streams for network reachability change."),await async function(u){const h=it(u);h.Ea.add(4),await Em(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Qv(h)}(this))})}),this.Ra=new mY(r,i)}}async function Qv(t){if(Kc(t))for(const e of t.da)await e(!0)}async function Em(t){for(const e of t.da)await e(!1)}function U6(t,e){const n=it(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),iE(n)?rE(n):Kf(n).O_()&&nE(n,e))}function tE(t,e){const n=it(t),r=Kf(n);n.Ia.delete(e),r.O_()&&$6(n,e),n.Ia.size===0&&(r.O_()?r.L_():Kc(n)&&n.Ra.set("Unknown"))}function nE(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(rt.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Kf(t).Y_(e)}function $6(t,e){t.Va.Ue(e),Kf(t).Z_(e)}function rE(t){t.Va=new cW({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Kf(t).start(),t.Ra.ua()}function iE(t){return Kc(t)&&!Kf(t).x_()&&t.Ia.size>0}function Kc(t){return it(t).Ea.size===0}function F6(t){t.Va=void 0}async function pY(t){t.Ra.set("Online")}async function yY(t){t.Ia.forEach((e,n)=>{nE(t,e)})}async function vY(t,e){F6(t),iE(t)?(t.Ra.ha(e),rE(t)):t.Ra.set("Unknown")}async function bY(t,e,n){if(t.Ra.set("Online"),e instanceof A6&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const c of a.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.Va.removeTarget(c))}(t,e)}catch(r){Re(Rc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await jy(t,r)}else if(e instanceof ny?t.Va.Ze(e):e instanceof E6?t.Va.st(e):t.Va.tt(e),!n.isEqual(rt.min()))try{const r=await L6(t.localStore);n.compareTo(r)>=0&&await function(a,o){const c=a.Va.Tt(o);return c.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const m=a.Ia.get(h);m&&a.Ia.set(h,m.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,h)=>{const m=a.Ia.get(u);if(!m)return;a.Ia.set(u,m.withResumeToken(dr.EMPTY_BYTE_STRING,m.snapshotVersion)),$6(a,u);const p=new tl(m.target,u,h,m.sequenceNumber);nE(a,p)}),a.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){Re(Rc,"Failed to raise snapshot:",r),await jy(t,r)}}async function jy(t,e,n){if(!Hf(e))throw e;t.Ea.add(1),await Em(t),t.Ra.set("Offline"),n||(n=()=>L6(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Re(Rc,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Qv(t)})}function z6(t,e){return e().catch(n=>jy(t,n,e))}async function Zv(t){const e=it(t),n=gl(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:FT;for(;xY(e);)try{const i=await tY(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,wY(e,i)}catch(i){await jy(e,i)}H6(e)&&q6(e)}function xY(t){return Kc(t)&&t.Ta.length<10}function wY(t,e){t.Ta.push(e);const n=gl(t);n.O_()&&n.X_&&n.ea(e.mutations)}function H6(t){return Kc(t)&&!gl(t).x_()&&t.Ta.length>0}function q6(t){gl(t).start()}async function _Y(t){gl(t).ra()}async function SY(t){const e=gl(t);for(const n of t.Ta)e.ea(n.mutations)}async function TY(t,e,n){const r=t.Ta.shift(),i=WT.from(r,e,n);await z6(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Zv(t)}async function EY(t,e){e&&gl(t).X_&&await async function(r,i){if(function(o){return sW(o)&&o!==pe.ABORTED}(i.code)){const a=r.Ta.shift();gl(r).B_(),await z6(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Zv(r)}}(t,e),H6(t)&&q6(t)}async function Sk(t,e){const n=it(t);n.asyncQueue.verifyOperationInProgress(),Re(Rc,"RemoteStore received new credentials");const r=Kc(n);n.Ea.add(3),await Em(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Qv(n)}async function AY(t,e){const n=it(t);e?(n.Ea.delete(2),await Qv(n)):e||(n.Ea.add(2),await Em(n),n.Ra.set("Unknown"))}function Kf(t){return t.ma||(t.ma=function(n,r,i){const a=it(n);return a.sa(),new uY(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:pY.bind(null,t),t_:yY.bind(null,t),r_:vY.bind(null,t),H_:bY.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),iE(t)?rE(t):t.Ra.set("Unknown")):(await t.ma.stop(),F6(t))})),t.ma}function gl(t){return t.fa||(t.fa=function(n,r,i){const a=it(n);return a.sa(),new fY(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:_Y.bind(null,t),r_:EY.bind(null,t),ta:SY.bind(null,t),na:TY.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Zv(t)):(await t.fa.stop(),t.Ta.length>0&&(Re(Rc,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Us,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const o=Date.now()+r,c=new aE(e,n,o,i,a);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ke(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sE(t,e){if(Gs("AsyncQueue",`${e}: ${t}`),Hf(t))return new ke(pe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{static emptySet(e){return new lf(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||We.comparator(n.key,r.key):(n,r)=>We.comparator(n.key,r.key),this.keyedMap=Td(),this.sortedSet=new hn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof lf)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new lf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(){this.ga=new hn(We.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):et(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class wf{constructor(e,n,r,i,a,o,c,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,a){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new wf(e,n,lf.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NY{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class CY{constructor(){this.queries=Ek(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=it(n),a=i.queries;i.queries=Ek(),a.forEach((o,c)=>{for(const u of c.Sa)u.onError(r)})})(this,new ke(pe.ABORTED,"Firestore shutting down"))}}function Ek(){return new qc(t=>f6(t),zv)}async function oE(t,e){const n=it(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new NY,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=sE(o,`Initialization of query '${Xu(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&cE(n)}async function lE(t,e){const n=it(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function jY(t,e){const n=it(t);let r=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const c of o.Sa)c.Fa(i)&&(r=!0);o.wa=i}}r&&cE(n)}function DY(t,e,n){const r=it(t),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(n);r.queries.delete(e)}function cE(t){t.Ca.forEach(e=>{e.next()})}var G_,Ak;(Ak=G_||(G_={})).Ma="default",Ak.Cache="cache";class uE{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new wf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=wf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==G_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e){this.key=e}}class G6{constructor(e){this.key=e}}class kY{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xt(),this.mutatedKeys=xt(),this.eu=h6(e),this.tu=new lf(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Tk,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((m,p)=>{const y=i.get(m),b=Hv(this.query,p)?p:null,_=!!y&&this.mutatedKeys.has(y.key),T=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let S=!1;y&&b?y.data.isEqual(b.data)?_!==T&&(r.track({type:3,doc:b}),S=!0):this.su(y,b)||(r.track({type:2,doc:b}),S=!0,(u&&this.eu(b,u)>0||h&&this.eu(b,h)<0)&&(c=!0)):!y&&b?(r.track({type:0,doc:b}),S=!0):y&&!b&&(r.track({type:1,doc:y}),S=!0,(u||h)&&(c=!0)),S&&(b?(o=o.add(b),a=T?a.add(m):a.delete(m)):(o=o.delete(m),a=a.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),a=a.delete(m.key),r.track({type:1,doc:m})}return{tu:o,iu:r,Cs:c,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((m,p)=>function(b,_){const T=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et(20277,{Rt:S})}};return T(b)-T(_)}(m.type,p.type)||this.eu(m.doc,p.doc)),this.ou(r),i=i??!1;const c=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,h=u!==this.Za;return this.Za=u,o.length!==0||h?{snapshot:new wf(this.query,e.tu,a,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Tk,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=xt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new G6(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new K6(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=xt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return wf.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const fE="SyncEngine";class OY{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class IY{constructor(e){this.key=e,this.hu=!1}}class PY{constructor(e,n,r,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new qc(c=>f6(c),zv),this.Iu=new Map,this.Eu=new Set,this.du=new hn(We.comparator),this.Au=new Map,this.Ru=new QT,this.Vu={},this.mu=new Map,this.fu=xf.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function RY(t,e,n=!0){const r=J6(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await W6(r,e,n,!0),i}async function MY(t,e){const n=J6(t);await W6(n,e,!0,!1)}async function W6(t,e,n,r){const i=await nY(t.localStore,Ha(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await LY(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&U6(t.remoteStore,i),c}async function LY(t,e,n,r,i){t.pu=(p,y,b)=>async function(T,S,E,N){let C=S.view.ru(E);C.Cs&&(C=await vk(T.localStore,S.query,!1).then(({documents:k})=>S.view.ru(k,C)));const L=N&&N.targetChanges.get(S.targetId),D=N&&N.targetMismatches.get(S.targetId)!=null,R=S.view.applyChanges(C,T.isPrimaryClient,L,D);return Ck(T,S.targetId,R.au),R.snapshot}(t,p,y,b);const a=await vk(t.localStore,e,!0),o=new kY(e,a.Qs),c=o.ru(a.documents),u=Tm.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(c,t.isPrimaryClient,u);Ck(t,n,h.au);const m=new OY(e,n,o);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function VY(t,e,n){const r=it(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter(o=>!zv(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await q_(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&tE(r.remoteStore,i.targetId),W_(r,i.targetId)}).catch(zf)):(W_(r,i.targetId),await q_(r.localStore,i.targetId,!0))}async function BY(t,e){const n=it(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),tE(n.remoteStore,r.targetId))}async function UY(t,e,n){const r=GY(t);try{const i=await function(o,c){const u=it(o),h=nn.now(),m=c.reduce((b,_)=>b.add(_.key),xt());let p,y;return u.persistence.runTransaction("Locally write mutations","readwrite",b=>{let _=Ws(),T=xt();return u.Ns.getEntries(b,m).next(S=>{_=S,_.forEach((E,N)=>{N.isValidDocument()||(T=T.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(b,_)).next(S=>{p=S;const E=[];for(const N of c){const C=tW(N,p.get(N.key).overlayedDocument);C!=null&&E.push(new Sl(N.key,C,r6(C.value.mapValue),Or.exists(!0)))}return u.mutationQueue.addMutationBatch(b,h,E,c)}).next(S=>{y=S;const E=S.applyToLocalDocumentSet(p,T);return u.documentOverlayCache.saveOverlays(b,S.batchId,E)})}).then(()=>({batchId:y.batchId,changes:m6(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,c,u){let h=o.Vu[o.currentUser.toKey()];h||(h=new hn(bt)),h=h.insert(c,u),o.Vu[o.currentUser.toKey()]=h}(r,i.batchId,n),await Am(r,i.changes),await Zv(r.remoteStore)}catch(i){const a=sE(i,"Failed to persist write");n.reject(a)}}async function Y6(t,e){const n=it(t);try{const r=await JW(n.localStore,e);e.targetChanges.forEach((i,a)=>{const o=n.Au.get(a);o&&(Vt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Vt(o.hu,14607):i.removedDocuments.size>0&&(Vt(o.hu,42227),o.hu=!1))}),await Am(n,r,e)}catch(r){await zf(r)}}function Nk(t,e,n){const r=it(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((a,o)=>{const c=o.view.va(e);c.snapshot&&i.push(c.snapshot)}),function(o,c){const u=it(o);u.onlineState=c;let h=!1;u.queries.forEach((m,p)=>{for(const y of p.Sa)y.va(c)&&(h=!0)}),h&&cE(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function $Y(t,e,n){const r=it(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let o=new hn(We.comparator);o=o.insert(a,br.newNoDocument(a,rt.min()));const c=xt().add(a),u=new Yv(rt.min(),new Map,new hn(bt),o,c);await Y6(r,u),r.du=r.du.remove(a),r.Au.delete(e),hE(r)}else await q_(r.localStore,e,!1).then(()=>W_(r,e,n)).catch(zf)}async function FY(t,e){const n=it(t),r=e.batch.batchId;try{const i=await ZW(n.localStore,e);Q6(n,r,null),X6(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Am(n,i)}catch(i){await zf(i)}}async function zY(t,e,n){const r=it(t);try{const i=await function(o,c){const u=it(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let m;return u.mutationQueue.lookupMutationBatch(h,c).next(p=>(Vt(p!==null,37113),m=p.keys(),u.mutationQueue.removeMutationBatch(h,p))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,m)).next(()=>u.localDocuments.getDocuments(h,m))})}(r.localStore,e);Q6(r,e,n),X6(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Am(r,i)}catch(i){await zf(i)}}function X6(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Q6(t,e,n){const r=it(t);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function W_(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Z6(t,r)})}function Z6(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(tE(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),hE(t))}function Ck(t,e,n){for(const r of n)r instanceof K6?(t.Ru.addReference(r.key,e),HY(t,r)):r instanceof G6?(Re(fE,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Z6(t,r.key)):et(19791,{wu:r})}function HY(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Re(fE,"New document in limbo: "+n),t.Eu.add(r),hE(t))}function hE(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new We(en.fromString(e)),r=t.fu.next();t.Au.set(r,new IY(n)),t.du=t.du.insert(n,r),U6(t.remoteStore,new tl(Ha(Fv(n.path)),r,"TargetPurposeLimboResolution",Bv.ce))}}async function Am(t,e,n){const r=it(t),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{o.push(r.pu(u,e,n).then(h=>{if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){i.push(h);const m=JT.As(u.targetId,h);a.push(m)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(u,h){const m=it(u);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>be.forEach(h,y=>be.forEach(y.Es,b=>m.persistence.referenceDelegate.addReference(p,y.targetId,b)).next(()=>be.forEach(y.ds,b=>m.persistence.referenceDelegate.removeReference(p,y.targetId,b)))))}catch(p){if(!Hf(p))throw p;Re(eE,"Failed to update sequence numbers: "+p)}for(const p of h){const y=p.targetId;if(!p.fromCache){const b=m.Ms.get(y),_=b.snapshotVersion,T=b.withLastLimboFreeSnapshotVersion(_);m.Ms=m.Ms.insert(y,T)}}}(r.localStore,a))}async function qY(t,e){const n=it(t);if(!n.currentUser.isEqual(e)){Re(fE,"User change. New user:",e.toKey());const r=await M6(n.localStore,e);n.currentUser=e,function(a,o){a.mu.forEach(c=>{c.forEach(u=>{u.reject(new ke(pe.CANCELLED,o))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Am(n,r.Ls)}}function KY(t,e){const n=it(t),r=n.Au.get(e);if(r&&r.hu)return xt().add(r.key);{let i=xt();const a=n.Iu.get(e);if(!a)return i;for(const o of a){const c=n.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function J6(t){const e=it(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Y6.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$Y.bind(null,e),e.Pu.H_=jY.bind(null,e.eventManager),e.Pu.yu=DY.bind(null,e.eventManager),e}function GY(t){const e=it(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zY.bind(null,e),e}class Dy{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xv(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return QW(this.persistence,new WW,e.initialUser,this.serializer)}Cu(e){return new R6(ZT.mi,this.serializer)}Du(e){return new iY}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dy.provider={build:()=>new Dy};class WY extends Dy{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Vt(this.persistence.referenceDelegate instanceof Cy,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new IW(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ur.withCacheSize(this.cacheSizeBytes):Ur.DEFAULT;return new R6(r=>Cy.mi(r,n),this.serializer)}}class Y_{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Nk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qY.bind(null,this.syncEngine),await AY(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new CY}()}createDatastore(e){const n=Xv(e.databaseInfo.databaseId),r=function(a){return new cY(a)}(e.databaseInfo);return function(a,o,c,u){return new dY(a,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,o,c){return new gY(r,i,a,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Nk(this.syncEngine,n,0),function(){return wk.v()?new wk:new aY}())}createSyncEngine(e,n){return function(i,a,o,c,u,h,m){const p=new PY(i,a,o,c,u,h);return m&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await async function(n){const r=it(n);Re(Rc,"RemoteStore shutting down."),r.Ea.add(5),await Em(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Y_.provider={build:()=>new Y_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl="FirestoreClient";class YY{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=vr.UNAUTHENTICATED,this.clientId=$T.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{Re(pl,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Re(pl,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Us;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=sE(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function hx(t,e){t.asyncQueue.verifyOperationInProgress(),Re(pl,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await M6(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function jk(t,e){t.asyncQueue.verifyOperationInProgress();const n=await XY(t);Re(pl,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Sk(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Sk(e.remoteStore,i)),t._onlineComponents=e}async function XY(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Re(pl,"Using user provided OfflineComponentProvider");try{await hx(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===pe.FAILED_PRECONDITION||i.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;mf("Error using user provided cache. Falling back to memory cache: "+n),await hx(t,new Dy)}}else Re(pl,"Using default OfflineComponentProvider"),await hx(t,new WY(void 0));return t._offlineComponents}async function e5(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Re(pl,"Using user provided OnlineComponentProvider"),await jk(t,t._uninitializedComponentsProvider._online)):(Re(pl,"Using default OnlineComponentProvider"),await jk(t,new Y_))),t._onlineComponents}function QY(t){return e5(t).then(e=>e.syncEngine)}async function ky(t){const e=await e5(t),n=e.eventManager;return n.onListen=RY.bind(null,e.syncEngine),n.onUnlisten=VY.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=MY.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=BY.bind(null,e.syncEngine),n}function ZY(t,e,n={}){const r=new Us;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,h){const m=new dE({next:y=>{m.Nu(),o.enqueueAndForget(()=>lE(a,p));const b=y.docs.has(c);!b&&y.fromCache?h.reject(new ke(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&y.fromCache&&u&&u.source==="server"?h.reject(new ke(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),p=new uE(Fv(c.path),m,{includeMetadataChanges:!0,qa:!0});return oE(a,p)}(await ky(t),t.asyncQueue,e,n,r)),r.promise}function JY(t,e,n={}){const r=new Us;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,h){const m=new dE({next:y=>{m.Nu(),o.enqueueAndForget(()=>lE(a,p)),y.fromCache&&u.source==="server"?h.reject(new ke(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(y)},error:y=>h.reject(y)}),p=new uE(c,m,{includeMetadataChanges:!0,qa:!0});return oE(a,p)}(await ky(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t5(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5="firestore.googleapis.com",kk=!0;class Ok{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ke(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=n5,this.ssl=kk}else this.host=e.host,this.ssl=e.ssl??kk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=P6;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<kW)throw new ke(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gG("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=t5(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ke(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ke(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ke(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jv{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ok({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ke(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ke(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ok(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new aG;switch(r.type){case"firstParty":return new cG(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ke(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Dk.get(n);r&&(Re("ComponentProvider","Removing Datastore"),Dk.delete(n),r.terminate())}(this),Promise.resolve()}}function eX(t,e,n,r={}){t=kr(t,Jv);const i=Bf(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;i&&(W3(`https://${c}`),Y3("Firestore",!0)),a.host!==n5&&a.host!==c&&mf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...a,host:c,ssl:i,emulatorOptions:r};if(!Hs(u,o)&&(t._setSettings(u),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=vr.MOCK_USER;else{h=sz(r.mockUserToken,t._app?.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new ke(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new vr(p)}t._authCredentials=new sG(new qM(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new io(this.firestore,e,this._query)}}class pn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new pn(this.firestore,e,this._key)}toJSON(){return{type:pn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(_m(n,pn._jsonSchema))return new pn(e,r||null,new We(en.fromString(n.referencePath)))}}pn._jsonSchemaVersion="firestore/documentReference/1.0",pn._jsonSchema={type:On("string",pn._jsonSchemaVersion),referencePath:On("string")};class sl extends io{constructor(e,n,r){super(e,n,Fv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new pn(this.firestore,null,new We(e))}withConverter(e){return new sl(this.firestore,e,this._path)}}function Oe(t,e,...n){if(t=Qt(t),KM("collection","path",e),t instanceof Jv){const r=en.fromString(e,...n);return qD(r),new sl(t,null,r)}{if(!(t instanceof pn||t instanceof sl))throw new ke(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(en.fromString(e,...n));return qD(r),new sl(t.firestore,null,r)}}function Ae(t,e,...n){if(t=Qt(t),arguments.length===1&&(e=$T.newId()),KM("doc","path",e),t instanceof Jv){const r=en.fromString(e,...n);return HD(r),new pn(t,null,new We(r))}{if(!(t instanceof pn||t instanceof sl))throw new ke(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(en.fromString(e,...n));return HD(r),new pn(t.firestore,t instanceof sl?t.converter:null,new We(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik="AsyncQueue";class Pk{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new V6(this,"async_queue_retry"),this._c=()=>{const r=fx();r&&Re(Ik,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=fx();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=fx();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Us;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Hf(e))throw e;Re(Ik,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Gs("INTERNAL UNHANDLED ERROR: ",Rk(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=aE.createAndSchedule(this,e,n,r,a=>this.hc(a));return this.tc.push(i),i}uc(){this.nc&&et(47125,{Pc:Rk(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Rk(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Xa extends Jv{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Pk,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Pk(e),this._firestoreClient=void 0,await e}}}function tX(t,e){const n=typeof t=="object"?t:J3(),r=typeof t=="string"?t:Sy,i=NT(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=iz("firestore");a&&eX(i,...a)}return i}function Nm(t){if(t._terminated)throw new ke(pe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||nX(t),t._firestoreClient}function nX(t){const e=t._freezeSettings(),n=function(i,a,o,c){return new NG(i,a,o,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,t5(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)}(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new YY(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(i){const a=i?._online.build();return{_offline:i?._offline.build(a),_online:a}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Li(dr.fromBase64String(e))}catch(n){throw new ke(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Li(dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Li._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(_m(e,Li._jsonSchema))return Li.fromBase64String(e.bytes)}}Li._jsonSchemaVersion="firestore/bytes/1.0",Li._jsonSchema={type:On("string",Li._jsonSchemaVersion),bytes:On("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ke(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function Ys(){return new Gf(R_)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ke(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ke(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return bt(this._lat,e._lat)||bt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ka._jsonSchemaVersion}}static fromJSON(e){if(_m(e,Ka._jsonSchema))return new Ka(e.latitude,e.longitude)}}Ka._jsonSchemaVersion="firestore/geoPoint/1.0",Ka._jsonSchema={type:On("string",Ka._jsonSchemaVersion),latitude:On("number"),longitude:On("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ga._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(_m(e,Ga._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ga(e.vectorValues);throw new ke(pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ga._jsonSchemaVersion="firestore/vectorValue/1.0",Ga._jsonSchema={type:On("string",Ga._jsonSchemaVersion),vectorValues:On("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rX=/^__.*__$/;class iX{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Sl(e,this.data,this.fieldMask,n,this.fieldTransforms):new Sm(e,this.data,n,this.fieldTransforms)}}class r5{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Sl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function i5(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et(40011,{Ac:t})}}class e0{constructor(e,n,r,i,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new e0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){const n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Oy(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(i5(this.Ac)&&rX.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class aX{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xv(e)}Cc(e,n,r,i=!1){return new e0({Ac:e,methodName:n,Dc:r,path:fr.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cm(t){const e=t._freezeSettings(),n=Xv(t._databaseId);return new aX(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mE(t,e,n,r,i,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,n,i);bE("Data must be an object, but it was:",o,r);const c=l5(r,o);let u,h;if(a.merge)u=new ui(o.fieldMask),h=o.fieldTransforms;else if(a.mergeFields){const m=[];for(const p of a.mergeFields){const y=X_(e,p,n);if(!o.contains(y))throw new ke(pe.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);u5(m,y)||m.push(y)}u=new ui(m),h=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,h=o.fieldTransforms;return new iX(new $r(c),u,h)}class t0 extends Gc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t0}}function a5(t,e,n){return new e0({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class gE extends Gc{_toFieldTransform(e){return new Kv(e.path,new Jd)}isEqual(e){return e instanceof gE}}class pE extends Gc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=a5(this,e,!0),r=this.vc.map(a=>Wc(a,n)),i=new vf(r);return new Kv(e.path,i)}isEqual(e){return e instanceof pE&&Hs(this.vc,e.vc)}}class yE extends Gc{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=a5(this,e,!0),r=this.vc.map(a=>Wc(a,n)),i=new bf(r);return new Kv(e.path,i)}isEqual(e){return e instanceof yE&&Hs(this.vc,e.vc)}}class vE extends Gc{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new em(e.serializer,y6(e.serializer,this.Fc));return new Kv(e.path,n)}isEqual(e){return e instanceof vE&&this.Fc===e.Fc}}function s5(t,e,n,r){const i=t.Cc(1,e,n);bE("Data must be an object, but it was:",i,r);const a=[],o=$r.empty();_l(r,(u,h)=>{const m=xE(e,u,n);h=Qt(h);const p=i.yc(m);if(h instanceof t0)a.push(m);else{const y=Wc(h,p);y!=null&&(a.push(m),o.set(m,y))}});const c=new ui(a);return new r5(o,c,i.fieldTransforms)}function o5(t,e,n,r,i,a){const o=t.Cc(1,e,n),c=[X_(e,r,n)],u=[i];if(a.length%2!=0)throw new ke(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<a.length;y+=2)c.push(X_(e,a[y])),u.push(a[y+1]);const h=[],m=$r.empty();for(let y=c.length-1;y>=0;--y)if(!u5(h,c[y])){const b=c[y];let _=u[y];_=Qt(_);const T=o.yc(b);if(_ instanceof t0)h.push(b);else{const S=Wc(_,T);S!=null&&(h.push(b),m.set(b,S))}}const p=new ui(h);return new r5(m,p,o.fieldTransforms)}function sX(t,e,n,r=!1){return Wc(n,t.Cc(r?4:3,e))}function Wc(t,e){if(c5(t=Qt(t)))return bE("Unsupported field value:",e,t),l5(t,e);if(t instanceof Gc)return function(r,i){if(!i5(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const a=[];let o=0;for(const c of r){let u=Wc(c,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=Qt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return y6(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=nn.fromDate(r);return{timestampValue:Ny(i.serializer,a)}}if(r instanceof nn){const a=new nn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ny(i.serializer,a)}}if(r instanceof Ka)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Li)return{bytesValue:N6(i.serializer,r._byteString)};if(r instanceof pn){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:XT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ga)return function(o,c){return{mapValue:{fields:{[t6]:{stringValue:n6},[Ty]:{arrayValue:{values:o.toArray().map(h=>{if(typeof h!="number")throw c.Sc("VectorValues must only contain numeric values.");return GT(c.serializer,h)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Vv(r)}`)}(t,e)}function l5(t,e){const n={};return YM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_l(t,(r,i)=>{const a=Wc(i,e.mc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function c5(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof nn||t instanceof Ka||t instanceof Li||t instanceof pn||t instanceof Gc||t instanceof Ga)}function bE(t,e,n){if(!c5(n)||!GM(n)){const r=Vv(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function X_(t,e,n){if((e=Qt(e))instanceof Gf)return e._internalPath;if(typeof e=="string")return xE(t,e);throw Oy("Field path arguments must be of type string or ",t,!1,void 0,n)}const oX=new RegExp("[~\\*/\\[\\]]");function xE(t,e,n){if(e.search(oX)>=0)throw Oy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gf(...e.split("."))._internalPath}catch{throw Oy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Oy(t,e,n,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ke(pe.INVALID_ARGUMENT,c+t+u)}function u5(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new pn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lX(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(n0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class lX extends f5{data(){return super.data()}}function n0(t,e){return typeof e=="string"?xE(t,e):e instanceof Gf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ke(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class wE{}class _E extends wE{}function Ge(t,e,...n){let r=[];e instanceof wE&&r.push(e),r=r.concat(n),function(a){const o=a.filter(u=>u instanceof SE).length,c=a.filter(u=>u instanceof r0).length;if(o>1||o>0&&c>0)throw new ke(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class r0 extends _E{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new r0(e,n,r)}_apply(e){const n=this._parse(e);return d5(e._query,n),new io(e.firestore,e.converter,U_(e._query,n))}_parse(e){const n=Cm(e.firestore);return function(a,o,c,u,h,m,p){let y;if(h.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new ke(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){Vk(p,m);const _=[];for(const T of p)_.push(Lk(u,a,T));y={arrayValue:{values:_}}}else y=Lk(u,a,p)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||Vk(p,m),y=sX(c,o,p,m==="in"||m==="not-in");return kn.create(h,m,y)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Qe(t,e,n){const r=e,i=n0("where",t);return r0._create(i,r,n)}class SE extends wE{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new SE(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:la.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let o=i;const c=a.getFlattenedFilters();for(const u of c)d5(o,u),o=U_(o,u)}(e._query,n),new io(e.firestore,e.converter,U_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class TE extends _E{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new TE(e,n)}_apply(e){const n=function(i,a,o){if(i.startAt!==null)throw new ke(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ke(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zd(a,o)}(e._query,this._field,this._direction);return new io(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new qf(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Iy(t,e="asc"){const n=e,r=n0("orderBy",t);return TE._create(r,n)}class EE extends _E{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new EE(e,n,r)}_apply(e){return new io(e.firestore,e.converter,Ay(e._query,this._limit,this._limitType))}}function vn(t){return pG("limit",t),EE._create("limit",t,"F")}function Lk(t,e,n){if(typeof(n=Qt(n))=="string"){if(n==="")throw new ke(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!u6(e)&&n.indexOf("/")!==-1)throw new ke(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(en.fromString(n));if(!We.isDocumentKey(r))throw new ke(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return JD(t,new We(r))}if(n instanceof pn)return JD(t,n._key);throw new ke(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Vv(n)}.`)}function Vk(t,e){if(!Array.isArray(t)||t.length===0)throw new ke(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function d5(t,e){const n=function(i,a){for(const o of i)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ke(pe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ke(pe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class cX{convertValue(e,n="none"){switch(ml(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _n(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(dl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw et(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return _l(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){const n=e.fields?.[Ty].arrayValue?.values?.map(r=>_n(r.doubleValue));return new Ga(n)}convertGeoPoint(e){return new Ka(_n(e.latitude),_n(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=$v(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Yd(e));default:return null}}convertTimestamp(e){const n=hl(e);return new nn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=en.fromString(e);Vt(I6(r),9688,{name:e});const i=new Xd(r.get(1),r.get(3)),a=new We(r.popFirst(5));return i.isEqual(n)||Gs(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Ad{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sc extends f5{constructor(e,n,r,i,a,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ry(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(n0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Sc._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Sc._jsonSchemaVersion="firestore/documentSnapshot/1.0",Sc._jsonSchema={type:On("string",Sc._jsonSchemaVersion),bundleSource:On("string","DocumentSnapshot"),bundleName:On("string"),bundle:On("string")};class ry extends Sc{data(e={}){return super.data(e)}}class Tc{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ad(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ry(this._firestore,this._userDataWriter,r.key,r,new Ad(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ke(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(c=>{const u=new ry(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ad(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const u=new ry(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Ad(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,m=-1;return c.type!==0&&(h=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),m=o.indexOf(c.doc.key)),{type:uX(c.type),doc:u,oldIndex:h,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ke(pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Tc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$T.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uX(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(t){t=kr(t,pn);const e=kr(t.firestore,Xa);return ZY(Nm(e),t._key).then(n=>m5(e,t,n))}Tc._jsonSchemaVersion="firestore/querySnapshot/1.0",Tc._jsonSchema={type:On("string",Tc._jsonSchemaVersion),bundleSource:On("string","QuerySnapshot"),bundleName:On("string"),bundle:On("string")};class NE extends cX{constructor(e){super(),this.firestore=e}convertBytes(e){return new Li(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new pn(this.firestore,null,n)}}function ct(t){t=kr(t,io);const e=kr(t.firestore,Xa),n=Nm(e),r=new NE(e);return h5(t._query),JY(n,t._query).then(i=>new Tc(e,r,t,i))}function hi(t,e,n){t=kr(t,pn);const r=kr(t.firestore,Xa),i=AE(t.converter,e,n);return jm(r,[mE(Cm(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Or.none())])}function yt(t,e,n,...r){t=kr(t,pn);const i=kr(t.firestore,Xa),a=Cm(i);let o;return o=typeof(e=Qt(e))=="string"||e instanceof Gf?o5(a,"updateDoc",t._key,e,n,r):s5(a,"updateDoc",t._key,e),jm(i,[o.toMutation(t._key,Or.exists(!0))])}function Tl(t){return jm(kr(t.firestore,Xa),[new Wv(t._key,Or.none())])}function Mc(t,e){const n=kr(t.firestore,Xa),r=Ae(t),i=AE(t.converter,e);return jm(n,[mE(Cm(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Or.exists(!1))]).then(()=>r)}function nt(t,...e){t=Qt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Mk(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Mk(e[r])){const u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let a,o,c;if(t instanceof pn)o=kr(t.firestore,Xa),c=Fv(t._key.path),a={next:u=>{e[r]&&e[r](m5(o,t,u))},error:e[r+1],complete:e[r+2]};else{const u=kr(t,io);o=kr(u.firestore,Xa),c=u._query;const h=new NE(o);a={next:m=>{e[r]&&e[r](new Tc(o,h,u,m))},error:e[r+1],complete:e[r+2]},h5(t._query)}return function(h,m,p,y){const b=new dE(y),_=new uE(m,b,p);return h.asyncQueue.enqueueAndForget(async()=>oE(await ky(h),_)),()=>{b.Nu(),h.asyncQueue.enqueueAndForget(async()=>lE(await ky(h),_))}}(Nm(o),c,i,a)}function jm(t,e){return function(r,i){const a=new Us;return r.asyncQueue.enqueueAndForget(async()=>UY(await QY(r),i,a)),a.promise}(Nm(t),e)}function m5(t,e,n){const r=n.docs.get(e._key),i=new NE(t);return new Sc(t,i,e._key,r,new Ad(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fX{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Cm(e)}set(e,n,r){this._verifyNotCommitted();const i=dx(e,this._firestore),a=AE(i.converter,n,r),o=mE(this._dataReader,"WriteBatch.set",i._key,a,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Or.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const a=dx(e,this._firestore);let o;return o=typeof(n=Qt(n))=="string"||n instanceof Gf?o5(this._dataReader,"WriteBatch.update",a._key,n,r,i):s5(this._dataReader,"WriteBatch.update",a._key,n),this._mutations.push(o.toMutation(a._key,Or.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=dx(e,this._firestore);return this._mutations=this._mutations.concat(new Wv(n._key,Or.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dx(t,e){if((t=Qt(t)).firestore!==e)throw new ke(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function jt(){return new gE("serverTimestamp")}function _f(...t){return new pE("arrayUnion",t)}function cf(...t){return new yE("arrayRemove",t)}function i0(t){return new vE("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hX(t){return Nm(t=kr(t,Xa)),new fX(t,e=>jm(t,e))}(function(e,n=!0){(function(i){Ff=i})(Uf),df(new Dc("firestore",(r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new Xa(new oG(r.getProvider("auth-internal")),new uG(o,r.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ke(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xd(h.options.projectId,m)}(o,i),o);return a={useFetchStreams:n,...a},c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),il($D,FD,e),il($D,FD,"esm2020")})();const dX={apiKey:"AIzaSyCywufkVe0QNnw_Qmj_apcXaZGaPadsDDE",authDomain:"hoctuvung2808.firebaseapp.com",projectId:"hoctuvung2808",storageBucket:"hoctuvung2808.firebasestorage.app",messagingSenderId:"904688869790",appId:"1:904688869790:web:d7fdfbfefe8db2fc22768f"},g5=Z3(dX),lt=tG(g5),se=tX(g5);function CE(){const t=wt(),e=Ir(),n=r=>r==="/"||r==="/dang-nhap"||r==="/dang-ky"||r==="/quen-mat-khau";return w.useEffect(()=>{const r=ga(lt,a=>{a||(sessionStorage.removeItem("session"),n(e.pathname)||t("/dang-nhap",{replace:!0}))}),i=a=>{a.key==="auth:logout"&&(sessionStorage.removeItem("session"),n(e.pathname)||t("/dang-nhap",{replace:!0})),a.key};return window.addEventListener("storage",i),()=>{r&&r(),window.removeEventListener("storage",i)}},[t,e.pathname]),null}function mX(){return d.jsxs("div",{children:[d.jsx(YF,{}),d.jsx(CE,{}),d.jsx(Vf,{}),d.jsx($3,{})]})}var p5={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Bk=fn.createContext&&fn.createContext(p5),gX=["attr","size","title"];function pX(t,e){if(t==null)return{};var n=yX(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yX(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Py(){return Py=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Py.apply(this,arguments)}function Uk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ry(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Uk(Object(n),!0).forEach(function(r){vX(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vX(t,e,n){return e=bX(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bX(t){var e=xX(t,"string");return typeof e=="symbol"?e:e+""}function xX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function y5(t){return t&&t.map((e,n)=>fn.createElement(e.tag,Ry({key:n},e.attr),y5(e.child)))}function Hr(t){return e=>fn.createElement(wX,Py({attr:Ry({},t.attr)},e),y5(t.child))}function wX(t){var e=n=>{var{attr:r,size:i,title:a}=t,o=pX(t,gX),c=i||n.size||"1em",u;return n.className&&(u=n.className),t.className&&(u=(u?u+" ":"")+t.className),fn.createElement("svg",Py({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:Ry(Ry({color:t.color||n.color},n.style),t.style),height:c,width:c,xmlns:"http://www.w3.org/2000/svg"}),a&&fn.createElement("title",null,a),t.children)};return Bk!==void 0?fn.createElement(Bk.Consumer,null,n=>e(n)):e(p5)}function _X(t){return Hr({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function SX(t){return Hr({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M208 0c-29.9 0-54.7 20.5-61.8 48.2-.8 0-1.4-.2-2.2-.2-35.3 0-64 28.7-64 64 0 4.8.6 9.5 1.7 14C52.5 138 32 166.6 32 200c0 12.6 3.2 24.3 8.3 34.9C16.3 248.7 0 274.3 0 304c0 33.3 20.4 61.9 49.4 73.9-.9 4.6-1.4 9.3-1.4 14.1 0 39.8 32.2 72 72 72 4.1 0 8.1-.5 12-1.2 9.6 28.5 36.2 49.2 68 49.2 39.8 0 72-32.2 72-72V64c0-35.3-28.7-64-64-64zm368 304c0-29.7-16.3-55.3-40.3-69.1 5.2-10.6 8.3-22.3 8.3-34.9 0-33.4-20.5-62-49.7-74 1-4.5 1.7-9.2 1.7-14 0-35.3-28.7-64-64-64-.8 0-1.5.2-2.2.2C422.7 20.5 397.9 0 368 0c-35.3 0-64 28.6-64 64v376c0 39.8 32.2 72 72 72 31.8 0 58.4-20.7 68-49.2 3.9.7 7.9 1.2 12 1.2 39.8 0 72-32.2 72-72 0-4.8-.5-9.5-1.4-14.1 29-12 49.4-40.6 49.4-73.9z"},child:[]}]})(t)}function TX(t){return Hr({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M208 352c-2.39 0-4.78.35-7.06 1.09C187.98 357.3 174.35 360 160 360c-14.35 0-27.98-2.7-40.95-6.91-2.28-.74-4.66-1.09-7.05-1.09C49.94 352-.33 402.48 0 464.62.14 490.88 21.73 512 48 512h224c26.27 0 47.86-21.12 48-47.38.33-62.14-49.94-112.62-112-112.62zm-48-32c53.02 0 96-42.98 96-96s-42.98-96-96-96-96 42.98-96 96 42.98 96 96 96zM592 0H208c-26.47 0-48 22.25-48 49.59V96c23.42 0 45.1 6.78 64 17.8V64h352v288h-64v-64H384v64h-76.24c19.1 16.69 33.12 38.73 39.69 64H592c26.47 0 48-22.25 48-49.59V49.59C640 22.25 618.47 0 592 0z"},child:[]}]})(t)}function EX(t){return Hr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function AX(t){return Hr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(t)}function v5(t){return Hr({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(t)}function NX(t){return Hr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M12.41 148.02l232.94 105.67c6.8 3.09 14.49 3.09 21.29 0l232.94-105.67c16.55-7.51 16.55-32.52 0-40.03L266.65 2.31a25.607 25.607 0 0 0-21.29 0L12.41 107.98c-16.55 7.51-16.55 32.53 0 40.04zm487.18 88.28l-58.09-26.33-161.64 73.27c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.51 209.97l-58.1 26.33c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 276.3c16.55-7.5 16.55-32.5 0-40zm0 127.8l-57.87-26.23-161.86 73.37c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.29 337.87 12.41 364.1c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 404.1c16.55-7.5 16.55-32.5 0-40z"},child:[]}]})(t)}function CX(t){return Hr({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M96.06 454.35c.01 6.29 1.87 12.45 5.36 17.69l17.09 25.69a31.99 31.99 0 0 0 26.64 14.28h61.71a31.99 31.99 0 0 0 26.64-14.28l17.09-25.69a31.989 31.989 0 0 0 5.36-17.69l.04-38.35H96.01l.05 38.35zM0 176c0 44.37 16.45 84.85 43.56 115.78 16.52 18.85 42.36 58.23 52.21 91.45.04.26.07.52.11.78h160.24c.04-.26.07-.51.11-.78 9.85-33.22 35.69-72.6 52.21-91.45C335.55 260.85 352 220.37 352 176 352 78.61 272.91-.3 175.45 0 73.44.31 0 82.97 0 176zm176-80c-44.11 0-80 35.89-80 80 0 8.84-7.16 16-16 16s-16-7.16-16-16c0-61.76 50.24-112 112-112 8.84 0 16 7.16 16 16s-7.16 16-16 16z"},child:[]}]})(t)}function jX(t){return Hr({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M608 32H32C14.33 32 0 46.33 0 64v384c0 17.67 14.33 32 32 32h576c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zM176 327.88V344c0 4.42-3.58 8-8 8h-16c-4.42 0-8-3.58-8-8v-16.29c-11.29-.58-22.27-4.52-31.37-11.35-3.9-2.93-4.1-8.77-.57-12.14l11.75-11.21c2.77-2.64 6.89-2.76 10.13-.73 3.87 2.42 8.26 3.72 12.82 3.72h28.11c6.5 0 11.8-5.92 11.8-13.19 0-5.95-3.61-11.19-8.77-12.73l-45-13.5c-18.59-5.58-31.58-23.42-31.58-43.39 0-24.52 19.05-44.44 42.67-45.07V152c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v16.29c11.29.58 22.27 4.51 31.37 11.35 3.9 2.93 4.1 8.77.57 12.14l-11.75 11.21c-2.77 2.64-6.89 2.76-10.13.73-3.87-2.43-8.26-3.72-12.82-3.72h-28.11c-6.5 0-11.8 5.92-11.8 13.19 0 5.95 3.61 11.19 8.77 12.73l45 13.5c18.59 5.58 31.58 23.42 31.58 43.39 0 24.53-19.05 44.44-42.67 45.07zM416 312c0 4.42-3.58 8-8 8H296c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h112c4.42 0 8 3.58 8 8v16zm160 0c0 4.42-3.58 8-8 8h-80c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16zm0-96c0 4.42-3.58 8-8 8H296c-4.42 0-8-3.58-8-8v-16c0-4.42 3.58-8 8-8h272c4.42 0 8 3.58 8 8v16z"},child:[]}]})(t)}function jE(t){return Hr({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"},child:[]}]})(t)}function Sf(t){return Hr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"},child:[]}]})(t)}function DX(t){return Hr({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(t)}function kX(t){return Hr({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}async function OX(t,e=1,n="vi",r="en"){const a=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:"Bearer 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","Content-Type":"application/json"},body:JSON.stringify({model:"deepseek/deepseek-r1:free",temperature:.2,messages:[{role:"user",content:`Tạo CHÍNH XÁC ${e} cặp thẻ JSON theo chủ đề "${t}". - "tu": từ/phrase ở ngôn ngữ gốc (${n}). - "nghia": bản dịch ở ngôn ngữ muốn học (${r}). Trả về DUY NHẤT một JSON array thuần: [{"tu":"...","nghia":"..."}]. KHÔNG dùng \`\`\`, KHÔNG thêm chữ nào khác.`}]})});if(!a.ok)return console.error("OpenRouter HTTP error:",a.status),[];const c=(await a.json())?.choices?.[0]?.message?.content||"[]",u=c.replace(/<think>[\s\S]*?<\/think>/g,"").trim();let h=[];try{h=JSON.parse(u)}catch{const b=p(u);try{h=JSON.parse(b)}catch(_){console.error("Lỗi parse JSON:",_,c),h=[]}}return(Array.isArray(h)?h:[]).map(b=>({tu:(b?.tu??b?.question??b?.word??b?.front??"").toString().trim(),nghia:(b?.nghia??b?.answer??b?.meaning??b?.back??"").toString().trim()})).filter(b=>b.tu&&b.nghia).slice(0,Number(e)||1);function p(b){if(!b)return"[]";const _=y(b,"[","]");return _||y(b,"{","}")||"[]"}function y(b,_,T){let S=-1,E=0;for(let N=0;N<b.length;N++){const C=b[N];if(C===_)E===0&&(S=N),E++;else if(C===T&&(E=Math.max(0,E-1),E===0&&S!==-1)){const L=b.slice(S,N+1);try{return JSON.parse(L),L}catch{}S=-1}}return""}}async function IX(t,e){const n="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",r=[{role:"system",content:"Bạn là trợ lý ngắn gọn, thân thiện, hướng dẫn cách sử dụng website học từ vựng HOCTUVUNG. Trả lời bằng tiếng Việt, câu ngắn, kèm từng bước khi cần."},...t.map(c=>({role:c.role,content:c.content})),{role:"user",content:e}],i=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({model:"gpt-4o-mini",temperature:.3,messages:r})});return i.ok?(await i.json())?.choices?.[0]?.message?.content||"Xin lỗi, mình chưa có câu trả lời.":(console.error("OpenRouter HTTP error:",i.status),"Xin lỗi, hiện mình không phản hồi được. Bạn thử lại sau nhé.")}function PX({defaultOpen:t=!1}){const[e,n]=w.useState(!!t),[r,i]=w.useState([{role:"assistant",content:"Chào bạn! Mình là trợ lý của HOCTUVUNG. Hỏi mình cách tạo bộ thẻ, học flashcard, làm trắc nghiệm, hoặc cách thanh toán nhé."}]),[a,o]=w.useState(""),[c,u]=w.useState(!1),h=w.useRef(null);w.useEffect(()=>{h.current&&(h.current.scrollTop=h.current.scrollHeight)},[r,e]),w.useEffect(()=>{const y=()=>n(!0),b=()=>n(_=>!_);return window.addEventListener("helpbot:open",y),window.addEventListener("helpbot:toggle",b),()=>{window.removeEventListener("helpbot:open",y),window.removeEventListener("helpbot:toggle",b)}},[]);const m=async()=>{const y=a.trim();if(!y||c)return;o("");const b=r.slice(-8);i(_=>[..._,{role:"user",content:y}]),u(!0);try{const _=await IX(b,y);i(T=>[...T,{role:"assistant",content:_}])}catch(_){console.error(_),i(T=>[...T,{role:"assistant",content:"Xin lỗi, mình bị lỗi kết nối. Bạn thử lại giúp mình nhé."}])}finally{u(!1)}},p=y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),m())};return d.jsx("div",{className:"helpbot-wrap",children:e&&d.jsxs("div",{className:"helpbot-modal",role:"dialog","aria-label":"Trợ lý hướng dẫn",children:[d.jsxs("div",{className:"helpbot-head",children:[d.jsx("strong",{children:"Trợ lý HOCTUVUNG"}),d.jsx("button",{className:"helpbot-close",onClick:()=>n(!1),children:"×"})]}),d.jsxs("div",{className:"helpbot-list",ref:h,children:[r.map((y,b)=>d.jsx("div",{className:`helpbot-item ${y.role}`,children:d.jsx("div",{className:"bubble",children:y.content})},b)),c&&d.jsx("div",{className:"helpbot-item assistant",children:d.jsx("div",{className:"bubble",children:"Đang soạn câu trả lời…"})})]}),d.jsxs("div",{className:"helpbot-input",children:[d.jsx("textarea",{value:a,onChange:y=>o(y.target.value),onKeyDown:p,placeholder:"Ví dụ: Làm sao tạo bộ thẻ?",rows:2}),d.jsx("button",{className:"send",onClick:m,disabled:c,children:"Gửi"})]})]})})}const Q_=[{code:"vi",label:"Tiếng Việt (vi)"},{code:"en",label:"English (en)"},{code:"ja",label:"日本語 (ja)"},{code:"ko",label:"한국어 (ko)"},{code:"zh",label:"中文 (zh)"},{code:"fr",label:"Français (fr)"},{code:"de",label:"Deutsch (de)"},{code:"es",label:"Español (es)"}],$k=t=>Q_.find(e=>e.code===t)?.label||t;function DE(){const[t,e]=w.useState(!1),n=w.useRef(null),[r,i]=w.useState(!1),[a,o]=w.useState(!1),[c,u]=w.useState(""),[h,m]=w.useState(1),[p,y]=w.useState(""),[b,_]=w.useState("vi"),[T,S]=w.useState("en"),[E,N]=w.useState("ca_nhan"),[C,L]=w.useState(!1),[D,R]=w.useState(""),[k,I]=w.useState([]),[O,U]=w.useState(null),[$,V]=w.useState(!1);w.useEffect(()=>{const Z=ga(lt,async te=>{if(!te){U(null);return}try{const fe=Ae(se,"nguoiDung",te.uid),Ce=await ht(fe),Ie=Ce.exists()?Ce.data():{};U({idNguoiDung:te.uid,email:te.email||Ie.email||"",tenNguoiDung:Ie.tenNguoiDung||te.displayName||"",hoten:Ie.hoten||"",vaiTro:Ie.vaiTro||"HOC_VIEN",anhDaiDien:Ie.anhDaiDien||te.photoURL||""})}catch(fe){console.error("Lỗi nạp hồ sơ người dùng:",fe),U({idNguoiDung:te.uid,email:te.email||"",tenNguoiDung:te.displayName||"",hoten:"",vaiTro:"HOC_VIEN",anhDaiDien:te.photoURL||""})}});return()=>Z()},[]),w.useEffect(()=>{const Z=te=>{n.current&&!n.current.contains(te.target)&&e(!1)};return document.addEventListener("mousedown",Z),()=>document.removeEventListener("mousedown",Z)},[]);const B=()=>{r||(u(""),m(1),_("vi"),S("en"),N("ca_nhan"),y(""),o(!0),e(!1))},Y=()=>{o(!1),y("")},ee=async Z=>{if(Z.preventDefault(),!O?.idNguoiDung){alert("Vui lòng đăng nhập để tạo bộ thẻ.");return}if(!c.trim()){y("Vui lòng nhập chủ đề.");return}const te=Number(h);if(!Number.isInteger(te)||te<=0){y("Số lượng phải là số nguyên dương.");return}if(te>9){y("Số lượng tối đa là 9.");return}if(b===T){y("Vui lòng chọn 2 ngôn ngữ khác nhau (gốc & muốn học).");return}o(!1),y(""),i(!0);try{const fe=await OX(c,te,b,T);R(c),I((Array.isArray(fe)?fe:[]).slice(0,te)),L(!0)}catch(fe){console.error(fe),alert("Không thể tạo bộ thẻ. Vui lòng thử lại.")}finally{i(!1)}},q=async()=>{for(let Z=0;Z<5;Z++){const te=Math.floor(1e5+Math.random()*9e5),fe=Ge(Oe(se,"boThe"),Qe("idBoThe","==",te));if((await ct(fe)).empty)return te}return Number(String(Date.now()).slice(-6))},G=(Z,te,fe)=>{I(Ce=>{const Ie=Ce.slice();return Ie[Z]={...Ie[Z],[te]:fe},Ie})},K=Z=>{I(te=>te.filter((fe,Ce)=>Ce!==Z))},oe=()=>{L(!1)},H=async()=>{const Z=O?.idNguoiDung,te=k.map(fe=>({tu:String(fe?.tu||"").trim(),nghia:String(fe?.nghia||"").trim()})).filter(fe=>fe.tu&&fe.nghia);if(!te.length)return alert("Danh sách thẻ trống hoặc không hợp lệ.");if(!Z)return alert("Vui lòng đăng nhập.");try{const fe=await q();await hi(Ae(se,"boThe",String(fe)),{idBoThe:fe,tenBoThe:String(D||"").trim(),soTu:te.length,idNguoiDung:String(Z),danhSachThe:te,luotHoc:0,cheDo:E,ngayTao:jt(),ngayChinhSua:jt()},{merge:!0}),window.dispatchEvent(new Event("boTheUpdated")),L(!1),alert("Đã lưu bộ thẻ: "+D)}catch(fe){console.error("Lưu bộ thẻ thất bại:",fe),alert("Không thể lưu bộ thẻ. Vui lòng thử lại.")}};return O?.vaiTro,d.jsxs("div",{className:"ai-button-container",ref:n,children:[d.jsx("button",{className:"icon-btn",onClick:()=>e(Z=>!Z),title:"AI trợ giúp","aria-haspopup":"menu","aria-expanded":t,children:d.jsx(jE,{})}),t&&d.jsxs("div",{className:"ai-dropdown",children:[d.jsx("div",{className:"ai-item",onClick:()=>{V(!0),window.dispatchEvent(new Event("helpbot:open")),e(!1)},children:"Chat trợ giúp"}),d.jsx("div",{className:`ai-item${r?" disabled":""}`,onClick:r?void 0:B,children:r?"Đang tạo...":"Tạo bộ thẻ theo chủ đề"})]}),$&&d.jsx(PX,{defaultOpen:!0})," ",a&&d.jsx("div",{className:"create-form-modal",children:d.jsxs("div",{className:"create-form-modal-content",children:[d.jsxs("div",{className:"create-form-modal-content-header",children:[d.jsx("h3",{children:"Tạo bộ thẻ"}),d.jsx("button",{onClick:Y,"aria-label":"Đóng",children:"X"})]}),d.jsx("form",{onSubmit:ee,children:d.jsxs("div",{className:"create-form-modal-content-form",children:[d.jsxs("label",{className:"create-form-modal-content-form-label",children:[d.jsx("span",{children:"Chủ đề"}),d.jsx("input",{type:"text",value:c,onChange:Z=>u(Z.target.value),placeholder:"Nhập chủ đề bộ thẻ"})]}),d.jsxs("label",{className:"create-form-modal-content-form-label",children:[d.jsx("span",{children:"Ngôn ngữ gốc"}),d.jsx("select",{value:b,onChange:Z=>_(Z.target.value),children:Q_.map(Z=>d.jsx("option",{value:Z.code,children:Z.label},Z.code))})]}),d.jsxs("label",{className:"create-form-modal-content-form-label",children:[d.jsx("span",{children:"Ngôn ngữ muốn học"}),d.jsx("select",{value:T,onChange:Z=>S(Z.target.value),children:Q_.map(Z=>d.jsx("option",{value:Z.code,children:Z.label},Z.code))})]}),d.jsxs("label",{className:"create-form-modal-content-form-label",children:[d.jsx("span",{children:"Chế độ"}),d.jsxs("select",{value:E,onChange:Z=>N(Z.target.value),children:[d.jsx("option",{value:"cong_khai",children:"Công khai — ai cũng tìm & học được"}),d.jsx("option",{value:"ca_nhan",children:"Cá nhân — chỉ mình tôi thấy"})]})]}),d.jsxs("label",{children:[d.jsx("span",{children:"Số lượng (tối đa 9 vì dùng chatbot free -_-)"}),d.jsx("input",{type:"number",min:1,max:9,value:h,onChange:Z=>{const te=Z.target.value===""?"":Math.max(1,Math.min(9,Number(Z.target.value)));m(te)},placeholder:"1 - 9"})]}),p&&d.jsx("div",{style:{color:"#d33",fontSize:14},children:p}),d.jsxs("div",{className:"create-form-modal-content-form-button",children:[d.jsx("button",{type:"button",onClick:Y,children:"Hủy"}),d.jsx("button",{type:"submit",disabled:r,children:"Tạo"})]})]})})]})}),C&&d.jsx("div",{className:"preview-modal",children:d.jsxs("div",{className:"preview-modal-content",children:[d.jsxs("div",{className:"preview-modal-header",children:[d.jsxs("h1",{className:"preview-modal-header-title",children:["Xem lại bộ thẻ: ",D]}),d.jsx("button",{onClick:oe,children:"X"})]}),d.jsxs("div",{className:"preview-modal-body",children:[d.jsxs("div",{className:"preview-modal-body-header",children:[d.jsxs("strong",{children:["Từ (",$k(b),")"]}),d.jsxs("strong",{children:["Nghĩa (",$k(T),")"]}),d.jsx("span",{})]}),k.map((Z,te)=>d.jsxs("div",{className:"preview-modal-row",children:[d.jsx("input",{type:"text",value:Z.tu||"",onChange:fe=>G(te,"tu",fe.target.value),placeholder:"apple",style:{padding:"8px 10px"}}),d.jsx("input",{type:"text",value:Z.nghia||"",onChange:fe=>G(te,"nghia",fe.target.value),placeholder:"quả táo",style:{padding:"8px 10px"}}),d.jsx("button",{onClick:()=>K(te),children:"Xóa"})]},te))]}),d.jsxs("div",{className:"preview-modal-footer",children:[d.jsx("button",{className:"preview-modal-footer-button",onClick:()=>I(Z=>[...Z,{tu:"",nghia:""}]),children:"Thêm thẻ"}),d.jsx("span",{style:{flex:1}}),d.jsx("button",{className:"preview-modal-footer-button",onClick:oe,children:"Hủy"}),d.jsx("button",{className:"preview-modal-footer-button save-button",onClick:H,children:"Lưu"})]})]})})]})}const RX=Object.freeze(Object.defineProperty({__proto__:null,default:DE},Symbol.toStringTag,{value:"Module"})),Fk="";function MX({handleShowSidebar:t}){const[e,n]=w.useState(!1),[r,i]=w.useState("Người dùng"),[a,o]=w.useState(Fk),[c,u]=w.useState(!1),h=w.useRef(null),m=wt();w.useEffect(()=>{const y=async T=>{try{const S=await ht(Ae(se,"nguoiDung",T.uid));if(!S.exists())throw new Error("User profile not found");const E=S.data();if(E?.vaiTro!=="ADMIN")throw new Error("Not an admin user");n(!0),i(E?.tenNguoiDung||"Người dùng"),o(E?.anhDaiDien||Fk);const N={idNguoiDung:T.uid,vaiTro:E.vaiTro};sessionStorage.setItem("session",JSON.stringify(N))}catch(S){console.error("Admin verification failed:",S),sessionStorage.removeItem("session"),m("/dang-nhap",{replace:!0})}},b=ga(lt,T=>{if(!T){sessionStorage.removeItem("session"),m("/dang-nhap",{replace:!0});return}y(T)}),_=JSON.parse(sessionStorage.getItem("session"));return(!_||_.vaiTro!=="ADMIN")&&m("/dang-nhap",{replace:!0}),()=>b()},[m]);const p=async()=>{try{await NM(lt),sessionStorage.clear(),window.dispatchEvent(new CustomEvent("auth:logout")),m("/dang-nhap",{replace:!0})}catch(y){console.error("Logout failed:",y)}};return e?d.jsxs("div",{className:"header-admin-container",children:[d.jsx("button",{className:"icon-btn",onClick:t,"aria-label":"Toggle sidebar",children:d.jsx(_X,{})}),d.jsxs("div",{className:"admin-user-menu",ref:h,children:[d.jsx("button",{className:"icon-btn",onClick:()=>u(y=>!y),"aria-label":"Open user menu",children:d.jsx("img",{src:a,alt:"avatar",className:"avatar"})}),c&&d.jsxs("div",{className:"admin-user-dropdown",children:[d.jsxs("div",{className:"dropdown-infor",children:[d.jsx("img",{src:a,alt:"avatar",className:"avatar"}),d.jsx("h2",{className:"title",children:r})]}),d.jsx("div",{className:"dropdown-divider"}),d.jsxs("div",{className:"dropdown-item",onClick:()=>{u(!1),m("/admin/setting")},children:[d.jsx("span",{className:"icon",children:"⚙️"}),d.jsx("span",{style:{color:"black"},children:"Cài đặt"})]}),d.jsx("div",{className:"dropdown-divider"}),d.jsx("div",{className:"dropdown-item danger",onClick:p,children:"Đăng xuất"})]})]}),d.jsx(DE,{})]}):null}const LX=()=>d.jsx("div",{className:"sidebar-container",children:d.jsxs("div",{className:"sidebar-content",children:[d.jsx("h3",{children:d.jsx("a",{id:"trangChuAdmin",href:"/admin",children:"Học từ Vựng"})}),d.jsxs("ul",{children:[d.jsx("li",{children:d.jsxs("a",{href:"/admin/thong-ke",children:[d.jsx("span",{className:"sidebar-icon",children:d.jsx(EX,{})}),"Thống Kê"]})}),d.jsx("li",{children:d.jsxs("a",{href:"/admin/quan-ly-user",children:[d.jsx("span",{className:"sidebar-icon",children:d.jsx(DX,{})}),"Quản Lý Người Dùng"]})}),d.jsx("li",{children:d.jsxs("a",{href:"/admin/quan-ly-bo-the",children:[d.jsx("span",{className:"sidebar-icon",children:d.jsx(NX,{})}),"Quản Lý Bộ Thẻ"]})}),d.jsx("li",{children:d.jsxs("a",{href:"/admin/quan-ly-khoa-hoc",children:[d.jsx("span",{className:"sidebar-icon",children:d.jsx(TX,{})}),"Quản Lý Khóa Học"]})}),d.jsx("li",{children:d.jsxs("a",{href:"/admin/quan-ly-tra-phi",children:[d.jsx("span",{className:"sidebar-icon",children:d.jsx(jX,{})}),"Quản Lý Trả Phí"]})})]})]})});function b5({children:t}){const[e,n]=w.useState(!1),r=i=>{n(!e),i.preventDefault()};return d.jsxs("div",{className:`admin-layout-root${e?" sidebar-open":""}`,children:[d.jsxs("div",{className:"admin-layout-header",children:[d.jsx(MX,{handleShowSidebar:r}),d.jsx(CE,{})]}),d.jsxs("div",{className:"admin-layout-main",children:[d.jsx("div",{className:"admin-layout-sidebar",children:d.jsx(LX,{})}),d.jsx("div",{className:"admin-layout-content",children:t||d.jsx(Vf,{})})]})]})}/*!
 * Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2025 Fonticons, Inc.
 */function Z_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function VX(t){if(Array.isArray(t))return t}function BX(t){if(Array.isArray(t))return Z_(t)}function UX(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,x5(r.key),r)}}function FX(t,e,n){return e&&$X(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function iy(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=kE(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(u){throw u},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var u=n.next();return o=u.done,u},e:function(u){c=!0,a=u},f:function(){try{o||n.return==null||n.return()}finally{if(c)throw a}}}}function _t(t,e,n){return(e=x5(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zX(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function HX(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,c=[],u=!0,h=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(m){h=!0,i=m}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(h)throw i}}return c}}function qX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zk(Object(n),!0).forEach(function(r){_t(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a0(t,e){return VX(t)||HX(t,e)||kE(t,e)||qX()}function ca(t){return BX(t)||zX(t)||kE(t)||KX()}function GX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function x5(t){var e=GX(t,"string");return typeof e=="symbol"?e:e+""}function My(t){"@babel/helpers - typeof";return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},My(t)}function kE(t,e){if(t){if(typeof t=="string")return Z_(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z_(t,e):void 0}}var Hk=function(){},OE={},w5={},_5=null,S5={mark:Hk,measure:Hk};try{typeof window<"u"&&(OE=window),typeof document<"u"&&(w5=document),typeof MutationObserver<"u"&&(_5=MutationObserver),typeof performance<"u"&&(S5=performance)}catch{}var WX=OE.navigator||{},qk=WX.userAgent,Kk=qk===void 0?"":qk,yl=OE,rn=w5,Gk=_5,Ap=S5;yl.document;var ao=!!rn.documentElement&&!!rn.head&&typeof rn.addEventListener=="function"&&typeof rn.createElement=="function",T5=~Kk.indexOf("MSIE")||~Kk.indexOf("Trident/"),mx,YX=/fa(k|kd|s|r|l|t|d|dr|dl|dt|b|slr|slpr|wsb|tl|ns|nds|es|jr|jfr|jdr|cr|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,XX=/Font ?Awesome ?([567 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit|Notdog Duo|Notdog|Chisel|Etch|Thumbprint|Jelly Fill|Jelly Duo|Jelly|Slab Press|Slab|Whiteboard)?.*/i,E5={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"},slab:{"fa-regular":"regular",faslr:"regular"},"slab-press":{"fa-regular":"regular",faslpr:"regular"},thumbprint:{"fa-light":"light",fatl:"light"},whiteboard:{"fa-semibold":"semibold",fawsb:"semibold"},notdog:{"fa-solid":"solid",fans:"solid"},"notdog-duo":{"fa-solid":"solid",fands:"solid"},etch:{"fa-solid":"solid",faes:"solid"},jelly:{"fa-regular":"regular",fajr:"regular"},"jelly-fill":{"fa-regular":"regular",fajfr:"regular"},"jelly-duo":{"fa-regular":"regular",fajdr:"regular"},chisel:{"fa-regular":"regular",facr:"regular"}},QX={GROUP:"duotone-group",PRIMARY:"primary",SECONDARY:"secondary"},A5=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-thumbprint","fa-whiteboard","fa-notdog","fa-notdog-duo","fa-chisel","fa-etch","fa-jelly","fa-jelly-fill","fa-jelly-duo","fa-slab","fa-slab-press"],Sr="classic",Dm="duotone",N5="sharp",C5="sharp-duotone",j5="chisel",D5="etch",k5="jelly",O5="jelly-duo",I5="jelly-fill",P5="notdog",R5="notdog-duo",M5="slab",L5="slab-press",V5="thumbprint",B5="whiteboard",ZX="Classic",JX="Duotone",eQ="Sharp",tQ="Sharp Duotone",nQ="Chisel",rQ="Etch",iQ="Jelly",aQ="Jelly Duo",sQ="Jelly Fill",oQ="Notdog",lQ="Notdog Duo",cQ="Slab",uQ="Slab Press",fQ="Thumbprint",hQ="Whiteboard",U5=[Sr,Dm,N5,C5,j5,D5,k5,O5,I5,P5,R5,M5,L5,V5,B5];mx={},_t(_t(_t(_t(_t(_t(_t(_t(_t(_t(mx,Sr,ZX),Dm,JX),N5,eQ),C5,tQ),j5,nQ),D5,rQ),k5,iQ),O5,aQ),I5,sQ),P5,oQ),_t(_t(_t(_t(_t(mx,R5,lQ),M5,cQ),L5,uQ),V5,fQ),B5,hQ);var dQ={classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"},slab:{400:"faslr"},"slab-press":{400:"faslpr"},whiteboard:{600:"fawsb"},thumbprint:{300:"fatl"},notdog:{900:"fans"},"notdog-duo":{900:"fands"},etch:{900:"faes"},chisel:{400:"facr"},jelly:{400:"fajr"},"jelly-fill":{400:"fajfr"},"jelly-duo":{400:"fajdr"}},mQ={"Font Awesome 7 Free":{900:"fas",400:"far"},"Font Awesome 7 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 7 Brands":{400:"fab",normal:"fab"},"Font Awesome 7 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 7 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 7 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"},"Font Awesome 7 Jelly":{400:"fajr",normal:"fajr"},"Font Awesome 7 Jelly Fill":{400:"fajfr",normal:"fajfr"},"Font Awesome 7 Jelly Duo":{400:"fajdr",normal:"fajdr"},"Font Awesome 7 Slab":{400:"faslr",normal:"faslr"},"Font Awesome 7 Slab Press":{400:"faslpr",normal:"faslpr"},"Font Awesome 7 Thumbprint":{300:"fatl",normal:"fatl"},"Font Awesome 7 Notdog":{900:"fans",normal:"fans"},"Font Awesome 7 Notdog Duo":{900:"fands",normal:"fands"},"Font Awesome 7 Etch":{900:"faes",normal:"faes"},"Font Awesome 7 Chisel":{400:"facr",normal:"facr"},"Font Awesome 7 Whiteboard":{600:"fawsb",normal:"fawsb"}},gQ=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["chisel",{defaultShortPrefixId:"facr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["etch",{defaultShortPrefixId:"faes",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["jelly",{defaultShortPrefixId:"fajr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["jelly-duo",{defaultShortPrefixId:"fajdr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["jelly-fill",{defaultShortPrefixId:"fajfr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["notdog",{defaultShortPrefixId:"fans",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["notdog-duo",{defaultShortPrefixId:"fands",defaultStyleId:"solid",styleIds:["solid"],futureStyleIds:[],defaultFontWeight:900}],["slab",{defaultShortPrefixId:"faslr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["slab-press",{defaultShortPrefixId:"faslpr",defaultStyleId:"regular",styleIds:["regular"],futureStyleIds:[],defaultFontWeight:400}],["thumbprint",{defaultShortPrefixId:"fatl",defaultStyleId:"light",styleIds:["light"],futureStyleIds:[],defaultFontWeight:300}],["whiteboard",{defaultShortPrefixId:"fawsb",defaultStyleId:"semibold",styleIds:["semibold"],futureStyleIds:[],defaultFontWeight:600}]]),pQ={chisel:{regular:"facr"},classic:{brands:"fab",light:"fal",regular:"far",solid:"fas",thin:"fat"},duotone:{light:"fadl",regular:"fadr",solid:"fad",thin:"fadt"},etch:{solid:"faes"},jelly:{regular:"fajr"},"jelly-duo":{regular:"fajdr"},"jelly-fill":{regular:"fajfr"},notdog:{solid:"fans"},"notdog-duo":{solid:"fands"},sharp:{light:"fasl",regular:"fasr",solid:"fass",thin:"fast"},"sharp-duotone":{light:"fasdl",regular:"fasdr",solid:"fasds",thin:"fasdt"},slab:{regular:"faslr"},"slab-press":{regular:"faslpr"},thumbprint:{light:"fatl"},whiteboard:{semibold:"fawsb"}},$5=["fak","fa-kit","fakd","fa-kit-duotone"],Wk={kit:{fak:"kit","fa-kit":"kit"},"kit-duotone":{fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"}},yQ=["kit"],vQ="kit",bQ="kit-duotone",xQ="Kit",wQ="Kit Duotone";_t(_t({},vQ,xQ),bQ,wQ);var _Q={kit:{"fa-kit":"fak"}},SQ={"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}},TQ={kit:{fak:"fa-kit"}},Yk={kit:{kit:"fak"},"kit-duotone":{"kit-duotone":"fakd"}},gx,Np={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},EQ=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-thumbprint","fa-whiteboard","fa-notdog","fa-notdog-duo","fa-chisel","fa-etch","fa-jelly","fa-jelly-fill","fa-jelly-duo","fa-slab","fa-slab-press"],AQ="classic",NQ="duotone",CQ="sharp",jQ="sharp-duotone",DQ="chisel",kQ="etch",OQ="jelly",IQ="jelly-duo",PQ="jelly-fill",RQ="notdog",MQ="notdog-duo",LQ="slab",VQ="slab-press",BQ="thumbprint",UQ="whiteboard",$Q="Classic",FQ="Duotone",zQ="Sharp",HQ="Sharp Duotone",qQ="Chisel",KQ="Etch",GQ="Jelly",WQ="Jelly Duo",YQ="Jelly Fill",XQ="Notdog",QQ="Notdog Duo",ZQ="Slab",JQ="Slab Press",eZ="Thumbprint",tZ="Whiteboard";gx={},_t(_t(_t(_t(_t(_t(_t(_t(_t(_t(gx,AQ,$Q),NQ,FQ),CQ,zQ),jQ,HQ),DQ,qQ),kQ,KQ),OQ,GQ),IQ,WQ),PQ,YQ),RQ,XQ),_t(_t(_t(_t(_t(gx,MQ,QQ),LQ,ZQ),VQ,JQ),BQ,eZ),UQ,tZ);var nZ="kit",rZ="kit-duotone",iZ="Kit",aZ="Kit Duotone";_t(_t({},nZ,iZ),rZ,aZ);var sZ={classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"},slab:{"fa-regular":"faslr"},"slab-press":{"fa-regular":"faslpr"},whiteboard:{"fa-semibold":"fawsb"},thumbprint:{"fa-light":"fatl"},notdog:{"fa-solid":"fans"},"notdog-duo":{"fa-solid":"fands"},etch:{"fa-solid":"faes"},jelly:{"fa-regular":"fajr"},"jelly-fill":{"fa-regular":"fajfr"},"jelly-duo":{"fa-regular":"fajdr"},chisel:{"fa-regular":"facr"}},oZ={classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"],slab:["faslr"],"slab-press":["faslpr"],whiteboard:["fawsb"],thumbprint:["fatl"],notdog:["fans"],"notdog-duo":["fands"],etch:["faes"],jelly:["fajr"],"jelly-fill":["fajfr"],"jelly-duo":["fajdr"],chisel:["facr"]},J_={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"},slab:{faslr:"fa-regular"},"slab-press":{faslpr:"fa-regular"},whiteboard:{fawsb:"fa-semibold"},thumbprint:{fatl:"fa-light"},notdog:{fans:"fa-solid"},"notdog-duo":{fands:"fa-solid"},etch:{faes:"fa-solid"},jelly:{fajr:"fa-regular"},"jelly-fill":{fajfr:"fa-regular"},"jelly-duo":{fajdr:"fa-regular"},chisel:{facr:"fa-regular"}},lZ=["fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands","fa-semibold"],F5=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt","faslr","faslpr","fawsb","fatl","fans","fands","faes","fajr","fajfr","fajdr","facr"].concat(EQ,lZ),cZ=["solid","regular","light","thin","duotone","brands","semibold"],z5=[1,2,3,4,5,6,7,8,9,10],uZ=z5.concat([11,12,13,14,15,16,17,18,19,20]),fZ=["aw","fw","pull-left","pull-right"],hZ=[].concat(ca(Object.keys(oZ)),cZ,fZ,["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","inverse","layers","layers-bottom-left","layers-bottom-right","layers-counter","layers-text","layers-top-left","layers-top-right","li","pull-end","pull-start","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul","width-auto","width-fixed",Np.GROUP,Np.SWAP_OPACITY,Np.PRIMARY,Np.SECONDARY]).concat(z5.map(function(t){return"".concat(t,"x")})).concat(uZ.map(function(t){return"w-".concat(t)})),dZ={"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}},Xs="___FONT_AWESOME___",eS=16,H5="fa",q5="svg-inline--fa",Lc="data-fa-i2svg",tS="data-fa-pseudo-element",mZ="data-fa-pseudo-element-pending",IE="data-prefix",PE="data-icon",Xk="fontawesome-i2svg",gZ="async",pZ=["HTML","HEAD","STYLE","SCRIPT"],K5=["::before","::after",":before",":after"],G5=function(){try{return!0}catch{return!1}}();function km(t){return new Proxy(t,{get:function(n,r){return r in n?n[r]:n[Sr]}})}var W5=_e({},E5);W5[Sr]=_e(_e(_e(_e({},{"fa-duotone":"duotone"}),E5[Sr]),Wk.kit),Wk["kit-duotone"]);var yZ=km(W5),nS=_e({},pQ);nS[Sr]=_e(_e(_e(_e({},{duotone:"fad"}),nS[Sr]),Yk.kit),Yk["kit-duotone"]);var Qk=km(nS),rS=_e({},J_);rS[Sr]=_e(_e({},rS[Sr]),TQ.kit);var Y5=km(rS),iS=_e({},sZ);iS[Sr]=_e(_e({},iS[Sr]),_Q.kit);km(iS);var vZ=YX,X5="fa-layers-text",bZ=XX,xZ=_e({},dQ);km(xZ);var wZ=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],px=QX,_Z=[].concat(ca(yQ),ca(hZ)),Ld=yl.FontAwesomeConfig||{};function SZ(t){var e=rn.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function TZ(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(rn&&typeof rn.querySelector=="function"){var EZ=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-search-pseudo-elements","searchPseudoElements"],["data-search-pseudo-elements-warnings","searchPseudoElementsWarnings"],["data-search-pseudo-elements-full-scan","searchPseudoElementsFullScan"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];EZ.forEach(function(t){var e=a0(t,2),n=e[0],r=e[1],i=TZ(SZ(n));i!=null&&(Ld[r]=i)})}var Q5={styleDefault:"solid",familyDefault:Sr,cssPrefix:H5,replacementClass:q5,autoReplaceSvg:!0,autoAddCss:!0,searchPseudoElements:!1,searchPseudoElementsWarnings:!0,searchPseudoElementsFullScan:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Ld.familyPrefix&&(Ld.cssPrefix=Ld.familyPrefix);var Tf=_e(_e({},Q5),Ld);Tf.autoReplaceSvg||(Tf.observeMutations=!1);var Ye={};Object.keys(Q5).forEach(function(t){Object.defineProperty(Ye,t,{enumerable:!0,set:function(n){Tf[t]=n,Vd.forEach(function(r){return r(Ye)})},get:function(){return Tf[t]}})});Object.defineProperty(Ye,"familyPrefix",{enumerable:!0,set:function(e){Tf.cssPrefix=e,Vd.forEach(function(n){return n(Ye)})},get:function(){return Tf.cssPrefix}});yl.FontAwesomeConfig=Ye;var Vd=[];function AZ(t){return Vd.push(t),function(){Vd.splice(Vd.indexOf(t),1)}}var Fu=eS,Va={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function NZ(t){if(!(!t||!ao)){var e=rn.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=rn.head.childNodes,r=null,i=n.length-1;i>-1;i--){var a=n[i],o=(a.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=a)}return rn.head.insertBefore(e,r),t}}var CZ="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Zk(){for(var t=12,e="";t-- >0;)e+=CZ[Math.random()*62|0];return e}function Wf(t){for(var e=[],n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function RE(t){return t.classList?Wf(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(e){return e})}function Z5(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function jZ(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,'="').concat(Z5(t[n]),'" ')},"").trim()}function s0(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,": ").concat(t[n].trim(),";")},"")}function ME(t){return t.size!==Va.size||t.x!==Va.x||t.y!==Va.y||t.rotate!==Va.rotate||t.flipX||t.flipY}function DZ(t){var e=t.transform,n=t.containerWidth,r=t.iconWidth,i={transform:"translate(".concat(n/2," 256)")},a="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),c="rotate(".concat(e.rotate," 0 0)"),u={transform:"".concat(a," ").concat(o," ").concat(c)},h={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:u,path:h}}function kZ(t){var e=t.transform,n=t.width,r=n===void 0?eS:n,i=t.height,a=i===void 0?eS:i,o="";return T5?o+="translate(".concat(e.x/Fu-r/2,"em, ").concat(e.y/Fu-a/2,"em) "):o+="translate(calc(-50% + ".concat(e.x/Fu,"em), calc(-50% + ").concat(e.y/Fu,"em)) "),o+="scale(".concat(e.size/Fu*(e.flipX?-1:1),", ").concat(e.size/Fu*(e.flipY?-1:1),") "),o+="rotate(".concat(e.rotate,"deg) "),o}var OZ=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 7 Free";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 7 Free";
  --fa-font-light: normal 300 1em/1 "Font Awesome 7 Pro";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 7 Pro";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 7 Duotone";
  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 7 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 7 Brands";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 7 Sharp";
  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 7 Sharp Duotone";
  --fa-font-slab-regular: normal 400 1em/1 "Font Awesome 7 Slab";
  --fa-font-slab-press-regular: normal 400 1em/1 "Font Awesome 7 Slab Press";
  --fa-font-whiteboard-semibold: normal 600 1em/1 "Font Awesome 7 Whiteboard";
  --fa-font-thumbprint-light: normal 300 1em/1 "Font Awesome 7 Thumbprint";
  --fa-font-notdog-solid: normal 900 1em/1 "Font Awesome 7 Notdog";
  --fa-font-notdog-duo-solid: normal 900 1em/1 "Font Awesome 7 Notdog Duo";
  --fa-font-etch-solid: normal 900 1em/1 "Font Awesome 7 Etch";
  --fa-font-jelly-regular: normal 400 1em/1 "Font Awesome 7 Jelly";
  --fa-font-jelly-fill-regular: normal 400 1em/1 "Font Awesome 7 Jelly Fill";
  --fa-font-jelly-duo-regular: normal 400 1em/1 "Font Awesome 7 Jelly Duo";
  --fa-font-chisel-regular: normal 400 1em/1 "Font Awesome 7 Chisel";
}

.svg-inline--fa {
  box-sizing: content-box;
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
  width: var(--fa-width, 1.25em);
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285714em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left,
.svg-inline--fa .fa-pull-start {
  float: inline-start;
  margin-inline-end: var(--fa-pull-margin, 0.3em);
}
.svg-inline--fa.fa-pull-right,
.svg-inline--fa .fa-pull-end {
  float: inline-end;
  margin-inline-start: var(--fa-pull-margin, 0.3em);
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  inset-inline-start: calc(-1 * var(--fa-li-width, 2em));
  inset-block-start: 0.25em; /* syncing vertical alignment with Web Font rendering */
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: var(--fa-width, 1.25em);
}
.fa-layers .svg-inline--fa {
  inset: 0;
  margin: auto;
  position: absolute;
  transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-counter-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  transform: scale(var(--fa-layers-scale, 0.25));
  transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: calc(10 / 16 * 1em); /* converts a 10px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 10 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 10 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-xs {
  font-size: calc(12 / 16 * 1em); /* converts a 12px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 12 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 12 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-sm {
  font-size: calc(14 / 16 * 1em); /* converts a 14px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 14 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 14 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-lg {
  font-size: calc(20 / 16 * 1em); /* converts a 20px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 20 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 20 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-xl {
  font-size: calc(24 / 16 * 1em); /* converts a 24px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 24 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 24 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-2xl {
  font-size: calc(32 / 16 * 1em); /* converts a 32px size into an em-based value that's relative to the scale's 16px base */
  line-height: calc(1 / 32 * 1em); /* sets the line-height of the icon back to that of it's parent */
  vertical-align: calc((6 / 32 - 0.375) * 1em); /* vertically centers the icon taking into account the surrounding text's descender */
}

.fa-width-auto {
  --fa-width: auto;
}

.fa-fw,
.fa-width-fixed {
  --fa-width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-inline-start: var(--fa-li-margin, 2.5em);
  padding-inline-start: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  inset-inline-start: calc(-1 * var(--fa-li-width, 2em));
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

/* Heads Up: Bordered Icons will not be supported in the future!
  - This feature will be deprecated in the next major release of Font Awesome (v8)!
  - You may continue to use it in this version *v7), but it will not be supported in Font Awesome v8.
*/
/* Notes:
* --@{v.$css-prefix}-border-width = 1/16 by default (to render as ~1px based on a 16px default font-size)
* --@{v.$css-prefix}-border-padding =
  ** 3/16 for vertical padding (to give ~2px of vertical whitespace around an icon considering it's vertical alignment)
  ** 4/16 for horizontal padding (to give ~4px of horizontal whitespace around an icon)
*/
.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.0625em);
  box-sizing: var(--fa-border-box-sizing, content-box);
  padding: var(--fa-border-padding, 0.1875em 0.25em);
}

.fa-pull-left,
.fa-pull-start {
  float: inline-start;
  margin-inline-end: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right,
.fa-pull-end {
  float: inline-end;
  margin-inline-start: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  animation-name: fa-beat;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  animation-name: fa-bounce;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  animation-name: fa-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  animation-name: fa-beat-fade;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  animation-name: fa-flip;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  animation-name: fa-shake;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  animation-name: fa-spin;
  animation-delay: var(--fa-animation-delay, 0s);
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 2s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  animation-name: fa-spin;
  animation-direction: var(--fa-animation-direction, normal);
  animation-duration: var(--fa-animation-duration, 1s);
  animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
  .fa-bounce,
  .fa-fade,
  .fa-beat-fade,
  .fa-flip,
  .fa-pulse,
  .fa-shake,
  .fa-spin,
  .fa-spin-pulse {
    animation: none !important;
    transition: none !important;
  }
}
@keyframes fa-beat {
  0%, 90% {
    transform: scale(1);
  }
  45% {
    transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-bounce {
  0% {
    transform: scale(1, 1) translateY(0);
  }
  10% {
    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    transform: scale(1, 1) translateY(0);
  }
  100% {
    transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-flip {
  50% {
    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-shake {
  0% {
    transform: rotate(-15deg);
  }
  4% {
    transform: rotate(15deg);
  }
  8%, 24% {
    transform: rotate(-18deg);
  }
  12%, 28% {
    transform: rotate(18deg);
  }
  16% {
    transform: rotate(-22deg);
  }
  20% {
    transform: rotate(22deg);
  }
  32% {
    transform: rotate(-12deg);
  }
  36% {
    transform: rotate(12deg);
  }
  40%, 100% {
    transform: rotate(0deg);
  }
}
@keyframes fa-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  transform: rotate(90deg);
}

.fa-rotate-180 {
  transform: rotate(180deg);
}

.fa-rotate-270 {
  transform: rotate(270deg);
}

.fa-flip-horizontal {
  transform: scale(-1, 1);
}

.fa-flip-vertical {
  transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  transform: scale(-1, -1);
}

.fa-rotate-by {
  transform: rotate(var(--fa-rotate-angle, 0));
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.svg-inline--fa.fa-inverse {
  fill: var(--fa-inverse, #fff);
}

.fa-stack {
  display: inline-block;
  height: 2em;
  line-height: 2em;
  position: relative;
  vertical-align: middle;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}`;function J5(){var t=H5,e=q5,n=Ye.cssPrefix,r=Ye.replacementClass,i=OZ;if(n!==t||r!==e){var a=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),c=new RegExp("\\.".concat(e),"g");i=i.replace(a,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(c,".".concat(r))}return i}var Jk=!1;function yx(){Ye.autoAddCss&&!Jk&&(NZ(J5()),Jk=!0)}var IZ={mixout:function(){return{dom:{css:J5,insertCss:yx}}},hooks:function(){return{beforeDOMElementCreation:function(){yx()},beforeI2svg:function(){yx()}}}},Qs=yl||{};Qs[Xs]||(Qs[Xs]={});Qs[Xs].styles||(Qs[Xs].styles={});Qs[Xs].hooks||(Qs[Xs].hooks={});Qs[Xs].shims||(Qs[Xs].shims=[]);var oa=Qs[Xs],eL=[],tL=function(){rn.removeEventListener("DOMContentLoaded",tL),Ly=1,eL.map(function(e){return e()})},Ly=!1;ao&&(Ly=(rn.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(rn.readyState),Ly||rn.addEventListener("DOMContentLoaded",tL));function PZ(t){ao&&(Ly?setTimeout(t,0):eL.push(t))}function Om(t){var e=t.tag,n=t.attributes,r=n===void 0?{}:n,i=t.children,a=i===void 0?[]:i;return typeof t=="string"?Z5(t):"<".concat(e," ").concat(jZ(r),">").concat(a.map(Om).join(""),"</").concat(e,">")}function eO(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var vx=function(e,n,r,i){var a=Object.keys(e),o=a.length,c=n,u,h,m;for(r===void 0?(u=1,m=e[a[0]]):(u=0,m=r);u<o;u++)h=a[u],m=c(m,e[h],h,e);return m};function nL(t){return ca(t).length!==1?null:t.codePointAt(0).toString(16)}function tO(t){return Object.keys(t).reduce(function(e,n){var r=t[n],i=!!r.icon;return i?e[r.iconName]=r.icon:e[n]=r,e},{})}function rL(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,i=r===void 0?!1:r,a=tO(e);typeof oa.hooks.addPack=="function"&&!i?oa.hooks.addPack(t,tO(e)):oa.styles[t]=_e(_e({},oa.styles[t]||{}),a),t==="fas"&&rL("fa",e)}var tm=oa.styles,RZ=oa.shims,iL=Object.keys(Y5),MZ=iL.reduce(function(t,e){return t[e]=Object.keys(Y5[e]),t},{}),LE=null,aL={},sL={},oL={},lL={},cL={};function LZ(t){return~_Z.indexOf(t)}function VZ(t,e){var n=e.split("-"),r=n[0],i=n.slice(1).join("-");return r===t&&i!==""&&!LZ(i)?i:null}var uL=function(){var e=function(a){return vx(tm,function(o,c,u){return o[u]=vx(c,a,{}),o},{})};aL=e(function(i,a,o){if(a[3]&&(i[a[3]]=o),a[2]){var c=a[2].filter(function(u){return typeof u=="number"});c.forEach(function(u){i[u.toString(16)]=o})}return i}),sL=e(function(i,a,o){if(i[o]=o,a[2]){var c=a[2].filter(function(u){return typeof u=="string"});c.forEach(function(u){i[u]=o})}return i}),cL=e(function(i,a,o){var c=a[2];return i[o]=o,c.forEach(function(u){i[u]=o}),i});var n="far"in tm||Ye.autoFetchSvg,r=vx(RZ,function(i,a){var o=a[0],c=a[1],u=a[2];return c==="far"&&!n&&(c="fas"),typeof o=="string"&&(i.names[o]={prefix:c,iconName:u}),typeof o=="number"&&(i.unicodes[o.toString(16)]={prefix:c,iconName:u}),i},{names:{},unicodes:{}});oL=r.names,lL=r.unicodes,LE=o0(Ye.styleDefault,{family:Ye.familyDefault})};AZ(function(t){LE=o0(t.styleDefault,{family:Ye.familyDefault})});uL();function VE(t,e){return(aL[t]||{})[e]}function BZ(t,e){return(sL[t]||{})[e]}function gc(t,e){return(cL[t]||{})[e]}function fL(t){return oL[t]||{prefix:null,iconName:null}}function UZ(t){var e=lL[t],n=VE("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function vl(){return LE}var hL=function(){return{prefix:null,iconName:null,rest:[]}};function $Z(t){var e=Sr,n=iL.reduce(function(r,i){return r[i]="".concat(Ye.cssPrefix,"-").concat(i),r},{});return U5.forEach(function(r){(t.includes(n[r])||t.some(function(i){return MZ[r].includes(i)}))&&(e=r)}),e}function o0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.family,r=n===void 0?Sr:n,i=yZ[r][t];if(r===Dm&&!t)return"fad";var a=Qk[r][t]||Qk[r][i],o=t in oa.styles?t:null,c=a||o||null;return c}function FZ(t){var e=[],n=null;return t.forEach(function(r){var i=VZ(Ye.cssPrefix,r);i?n=i:r&&e.push(r)}),{iconName:n,rest:e}}function nO(t){return t.sort().filter(function(e,n,r){return r.indexOf(e)===n})}var rO=F5.concat($5);function l0(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.skipLookups,r=n===void 0?!1:n,i=null,a=nO(t.filter(function(b){return rO.includes(b)})),o=nO(t.filter(function(b){return!rO.includes(b)})),c=a.filter(function(b){return i=b,!A5.includes(b)}),u=a0(c,1),h=u[0],m=h===void 0?null:h,p=$Z(a),y=_e(_e({},FZ(o)),{},{prefix:o0(m,{family:p})});return _e(_e(_e({},y),KZ({values:t,family:p,styles:tm,config:Ye,canonical:y,givenPrefix:i})),zZ(r,i,y))}function zZ(t,e,n){var r=n.prefix,i=n.iconName;if(t||!r||!i)return{prefix:r,iconName:i};var a=e==="fa"?fL(i):{},o=gc(r,i);return i=a.iconName||o||i,r=a.prefix||r,r==="far"&&!tm.far&&tm.fas&&!Ye.autoFetchSvg&&(r="fas"),{prefix:r,iconName:i}}var HZ=U5.filter(function(t){return t!==Sr||t!==Dm}),qZ=Object.keys(J_).filter(function(t){return t!==Sr}).map(function(t){return Object.keys(J_[t])}).flat();function KZ(t){var e=t.values,n=t.family,r=t.canonical,i=t.givenPrefix,a=i===void 0?"":i,o=t.styles,c=o===void 0?{}:o,u=t.config,h=u===void 0?{}:u,m=n===Dm,p=e.includes("fa-duotone")||e.includes("fad"),y=h.familyDefault==="duotone",b=r.prefix==="fad"||r.prefix==="fa-duotone";if(!m&&(p||y||b)&&(r.prefix="fad"),(e.includes("fa-brands")||e.includes("fab"))&&(r.prefix="fab"),!r.prefix&&HZ.includes(n)){var _=Object.keys(c).find(function(S){return qZ.includes(S)});if(_||h.autoFetchSvg){var T=gQ.get(n).defaultShortPrefixId;r.prefix=T,r.iconName=gc(r.prefix,r.iconName)||r.iconName}}return(r.prefix==="fa"||a==="fa")&&(r.prefix=vl()||"fas"),r}var GZ=function(){function t(){UX(this,t),this.definitions={}}return FX(t,[{key:"add",value:function(){for(var n=this,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=i.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(c){n.definitions[c]=_e(_e({},n.definitions[c]||{}),o[c]),rL(c,o[c]),uL()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var i=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(i).map(function(a){var o=i[a],c=o.prefix,u=o.iconName,h=o.icon,m=h[2];n[c]||(n[c]={}),m.length>0&&m.forEach(function(p){typeof p=="string"&&(n[c][p]=h)}),n[c][u]=h}),n}}])}(),iO=[],ef={},uf={},WZ=Object.keys(uf);function YZ(t,e){var n=e.mixoutsTo;return iO=t,ef={},Object.keys(uf).forEach(function(r){WZ.indexOf(r)===-1&&delete uf[r]}),iO.forEach(function(r){var i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(function(o){typeof i[o]=="function"&&(n[o]=i[o]),My(i[o])==="object"&&Object.keys(i[o]).forEach(function(c){n[o]||(n[o]={}),n[o][c]=i[o][c]})}),r.hooks){var a=r.hooks();Object.keys(a).forEach(function(o){ef[o]||(ef[o]=[]),ef[o].push(a[o])})}r.provides&&r.provides(uf)}),n}function aS(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var a=ef[t]||[];return a.forEach(function(o){e=o.apply(null,[e].concat(r))}),e}function Vc(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=ef[t]||[];i.forEach(function(a){a.apply(null,n)})}function bl(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return uf[t]?uf[t].apply(null,e):void 0}function sS(t){t.prefix==="fa"&&(t.prefix="fas");var e=t.iconName,n=t.prefix||vl();if(e)return e=gc(n,e)||e,eO(dL.definitions,n,e)||eO(oa.styles,n,e)}var dL=new GZ,XZ=function(){Ye.autoReplaceSvg=!1,Ye.observeMutations=!1,Vc("noAuto")},QZ={i2svg:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ao?(Vc("beforeI2svg",e),bl("pseudoElements2svg",e),bl("i2svg",e)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot;Ye.autoReplaceSvg===!1&&(Ye.autoReplaceSvg=!0),Ye.observeMutations=!0,PZ(function(){JZ({autoReplaceSvgRoot:n}),Vc("watch",e)})}},ZZ={icon:function(e){if(e===null)return null;if(My(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:gc(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var n=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],r=o0(e[0]);return{prefix:r,iconName:gc(r,n)||n}}if(typeof e=="string"&&(e.indexOf("".concat(Ye.cssPrefix,"-"))>-1||e.match(vZ))){var i=l0(e.split(" "),{skipLookups:!0});return{prefix:i.prefix||vl(),iconName:gc(i.prefix,i.iconName)||i.iconName}}if(typeof e=="string"){var a=vl();return{prefix:a,iconName:gc(a,e)||e}}}},yi={noAuto:XZ,config:Ye,dom:QZ,parse:ZZ,library:dL,findIconDefinition:sS,toHtml:Om},JZ=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot,r=n===void 0?rn:n;(Object.keys(oa.styles).length>0||Ye.autoFetchSvg)&&ao&&Ye.autoReplaceSvg&&yi.dom.i2svg({node:r})};function c0(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(r){return Om(r)})}}),Object.defineProperty(t,"node",{get:function(){if(ao){var r=rn.createElement("div");return r.innerHTML=t.html,r.children}}}),t}function eJ(t){var e=t.children,n=t.main,r=t.mask,i=t.attributes,a=t.styles,o=t.transform;if(ME(o)&&n.found&&!r.found){var c=n.width,u=n.height,h={x:c/u/2,y:.5};i.style=s0(_e(_e({},a),{},{"transform-origin":"".concat(h.x+o.x/16,"em ").concat(h.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}function tJ(t){var e=t.prefix,n=t.iconName,r=t.children,i=t.attributes,a=t.symbol,o=a===!0?"".concat(e,"-").concat(Ye.cssPrefix,"-").concat(n):a;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:_e(_e({},i),{},{id:o}),children:r}]}]}function nJ(t){var e=["aria-label","aria-labelledby","title","role"];return e.some(function(n){return n in t})}function BE(t){var e=t.icons,n=e.main,r=e.mask,i=t.prefix,a=t.iconName,o=t.transform,c=t.symbol,u=t.maskId,h=t.extra,m=t.watchable,p=m===void 0?!1:m,y=r.found?r:n,b=y.width,_=y.height,T=[Ye.replacementClass,a?"".concat(Ye.cssPrefix,"-").concat(a):""].filter(function(D){return h.classes.indexOf(D)===-1}).filter(function(D){return D!==""||!!D}).concat(h.classes).join(" "),S={children:[],attributes:_e(_e({},h.attributes),{},{"data-prefix":i,"data-icon":a,class:T,role:h.attributes.role||"img",viewBox:"0 0 ".concat(b," ").concat(_)})};!nJ(h.attributes)&&!h.attributes["aria-hidden"]&&(S.attributes["aria-hidden"]="true"),p&&(S.attributes[Lc]="");var E=_e(_e({},S),{},{prefix:i,iconName:a,main:n,mask:r,maskId:u,transform:o,symbol:c,styles:_e({},h.styles)}),N=r.found&&n.found?bl("generateAbstractMask",E)||{children:[],attributes:{}}:bl("generateAbstractIcon",E)||{children:[],attributes:{}},C=N.children,L=N.attributes;return E.children=C,E.attributes=L,c?tJ(E):eJ(E)}function aO(t){var e=t.content,n=t.width,r=t.height,i=t.transform,a=t.extra,o=t.watchable,c=o===void 0?!1:o,u=_e(_e({},a.attributes),{},{class:a.classes.join(" ")});c&&(u[Lc]="");var h=_e({},a.styles);ME(i)&&(h.transform=kZ({transform:i,width:n,height:r}),h["-webkit-transform"]=h.transform);var m=s0(h);m.length>0&&(u.style=m);var p=[];return p.push({tag:"span",attributes:u,children:[e]}),p}function rJ(t){var e=t.content,n=t.extra,r=_e(_e({},n.attributes),{},{class:n.classes.join(" ")}),i=s0(n.styles);i.length>0&&(r.style=i);var a=[];return a.push({tag:"span",attributes:r,children:[e]}),a}var bx=oa.styles;function oS(t){var e=t[0],n=t[1],r=t.slice(4),i=a0(r,1),a=i[0],o=null;return Array.isArray(a)?o={tag:"g",attributes:{class:"".concat(Ye.cssPrefix,"-").concat(px.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Ye.cssPrefix,"-").concat(px.SECONDARY),fill:"currentColor",d:a[0]}},{tag:"path",attributes:{class:"".concat(Ye.cssPrefix,"-").concat(px.PRIMARY),fill:"currentColor",d:a[1]}}]}:o={tag:"path",attributes:{fill:"currentColor",d:a}},{found:!0,width:e,height:n,icon:o}}var iJ={found:!1,width:512,height:512};function aJ(t,e){!G5&&!Ye.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function lS(t,e){var n=e;return e==="fa"&&Ye.styleDefault!==null&&(e=vl()),new Promise(function(r,i){if(n==="fa"){var a=fL(t)||{};t=a.iconName||t,e=a.prefix||e}if(t&&e&&bx[e]&&bx[e][t]){var o=bx[e][t];return r(oS(o))}aJ(t,e),r(_e(_e({},iJ),{},{icon:Ye.showMissingIcons&&t?bl("missingIconAbstract")||{}:{}}))})}var sO=function(){},cS=Ye.measurePerformance&&Ap&&Ap.mark&&Ap.measure?Ap:{mark:sO,measure:sO},Nd='FA "7.0.0"',sJ=function(e){return cS.mark("".concat(Nd," ").concat(e," begins")),function(){return mL(e)}},mL=function(e){cS.mark("".concat(Nd," ").concat(e," ends")),cS.measure("".concat(Nd," ").concat(e),"".concat(Nd," ").concat(e," begins"),"".concat(Nd," ").concat(e," ends"))},UE={begin:sJ,end:mL},ay=function(){};function oO(t){var e=t.getAttribute?t.getAttribute(Lc):null;return typeof e=="string"}function oJ(t){var e=t.getAttribute?t.getAttribute(IE):null,n=t.getAttribute?t.getAttribute(PE):null;return e&&n}function lJ(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(Ye.replacementClass)}function cJ(){if(Ye.autoReplaceSvg===!0)return sy.replace;var t=sy[Ye.autoReplaceSvg];return t||sy.replace}function uJ(t){return rn.createElementNS("http://www.w3.org/2000/svg",t)}function fJ(t){return rn.createElement(t)}function gL(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.ceFn,r=n===void 0?t.tag==="svg"?uJ:fJ:n;if(typeof t=="string")return rn.createTextNode(t);var i=r(t.tag);Object.keys(t.attributes||[]).forEach(function(o){i.setAttribute(o,t.attributes[o])});var a=t.children||[];return a.forEach(function(o){i.appendChild(gL(o,{ceFn:r}))}),i}function hJ(t){var e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var sy={replace:function(e){var n=e[0];if(n.parentNode)if(e[1].forEach(function(i){n.parentNode.insertBefore(gL(i),n)}),n.getAttribute(Lc)===null&&Ye.keepOriginalSource){var r=rn.createComment(hJ(n));n.parentNode.replaceChild(r,n)}else n.remove()},nest:function(e){var n=e[0],r=e[1];if(~RE(n).indexOf(Ye.replacementClass))return sy.replace(e);var i=new RegExp("".concat(Ye.cssPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var a=r[0].attributes.class.split(" ").reduce(function(c,u){return u===Ye.replacementClass||u.match(i)?c.toSvg.push(u):c.toNode.push(u),c},{toNode:[],toSvg:[]});r[0].attributes.class=a.toSvg.join(" "),a.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",a.toNode.join(" "))}var o=r.map(function(c){return Om(c)}).join(`
`);n.setAttribute(Lc,""),n.innerHTML=o}};function lO(t){t()}function pL(t,e){var n=typeof e=="function"?e:ay;if(t.length===0)n();else{var r=lO;Ye.mutateApproach===gZ&&(r=yl.requestAnimationFrame||lO),r(function(){var i=cJ(),a=UE.begin("mutate");t.map(i),a(),n()})}}var $E=!1;function yL(){$E=!0}function uS(){$E=!1}var Vy=null;function cO(t){if(Gk&&Ye.observeMutations){var e=t.treeCallback,n=e===void 0?ay:e,r=t.nodeCallback,i=r===void 0?ay:r,a=t.pseudoElementsCallback,o=a===void 0?ay:a,c=t.observeMutationsRoot,u=c===void 0?rn:c;Vy=new Gk(function(h){if(!$E){var m=vl();Wf(h).forEach(function(p){if(p.type==="childList"&&p.addedNodes.length>0&&!oO(p.addedNodes[0])&&(Ye.searchPseudoElements&&o(p.target),n(p.target)),p.type==="attributes"&&p.target.parentNode&&Ye.searchPseudoElements&&o([p.target],!0),p.type==="attributes"&&oO(p.target)&&~wZ.indexOf(p.attributeName))if(p.attributeName==="class"&&oJ(p.target)){var y=l0(RE(p.target)),b=y.prefix,_=y.iconName;p.target.setAttribute(IE,b||m),_&&p.target.setAttribute(PE,_)}else lJ(p.target)&&i(p.target)})}}),ao&&Vy.observe(u,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function dJ(){Vy&&Vy.disconnect()}function mJ(t){var e=t.getAttribute("style"),n=[];return e&&(n=e.split(";").reduce(function(r,i){var a=i.split(":"),o=a[0],c=a.slice(1);return o&&c.length>0&&(r[o]=c.join(":").trim()),r},{})),n}function gJ(t){var e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),r=t.innerText!==void 0?t.innerText.trim():"",i=l0(RE(t));return i.prefix||(i.prefix=vl()),e&&n&&(i.prefix=e,i.iconName=n),i.iconName&&i.prefix||(i.prefix&&r.length>0&&(i.iconName=BZ(i.prefix,t.innerText)||VE(i.prefix,nL(t.innerText))),!i.iconName&&Ye.autoFetchSvg&&t.firstChild&&t.firstChild.nodeType===Node.TEXT_NODE&&(i.iconName=t.firstChild.data)),i}function pJ(t){var e=Wf(t.attributes).reduce(function(n,r){return n.name!=="class"&&n.name!=="style"&&(n[r.name]=r.value),n},{});return e}function yJ(){return{iconName:null,prefix:null,transform:Va,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function uO(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=gJ(t),r=n.iconName,i=n.prefix,a=n.rest,o=pJ(t),c=aS("parseNodeAttributes",{},t),u=e.styleParser?mJ(t):[];return _e({iconName:r,prefix:i,transform:Va,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:a,styles:u,attributes:o}},c)}var vJ=oa.styles;function vL(t){var e=Ye.autoReplaceSvg==="nest"?uO(t,{styleParser:!1}):uO(t);return~e.extra.classes.indexOf(X5)?bl("generateLayersText",t,e):bl("generateSvgReplacementMutation",t,e)}function bJ(){return[].concat(ca($5),ca(F5))}function fO(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!ao)return Promise.resolve();var n=rn.documentElement.classList,r=function(p){return n.add("".concat(Xk,"-").concat(p))},i=function(p){return n.remove("".concat(Xk,"-").concat(p))},a=Ye.autoFetchSvg?bJ():A5.concat(Object.keys(vJ));a.includes("fa")||a.push("fa");var o=[".".concat(X5,":not([").concat(Lc,"])")].concat(a.map(function(m){return".".concat(m,":not([").concat(Lc,"])")})).join(", ");if(o.length===0)return Promise.resolve();var c=[];try{c=Wf(t.querySelectorAll(o))}catch{}if(c.length>0)r("pending"),i("complete");else return Promise.resolve();var u=UE.begin("onTree"),h=c.reduce(function(m,p){try{var y=vL(p);y&&m.push(y)}catch(b){G5||b.name==="MissingIcon"&&console.error(b)}return m},[]);return new Promise(function(m,p){Promise.all(h).then(function(y){pL(y,function(){r("active"),r("complete"),i("pending"),typeof e=="function"&&e(),u(),m()})}).catch(function(y){u(),p(y)})})}function xJ(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;vL(t).then(function(n){n&&pL([n],e)})}function wJ(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(e||{}).icon?e:sS(e||{}),i=n.mask;return i&&(i=(i||{}).icon?i:sS(i||{})),t(r,_e(_e({},n),{},{mask:i}))}}var _J=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.transform,i=r===void 0?Va:r,a=n.symbol,o=a===void 0?!1:a,c=n.mask,u=c===void 0?null:c,h=n.maskId,m=h===void 0?null:h,p=n.classes,y=p===void 0?[]:p,b=n.attributes,_=b===void 0?{}:b,T=n.styles,S=T===void 0?{}:T;if(e){var E=e.prefix,N=e.iconName,C=e.icon;return c0(_e({type:"icon"},e),function(){return Vc("beforeDOMElementCreation",{iconDefinition:e,params:n}),BE({icons:{main:oS(C),mask:u?oS(u.icon):{found:!1,width:null,height:null,icon:{}}},prefix:E,iconName:N,transform:_e(_e({},Va),i),symbol:o,maskId:m,extra:{attributes:_,styles:S,classes:y}})})}},SJ={mixout:function(){return{icon:wJ(_J)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=fO,n.nodeCallback=xJ,n}}},provides:function(e){e.i2svg=function(n){var r=n.node,i=r===void 0?rn:r,a=n.callback,o=a===void 0?function(){}:a;return fO(i,o)},e.generateSvgReplacementMutation=function(n,r){var i=r.iconName,a=r.prefix,o=r.transform,c=r.symbol,u=r.mask,h=r.maskId,m=r.extra;return new Promise(function(p,y){Promise.all([lS(i,a),u.iconName?lS(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(b){var _=a0(b,2),T=_[0],S=_[1];p([n,BE({icons:{main:T,mask:S},prefix:a,iconName:i,transform:o,symbol:c,maskId:h,extra:m,watchable:!0})])}).catch(y)})},e.generateAbstractIcon=function(n){var r=n.children,i=n.attributes,a=n.main,o=n.transform,c=n.styles,u=s0(c);u.length>0&&(i.style=u);var h;return ME(o)&&(h=bl("generateAbstractTransformGrouping",{main:a,transform:o,containerWidth:a.width,iconWidth:a.width})),r.push(h||a.icon),{children:r,attributes:i}}}},TJ={mixout:function(){return{layer:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.classes,a=i===void 0?[]:i;return c0({type:"layer"},function(){Vc("beforeDOMElementCreation",{assembler:n,params:r});var o=[];return n(function(c){Array.isArray(c)?c.map(function(u){o=o.concat(u.abstract)}):o=o.concat(c.abstract)}),[{tag:"span",attributes:{class:["".concat(Ye.cssPrefix,"-layers")].concat(ca(a)).join(" ")},children:o}]})}}}},EJ={mixout:function(){return{counter:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};r.title;var i=r.classes,a=i===void 0?[]:i,o=r.attributes,c=o===void 0?{}:o,u=r.styles,h=u===void 0?{}:u;return c0({type:"counter",content:n},function(){return Vc("beforeDOMElementCreation",{content:n,params:r}),rJ({content:n.toString(),extra:{attributes:c,styles:h,classes:["".concat(Ye.cssPrefix,"-layers-counter")].concat(ca(a))}})})}}}},AJ={mixout:function(){return{text:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.transform,a=i===void 0?Va:i,o=r.classes,c=o===void 0?[]:o,u=r.attributes,h=u===void 0?{}:u,m=r.styles,p=m===void 0?{}:m;return c0({type:"text",content:n},function(){return Vc("beforeDOMElementCreation",{content:n,params:r}),aO({content:n,transform:_e(_e({},Va),a),extra:{attributes:h,styles:p,classes:["".concat(Ye.cssPrefix,"-layers-text")].concat(ca(c))}})})}}},provides:function(e){e.generateLayersText=function(n,r){var i=r.transform,a=r.extra,o=null,c=null;if(T5){var u=parseInt(getComputedStyle(n).fontSize,10),h=n.getBoundingClientRect();o=h.width/u,c=h.height/u}return Promise.resolve([n,aO({content:n.innerHTML,width:o,height:c,transform:i,extra:a,watchable:!0})])}}},bL=new RegExp('"',"ug"),hO=[1105920,1112319],dO=_e(_e(_e(_e({},{FontAwesome:{normal:"fas",400:"fas"}}),mQ),dZ),SQ),fS=Object.keys(dO).reduce(function(t,e){return t[e.toLowerCase()]=dO[e],t},{}),NJ=Object.keys(fS).reduce(function(t,e){var n=fS[e];return t[e]=n[900]||ca(Object.entries(n))[0][1],t},{});function CJ(t){var e=t.replace(bL,"");return nL(ca(e)[0]||"")}function jJ(t){var e=t.getPropertyValue("font-feature-settings").includes("ss01"),n=t.getPropertyValue("content"),r=n.replace(bL,""),i=r.codePointAt(0),a=i>=hO[0]&&i<=hO[1],o=r.length===2?r[0]===r[1]:!1;return a||o||e}function DJ(t,e){var n=t.replace(/^['"]|['"]$/g,"").toLowerCase(),r=parseInt(e),i=isNaN(r)?"normal":r;return(fS[n]||{})[i]||NJ[n]}function mO(t,e){var n="".concat(mZ).concat(e.replace(":","-"));return new Promise(function(r,i){if(t.getAttribute(n)!==null)return r();var a=Wf(t.children),o=a.filter(function(R){return R.getAttribute(tS)===e})[0],c=yl.getComputedStyle(t,e),u=c.getPropertyValue("font-family"),h=u.match(bZ),m=c.getPropertyValue("font-weight"),p=c.getPropertyValue("content");if(o&&!h)return t.removeChild(o),r();if(h&&p!=="none"&&p!==""){var y=c.getPropertyValue("content"),b=DJ(u,m),_=CJ(y),T=h[0].startsWith("FontAwesome"),S=jJ(c),E=VE(b,_),N=E;if(T){var C=UZ(_);C.iconName&&C.prefix&&(E=C.iconName,b=C.prefix)}if(E&&!S&&(!o||o.getAttribute(IE)!==b||o.getAttribute(PE)!==N)){t.setAttribute(n,N),o&&t.removeChild(o);var L=yJ(),D=L.extra;D.attributes[tS]=e,lS(E,b).then(function(R){var k=BE(_e(_e({},L),{},{icons:{main:R,mask:hL()},prefix:b,iconName:N,extra:D,watchable:!0})),I=rn.createElementNS("http://www.w3.org/2000/svg","svg");e==="::before"?t.insertBefore(I,t.firstChild):t.appendChild(I),I.outerHTML=k.map(function(O){return Om(O)}).join(`
`),t.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function kJ(t){return Promise.all([mO(t,"::before"),mO(t,"::after")])}function OJ(t){return t.parentNode!==document.head&&!~pZ.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(tS)&&(!t.parentNode||t.parentNode.tagName!=="svg")}var IJ=function(e){return!!e&&K5.some(function(n){return e.includes(n)})},PJ=function(e){if(!e)return[];for(var n=new Set,r=[e],i=[/(?=\s:)/,new RegExp("(?<=\\)\\)?[^,]*,)")],a=function(){var b=c[o];r=r.flatMap(function(_){return _.split(b).map(function(T){return T.replace(/,\s*$/,"").trim()})})},o=0,c=i;o<c.length;o++)a();r=r.flatMap(function(y){return y.includes("(")?y:y.split(",").map(function(b){return b.trim()})});var u=iy(r),h;try{for(u.s();!(h=u.n()).done;){var m=h.value;if(IJ(m)){var p=K5.reduce(function(y,b){return y.replace(b,"")},m);p!==""&&p!=="*"&&n.add(p)}}}catch(y){u.e(y)}finally{u.f()}return n};function gO(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(ao){var n;if(e)n=t;else if(Ye.searchPseudoElementsFullScan)n=t.querySelectorAll("*");else{var r=new Set,i=iy(document.styleSheets),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;try{var c=iy(o.cssRules),u;try{for(c.s();!(u=c.n()).done;){var h=u.value,m=PJ(h.selectorText),p=iy(m),y;try{for(p.s();!(y=p.n()).done;){var b=y.value;r.add(b)}}catch(T){p.e(T)}finally{p.f()}}}catch(T){c.e(T)}finally{c.f()}}catch(T){Ye.searchPseudoElementsWarnings&&console.warn("Font Awesome: cannot parse stylesheet: ".concat(o.href," (").concat(T.message,`)
If it declares any Font Awesome CSS pseudo-elements, they will not be rendered as SVG icons. Add crossorigin="anonymous" to the <link>, enable searchPseudoElementsFullScan for slower but more thorough DOM parsing, or suppress this warning by setting searchPseudoElementsWarnings to false.`))}}}catch(T){i.e(T)}finally{i.f()}if(!r.size)return;var _=Array.from(r).join(", ");try{n=t.querySelectorAll(_)}catch{}}return new Promise(function(T,S){var E=Wf(n).filter(OJ).map(kJ),N=UE.begin("searchPseudoElements");yL(),Promise.all(E).then(function(){N(),uS(),T()}).catch(function(){N(),uS(),S()})})}}var RJ={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=gO,n}}},provides:function(e){e.pseudoElements2svg=function(n){var r=n.node,i=r===void 0?rn:r;Ye.searchPseudoElements&&gO(i)}}},pO=!1,MJ={mixout:function(){return{dom:{unwatch:function(){yL(),pO=!0}}}},hooks:function(){return{bootstrap:function(){cO(aS("mutationObserverCallbacks",{}))},noAuto:function(){dJ()},watch:function(n){var r=n.observeMutationsRoot;pO?uS():cO(aS("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},yO=function(e){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(r,i){var a=i.toLowerCase().split("-"),o=a[0],c=a.slice(1).join("-");if(o&&c==="h")return r.flipX=!0,r;if(o&&c==="v")return r.flipY=!0,r;if(c=parseFloat(c),isNaN(c))return r;switch(o){case"grow":r.size=r.size+c;break;case"shrink":r.size=r.size-c;break;case"left":r.x=r.x-c;break;case"right":r.x=r.x+c;break;case"up":r.y=r.y-c;break;case"down":r.y=r.y+c;break;case"rotate":r.rotate=r.rotate+c;break}return r},n)},LJ={mixout:function(){return{parse:{transform:function(n){return yO(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-transform");return i&&(n.transform=yO(i)),n}}},provides:function(e){e.generateAbstractTransformGrouping=function(n){var r=n.main,i=n.transform,a=n.containerWidth,o=n.iconWidth,c={transform:"translate(".concat(a/2," 256)")},u="translate(".concat(i.x*32,", ").concat(i.y*32,") "),h="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),m="rotate(".concat(i.rotate," 0 0)"),p={transform:"".concat(u," ").concat(h," ").concat(m)},y={transform:"translate(".concat(o/2*-1," -256)")},b={outer:c,inner:p,path:y};return{tag:"g",attributes:_e({},b.outer),children:[{tag:"g",attributes:_e({},b.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:_e(_e({},r.icon.attributes),b.path)}]}]}}}},xx={x:0,y:0,width:"100%",height:"100%"};function vO(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function VJ(t){return t.tag==="g"?t.children:[t]}var BJ={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-mask"),a=i?l0(i.split(" ").map(function(o){return o.trim()})):hL();return a.prefix||(a.prefix=vl()),n.mask=a,n.maskId=r.getAttribute("data-fa-mask-id"),n}}},provides:function(e){e.generateAbstractMask=function(n){var r=n.children,i=n.attributes,a=n.main,o=n.mask,c=n.maskId,u=n.transform,h=a.width,m=a.icon,p=o.width,y=o.icon,b=DZ({transform:u,containerWidth:p,iconWidth:h}),_={tag:"rect",attributes:_e(_e({},xx),{},{fill:"white"})},T=m.children?{children:m.children.map(vO)}:{},S={tag:"g",attributes:_e({},b.inner),children:[vO(_e({tag:m.tag,attributes:_e(_e({},m.attributes),b.path)},T))]},E={tag:"g",attributes:_e({},b.outer),children:[S]},N="mask-".concat(c||Zk()),C="clip-".concat(c||Zk()),L={tag:"mask",attributes:_e(_e({},xx),{},{id:N,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[_,E]},D={tag:"defs",children:[{tag:"clipPath",attributes:{id:C},children:VJ(y)},L]};return r.push(D,{tag:"rect",attributes:_e({fill:"currentColor","clip-path":"url(#".concat(C,")"),mask:"url(#".concat(N,")")},xx)}),{children:r,attributes:i}}}},UJ={provides:function(e){var n=!1;yl.matchMedia&&(n=yl.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var r=[],i={fill:"currentColor"},a={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:_e(_e({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=_e(_e({},a),{},{attributeName:"opacity"}),c={tag:"circle",attributes:_e(_e({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||c.children.push({tag:"animate",attributes:_e(_e({},a),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:_e(_e({},o),{},{values:"1;0;1;1;0;1;"})}),r.push(c),r.push({tag:"path",attributes:_e(_e({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:_e(_e({},o),{},{values:"1;0;0;0;0;1;"})}]}),n||r.push({tag:"path",attributes:_e(_e({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:_e(_e({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},$J={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-symbol"),a=i===null?!1:i===""?!0:i;return n.symbol=a,n}}}},FJ=[IZ,SJ,TJ,EJ,AJ,RJ,MJ,LJ,BJ,UJ,$J];YZ(FJ,{mixoutsTo:yi});yi.noAuto;yi.config;yi.library;yi.dom;var hS=yi.parse;yi.findIconDefinition;yi.toHtml;var zJ=yi.icon;yi.layer;yi.text;yi.counter;var wx={exports:{}},_x,bO;function HJ(){if(bO)return _x;bO=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return _x=t,_x}var Sx,xO;function qJ(){if(xO)return Sx;xO=1;var t=HJ();function e(){}function n(){}return n.resetWarningCache=e,Sx=function(){function r(o,c,u,h,m,p){if(p!==t){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}r.isRequired=r;function i(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},Sx}var wO;function KJ(){return wO||(wO=1,wx.exports=qJ()()),wx.exports}var GJ=KJ();const ft=zi(GJ);var WJ={};function dS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function YJ(t){if(Array.isArray(t))return t}function XJ(t){if(Array.isArray(t))return dS(t)}function Go(t,e,n){return(e=iee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QJ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ZJ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,c=[],u=!0,h=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(m){h=!0,i=m}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(h)throw i}}return c}}function JJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function La(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_O(Object(n),!0).forEach(function(r){Go(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_O(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tee(t,e){if(t==null)return{};var n,r,i=nee(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function nee(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function SO(t,e){return YJ(t)||ZJ(t,e)||xL(t,e)||JJ()}function mS(t){return XJ(t)||QJ(t)||xL(t)||eee()}function ree(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iee(t){var e=ree(t,"string");return typeof e=="symbol"?e:e+""}function By(t){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},By(t)}function xL(t,e){if(t){if(typeof t=="string")return dS(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dS(t,e):void 0}}var aee="7.0.0-alpha1",gS;try{var see=require("@fortawesome/fontawesome-svg-core/package.json");gS=see.version}catch{gS=WJ.FA_VERSION||"7.0.0-alpha8"}function oee(t){var e=t.beat,n=t.fade,r=t.beatFade,i=t.bounce,a=t.shake,o=t.flash,c=t.spin,u=t.spinPulse,h=t.spinReverse,m=t.pulse,p=t.fixedWidth,y=t.inverse,b=t.border,_=t.listItem,T=t.flip,S=t.size,E=t.rotation,N=t.pull,C=t.swapOpacity,L=t.rotateBy,D=t.widthAuto,R=lee(gS,aee),k=Go(Go(Go(Go(Go(Go({"fa-beat":e,"fa-fade":n,"fa-beat-fade":r,"fa-bounce":i,"fa-shake":a,"fa-flash":o,"fa-spin":c,"fa-spin-reverse":h,"fa-spin-pulse":u,"fa-pulse":m,"fa-fw":p,"fa-inverse":y,"fa-border":b,"fa-li":_,"fa-flip":T===!0,"fa-flip-horizontal":T==="horizontal"||T==="both","fa-flip-vertical":T==="vertical"||T==="both"},"fa-".concat(S),typeof S<"u"&&S!==null),"fa-rotate-".concat(E),typeof E<"u"&&E!==null&&E!==0),"fa-pull-".concat(N),typeof N<"u"&&N!==null),"fa-swap-opacity",C),"fa-rotate-by",R&&L),"fa-width-auto",R&&D);return Object.keys(k).map(function(I){return k[I]?I:null}).filter(function(I){return I})}function lee(t,e){for(var n=t.split("-"),r=SO(n,2),i=r[0],a=r[1],o=e.split("-"),c=SO(o,2),u=c[0],h=c[1],m=i.split("."),p=u.split("."),y=0;y<Math.max(m.length,p.length);y++){var b=m[y]||"0",_=p[y]||"0",T=parseInt(b,10),S=parseInt(_,10);if(T!==S)return T>S}for(var E=0;E<Math.max(m.length,p.length);E++){var N=m[E]||"0",C=p[E]||"0";if(N!==C&&N.length!==C.length)return N.length<C.length}return!(a&&!h)}function cee(t){return t=t-0,t===t}function wL(t){return cee(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var uee=["style"];function fee(t){return t.charAt(0).toUpperCase()+t.slice(1)}function hee(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),i=wL(n.slice(0,r)),a=n.slice(r+1).trim();return i.startsWith("webkit")?e[fee(i)]=a:e[i]=a,e},{})}function _L(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var r=(e.children||[]).map(function(u){return _L(t,u)}),i=Object.keys(e.attributes||{}).reduce(function(u,h){var m=e.attributes[h];switch(h){case"class":u.attrs.className=m,delete e.attributes.class;break;case"style":u.attrs.style=hee(m);break;default:h.indexOf("aria-")===0||h.indexOf("data-")===0?u.attrs[h.toLowerCase()]=m:u.attrs[wL(h)]=m}return u},{attrs:{}}),a=n.style,o=a===void 0?{}:a,c=tee(n,uee);return i.attrs.style=La(La({},i.attrs.style),o),t.apply(void 0,[e.tag,La(La({},i.attrs),c)].concat(mS(r)))}var SL=!1;try{SL=!0}catch{}function dee(){if(!SL&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function TO(t){if(t&&By(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(hS.icon)return hS.icon(t);if(t===null)return null;if(t&&By(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function Tx(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Go({},t,e):{}}var EO={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,rotateBy:!1,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1,widthAuto:!1},mt=fn.forwardRef(function(t,e){var n=La(La({},EO),t),r=n.icon,i=n.mask,a=n.symbol,o=n.className,c=n.title,u=n.titleId,h=n.maskId,m=TO(r),p=Tx("classes",[].concat(mS(oee(n)),mS((o||"").split(" ")))),y=Tx("transform",typeof n.transform=="string"?hS.transform(n.transform):n.transform),b=Tx("mask",TO(i)),_=zJ(m,La(La(La(La({},p),y),b),{},{symbol:a,title:c,titleId:u,maskId:h}));if(!_)return dee("Could not find icon",m),null;var T=_.abstract,S={ref:e};return Object.keys(n).forEach(function(E){EO.hasOwnProperty(E)||(S[E]=n[E])}),mee(T[0],S)});mt.displayName="FontAwesomeIcon";mt.propTypes={beat:ft.bool,border:ft.bool,beatFade:ft.bool,bounce:ft.bool,className:ft.string,fade:ft.bool,flash:ft.bool,mask:ft.oneOfType([ft.object,ft.array,ft.string]),maskId:ft.string,fixedWidth:ft.bool,inverse:ft.bool,flip:ft.oneOf([!0,!1,"horizontal","vertical","both"]),icon:ft.oneOfType([ft.object,ft.array,ft.string]),listItem:ft.bool,pull:ft.oneOf(["right","left"]),pulse:ft.bool,rotation:ft.oneOf([0,90,180,270]),rotateBy:ft.bool,shake:ft.bool,size:ft.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:ft.bool,spinPulse:ft.bool,spinReverse:ft.bool,symbol:ft.oneOfType([ft.bool,ft.string]),title:ft.string,titleId:ft.string,transform:ft.oneOfType([ft.string,ft.object]),swapOpacity:ft.bool,widthAuto:ft.bool};var mee=_L.bind(null,fn.createElement);/*!
 * Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2025 Fonticons, Inc.
 */var gee={prefix:"fas",iconName:"bell",icon:[448,512,[128276,61602],"f0f3","M224 0c-17.7 0-32 14.3-32 32l0 3.2C119 50 64 114.6 64 192l0 21.7c0 48.1-16.4 94.8-46.4 132.4L7.8 358.3C2.7 364.6 0 372.4 0 380.5 0 400.1 15.9 416 35.5 416l376.9 0c19.6 0 35.5-15.9 35.5-35.5 0-8.1-2.7-15.9-7.8-22.2l-9.8-12.2C400.4 308.5 384 261.8 384 213.7l0-21.7c0-77.4-55-142-128-156.8l0-3.2c0-17.7-14.3-32-32-32zM162 464c7.1 27.6 32.2 48 62 48s54.9-20.4 62-48l-124 0z"]},pee={prefix:"fas",iconName:"wallet",icon:[512,512,[],"f555","M64 32C28.7 32 0 60.7 0 96L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-192c0-35.3-28.7-64-64-64L72 128c-13.3 0-24-10.7-24-24S58.7 80 72 80l384 0c13.3 0 24-10.7 24-24s-10.7-24-24-24L64 32zM416 256a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},yee={prefix:"fas",iconName:"ellipsis",icon:[448,512,["ellipsis-h"],"f141","M0 256a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm168 0a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm224-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112z"]},FE=yee,vee={prefix:"fas",iconName:"receipt",icon:[384,512,[129534],"f543","M14 2.2C22.5-1.7 32.5-.3 39.6 5.8L80 40.4 120.4 5.8c9-7.7 22.3-7.7 31.2 0L192 40.4 232.4 5.8c9-7.7 22.2-7.7 31.2 0L304 40.4 344.4 5.8c7.1-6.1 17.1-7.5 25.6-3.6S384 14.6 384 24l0 464c0 9.4-5.5 17.9-14 21.8s-18.5 2.5-25.6-3.6l-40.4-34.6-40.4 34.6c-9 7.7-22.2 7.7-31.2 0l-40.4-34.6-40.4 34.6c-9 7.7-22.3 7.7-31.2 0L80 471.6 39.6 506.2c-7.1 6.1-17.1 7.5-25.6 3.6S0 497.4 0 488L0 24C0 14.6 5.5 6.1 14 2.2zM104 136c-13.3 0-24 10.7-24 24s10.7 24 24 24l176 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-176 0zM80 352c0 13.3 10.7 24 24 24l176 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-176 0c-13.3 0-24 10.7-24 24zm24-120c-13.3 0-24 10.7-24 24s10.7 24 24 24l176 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-176 0z"]},bee={prefix:"fas",iconName:"book",icon:[448,512,[128212],"f02d","M384 512L96 512c-53 0-96-43-96-96L0 96C0 43 43 0 96 0L400 0c26.5 0 48 21.5 48 48l0 288c0 20.9-13.4 38.7-32 45.3l0 66.7c17.7 0 32 14.3 32 32s-14.3 32-32 32l-32 0zM96 384c-17.7 0-32 14.3-32 32s14.3 32 32 32l256 0 0-64-256 0zm32-232c0 13.3 10.7 24 24 24l176 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-176 0c-13.3 0-24 10.7-24 24zm24 72c-13.3 0-24 10.7-24 24s10.7 24 24 24l176 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-176 0z"]},TL={prefix:"fas",iconName:"clone",icon:[512,512,[],"f24d","M288 448l-224 0 0-224 48 0 0-64-48 0c-35.3 0-64 28.7-64 64L0 448c0 35.3 28.7 64 64 64l224 0c35.3 0 64-28.7 64-64l0-48-64 0 0 48zm-64-96l224 0c35.3 0 64-28.7 64-64l0-224c0-35.3-28.7-64-64-64L224 0c-35.3 0-64 28.7-64 64l0 224c0 35.3 28.7 64 64 64z"]},xee={prefix:"fas",iconName:"folder-open",icon:[576,512,[128194,128449,61717],"f07c","M56 225.6L32.4 296.2 32.4 96c0-35.3 28.7-64 64-64l138.7 0c13.8 0 27.3 4.5 38.4 12.8l38.4 28.8c5.5 4.2 12.3 6.4 19.2 6.4l117.3 0c35.3 0 64 28.7 64 64l0 16-365.4 0c-41.3 0-78 26.4-91.1 65.6zM477.8 448L99 448c-32.8 0-55.9-32.1-45.5-63.2l48-144C108 221.2 126.4 208 147 208l378.8 0c32.8 0 55.9 32.1 45.5 63.2l-48 144c-6.5 19.6-24.9 32.8-45.5 32.8z"]},wee={prefix:"fas",iconName:"video",icon:[576,512,["video-camera"],"f03d","M96 64c-35.3 0-64 28.7-64 64l0 256c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64L96 64zM464 336l73.5 58.8c4.2 3.4 9.4 5.2 14.8 5.2 13.1 0 23.7-10.6 23.7-23.7l0-240.6c0-13.1-10.6-23.7-23.7-23.7-5.4 0-10.6 1.8-14.8 5.2L464 176 464 336z"]},_ee={prefix:"fas",iconName:"circle-xmark",icon:[512,512,[61532,"times-circle","xmark-circle"],"f057","M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zM167 167c9.4-9.4 24.6-9.4 33.9 0l55 55 55-55c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-55 55 55 55c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-55-55-55 55c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l55-55-55-55c-9.4-9.4-9.4-24.6 0-33.9z"]},See={prefix:"fas",iconName:"circle-plus",icon:[512,512,["plus-circle"],"f055","M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zM232 344l0-64-64 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l64 0 0-64c0-13.3 10.7-24 24-24s24 10.7 24 24l0 64 64 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-64 0 0 64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"]},Tee={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M195.1 9.5C198.1-5.3 211.2-16 226.4-16l59.8 0c15.2 0 28.3 10.7 31.3 25.5L332 79.5c14.1 6 27.3 13.7 39.3 22.8l67.8-22.5c14.4-4.8 30.2 1.2 37.8 14.4l29.9 51.8c7.6 13.2 4.9 29.8-6.5 39.9L447 233.3c.9 7.4 1.3 15 1.3 22.7s-.5 15.3-1.3 22.7l53.4 47.5c11.4 10.1 14 26.8 6.5 39.9l-29.9 51.8c-7.6 13.1-23.4 19.2-37.8 14.4l-67.8-22.5c-12.1 9.1-25.3 16.7-39.3 22.8l-14.4 69.9c-3.1 14.9-16.2 25.5-31.3 25.5l-59.8 0c-15.2 0-28.3-10.7-31.3-25.5l-14.4-69.9c-14.1-6-27.2-13.7-39.3-22.8L73.5 432.3c-14.4 4.8-30.2-1.2-37.8-14.4L5.8 366.1c-7.6-13.2-4.9-29.8 6.5-39.9l53.4-47.5c-.9-7.4-1.3-15-1.3-22.7s.5-15.3 1.3-22.7L12.3 185.8c-11.4-10.1-14-26.8-6.5-39.9L35.7 94.1c7.6-13.2 23.4-19.2 37.8-14.4l67.8 22.5c12.1-9.1 25.3-16.7 39.3-22.8L195.1 9.5zM256.3 336a80 80 0 1 0 -.6-160 80 80 0 1 0 .6 160z"]},Eee={prefix:"fas",iconName:"house",icon:[512,512,[127968,63498,63500,"home","home-alt","home-lg-alt"],"f015","M277.8 8.6c-12.3-11.4-31.3-11.4-43.5 0l-224 208c-9.6 9-12.8 22.9-8 35.1S18.8 272 32 272l16 0 0 176c0 35.3 28.7 64 64 64l288 0c35.3 0 64-28.7 64-64l0-176 16 0c13.2 0 25-8.1 29.8-20.3s1.6-26.2-8-35.1l-224-208zM240 320l32 0c26.5 0 48 21.5 48 48l0 96-128 0 0-96c0-26.5 21.5-48 48-48z"]},Aee={prefix:"fas",iconName:"arrow-right",icon:[512,512,[8594],"f061","M502.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l370.7 0-105.4 105.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"]},Nee={prefix:"fas",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm84.4-299.3l-80 128c-4.2 6.7-11.4 10.9-19.3 11.3s-15.5-3.2-20.2-9.6l-48-64c-8-10.6-5.8-25.6 4.8-33.6s25.6-5.8 33.6 4.8l27 36 61.4-98.3c7-11.2 21.8-14.7 33.1-7.6s14.7 21.8 7.6 33.1z"]},Uy={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M309.5-18.9c-4.1-8-12.4-13.1-21.4-13.1s-17.3 5.1-21.4 13.1L193.1 125.3 33.2 150.7c-8.9 1.4-16.3 7.7-19.1 16.3s-.5 18 5.8 24.4l114.4 114.5-25.2 159.9c-1.4 8.9 2.3 17.9 9.6 23.2s16.9 6.1 25 2L288.1 417.6 432.4 491c8 4.1 17.7 3.3 25-2s11-14.2 9.6-23.2L441.7 305.9 556.1 191.4c6.4-6.4 8.6-15.8 5.8-24.4s-10.1-14.9-19.1-16.3L383 125.3 309.5-18.9z"]},Cee={prefix:"fas",iconName:"file-pen",icon:[640,512,[128221,"file-edit"],"f31c","M128.1 0c-35.3 0-64 28.7-64 64l0 384c0 35.3 28.7 64 64 64l146.2 0 10.9-54.5c4.3-21.7 15-41.6 30.6-57.2l132.2-132.2 0-97.5c0-17-6.7-33.3-18.7-45.3L322.8 18.7C310.8 6.7 294.5 0 277.6 0L128.1 0zM389.6 176l-93.5 0c-13.3 0-24-10.7-24-24l0-93.5 117.5 117.5zM332.3 466.9l-11.9 59.6c-.2 .9-.3 1.9-.3 2.9 0 8 6.5 14.6 14.6 14.6 1 0 1.9-.1 2.9-.3l59.6-11.9c12.4-2.5 23.8-8.6 32.7-17.5l118.9-118.9-80-80-118.9 118.9c-8.9 8.9-15 20.3-17.5 32.7zm267.8-123c22.1-22.1 22.1-57.9 0-80s-57.9-22.1-80 0l-28.8 28.8 80 80 28.8-28.8z"]},ol={prefix:"fas",iconName:"arrow-left",icon:[512,512,[8592],"f060","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 288 480 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-370.7 0 105.4-105.4c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"]},jee={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 160-160 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l160 0 0 160c0 17.7 14.3 32 32 32s32-14.3 32-32l0-160 160 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-160 0 0-160z"]},Dee={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"]},kee={prefix:"fas",iconName:"list-check",icon:[512,512,["tasks"],"f0ae","M133.8 36.3c10.9 7.6 13.5 22.6 5.9 33.4l-56 80c-4.1 5.8-10.5 9.5-17.6 10.1S52 158 47 153L7 113C-2.3 103.6-2.3 88.4 7 79S31.6 69.7 41 79l19.8 19.8 39.6-56.6c7.6-10.9 22.6-13.5 33.4-5.9zm0 160c10.9 7.6 13.5 22.6 5.9 33.4l-56 80c-4.1 5.8-10.5 9.5-17.6 10.1S52 318 47 313L7 273c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l19.8 19.8 39.6-56.6c7.6-10.9 22.6-13.5 33.4-5.9zM224 96c0-17.7 14.3-32 32-32l224 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-224 0c-17.7 0-32-14.3-32-32zm0 160c0-17.7 14.3-32 32-32l224 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-224 0c-17.7 0-32-14.3-32-32zM160 416c0-17.7 14.3-32 32-32l288 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-288 0c-17.7 0-32-14.3-32-32zM64 376a40 40 0 1 1 0 80 40 40 0 1 1 0-80z"]},EL={prefix:"fas",iconName:"book-open",icon:[512,512,[128214,128366],"f518","M256 141.3l0 309.3 .5-.2C311.1 427.7 369.7 416 428.8 416l19.2 0 0-320-19.2 0c-42.2 0-84.1 8.4-123.1 24.6-16.8 7-33.4 13.9-49.7 20.7zM230.9 61.5L256 72 281.1 61.5C327.9 42 378.1 32 428.8 32L464 32c26.5 0 48 21.5 48 48l0 352c0 26.5-21.5 48-48 48l-35.2 0c-50.7 0-100.9 10-147.7 29.5l-12.8 5.3c-7.9 3.3-16.7 3.3-24.6 0l-12.8-5.3C184.1 490 133.9 480 83.2 480L48 480c-26.5 0-48-21.5-48-48L0 80C0 53.5 21.5 32 48 32l35.2 0c50.7 0 100.9 10 147.7 29.5z"]},Oee={prefix:"fas",iconName:"layer-group",icon:[512,512,[],"f5fd","M232.5 5.2c14.9-6.9 32.1-6.9 47 0l218.6 101c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L13.9 149.8C5.4 145.8 0 137.3 0 128s5.4-17.9 13.9-21.8L232.5 5.2zM48.1 218.4l164.3 75.9c27.7 12.8 59.6 12.8 87.3 0l164.3-75.9 34.1 15.8c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L13.9 277.8C5.4 273.8 0 265.3 0 256s5.4-17.9 13.9-21.8l34.1-15.8zM13.9 362.2l34.1-15.8 164.3 75.9c27.7 12.8 59.6 12.8 87.3 0l164.3-75.9 34.1 15.8c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L13.9 405.8C5.4 401.8 0 393.3 0 384s5.4-17.9 13.9-21.8z"]};const Iee=()=>Oe(se,"boThe"),Pee=()=>Oe(se,"khoaHoc");function AO({text:t="",keyword:e=""}){const n=String(e||"").trim();if(!n)return d.jsx(d.Fragment,{children:t});const i=String(t||"").toLowerCase().indexOf(n.toLowerCase());if(i===-1)return d.jsx(d.Fragment,{children:t});const a=t.slice(0,i),o=t.slice(i,i+n.length),c=t.slice(i+n.length);return d.jsxs(d.Fragment,{children:[a,d.jsx("mark",{children:o}),c]})}function Ree({navigate:t}){const e=w.useRef(null),[n,r]=w.useState(!1),[i,a]=w.useState(""),[o,c]=w.useState(!1),[u,h]=w.useState([]),[m,p]=w.useState([]),[y,b]=w.useState([]),[_,T]=w.useState([]),[S,E]=w.useState(-1);w.useEffect(()=>{const R=k=>{e.current&&!e.current.contains(k.target)&&(r(!1),E(-1))};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]);const N=async()=>{if(!(u.length>0||m.length>0)){c(!0);try{const[R,k]=await Promise.all([ct(Ge(Iee(),vn(80))),ct(Ge(Pee(),vn(80)))]);h(R.docs.map(I=>I.data())),p(k.docs.map(I=>I.data()))}catch{h([]),p([])}finally{c(!1)}}};w.useEffect(()=>{const R=String(i||"").trim().toLowerCase();if(!R){b([]),T([]),E(-1);return}let k=!1;const I=setTimeout(async()=>{if(await N(),k)return;const O=V=>String(V||"").toLowerCase().includes(R),U=u.filter(V=>O(V.tenBoThe)||O(V.moTa)).slice(0,8),$=m.filter(V=>{const B=O(V.tenKhoaHoc),Y=Array.isArray(V.kienThuc)&&V.kienThuc.some(ee=>O(String(ee)));return B||Y||O(V.moTa)}).slice(0,8);b(U),T($),E(-1)},250);return()=>{k=!0,clearTimeout(I)}},[i]);const C=w.useMemo(()=>{const R=y.map(I=>({type:"card",id:I.idBoThe,item:I})),k=_.map(I=>({type:"course",id:I.idKhoaHoc,item:I}));return[...R,...k]},[y,_]),L=()=>{const R=C[S];if(!R){i.trim()&&t(`/timkiem/${i.trim()}`),r(!1),E(-1);return}R.type==="card"?t(`/flashcard/${R.item.idBoThe}`):t(`/khoaHoc/${R.item.idKhoaHoc}`),r(!1),a(""),E(-1)},D=R=>{R.key==="ArrowDown"?(R.preventDefault(),n||r(!0),E(k=>Math.min(k+1,C.length-1))):R.key==="ArrowUp"?(R.preventDefault(),E(k=>Math.max(k-1,-1))):R.key==="Enter"?(R.preventDefault(),L()):R.key==="Escape"&&(r(!1),E(-1))};return d.jsxs("div",{className:"search-section",ref:e,children:[d.jsx("input",{type:"search",placeholder:"Tìm kiếm",className:"search-input",value:i,onChange:R=>{a(R.target.value),r(!0)},onFocus:()=>r(!0),onKeyDown:D}),n&&d.jsxs("div",{className:"search-result",children:[o&&d.jsx("div",{className:"result-group",children:d.jsx("div",{className:"result-item",children:"Đang tải dữ liệu..."})}),!o&&!i.trim()&&d.jsx("p",{className:"empty",children:"Nhập từ khóa để tìm kiếm"}),!o&&i.trim()&&y.length===0&&_.length===0&&d.jsx("p",{className:"empty",children:"Không tìm thấy kết quả"}),!o&&y.length>0&&d.jsxs("div",{className:"result-group",children:[d.jsx("h4",{children:"Bộ thẻ"}),y.map((R,k)=>{const I=k,O=S===I;return d.jsxs("div",{className:"result-item",style:O?{background:"color-mix(in srgb, var(--brand) 8%, transparent)"}:{},onMouseEnter:()=>E(I),onMouseLeave:()=>E(-1),onClick:()=>{t(`/flashcard/${R.idBoThe}`),r(!1),a(""),E(-1)},children:["📑 ",d.jsx(AO,{text:R.tenBoThe,keyword:i})]},R.idBoThe)})]}),!o&&_.length>0&&d.jsxs("div",{className:"result-group",children:[d.jsx("h4",{children:"Khóa học"}),_.map((R,k)=>{const I=y.length+k,O=S===I;return d.jsxs("div",{className:"result-item",style:O?{background:"color-mix(in srgb, var(--brand) 8%, transparent)"}:{},onMouseEnter:()=>E(I),onMouseLeave:()=>E(-1),onClick:()=>{t(`/khoaHoc/${R.idKhoaHoc}`),r(!1),a(""),E(-1)},children:["🏫 ",d.jsx(AO,{text:R.tenKhoaHoc,keyword:i})]},R.idKhoaHoc)})]})]})]})}function Mee({role:t,navigate:e}){const n=w.useRef(null),[r,i]=w.useState(!1);return w.useEffect(()=>{const a=o=>{n.current&&!n.current.contains(o.target)&&i(!1)};return document.addEventListener("mousedown",a),()=>document.removeEventListener("mousedown",a)},[]),d.jsxs("div",{className:"plus-container",ref:n,children:[d.jsx(mt,{icon:See,className:"icon plus-icon",onClick:()=>i(a=>!a)}),r&&d.jsxs("div",{className:"plus",children:[d.jsxs("div",{className:"plus-item",onClick:()=>{e("/newBoThe"),i(!1)},children:[d.jsx(mt,{icon:TL}),d.jsx("span",{children:"Bộ thẻ mới"})]}),(t==="GIANG_VIEN"||t==="ADMIN")&&d.jsxs("div",{className:"plus-item",onClick:()=>{e("/newKhoaHoc"),i(!1)},children:[d.jsx(mt,{icon:EL}),d.jsx("span",{children:"Khóa học mới"})]})]})]})}const NO="vi-VN",Lee=(t,e="VND")=>{const n=Number(t||0);return e==="VND"?n.toLocaleString(NO)+" đ":`${n.toLocaleString(NO)} ${e}`};function Vee({user:t,prime:e,balanceText:n,onLogout:r,navigate:i}){const a=w.useRef(null),[o,c]=w.useState(!1),[u,h]=w.useState({soDu:null,donVi:"VND",_loaded:!1});w.useEffect(()=>{const _=T=>{a.current&&!a.current.contains(T.target)&&c(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[]);const m=t?.idNguoiDung||t?.uid||null;w.useEffect(()=>{if(!m){h({soDu:null,donVi:"VND",_loaded:!1});return}const _=nt(Ae(se,"vi",String(m)),T=>{if(T.exists()){const S=T.data()||{};h({soDu:Number(S.soDu||0),donVi:S.donVi||"VND",_loaded:!0})}else h({soDu:0,donVi:"VND",_loaded:!0})},()=>h({soDu:null,donVi:"VND",_loaded:!1}));return()=>_()},[m]);const p=t?.anhDaiDien||"",y=t?.tenNguoiDung||"Người dùng",b=u._loaded?Lee(u.soDu,u.donVi):n||"—";return d.jsxs("div",{className:"inforContainer",ref:a,children:[d.jsxs("div",{className:"avatar-wrapper",onClick:()=>c(_=>!_),children:[p?d.jsx("img",{src:p,alt:"avatar",className:"avatar"}):d.jsx("div",{className:"avatar avatar-fallback",children:y.charAt(0).toUpperCase()}),e&&d.jsx("span",{className:"prime-badge",title:"Tài khoản Prime",children:"★"})]}),o&&d.jsxs("div",{className:"setting",children:[d.jsxs("div",{className:"infor",children:[d.jsxs("div",{className:"avatar-wrapper",children:[p?d.jsx("img",{src:p,alt:"avatar",className:"avatar"}):d.jsx("div",{className:"avatar avatar-fallback",children:y.charAt(0).toUpperCase()}),e&&d.jsx("span",{className:"prime-badge",title:"Tài khoản Prime",children:"★"})]}),d.jsx("h2",{className:"tittle",children:y})]}),d.jsx("div",{className:"divide"}),d.jsxs("div",{className:"confirg",onClick:()=>{c(!1),i("/vi")},children:[d.jsx(mt,{icon:pee,className:"icon icon-setting"}),d.jsx("span",{className:"confirg-text",children:"Ví"}),d.jsx("span",{className:"balance-text",style:{marginLeft:8,fontWeight:600},children:b})]}),d.jsx("div",{className:"divide"}),d.jsxs("div",{className:"confirg",onClick:()=>{c(!1),i("/setting")},children:[d.jsx(mt,{icon:Tee,className:"icon icon-setting"}),d.jsx("span",{className:"confirg-text",children:"Cài đặt"})]}),d.jsx("div",{className:"divide"}),d.jsxs("div",{className:"confirg",onClick:()=>{c(!1),i("/lichSuThanhToan")},children:[d.jsx(mt,{icon:vee,className:"icon icon-setting"}),d.jsx("span",{className:"confirg-text",children:"Lịch sử thanh toán"})]}),d.jsx("div",{className:"divide"}),d.jsx("div",{className:"loggout",onClick:r,children:"Đăng xuất"})]})]})}const Bee=t=>Ae(se,"nguoiDung",String(t)),Uee=()=>Oe(se,"goiTraPhiCuaNguoiDung"),$ee=t=>{const e=String(t||"").toLowerCase(),n=e.normalize("NFD").replace(/[\u0300-\u036f]/g,"");return e==="đã hủy"||n==="da huy"?!0:e.includes("hủy")||e.includes("huỷ")||n.includes("huy")||/cancel|canceled|cancelled/.test(n)},Fee=t=>{if(!t)return null;if(t instanceof Date)return t;if(typeof t?.toDate=="function")return t.toDate();if(typeof t=="string"){const[e,n,r]=t.split("/").map(Number);if(r)return new Date(r,(n||1)-1,e||1);const i=new Date(t);return isNaN(i)?null:i}return null},zee=t=>`${Number(t||0).toLocaleString("vi-VN")}đ`;function Hee(){const t=wt(),e=w.useRef(null),n=w.useRef(null),[r,i]=w.useState(null),[a,o]=w.useState(!1);w.useEffect(()=>{let h=null,m=null;return(async()=>{const y=JSON.parse(sessionStorage.getItem("session")||"null"),b=lt.currentUser?.uid||y?.idNguoiDung;if(!b){i(null),o(!1);return}h=nt(Bee(b),T=>{T.exists()?i({idNguoiDung:b,...T.data()}):i({idNguoiDung:b,tenNguoiDung:"Người dùng",soDu:0})},()=>i({idNguoiDung:b,tenNguoiDung:"Người dùng",soDu:0})),n.current=h;const _=Ge(Uee(),Qe("idNguoiDung","==",String(b)));m=nt(_,T=>{const S=new Date;S.setHours(0,0,0,0);const E=T.docs.some(N=>{const C=N.data();if($ee(C?.status))return!1;const L=Fee(C?.NgayKetThuc);return!(L instanceof Date)||isNaN(L)?!1:(L.setHours(0,0,0,0),L>=S)});o(E)},()=>o(!1)),e.current=m})(),()=>{h?.(),m?.(),n.current=null,e.current=null}},[]),w.useEffect(()=>{const h=m=>{m.key==="auth:logout"&&(sessionStorage.removeItem("session"),e.current?.(),e.current=null,n.current?.(),n.current=null,i(null),o(!1),t("/dang-nhap",{replace:!0}))};return window.addEventListener("storage",h),()=>window.removeEventListener("storage",h)},[t]);const c=async()=>{try{await NM(lt)}finally{sessionStorage.removeItem("session"),localStorage.setItem("auth:logout",String(Date.now())),t("/dang-nhap",{replace:!0})}},u=zee(r?.soDu);return d.jsxs("div",{className:"header-container",children:[d.jsxs("div",{className:"left-section",children:[d.jsx(mt,{icon:Dee,className:"icon menu-icon"}),d.jsx(mt,{icon:EL,className:"icon book-icon",onClick:()=>t("/trangchu")})]}),d.jsx(Ree,{navigate:t}),d.jsxs("div",{className:"right-section",children:[d.jsx(Mee,{role:r?.vaiTro,navigate:t}),!a&&d.jsx("button",{className:"btn-upgrade",onClick:()=>t("/tra-phi"),children:"Nâng cấp tài khoản"}),d.jsx(Vee,{user:r,prime:a,balanceText:u,onLogout:c,navigate:t})]})]})}const qee=t=>{if(!t||typeof t!="string")return null;const[e,n,r]=t.split("/").map(Number);if(!e||!n||!r)return null;const i=new Date(r,(n||1)-1,e||1);return Number.isNaN(i.getTime())?null:i},Kee=()=>{const t=new Date;return t.setHours(0,0,0,0),t},Gee=t=>{if(t?.toDate)return t.toDate();if(typeof t=="string"&&t.includes("-")){const e=new Date(t);return Number.isNaN(e.getTime())?null:e}return typeof t=="string"&&t.includes("/")?qee(t):null};function Wee(){const t=wt(),[e,n]=w.useState(!0),[r,i]=w.useState(!1),[a,o]=w.useState(null),[c,u]=w.useState(!1),h=w.useRef(null);w.useEffect(()=>{const p=ga(lt,y=>o(y||null));return()=>p()},[]),w.useEffect(()=>{if(!a?.uid){i(!1);return}const p=Ge(Oe(se,"goiTraPhiCuaNguoiDung"),Qe("idNguoiDung","==",a.uid)),y=nt(p,b=>{const _=Kee(),T=b.docs.some(S=>{const E=S.data();if(E.status==="Đã hủy")return!1;const N=Gee(E.NgayKetThuc);return N?(N.setHours(0,0,0,0),N>=_):!1});i(T)});return()=>y()},[a?.uid]),w.useEffect(()=>{const p=()=>n(b=>!b),y=b=>{h.current&&!h.current.contains(b.target)&&u(!1)};return window.addEventListener("sidebar:toggle",p),document.addEventListener("mousedown",y),()=>{window.removeEventListener("sidebar:toggle",p),document.removeEventListener("mousedown",y)}},[]);const m=()=>{if(!a){alert("Vui lòng đăng nhập để dùng chức năng Video."),t("/dang-nhap");return}if(!r){alert("Bạn cần nâng cấp tài khoản để dùng chức năng Video."),t("/tra-phi");return}t("/video")};return d.jsxs("div",{className:`sidebar_container ${e?"":"is-closed"}`,children:[d.jsxs("div",{className:"sidebar_top",children:[d.jsxs("div",{onClick:()=>t("/trangchu"),children:[d.jsx(mt,{icon:Eee,className:"icon"}),"Trang chủ"]}),d.jsxs("div",{onClick:()=>t("/thuviencuatoi"),children:[d.jsx(mt,{icon:xee,className:"icon"}),"Thư viện của tôi"]}),d.jsxs("div",{ref:h,className:"noti-wrapper",onClick:()=>u(p=>!p),children:[d.jsxs("span",{className:"noti-trigger",children:[d.jsx(mt,{icon:gee,className:"icon"}),"Thông báo"]}),c&&d.jsx("div",{className:"noti-dropdown",children:d.jsxs("div",{className:"noti-item",onClick:()=>u(!1),children:[d.jsx("div",{className:"noti-title",children:"Ví dụ thông báo"}),d.jsx("div",{className:"noti-time",children:"Vừa xong"})]})})]})]}),d.jsx("div",{className:"divider"}),d.jsx("div",{className:"sidebar_center",children:d.jsxs("div",{onClick:m,children:[d.jsx(mt,{icon:wee,className:"icon"}),"Học qua Video",!r&&d.jsx("span",{className:"prime-badge",title:"Nâng cấp để mở khóa",children:"★"})]})}),d.jsx("div",{className:"divider"})]})}const Yee=t=>{if(!t||typeof t!="string")return null;const[e,n,r]=t.split("/").map(Number);if(!e||!n||!r)return null;const i=new Date(r,(n||1)-1,e||1);return Number.isNaN(i.getTime())?null:i},Xee=()=>{const t=new Date;return t.setHours(0,0,0,0),t},Qee=t=>{if(t?.toDate)return t.toDate();if(typeof t=="string"&&t.includes("-")){const e=new Date(t);return Number.isNaN(e.getTime())?null:e}return typeof t=="string"&&t.includes("/")?Yee(t):null};function CO(){const t=wt(),[e,n]=w.useState(null),[r,i]=w.useState(!1),a=w.useRef(null);w.useEffect(()=>{const c=ga(lt,u=>n(u||null));return()=>c()},[]),w.useEffect(()=>{if(a.current?.(),i(!1),!e?.uid)return;const c=Ge(Oe(se,"goiTraPhiCuaNguoiDung"),Qe("idNguoiDung","==",e.uid)),u=nt(c,h=>{const m=Xee(),p=h.docs.some(y=>{const b=y.data();if(b.status==="Đã hủy")return!1;const _=Qee(b.NgayKetThuc);return _?(_.setHours(0,0,0,0),_>=m):!1});i(p)},()=>i(!1));return a.current=u,()=>a.current?.()},[e?.uid]);const o=()=>{const c=()=>{alert("Tính năng AI chỉ dành cho tài khoản trả phí. Vui lòng nâng cấp để sử dụng."),t("/tra-phi")};return d.jsx("div",{className:"ai-locked-container",children:d.jsxs("button",{onClick:c,title:"Nâng cấp để dùng AI","aria-label":"Nâng cấp để dùng AI",className:"ai-locked-btn",children:[d.jsx(jE,{className:"ai-locked-icon"}),d.jsx("span",{className:"ai-locked-badge",children:"★"})]})})};return d.jsxs("div",{className:"trangchu-layout-container",children:[d.jsx(Hee,{}),d.jsx(CE,{}),d.jsxs("div",{className:"trangchu-layout-main",children:[d.jsx("div",{className:"trangchu-layout-sidebar",children:d.jsx(Wee,{})}),d.jsx("div",{className:"trangchu-layout-content",children:d.jsx(Vf,{})}),r?d.jsx(DE,{}):d.jsx(o,{})]}),d.jsx($3,{})]})}var Im=t=>t.type==="checkbox",pc=t=>t instanceof Date,Cr=t=>t==null;const AL=t=>typeof t=="object";var Sn=t=>!Cr(t)&&!Array.isArray(t)&&AL(t)&&!pc(t),Zee=t=>Sn(t)&&t.target?Im(t.target)?t.target.checked:t.target.value:t,Jee=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,ete=(t,e)=>t.has(Jee(e)),tte=t=>{const e=t.constructor&&t.constructor.prototype;return Sn(e)&&e.hasOwnProperty("isPrototypeOf")},zE=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Qn(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(!(zE&&(t instanceof Blob||r))&&(n||Sn(t)))if(e=n?[]:Object.create(Object.getPrototypeOf(t)),!n&&!tte(t))e=t;else for(const i in t)t.hasOwnProperty(i)&&(e[i]=Qn(t[i]));else return t;return e}var u0=t=>/^\w*$/.test(t),Dn=t=>t===void 0,HE=t=>Array.isArray(t)?t.filter(Boolean):[],qE=t=>HE(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Be=(t,e,n)=>{if(!e||!Sn(t))return n;const r=(u0(e)?[e]:qE(e)).reduce((i,a)=>Cr(i)?i:i[a],t);return Dn(r)||r===t?Dn(t[e])?n:t[e]:r},Ra=t=>typeof t=="boolean",Yt=(t,e,n)=>{let r=-1;const i=u0(e)?[e]:qE(e),a=i.length,o=a-1;for(;++r<a;){const c=i[r];let u=n;if(r!==o){const h=t[c];u=Sn(h)||Array.isArray(h)?h:isNaN(+i[r+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;t[c]=u,t=t[c]}};const jO={BLUR:"blur",FOCUS_OUT:"focusout"},na={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ds={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},nte=fn.createContext(null);nte.displayName="HookFormContext";var rte=(t,e,n,r=!0)=>{const i={defaultValues:e._defaultValues};for(const a in t)Object.defineProperty(i,a,{get:()=>{const o=a;return e._proxyFormState[o]!==na.all&&(e._proxyFormState[o]=!r||na.all),t[o]}});return i};const ite=typeof window<"u"?fn.useLayoutEffect:fn.useEffect;var Ba=t=>typeof t=="string",ate=(t,e,n,r,i)=>Ba(t)?(r&&e.watch.add(t),Be(n,t,i)):Array.isArray(t)?t.map(a=>(r&&e.watch.add(a),Be(n,a))):(r&&(e.watchAll=!0),n),pS=t=>Cr(t)||!AL(t);function Jo(t,e,n=new WeakSet){if(pS(t)||pS(e))return t===e;if(pc(t)&&pc(e))return t.getTime()===e.getTime();const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;if(n.has(t)||n.has(e))return!0;n.add(t),n.add(e);for(const a of r){const o=t[a];if(!i.includes(a))return!1;if(a!=="ref"){const c=e[a];if(pc(o)&&pc(c)||Sn(o)&&Sn(c)||Array.isArray(o)&&Array.isArray(c)?!Jo(o,c,n):o!==c)return!1}}return!0}var NL=(t,e,n,r,i)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:i||!0}}:{},Bd=t=>Array.isArray(t)?t:[t],DO=()=>{let t=[];return{get observers(){return t},next:i=>{for(const a of t)a.next&&a.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(a=>a!==i)}}),unsubscribe:()=>{t=[]}}},Vr=t=>Sn(t)&&!Object.keys(t).length,KE=t=>t.type==="file",ra=t=>typeof t=="function",$y=t=>{if(!zE)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},CL=t=>t.type==="select-multiple",GE=t=>t.type==="radio",ste=t=>GE(t)||Im(t),Ex=t=>$y(t)&&t.isConnected;function ote(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=Dn(t)?r++:t[e[r++]];return t}function lte(t){for(const e in t)if(t.hasOwnProperty(e)&&!Dn(t[e]))return!1;return!0}function Cn(t,e){const n=Array.isArray(e)?e:u0(e)?[e]:qE(e),r=n.length===1?t:ote(t,n),i=n.length-1,a=n[i];return r&&delete r[a],i!==0&&(Sn(r)&&Vr(r)||Array.isArray(r)&&lte(r))&&Cn(t,n.slice(0,-1)),t}var jL=t=>{for(const e in t)if(ra(t[e]))return!0;return!1};function Fy(t,e={}){const n=Array.isArray(t);if(Sn(t)||n)for(const r in t)Array.isArray(t[r])||Sn(t[r])&&!jL(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Fy(t[r],e[r])):Cr(t[r])||(e[r]=!0);return e}function DL(t,e,n){const r=Array.isArray(t);if(Sn(t)||r)for(const i in t)Array.isArray(t[i])||Sn(t[i])&&!jL(t[i])?Dn(e)||pS(n[i])?n[i]=Array.isArray(t[i])?Fy(t[i],[]):{...Fy(t[i])}:DL(t[i],Cr(e)?{}:e[i],n[i]):n[i]=!Jo(t[i],e[i]);return n}var fd=(t,e)=>DL(t,e,Fy(e));const kO={value:!1,isValid:!1},OO={value:!0,isValid:!0};var kL=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!Dn(t[0].attributes.value)?Dn(t[0].value)||t[0].value===""?OO:{value:t[0].value,isValid:!0}:OO:kO}return kO},OL=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>Dn(t)?t:e?t===""?NaN:t&&+t:n&&Ba(t)?new Date(t):r?r(t):t;const IO={isValid:!1,value:null};var IL=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,IO):IO;function PO(t){const e=t.ref;return KE(e)?e.files:GE(e)?IL(t.refs).value:CL(e)?[...e.selectedOptions].map(({value:n})=>n):Im(e)?kL(t.refs).value:OL(Dn(e.value)?t.ref.value:e.value,t)}var cte=(t,e,n,r)=>{const i={};for(const a of t){const o=Be(e,a);o&&Yt(i,a,o._f)}return{criteriaMode:n,names:[...t],fields:i,shouldUseNativeValidation:r}},zy=t=>t instanceof RegExp,hd=t=>Dn(t)?t:zy(t)?t.source:Sn(t)?zy(t.value)?t.value.source:t.value:t,RO=t=>({isOnSubmit:!t||t===na.onSubmit,isOnBlur:t===na.onBlur,isOnChange:t===na.onChange,isOnAll:t===na.all,isOnTouch:t===na.onTouched});const MO="AsyncFunction";var ute=t=>!!t&&!!t.validate&&!!(ra(t.validate)&&t.validate.constructor.name===MO||Sn(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===MO)),fte=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),LO=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Ud=(t,e,n,r)=>{for(const i of n||Object.keys(t)){const a=Be(t,i);if(a){const{_f:o,...c}=a;if(o){if(o.refs&&o.refs[0]&&e(o.refs[0],i)&&!r)return!0;if(o.ref&&e(o.ref,o.name)&&!r)return!0;if(Ud(c,e))break}else if(Sn(c)&&Ud(c,e))break}}};function VO(t,e,n){const r=Be(t,n);if(r||u0(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const a=i.join("."),o=Be(e,a),c=Be(t,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(c&&c.type)return{name:a,error:c};if(c&&c.root&&c.root.type)return{name:`${a}.root`,error:c.root};i.pop()}return{name:n}}var hte=(t,e,n,r)=>{n(t);const{name:i,...a}=t;return Vr(a)||Object.keys(a).length>=Object.keys(e).length||Object.keys(a).find(o=>e[o]===(!r||na.all))},dte=(t,e,n)=>!t||!e||t===e||Bd(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),mte=(t,e,n,r,i)=>i.isOnAll?!1:!n&&i.isOnTouch?!(e||t):(n?r.isOnBlur:i.isOnBlur)?!t:(n?r.isOnChange:i.isOnChange)?t:!0,gte=(t,e)=>!HE(Be(t,e)).length&&Cn(t,e),pte=(t,e,n)=>{const r=Bd(Be(t,n));return Yt(r,"root",e[n]),Yt(t,n,r),t},oy=t=>Ba(t);function BO(t,e,n="validate"){if(oy(t)||Array.isArray(t)&&t.every(oy)||Ra(t)&&!t)return{type:n,message:oy(t)?t:"",ref:e}}var zu=t=>Sn(t)&&!zy(t)?t:{value:t,message:""},UO=async(t,e,n,r,i,a)=>{const{ref:o,refs:c,required:u,maxLength:h,minLength:m,min:p,max:y,pattern:b,validate:_,name:T,valueAsNumber:S,mount:E}=t._f,N=Be(n,T);if(!E||e.has(T))return{};const C=c?c[0]:o,L=V=>{i&&C.reportValidity&&(C.setCustomValidity(Ra(V)?"":V||""),C.reportValidity())},D={},R=GE(o),k=Im(o),I=R||k,O=(S||KE(o))&&Dn(o.value)&&Dn(N)||$y(o)&&o.value===""||N===""||Array.isArray(N)&&!N.length,U=NL.bind(null,T,r,D),$=(V,B,Y,ee=Ds.maxLength,q=Ds.minLength)=>{const G=V?B:Y;D[T]={type:V?ee:q,message:G,ref:o,...U(V?ee:q,G)}};if(a?!Array.isArray(N)||!N.length:u&&(!I&&(O||Cr(N))||Ra(N)&&!N||k&&!kL(c).isValid||R&&!IL(c).isValid)){const{value:V,message:B}=oy(u)?{value:!!u,message:u}:zu(u);if(V&&(D[T]={type:Ds.required,message:B,ref:C,...U(Ds.required,B)},!r))return L(B),D}if(!O&&(!Cr(p)||!Cr(y))){let V,B;const Y=zu(y),ee=zu(p);if(!Cr(N)&&!isNaN(N)){const q=o.valueAsNumber||N&&+N;Cr(Y.value)||(V=q>Y.value),Cr(ee.value)||(B=q<ee.value)}else{const q=o.valueAsDate||new Date(N),G=H=>new Date(new Date().toDateString()+" "+H),K=o.type=="time",oe=o.type=="week";Ba(Y.value)&&N&&(V=K?G(N)>G(Y.value):oe?N>Y.value:q>new Date(Y.value)),Ba(ee.value)&&N&&(B=K?G(N)<G(ee.value):oe?N<ee.value:q<new Date(ee.value))}if((V||B)&&($(!!V,Y.message,ee.message,Ds.max,Ds.min),!r))return L(D[T].message),D}if((h||m)&&!O&&(Ba(N)||a&&Array.isArray(N))){const V=zu(h),B=zu(m),Y=!Cr(V.value)&&N.length>+V.value,ee=!Cr(B.value)&&N.length<+B.value;if((Y||ee)&&($(Y,V.message,B.message),!r))return L(D[T].message),D}if(b&&!O&&Ba(N)){const{value:V,message:B}=zu(b);if(zy(V)&&!N.match(V)&&(D[T]={type:Ds.pattern,message:B,ref:o,...U(Ds.pattern,B)},!r))return L(B),D}if(_){if(ra(_)){const V=await _(N,n),B=BO(V,C);if(B&&(D[T]={...B,...U(Ds.validate,B.message)},!r))return L(B.message),D}else if(Sn(_)){let V={};for(const B in _){if(!Vr(V)&&!r)break;const Y=BO(await _[B](N,n),C,B);Y&&(V={...Y,...U(B,Y.message)},L(Y.message),r&&(D[T]=V))}if(!Vr(V)&&(D[T]={ref:C,...V},!r))return D}}return L(!0),D};const yte={mode:na.onSubmit,reValidateMode:na.onChange,shouldFocusError:!0};function vte(t={}){let e={...yte,...t},n={submitCount:0,isDirty:!1,isReady:!1,isLoading:ra(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},r={},i=Sn(e.defaultValues)||Sn(e.values)?Qn(e.defaultValues||e.values)||{}:{},a=e.shouldUnregister?{}:Qn(i),o={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,h=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...m};const y={array:DO(),state:DO()},b=e.criteriaMode===na.all,_=X=>ae=>{clearTimeout(h),h=setTimeout(X,ae)},T=async X=>{if(!e.disabled&&(m.isValid||p.isValid||X)){const ae=e.resolver?Vr((await k()).errors):await O(r,!0);ae!==n.isValid&&y.state.next({isValid:ae})}},S=(X,ae)=>{!e.disabled&&(m.isValidating||m.validatingFields||p.isValidating||p.validatingFields)&&((X||Array.from(c.mount)).forEach(me=>{me&&(ae?Yt(n.validatingFields,me,ae):Cn(n.validatingFields,me))}),y.state.next({validatingFields:n.validatingFields,isValidating:!Vr(n.validatingFields)}))},E=(X,ae=[],me,De,Ee=!0,Se=!0)=>{if(De&&me&&!e.disabled){if(o.action=!0,Se&&Array.isArray(Be(r,X))){const je=me(Be(r,X),De.argA,De.argB);Ee&&Yt(r,X,je)}if(Se&&Array.isArray(Be(n.errors,X))){const je=me(Be(n.errors,X),De.argA,De.argB);Ee&&Yt(n.errors,X,je),gte(n.errors,X)}if((m.touchedFields||p.touchedFields)&&Se&&Array.isArray(Be(n.touchedFields,X))){const je=me(Be(n.touchedFields,X),De.argA,De.argB);Ee&&Yt(n.touchedFields,X,je)}(m.dirtyFields||p.dirtyFields)&&(n.dirtyFields=fd(i,a)),y.state.next({name:X,isDirty:$(X,ae),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else Yt(a,X,ae)},N=(X,ae)=>{Yt(n.errors,X,ae),y.state.next({errors:n.errors})},C=X=>{n.errors=X,y.state.next({errors:n.errors,isValid:!1})},L=(X,ae,me,De)=>{const Ee=Be(r,X);if(Ee){const Se=Be(a,X,Dn(me)?Be(i,X):me);Dn(Se)||De&&De.defaultChecked||ae?Yt(a,X,ae?Se:PO(Ee._f)):Y(X,Se),o.mount&&T()}},D=(X,ae,me,De,Ee)=>{let Se=!1,je=!1;const $e={name:X};if(!e.disabled){if(!me||De){(m.isDirty||p.isDirty)&&(je=n.isDirty,n.isDirty=$e.isDirty=$(),Se=je!==$e.isDirty);const ot=Jo(Be(i,X),ae);je=!!Be(n.dirtyFields,X),ot?Cn(n.dirtyFields,X):Yt(n.dirtyFields,X,!0),$e.dirtyFields=n.dirtyFields,Se=Se||(m.dirtyFields||p.dirtyFields)&&je!==!ot}if(me){const ot=Be(n.touchedFields,X);ot||(Yt(n.touchedFields,X,me),$e.touchedFields=n.touchedFields,Se=Se||(m.touchedFields||p.touchedFields)&&ot!==me)}Se&&Ee&&y.state.next($e)}return Se?$e:{}},R=(X,ae,me,De)=>{const Ee=Be(n.errors,X),Se=(m.isValid||p.isValid)&&Ra(ae)&&n.isValid!==ae;if(e.delayError&&me?(u=_(()=>N(X,me)),u(e.delayError)):(clearTimeout(h),u=null,me?Yt(n.errors,X,me):Cn(n.errors,X)),(me?!Jo(Ee,me):Ee)||!Vr(De)||Se){const je={...De,...Se&&Ra(ae)?{isValid:ae}:{},errors:n.errors,name:X};n={...n,...je},y.state.next(je)}},k=async X=>{S(X,!0);const ae=await e.resolver(a,e.context,cte(X||c.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return S(X),ae},I=async X=>{const{errors:ae}=await k(X);if(X)for(const me of X){const De=Be(ae,me);De?Yt(n.errors,me,De):Cn(n.errors,me)}else n.errors=ae;return ae},O=async(X,ae,me={valid:!0})=>{for(const De in X){const Ee=X[De];if(Ee){const{_f:Se,...je}=Ee;if(Se){const $e=c.array.has(Se.name),ot=Ee._f&&ute(Ee._f);ot&&m.validatingFields&&S([De],!0);const Bt=await UO(Ee,c.disabled,a,b,e.shouldUseNativeValidation&&!ae,$e);if(ot&&m.validatingFields&&S([De]),Bt[Se.name]&&(me.valid=!1,ae))break;!ae&&(Be(Bt,Se.name)?$e?pte(n.errors,Bt,Se.name):Yt(n.errors,Se.name,Bt[Se.name]):Cn(n.errors,Se.name))}!Vr(je)&&await O(je,ae,me)}}return me.valid},U=()=>{for(const X of c.unMount){const ae=Be(r,X);ae&&(ae._f.refs?ae._f.refs.every(me=>!Ex(me)):!Ex(ae._f.ref))&&Pt(X)}c.unMount=new Set},$=(X,ae)=>!e.disabled&&(X&&ae&&Yt(a,X,ae),!Jo(H(),i)),V=(X,ae,me)=>ate(X,c,{...o.mount?a:Dn(ae)?i:Ba(X)?{[X]:ae}:ae},me,ae),B=X=>HE(Be(o.mount?a:i,X,e.shouldUnregister?Be(i,X,[]):[])),Y=(X,ae,me={})=>{const De=Be(r,X);let Ee=ae;if(De){const Se=De._f;Se&&(!Se.disabled&&Yt(a,X,OL(ae,Se)),Ee=$y(Se.ref)&&Cr(ae)?"":ae,CL(Se.ref)?[...Se.ref.options].forEach(je=>je.selected=Ee.includes(je.value)):Se.refs?Im(Se.ref)?Se.refs.forEach(je=>{(!je.defaultChecked||!je.disabled)&&(Array.isArray(Ee)?je.checked=!!Ee.find($e=>$e===je.value):je.checked=Ee===je.value||!!Ee)}):Se.refs.forEach(je=>je.checked=je.value===Ee):KE(Se.ref)?Se.ref.value="":(Se.ref.value=Ee,Se.ref.type||y.state.next({name:X,values:Qn(a)})))}(me.shouldDirty||me.shouldTouch)&&D(X,Ee,me.shouldTouch,me.shouldDirty,!0),me.shouldValidate&&oe(X)},ee=(X,ae,me)=>{for(const De in ae){if(!ae.hasOwnProperty(De))return;const Ee=ae[De],Se=X+"."+De,je=Be(r,Se);(c.array.has(X)||Sn(Ee)||je&&!je._f)&&!pc(Ee)?ee(Se,Ee,me):Y(Se,Ee,me)}},q=(X,ae,me={})=>{const De=Be(r,X),Ee=c.array.has(X),Se=Qn(ae);Yt(a,X,Se),Ee?(y.array.next({name:X,values:Qn(a)}),(m.isDirty||m.dirtyFields||p.isDirty||p.dirtyFields)&&me.shouldDirty&&y.state.next({name:X,dirtyFields:fd(i,a),isDirty:$(X,Se)})):De&&!De._f&&!Cr(Se)?ee(X,Se,me):Y(X,Se,me),LO(X,c)&&y.state.next({...n,name:X}),y.state.next({name:o.mount?X:void 0,values:Qn(a)})},G=async X=>{o.mount=!0;const ae=X.target;let me=ae.name,De=!0;const Ee=Be(r,me),Se=ot=>{De=Number.isNaN(ot)||pc(ot)&&isNaN(ot.getTime())||Jo(ot,Be(a,me,ot))},je=RO(e.mode),$e=RO(e.reValidateMode);if(Ee){let ot,Bt;const ts=ae.type?PO(Ee._f):Zee(X),bi=X.type===jO.BLUR||X.type===jO.FOCUS_OUT,ns=!fte(Ee._f)&&!e.resolver&&!Be(n.errors,me)&&!Ee._f.deps||mte(bi,Be(n.touchedFields,me),n.isSubmitted,$e,je),Gi=LO(me,c,bi);Yt(a,me,ts),bi?(!ae||!ae.readOnly)&&(Ee._f.onBlur&&Ee._f.onBlur(X),u&&u(0)):Ee._f.onChange&&Ee._f.onChange(X);const Wi=D(me,ts,bi),Yr=!Vr(Wi)||Gi;if(!bi&&y.state.next({name:me,type:X.type,values:Qn(a)}),ns)return(m.isValid||p.isValid)&&(e.mode==="onBlur"?bi&&T():bi||T()),Yr&&y.state.next({name:me,...Gi?{}:Wi});if(!bi&&Gi&&y.state.next({...n}),e.resolver){const{errors:rs}=await k([me]);if(Se(ts),De){const is=VO(n.errors,r,me),fo=VO(rs,r,is.name||me);ot=fo.error,me=fo.name,Bt=Vr(rs)}}else S([me],!0),ot=(await UO(Ee,c.disabled,a,b,e.shouldUseNativeValidation))[me],S([me]),Se(ts),De&&(ot?Bt=!1:(m.isValid||p.isValid)&&(Bt=await O(r,!0)));De&&(Ee._f.deps&&oe(Ee._f.deps),R(me,Bt,ot,Wi))}},K=(X,ae)=>{if(Be(n.errors,ae)&&X.focus)return X.focus(),1},oe=async(X,ae={})=>{let me,De;const Ee=Bd(X);if(e.resolver){const Se=await I(Dn(X)?X:Ee);me=Vr(Se),De=X?!Ee.some(je=>Be(Se,je)):me}else X?(De=(await Promise.all(Ee.map(async Se=>{const je=Be(r,Se);return await O(je&&je._f?{[Se]:je}:je)}))).every(Boolean),!(!De&&!n.isValid)&&T()):De=me=await O(r);return y.state.next({...!Ba(X)||(m.isValid||p.isValid)&&me!==n.isValid?{}:{name:X},...e.resolver||!X?{isValid:me}:{},errors:n.errors}),ae.shouldFocus&&!De&&Ud(r,K,X?Ee:c.mount),De},H=X=>{const ae={...o.mount?a:i};return Dn(X)?ae:Ba(X)?Be(ae,X):X.map(me=>Be(ae,me))},Z=(X,ae)=>({invalid:!!Be((ae||n).errors,X),isDirty:!!Be((ae||n).dirtyFields,X),error:Be((ae||n).errors,X),isValidating:!!Be(n.validatingFields,X),isTouched:!!Be((ae||n).touchedFields,X)}),te=X=>{X&&Bd(X).forEach(ae=>Cn(n.errors,ae)),y.state.next({errors:X?n.errors:{}})},fe=(X,ae,me)=>{const De=(Be(r,X,{_f:{}})._f||{}).ref,Ee=Be(n.errors,X)||{},{ref:Se,message:je,type:$e,...ot}=Ee;Yt(n.errors,X,{...ot,...ae,ref:De}),y.state.next({name:X,errors:n.errors,isValid:!1}),me&&me.shouldFocus&&De&&De.focus&&De.focus()},Ce=(X,ae)=>ra(X)?y.state.subscribe({next:me=>"values"in me&&X(V(void 0,ae),me)}):V(X,ae,!0),Ie=X=>y.state.subscribe({next:ae=>{dte(X.name,ae.name,X.exact)&&hte(ae,X.formState||m,Rt,X.reRenderRoot)&&X.callback({values:{...a},...n,...ae,defaultValues:i})}}).unsubscribe,Fe=X=>(o.mount=!0,p={...p,...X.formState},Ie({...X,formState:p})),Pt=(X,ae={})=>{for(const me of X?Bd(X):c.mount)c.mount.delete(me),c.array.delete(me),ae.keepValue||(Cn(r,me),Cn(a,me)),!ae.keepError&&Cn(n.errors,me),!ae.keepDirty&&Cn(n.dirtyFields,me),!ae.keepTouched&&Cn(n.touchedFields,me),!ae.keepIsValidating&&Cn(n.validatingFields,me),!e.shouldUnregister&&!ae.keepDefaultValue&&Cn(i,me);y.state.next({values:Qn(a)}),y.state.next({...n,...ae.keepDirty?{isDirty:$()}:{}}),!ae.keepIsValid&&T()},Ne=({disabled:X,name:ae})=>{(Ra(X)&&o.mount||X||c.disabled.has(ae))&&(X?c.disabled.add(ae):c.disabled.delete(ae))},we=(X,ae={})=>{let me=Be(r,X);const De=Ra(ae.disabled)||Ra(e.disabled);return Yt(r,X,{...me||{},_f:{...me&&me._f?me._f:{ref:{name:X}},name:X,mount:!0,...ae}}),c.mount.add(X),me?Ne({disabled:Ra(ae.disabled)?ae.disabled:e.disabled,name:X}):L(X,!0,ae.value),{...De?{disabled:ae.disabled||e.disabled}:{},...e.progressive?{required:!!ae.required,min:hd(ae.min),max:hd(ae.max),minLength:hd(ae.minLength),maxLength:hd(ae.maxLength),pattern:hd(ae.pattern)}:{},name:X,onChange:G,onBlur:G,ref:Ee=>{if(Ee){we(X,ae),me=Be(r,X);const Se=Dn(Ee.value)&&Ee.querySelectorAll&&Ee.querySelectorAll("input,select,textarea")[0]||Ee,je=ste(Se),$e=me._f.refs||[];if(je?$e.find(ot=>ot===Se):Se===me._f.ref)return;Yt(r,X,{_f:{...me._f,...je?{refs:[...$e.filter(Ex),Se,...Array.isArray(Be(i,X))?[{}]:[]],ref:{type:Se.type,name:X}}:{ref:Se}}}),L(X,!1,void 0,Se)}else me=Be(r,X,{}),me._f&&(me._f.mount=!1),(e.shouldUnregister||ae.shouldUnregister)&&!(ete(c.array,X)&&o.action)&&c.unMount.add(X)}}},Le=()=>e.shouldFocusError&&Ud(r,K,c.mount),xe=X=>{Ra(X)&&(y.state.next({disabled:X}),Ud(r,(ae,me)=>{const De=Be(r,me);De&&(ae.disabled=De._f.disabled||X,Array.isArray(De._f.refs)&&De._f.refs.forEach(Ee=>{Ee.disabled=De._f.disabled||X}))},0,!1))},ce=(X,ae)=>async me=>{let De;me&&(me.preventDefault&&me.preventDefault(),me.persist&&me.persist());let Ee=Qn(a);if(y.state.next({isSubmitting:!0}),e.resolver){const{errors:Se,values:je}=await k();n.errors=Se,Ee=Qn(je)}else await O(r);if(c.disabled.size)for(const Se of c.disabled)Cn(Ee,Se);if(Cn(n.errors,"root"),Vr(n.errors)){y.state.next({errors:{}});try{await X(Ee,me)}catch(Se){De=Se}}else ae&&await ae({...n.errors},me),Le(),setTimeout(Le);if(y.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Vr(n.errors)&&!De,submitCount:n.submitCount+1,errors:n.errors}),De)throw De},Pe=(X,ae={})=>{Be(r,X)&&(Dn(ae.defaultValue)?q(X,Qn(Be(i,X))):(q(X,ae.defaultValue),Yt(i,X,Qn(ae.defaultValue))),ae.keepTouched||Cn(n.touchedFields,X),ae.keepDirty||(Cn(n.dirtyFields,X),n.isDirty=ae.defaultValue?$(X,Qn(Be(i,X))):$()),ae.keepError||(Cn(n.errors,X),m.isValid&&T()),y.state.next({...n}))},qe=(X,ae={})=>{const me=X?Qn(X):i,De=Qn(me),Ee=Vr(X),Se=Ee?i:De;if(ae.keepDefaultValues||(i=me),!ae.keepValues){if(ae.keepDirtyValues){const je=new Set([...c.mount,...Object.keys(fd(i,a))]);for(const $e of Array.from(je))Be(n.dirtyFields,$e)?Yt(Se,$e,Be(a,$e)):q($e,Be(Se,$e))}else{if(zE&&Dn(X))for(const je of c.mount){const $e=Be(r,je);if($e&&$e._f){const ot=Array.isArray($e._f.refs)?$e._f.refs[0]:$e._f.ref;if($y(ot)){const Bt=ot.closest("form");if(Bt){Bt.reset();break}}}}if(ae.keepFieldsRef)for(const je of c.mount)q(je,Be(Se,je));else r={}}a=e.shouldUnregister?ae.keepDefaultValues?Qn(i):{}:Qn(Se),y.array.next({values:{...Se}}),y.state.next({values:{...Se}})}c={mount:ae.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!m.isValid||!!ae.keepIsValid||!!ae.keepDirtyValues,o.watch=!!e.shouldUnregister,y.state.next({submitCount:ae.keepSubmitCount?n.submitCount:0,isDirty:Ee?!1:ae.keepDirty?n.isDirty:!!(ae.keepDefaultValues&&!Jo(X,i)),isSubmitted:ae.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:Ee?{}:ae.keepDirtyValues?ae.keepDefaultValues&&a?fd(i,a):n.dirtyFields:ae.keepDefaultValues&&X?fd(i,X):ae.keepDirty?n.dirtyFields:{},touchedFields:ae.keepTouched?n.touchedFields:{},errors:ae.keepErrors?n.errors:{},isSubmitSuccessful:ae.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},Ke=(X,ae)=>qe(ra(X)?X(a):X,ae),kt=(X,ae={})=>{const me=Be(r,X),De=me&&me._f;if(De){const Ee=De.refs?De.refs[0]:De.ref;Ee.focus&&(Ee.focus(),ae.shouldSelect&&ra(Ee.select)&&Ee.select())}},Rt=X=>{n={...n,...X}},Wr={control:{register:we,unregister:Pt,getFieldState:Z,handleSubmit:ce,setError:fe,_subscribe:Ie,_runSchema:k,_focusError:Le,_getWatch:V,_getDirty:$,_setValid:T,_setFieldArray:E,_setDisabledField:Ne,_setErrors:C,_getFieldArray:B,_reset:qe,_resetDefaultValues:()=>ra(e.defaultValues)&&e.defaultValues().then(X=>{Ke(X,e.resetOptions),y.state.next({isLoading:!1})}),_removeUnmounted:U,_disableForm:xe,_subjects:y,_proxyFormState:m,get _fields(){return r},get _formValues(){return a},get _state(){return o},set _state(X){o=X},get _defaultValues(){return i},get _names(){return c},set _names(X){c=X},get _formState(){return n},get _options(){return e},set _options(X){e={...e,...X}}},subscribe:Fe,trigger:oe,register:we,handleSubmit:ce,watch:Ce,setValue:q,getValues:H,reset:Ke,resetField:Pe,clearErrors:te,unregister:Pt,setError:fe,setFocus:kt,getFieldState:Z};return{...Wr,formControl:Wr}}function WE(t={}){const e=fn.useRef(void 0),n=fn.useRef(void 0),[r,i]=fn.useState({isDirty:!1,isValidating:!1,isLoading:ra(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:ra(t.defaultValues)?void 0:t.defaultValues});if(!e.current)if(t.formControl)e.current={...t.formControl,formState:r},t.defaultValues&&!ra(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...c}=vte(t);e.current={...c,formState:r}}const a=e.current.control;return a._options=t,ite(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0});return i(c=>({...c,isReady:!0})),a._formState.isReady=!0,o},[a]),fn.useEffect(()=>a._disableForm(t.disabled),[a,t.disabled]),fn.useEffect(()=>{t.mode&&(a._options.mode=t.mode),t.reValidateMode&&(a._options.reValidateMode=t.reValidateMode)},[a,t.mode,t.reValidateMode]),fn.useEffect(()=>{t.errors&&(a._setErrors(t.errors),a._focusError())},[a,t.errors]),fn.useEffect(()=>{t.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,t.shouldUnregister]),fn.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==r.isDirty&&a._subjects.state.next({isDirty:o})}},[a,r.isDirty]),fn.useEffect(()=>{t.values&&!Jo(t.values,n.current)?(a._reset(t.values,{keepFieldsRef:!0,...a._options.resetOptions}),n.current=t.values,i(o=>({...o}))):a._resetDefaultValues()},[a,t.values]),fn.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),e.current.formState=rte(r,a),e.current}function bte(){const t=wt(),[e,n]=w.useState(""),{register:r,handleSubmit:i}=WE();w.useEffect(()=>{const o=ga(lt,async h=>{if(h)try{const m=await ht(Ae(se,"nguoiDung",h.uid)),p=m.exists()&&m.data()?.vaiTro||"HOC_VIEN";sessionStorage.setItem("session",JSON.stringify({idNguoiDung:h.uid,vaiTro:p}))}catch{}}),c=()=>{JSON.parse(sessionStorage.getItem("session")||"null")?.vaiTro},u=()=>{sessionStorage.removeItem("session")};return window.addEventListener("auth:login",c),window.addEventListener("auth:logout",u),()=>{o&&o(),window.removeEventListener("auth:login",c),window.removeEventListener("auth:logout",u)}},[t]);const a=async o=>{n("");try{const c=await Vq(lt,o.email,o.matkhau);console.log(se);const u=await ht(Ae(se,"nguoiDung",c.user.uid));if(!u.exists())throw new Error("Không tìm thấy hồ sơ người dùng!");const m=u.data()?.vaiTro||"HOC_VIEN",p={idNguoiDung:c.user.uid,vaiTro:m};sessionStorage.setItem("session",JSON.stringify(p)),window.dispatchEvent(new CustomEvent("auth:login",{detail:p})),t(m==="ADMIN"?"/admin":"/trangchu")}catch(c){n(c?.message||"Email hoặc mật khẩu không đúng.")}};return d.jsx("div",{className:"login-container",children:d.jsxs("div",{className:"login-card",children:[d.jsx("div",{className:"login-left",children:d.jsx("img",{src:"/src/assets/image/logo.jpg",alt:"imgloginform"})}),d.jsxs("div",{className:"login-right",children:[d.jsxs("div",{className:"login-tabs",children:[d.jsx("span",{onClick:()=>t("/dang-ky"),style:{cursor:"pointer"},children:"Đăng ký"}),d.jsx("span",{className:"active",style:{cursor:"pointer"},children:"Đăng nhập"})]}),d.jsxs("form",{onSubmit:i(a),className:"login-form",children:[d.jsx("label",{children:"Email"}),d.jsx("input",{type:"text",...r("email")}),d.jsx("label",{children:"Mật khẩu"}),d.jsx("input",{type:"password",...r("matkhau")}),e&&d.jsx("span",{className:"error",children:"email hoặc mật khẩu sai"}),d.jsx("div",{className:"forgot",children:d.jsx(Iv,{to:"/quen-mat-khau",children:"Quên mật khẩu"})}),d.jsx("button",{type:"submit",className:"login-btn submit",children:"Đăng Nhập"})]})]})]})})}const $O=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Be(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},PL=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?$O(r.ref,n,t):r&&r.refs&&r.refs.forEach(i=>$O(i,n,t))}},xte=(t,e)=>{e.shouldUseNativeValidation&&PL(t,e);const n={};for(const r in t){const i=Be(e.fields,r),a=Object.assign(t[r]||{},{ref:i&&i.ref});if(wte(e.names||Object.keys(t),r)){const o=Object.assign({},Be(n,r));Yt(o,"root",a),Yt(n,r,o)}else Yt(n,r,a)}return n},wte=(t,e)=>{const n=FO(e);return t.some(r=>FO(r).match(`^${n}\\.\\d+`))};function FO(t){return t.replace(/\]|\[/g,"")}function RL(t,e,n){return n===void 0&&(n={}),function(r,i,a){try{return Promise.resolve(function(o,c){try{var u=(e?.context,Promise.resolve(t[n.mode==="sync"?"validateSync":"validate"](r,Object.assign({abortEarly:!1},e,{context:i}))).then(function(h){return a.shouldUseNativeValidation&&PL({},a),{values:n.raw?Object.assign({},r):h,errors:{}}}))}catch(h){return c(h)}return u&&u.then?u.then(void 0,c):u}(0,function(o){if(!o.inner)throw o;return{values:{},errors:xte((c=o,u=!a.shouldUseNativeValidation&&a.criteriaMode==="all",(c.inner||[]).reduce(function(h,m){if(h[m.path]||(h[m.path]={message:m.message,type:m.type}),u){var p=h[m.path].types,y=p&&p[m.type];h[m.path]=NL(m.path,u,h,m.type,y?[].concat(y,m.message):m.message)}return h},{})),a)};var c,u}))}catch(o){return Promise.reject(o)}}}var Ax,zO;function _te(){if(zO)return Ax;zO=1;function t(E){this._maxSize=E,this.clear()}t.prototype.clear=function(){this._size=0,this._values=Object.create(null)},t.prototype.get=function(E){return this._values[E]},t.prototype.set=function(E,N){return this._size>=this._maxSize&&this.clear(),E in this._values||this._size++,this._values[E]=N};var e=/[^.^\]^[]+|(?=\[\]|\.\.)/g,n=/^\d+$/,r=/^\d/,i=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,a=/^\s*(['"]?)(.*?)(\1)\s*$/,o=512,c=new t(o),u=new t(o),h=new t(o);Ax={Cache:t,split:p,normalizePath:m,setter:function(E){var N=m(E);return u.get(E)||u.set(E,function(L,D){for(var R=0,k=N.length,I=L;R<k-1;){var O=N[R];if(O==="__proto__"||O==="constructor"||O==="prototype")return L;I=I[N[R++]]}I[N[R]]=D})},getter:function(E,N){var C=m(E);return h.get(E)||h.set(E,function(D){for(var R=0,k=C.length;R<k;)if(D!=null||!N)D=D[C[R++]];else return;return D})},join:function(E){return E.reduce(function(N,C){return N+(b(C)||n.test(C)?"["+C+"]":(N?".":"")+C)},"")},forEach:function(E,N,C){y(Array.isArray(E)?E:p(E),N,C)}};function m(E){return c.get(E)||c.set(E,p(E).map(function(N){return N.replace(a,"$2")}))}function p(E){return E.match(e)||[""]}function y(E,N,C){var L=E.length,D,R,k,I;for(R=0;R<L;R++)D=E[R],D&&(S(D)&&(D='"'+D+'"'),I=b(D),k=!I&&/^\d+$/.test(D),N.call(C,D,I,k,R,E))}function b(E){return typeof E=="string"&&E&&["'",'"'].indexOf(E.charAt(0))!==-1}function _(E){return E.match(r)&&!E.match(n)}function T(E){return i.test(E)}function S(E){return!b(E)&&(_(E)||T(E))}return Ax}var Ec=_te(),Nx,HO;function Ste(){if(HO)return Nx;HO=1;const t=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,e=m=>m.match(t)||[],n=m=>m[0].toUpperCase()+m.slice(1),r=(m,p)=>e(m).join(p).toLowerCase(),i=m=>e(m).reduce((p,y)=>`${p}${p?y[0].toUpperCase()+y.slice(1).toLowerCase():y.toLowerCase()}`,"");return Nx={words:e,upperFirst:n,camelCase:i,pascalCase:m=>n(i(m)),snakeCase:m=>r(m,"_"),kebabCase:m=>r(m,"-"),sentenceCase:m=>n(r(m," ")),titleCase:m=>e(m).map(n).join(" ")},Nx}var Cx=Ste(),Cp={exports:{}},qO;function Tte(){if(qO)return Cp.exports;qO=1,Cp.exports=function(i){return t(e(i),i)},Cp.exports.array=t;function t(i,a){var o=i.length,c=new Array(o),u={},h=o,m=n(a),p=r(i);for(a.forEach(function(b){if(!p.has(b[0])||!p.has(b[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});h--;)u[h]||y(i[h],h,new Set);return c;function y(b,_,T){if(T.has(b)){var S;try{S=", node was:"+JSON.stringify(b)}catch{S=""}throw new Error("Cyclic dependency"+S)}if(!p.has(b))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(b));if(!u[_]){u[_]=!0;var E=m.get(b)||new Set;if(E=Array.from(E),_=E.length){T.add(b);do{var N=E[--_];y(N,p.get(N),T)}while(_);T.delete(b)}c[--o]=b}}}function e(i){for(var a=new Set,o=0,c=i.length;o<c;o++){var u=i[o];a.add(u[0]),a.add(u[1])}return Array.from(a)}function n(i){for(var a=new Map,o=0,c=i.length;o<c;o++){var u=i[o];a.has(u[0])||a.set(u[0],new Set),a.has(u[1])||a.set(u[1],new Set),a.get(u[0]).add(u[1])}return a}function r(i){for(var a=new Map,o=0,c=i.length;o<c;o++)a.set(i[o],o);return a}return Cp.exports}var Ete=Tte();const Ate=zi(Ete),Nte=Object.prototype.toString,Cte=Error.prototype.toString,jte=RegExp.prototype.toString,Dte=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",kte=/^Symbol\((.*)\)(.*)$/;function Ote(t){return t!=+t?"NaN":t===0&&1/t<0?"-0":""+t}function KO(t,e=!1){if(t==null||t===!0||t===!1)return""+t;const n=typeof t;if(n==="number")return Ote(t);if(n==="string")return e?`"${t}"`:t;if(n==="function")return"[Function "+(t.name||"anonymous")+"]";if(n==="symbol")return Dte.call(t).replace(kte,"Symbol($1)");const r=Nte.call(t).slice(8,-1);return r==="Date"?isNaN(t.getTime())?""+t:t.toISOString(t):r==="Error"||t instanceof Error?"["+Cte.call(t)+"]":r==="RegExp"?jte.call(t):null}function ll(t,e){let n=KO(t,e);return n!==null?n:JSON.stringify(t,function(r,i){let a=KO(this[r],e);return a!==null?a:i},2)}function ML(t){return t==null?[]:[].concat(t)}let LL,VL,BL,Ite=/\$\{\s*(\w+)\s*\}/g;LL=Symbol.toStringTag;class GO{constructor(e,n,r,i){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[LL]="Error",this.name="ValidationError",this.value=n,this.path=r,this.type=i,this.errors=[],this.inner=[],ML(e).forEach(a=>{if(jr.isError(a)){this.errors.push(...a.errors);const o=a.inner.length?a.inner:[a];this.inner.push(...o)}else this.errors.push(a)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}VL=Symbol.hasInstance;BL=Symbol.toStringTag;class jr extends Error{static formatError(e,n){const r=n.label||n.path||"this";return n=Object.assign({},n,{path:r,originalPath:n.path}),typeof e=="string"?e.replace(Ite,(i,a)=>ll(n[a])):typeof e=="function"?e(n):e}static isError(e){return e&&e.name==="ValidationError"}constructor(e,n,r,i,a){const o=new GO(e,n,r,i);if(a)return o;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[BL]="Error",this.name=o.name,this.message=o.message,this.type=o.type,this.value=o.value,this.path=o.path,this.errors=o.errors,this.inner=o.inner,Error.captureStackTrace&&Error.captureStackTrace(this,jr)}static[VL](e){return GO[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let Ma={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:t,type:e,value:n,originalValue:r})=>{const i=r!=null&&r!==n?` (cast from the value \`${ll(r,!0)}\`).`:".";return e!=="mixed"?`${t} must be a \`${e}\` type, but the final value was: \`${ll(n,!0)}\``+i:`${t} must match the configured type. The validated value was: \`${ll(n,!0)}\``+i}},Lr={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},Ko={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},yS={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},Pte={isValue:"${path} field must be ${value}"},ly={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},Rte={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},Mte={notType:t=>{const{path:e,value:n,spec:r}=t,i=r.types.length;if(Array.isArray(n)){if(n.length<i)return`${e} tuple value has too few items, expected a length of ${i} but got ${n.length} for value: \`${ll(n,!0)}\``;if(n.length>i)return`${e} tuple value has too many items, expected a length of ${i} but got ${n.length} for value: \`${ll(n,!0)}\``}return jr.formatError(Ma.notType,t)}};Object.assign(Object.create(null),{mixed:Ma,string:Lr,number:Ko,date:yS,object:ly,array:Rte,boolean:Pte,tuple:Mte});const YE=t=>t&&t.__isYupSchema__;class Hy{static fromOptions(e,n){if(!n.then&&!n.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:r,then:i,otherwise:a}=n,o=typeof r=="function"?r:(...c)=>c.every(u=>u===r);return new Hy(e,(c,u)=>{var h;let m=o(...c)?i:a;return(h=m?.(u))!=null?h:u})}constructor(e,n){this.fn=void 0,this.refs=e,this.refs=e,this.fn=n}resolve(e,n){let r=this.refs.map(a=>a.getValue(n?.value,n?.parent,n?.context)),i=this.fn(r,e,n);if(i===void 0||i===e)return e;if(!YE(i))throw new TypeError("conditions must return a schema object");return i.resolve(n)}}const jp={context:"$",value:"."};function UL(t,e){return new El(t,e)}class El{constructor(e,n={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof e!="string")throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),e==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===jp.context,this.isValue=this.key[0]===jp.value,this.isSibling=!this.isContext&&!this.isValue;let r=this.isContext?jp.context:this.isValue?jp.value:"";this.path=this.key.slice(r.length),this.getter=this.path&&Ec.getter(this.path,!0),this.map=n.map}getValue(e,n,r){let i=this.isContext?r:this.isValue?e:n;return this.getter&&(i=this.getter(i||{})),this.map&&(i=this.map(i)),i}cast(e,n){return this.getValue(e,n?.parent,n?.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}El.prototype.__isYupRef=!0;const Ms=t=>t==null;function Hu(t){function e({value:n,path:r="",options:i,originalValue:a,schema:o},c,u){const{name:h,test:m,params:p,message:y,skipAbsent:b}=t;let{parent:_,context:T,abortEarly:S=o.spec.abortEarly,disableStackTrace:E=o.spec.disableStackTrace}=i;const N={value:n,parent:_,context:T};function C($={}){const V=$L(Object.assign({value:n,originalValue:a,label:o.spec.label,path:$.path||r,spec:o.spec,disableStackTrace:$.disableStackTrace||E},p,$.params),N),B=new jr(jr.formatError($.message||y,V),n,V.path,$.type||h,V.disableStackTrace);return B.params=V,B}const L=S?c:u;let D={path:r,parent:_,type:h,from:i.from,createError:C,resolve($){return FL($,N)},options:i,originalValue:a,schema:o};const R=$=>{jr.isError($)?L($):$?u(null):L(C())},k=$=>{jr.isError($)?L($):c($)};if(b&&Ms(n))return R(!0);let O;try{var U;if(O=m.call(D,n,D),typeof((U=O)==null?void 0:U.then)=="function"){if(i.sync)throw new Error(`Validation test of type: "${D.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(O).then(R,k)}}catch($){k($);return}R(O)}return e.OPTIONS=t,e}function $L(t,e){if(!t)return t;for(const n of Object.keys(t))t[n]=FL(t[n],e);return t}function FL(t,e){return El.isRef(t)?t.getValue(e.value,e.parent,e.context):t}function Lte(t,e,n,r=n){let i,a,o;return e?(Ec.forEach(e,(c,u,h)=>{let m=u?c.slice(1,c.length-1):c;t=t.resolve({context:r,parent:i,value:n});let p=t.type==="tuple",y=h?parseInt(m,10):0;if(t.innerType||p){if(p&&!h)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${o}" must contain an index to the tuple element, e.g. "${o}[0]"`);if(n&&y>=n.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${c}, in the path: ${e}. because there is no value at that index. `);i=n,n=n&&n[y],t=p?t.spec.types[y]:t.innerType}if(!h){if(!t.fields||!t.fields[m])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${o} which is a type: "${t.type}")`);i=n,n=n&&n[m],t=t.fields[m]}a=m,o=u?"["+c+"]":"."+c}),{schema:t,parent:i,parentPath:a}):{parent:i,parentPath:e,schema:t}}class qy extends Set{describe(){const e=[];for(const n of this.values())e.push(El.isRef(n)?n.describe():n);return e}resolveAll(e){let n=[];for(const r of this.values())n.push(e(r));return n}clone(){return new qy(this.values())}merge(e,n){const r=this.clone();return e.forEach(i=>r.add(i)),n.forEach(i=>r.delete(i)),r}}function tf(t,e=new Map){if(YE(t)||!t||typeof t!="object")return t;if(e.has(t))return e.get(t);let n;if(t instanceof Date)n=new Date(t.getTime()),e.set(t,n);else if(t instanceof RegExp)n=new RegExp(t),e.set(t,n);else if(Array.isArray(t)){n=new Array(t.length),e.set(t,n);for(let r=0;r<t.length;r++)n[r]=tf(t[r],e)}else if(t instanceof Map){n=new Map,e.set(t,n);for(const[r,i]of t.entries())n.set(r,tf(i,e))}else if(t instanceof Set){n=new Set,e.set(t,n);for(const r of t)n.add(tf(r,e))}else if(t instanceof Object){n={},e.set(t,n);for(const[r,i]of Object.entries(t))n[r]=tf(i,e)}else throw Error(`Unable to clone ${t}`);return n}function Vte(t){if(!(t!=null&&t.length))return;const e=[];let n="",r=!1,i=!1;for(let a=0;a<t.length;a++){const o=t[a];if(o==="["&&!i){n&&(e.push(...n.split(".").filter(Boolean)),n=""),r=!0;continue}if(o==="]"&&!i){n&&(/^\d+$/.test(n)?e.push(n):e.push(n.replace(/^"|"$/g,"")),n=""),r=!1;continue}if(o==='"'){i=!i;continue}if(o==="."&&!r&&!i){n&&(e.push(n),n="");continue}n+=o}return n&&e.push(...n.split(".").filter(Boolean)),e}function Bte(t,e){const n=e?`${e}.${t.path}`:t.path;return t.errors.map(r=>({message:r,path:Vte(n)}))}function zL(t,e){var n;if(!((n=t.inner)!=null&&n.length)&&t.errors.length)return Bte(t,e);const r=e?`${e}.${t.path}`:t.path;return t.inner.flatMap(i=>zL(i,r))}class ua{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new qy,this._blacklist=new qy,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Ma.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},e?.spec),this.withMutation(n=>{n.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const n=Object.create(Object.getPrototypeOf(this));return n.type=this.type,n._typeCheck=this._typeCheck,n._whitelist=this._whitelist.clone(),n._blacklist=this._blacklist.clone(),n.internalTests=Object.assign({},this.internalTests),n.exclusiveTests=Object.assign({},this.exclusiveTests),n.deps=[...this.deps],n.conditions=[...this.conditions],n.tests=[...this.tests],n.transforms=[...this.transforms],n.spec=tf(Object.assign({},this.spec,e)),n}label(e){let n=this.clone();return n.spec.label=e,n}meta(...e){if(e.length===0)return this.spec.meta;let n=this.clone();return n.spec.meta=Object.assign(n.spec.meta||{},e[0]),n}withMutation(e){let n=this._mutate;this._mutate=!0;let r=e(this);return this._mutate=n,r}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let n=this,r=e.clone();const i=Object.assign({},n.spec,r.spec);return r.spec=i,r.internalTests=Object.assign({},n.internalTests,r.internalTests),r._whitelist=n._whitelist.merge(e._whitelist,e._blacklist),r._blacklist=n._blacklist.merge(e._blacklist,e._whitelist),r.tests=n.tests,r.exclusiveTests=n.exclusiveTests,r.withMutation(a=>{e.tests.forEach(o=>{a.test(o.OPTIONS)})}),r.transforms=[...n.transforms,...r.transforms],r}isType(e){return e==null?!!(this.spec.nullable&&e===null||this.spec.optional&&e===void 0):this._typeCheck(e)}resolve(e){let n=this;if(n.conditions.length){let r=n.conditions;n=n.clone(),n.conditions=[],n=r.reduce((i,a)=>a.resolve(i,e),n),n=n.resolve(e)}return n}resolveOptions(e){var n,r,i,a;return Object.assign({},e,{from:e.from||[],strict:(n=e.strict)!=null?n:this.spec.strict,abortEarly:(r=e.abortEarly)!=null?r:this.spec.abortEarly,recursive:(i=e.recursive)!=null?i:this.spec.recursive,disableStackTrace:(a=e.disableStackTrace)!=null?a:this.spec.disableStackTrace})}cast(e,n={}){let r=this.resolve(Object.assign({value:e},n)),i=n.assert==="ignore-optionality",a=r._cast(e,n);if(n.assert!==!1&&!r.isType(a)){if(i&&Ms(a))return a;let o=ll(e),c=ll(a);throw new TypeError(`The value of ${n.path||"field"} could not be cast to a value that satisfies the schema type: "${r.type}". 

attempted value: ${o} 
`+(c!==o?`result of cast: ${c}`:""))}return a}_cast(e,n){let r=e===void 0?e:this.transforms.reduce((i,a)=>a.call(this,i,e,this),e);return r===void 0&&(r=this.getDefault(n)),r}_validate(e,n={},r,i){let{path:a,originalValue:o=e,strict:c=this.spec.strict}=n,u=e;c||(u=this._cast(u,Object.assign({assert:!1},n)));let h=[];for(let m of Object.values(this.internalTests))m&&h.push(m);this.runTests({path:a,value:u,originalValue:o,options:n,tests:h},r,m=>{if(m.length)return i(m,u);this.runTests({path:a,value:u,originalValue:o,options:n,tests:this.tests},r,i)})}runTests(e,n,r){let i=!1,{tests:a,value:o,originalValue:c,path:u,options:h}=e,m=T=>{i||(i=!0,n(T,o))},p=T=>{i||(i=!0,r(T,o))},y=a.length,b=[];if(!y)return p([]);let _={value:o,originalValue:c,path:u,options:h,schema:this};for(let T=0;T<a.length;T++){const S=a[T];S(_,m,function(N){N&&(Array.isArray(N)?b.push(...N):b.push(N)),--y<=0&&p(b)})}}asNestedTest({key:e,index:n,parent:r,parentPath:i,originalParent:a,options:o}){const c=e??n;if(c==null)throw TypeError("Must include `key` or `index` for nested validations");const u=typeof c=="number";let h=r[c];const m=Object.assign({},o,{strict:!0,parent:r,value:h,originalValue:a[c],key:void 0,[u?"index":"key"]:c,path:u||c.includes(".")?`${i||""}[${u?c:`"${c}"`}]`:(i?`${i}.`:"")+e});return(p,y,b)=>this.resolve(m)._validate(h,m,y,b)}validate(e,n){var r;let i=this.resolve(Object.assign({},n,{value:e})),a=(r=n?.disableStackTrace)!=null?r:i.spec.disableStackTrace;return new Promise((o,c)=>i._validate(e,n,(u,h)=>{jr.isError(u)&&(u.value=h),c(u)},(u,h)=>{u.length?c(new jr(u,h,void 0,void 0,a)):o(h)}))}validateSync(e,n){var r;let i=this.resolve(Object.assign({},n,{value:e})),a,o=(r=n?.disableStackTrace)!=null?r:i.spec.disableStackTrace;return i._validate(e,Object.assign({},n,{sync:!0}),(c,u)=>{throw jr.isError(c)&&(c.value=u),c},(c,u)=>{if(c.length)throw new jr(c,e,void 0,void 0,o);a=u}),a}isValid(e,n){return this.validate(e,n).then(()=>!0,r=>{if(jr.isError(r))return!1;throw r})}isValidSync(e,n){try{return this.validateSync(e,n),!0}catch(r){if(jr.isError(r))return!1;throw r}}_getDefault(e){let n=this.spec.default;return n==null?n:typeof n=="function"?n.call(this,e):tf(n)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){return arguments.length===0?this._getDefault():this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,n){const r=this.clone({nullable:e});return r.internalTests.nullable=Hu({message:n,name:"nullable",test(i){return i===null?this.schema.spec.nullable:!0}}),r}optionality(e,n){const r=this.clone({optional:e});return r.internalTests.optionality=Hu({message:n,name:"optionality",test(i){return i===void 0?this.schema.spec.optional:!0}}),r}optional(){return this.optionality(!0)}defined(e=Ma.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=Ma.notNull){return this.nullability(!1,e)}required(e=Ma.required){return this.clone().withMutation(n=>n.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let n=this.clone();return n.transforms.push(e),n}test(...e){let n;if(e.length===1?typeof e[0]=="function"?n={test:e[0]}:n=e[0]:e.length===2?n={name:e[0],test:e[1]}:n={name:e[0],message:e[1],test:e[2]},n.message===void 0&&(n.message=Ma.default),typeof n.test!="function")throw new TypeError("`test` is a required parameters");let r=this.clone(),i=Hu(n),a=n.exclusive||n.name&&r.exclusiveTests[n.name]===!0;if(n.exclusive&&!n.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return n.name&&(r.exclusiveTests[n.name]=!!n.exclusive),r.tests=r.tests.filter(o=>!(o.OPTIONS.name===n.name&&(a||o.OPTIONS.test===i.OPTIONS.test))),r.tests.push(i),r}when(e,n){!Array.isArray(e)&&typeof e!="string"&&(n=e,e=".");let r=this.clone(),i=ML(e).map(a=>new El(a));return i.forEach(a=>{a.isSibling&&r.deps.push(a.key)}),r.conditions.push(typeof n=="function"?new Hy(i,n):Hy.fromOptions(i,n)),r}typeError(e){let n=this.clone();return n.internalTests.typeError=Hu({message:e,name:"typeError",skipAbsent:!0,test(r){return this.schema._typeCheck(r)?!0:this.createError({params:{type:this.schema.type}})}}),n}oneOf(e,n=Ma.oneOf){let r=this.clone();return e.forEach(i=>{r._whitelist.add(i),r._blacklist.delete(i)}),r.internalTests.whiteList=Hu({message:n,name:"oneOf",skipAbsent:!0,test(i){let a=this.schema._whitelist,o=a.resolveAll(this.resolve);return o.includes(i)?!0:this.createError({params:{values:Array.from(a).join(", "),resolved:o}})}}),r}notOneOf(e,n=Ma.notOneOf){let r=this.clone();return e.forEach(i=>{r._blacklist.add(i),r._whitelist.delete(i)}),r.internalTests.blacklist=Hu({message:n,name:"notOneOf",test(i){let a=this.schema._blacklist,o=a.resolveAll(this.resolve);return o.includes(i)?this.createError({params:{values:Array.from(a).join(", "),resolved:o}}):!0}}),r}strip(e=!0){let n=this.clone();return n.spec.strip=e,n}describe(e){const n=(e?this.resolve(e):this).clone(),{label:r,meta:i,optional:a,nullable:o}=n.spec;return{meta:i,label:r,optional:a,nullable:o,default:n.getDefault(e),type:n.type,oneOf:n._whitelist.describe(),notOneOf:n._blacklist.describe(),tests:n.tests.filter((u,h,m)=>m.findIndex(p=>p.OPTIONS.name===u.OPTIONS.name)===h).map(u=>{const h=u.OPTIONS.params&&e?$L(Object.assign({},u.OPTIONS.params),e):u.OPTIONS.params;return{name:u.OPTIONS.name,params:h}})}}get"~standard"(){const e=this;return{version:1,vendor:"yup",async validate(r){try{return{value:await e.validate(r,{abortEarly:!1})}}catch(i){if(i instanceof jr)return{issues:zL(i)};throw i}}}}}ua.prototype.__isYupSchema__=!0;for(const t of["validate","validateSync"])ua.prototype[`${t}At`]=function(e,n,r={}){const{parent:i,parentPath:a,schema:o}=Lte(this,e,n,r.context);return o[t](i&&i[a],Object.assign({},r,{parent:i,path:e}))};for(const t of["equals","is"])ua.prototype[t]=ua.prototype.oneOf;for(const t of["not","nope"])ua.prototype[t]=ua.prototype.notOneOf;const Ute=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function $te(t){const e=vS(t);if(!e)return Date.parse?Date.parse(t):Number.NaN;if(e.z===void 0&&e.plusMinus===void 0)return new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond).valueOf();let n=0;return e.z!=="Z"&&e.plusMinus!==void 0&&(n=e.hourOffset*60+e.minuteOffset,e.plusMinus==="+"&&(n=0-n)),Date.UTC(e.year,e.month,e.day,e.hour,e.minute+n,e.second,e.millisecond)}function vS(t){var e,n;const r=Ute.exec(t);return r?{year:ks(r[1]),month:ks(r[2],1)-1,day:ks(r[3],1),hour:ks(r[4]),minute:ks(r[5]),second:ks(r[6]),millisecond:r[7]?ks(r[7].substring(0,3)):0,precision:(e=(n=r[7])==null?void 0:n.length)!=null?e:void 0,z:r[8]||void 0,plusMinus:r[9]||void 0,hourOffset:ks(r[10]),minuteOffset:ks(r[11])}:null}function ks(t,e=0){return Number(t)||e}let Fte=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,zte=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,Hte=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,qte="^\\d{4}-\\d{2}-\\d{2}",Kte="\\d{2}:\\d{2}:\\d{2}",Gte="(([+-]\\d{2}(:?\\d{2})?)|Z)",Wte=new RegExp(`${qte}T${Kte}(\\.\\d+)?${Gte}$`),Yte=t=>Ms(t)||t===t.trim(),Xte={}.toString();function Nt(){return new HL}class HL extends ua{constructor(){super({type:"string",check(e){return e instanceof String&&(e=e.valueOf()),typeof e=="string"}}),this.withMutation(()=>{this.transform((e,n,r)=>{if(!r.spec.coerce||r.isType(e)||Array.isArray(e))return e;const i=e!=null&&e.toString?e.toString():e;return i===Xte?e:i})})}required(e){return super.required(e).withMutation(n=>n.test({message:e||Ma.required,name:"required",skipAbsent:!0,test:r=>!!r.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(n=>n.OPTIONS.name!=="required"),e))}length(e,n=Lr.length){return this.test({message:n,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(r){return r.length===this.resolve(e)}})}min(e,n=Lr.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r.length>=this.resolve(e)}})}max(e,n=Lr.max){return this.test({name:"max",exclusive:!0,message:n,params:{max:e},skipAbsent:!0,test(r){return r.length<=this.resolve(e)}})}matches(e,n){let r=!1,i,a;return n&&(typeof n=="object"?{excludeEmptyString:r=!1,message:i,name:a}=n:i=n),this.test({name:a||"matches",message:i||Lr.matches,params:{regex:e},skipAbsent:!0,test:o=>o===""&&r||o.search(e)!==-1})}email(e=Lr.email){return this.matches(Fte,{name:"email",message:e,excludeEmptyString:!0})}url(e=Lr.url){return this.matches(zte,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=Lr.uuid){return this.matches(Hte,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let n="",r,i;return e&&(typeof e=="object"?{message:n="",allowOffset:r=!1,precision:i=void 0}=e:n=e),this.matches(Wte,{name:"datetime",message:n||Lr.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:n||Lr.datetime_offset,params:{allowOffset:r},skipAbsent:!0,test:a=>{if(!a||r)return!0;const o=vS(a);return o?!!o.z:!1}}).test({name:"datetime_precision",message:n||Lr.datetime_precision,params:{precision:i},skipAbsent:!0,test:a=>{if(!a||i==null)return!0;const o=vS(a);return o?o.precision===i:!1}})}ensure(){return this.default("").transform(e=>e===null?"":e)}trim(e=Lr.trim){return this.transform(n=>n!=null?n.trim():n).test({message:e,name:"trim",test:Yte})}lowercase(e=Lr.lowercase){return this.transform(n=>Ms(n)?n:n.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>Ms(n)||n===n.toLowerCase()})}uppercase(e=Lr.uppercase){return this.transform(n=>Ms(n)?n:n.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:n=>Ms(n)||n===n.toUpperCase()})}}Nt.prototype=HL.prototype;let Qte=t=>t!=+t;function XE(){return new qL}class qL extends ua{constructor(){super({type:"number",check(e){return e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&!Qte(e)}}),this.withMutation(()=>{this.transform((e,n,r)=>{if(!r.spec.coerce)return e;let i=e;if(typeof i=="string"){if(i=i.replace(/\s/g,""),i==="")return NaN;i=+i}return r.isType(i)||i===null?i:parseFloat(i)})})}min(e,n=Ko.min){return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(r){return r>=this.resolve(e)}})}max(e,n=Ko.max){return this.test({message:n,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(r){return r<=this.resolve(e)}})}lessThan(e,n=Ko.lessThan){return this.test({message:n,name:"max",exclusive:!0,params:{less:e},skipAbsent:!0,test(r){return r<this.resolve(e)}})}moreThan(e,n=Ko.moreThan){return this.test({message:n,name:"min",exclusive:!0,params:{more:e},skipAbsent:!0,test(r){return r>this.resolve(e)}})}positive(e=Ko.positive){return this.moreThan(0,e)}negative(e=Ko.negative){return this.lessThan(0,e)}integer(e=Ko.integer){return this.test({name:"integer",message:e,skipAbsent:!0,test:n=>Number.isInteger(n)})}truncate(){return this.transform(e=>Ms(e)?e:e|0)}round(e){var n;let r=["ceil","floor","round","trunc"];if(e=((n=e)==null?void 0:n.toLowerCase())||"round",e==="trunc")return this.truncate();if(r.indexOf(e.toLowerCase())===-1)throw new TypeError("Only valid options for round() are: "+r.join(", "));return this.transform(i=>Ms(i)?i:Math[e](i))}}XE.prototype=qL.prototype;let Zte=new Date(""),Jte=t=>Object.prototype.toString.call(t)==="[object Date]";class QE extends ua{constructor(){super({type:"date",check(e){return Jte(e)&&!isNaN(e.getTime())}}),this.withMutation(()=>{this.transform((e,n,r)=>!r.spec.coerce||r.isType(e)||e===null?e:(e=$te(e),isNaN(e)?QE.INVALID_DATE:new Date(e)))})}prepareParam(e,n){let r;if(El.isRef(e))r=e;else{let i=this.cast(e);if(!this._typeCheck(i))throw new TypeError(`\`${n}\` must be a Date or a value that can be \`cast()\` to a Date`);r=i}return r}min(e,n=yS.min){let r=this.prepareParam(e,"min");return this.test({message:n,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(i){return i>=this.resolve(r)}})}max(e,n=yS.max){let r=this.prepareParam(e,"max");return this.test({message:n,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(i){return i<=this.resolve(r)}})}}QE.INVALID_DATE=Zte;function ene(t,e=[]){let n=[],r=new Set,i=new Set(e.map(([o,c])=>`${o}-${c}`));function a(o,c){let u=Ec.split(o)[0];r.add(u),i.has(`${c}-${u}`)||n.push([c,u])}for(const o of Object.keys(t)){let c=t[o];r.add(o),El.isRef(c)&&c.isSibling?a(c.path,o):YE(c)&&"deps"in c&&c.deps.forEach(u=>a(u,o))}return Ate.array(Array.from(r),n).reverse()}function WO(t,e){let n=1/0;return t.some((r,i)=>{var a;if((a=e.path)!=null&&a.includes(r))return n=i,!0}),n}function KL(t){return(e,n)=>WO(t,e)-WO(t,n)}const tne=(t,e,n)=>{if(typeof t!="string")return t;let r=t;try{r=JSON.parse(t)}catch{}return n.isType(r)?r:t};function cy(t){if("fields"in t){const e={};for(const[n,r]of Object.entries(t.fields))e[n]=cy(r);return t.setFields(e)}if(t.type==="array"){const e=t.optional();return e.innerType&&(e.innerType=cy(e.innerType)),e}return t.type==="tuple"?t.optional().clone({types:t.spec.types.map(cy)}):"optional"in t?t.optional():t}const nne=(t,e)=>{const n=[...Ec.normalizePath(e)];if(n.length===1)return n[0]in t;let r=n.pop(),i=Ec.getter(Ec.join(n),!0)(t);return!!(i&&r in i)};let YO=t=>Object.prototype.toString.call(t)==="[object Object]";function XO(t,e){let n=Object.keys(t.fields);return Object.keys(e).filter(r=>n.indexOf(r)===-1)}const rne=KL([]);function pa(t){return new GL(t)}class GL extends ua{constructor(e){super({type:"object",check(n){return YO(n)||typeof n=="function"}}),this.fields=Object.create(null),this._sortErrors=rne,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,n={}){var r;let i=super._cast(e,n);if(i===void 0)return this.getDefault(n);if(!this._typeCheck(i))return i;let a=this.fields,o=(r=n.stripUnknown)!=null?r:this.spec.noUnknown,c=[].concat(this._nodes,Object.keys(i).filter(p=>!this._nodes.includes(p))),u={},h=Object.assign({},n,{parent:u,__validating:n.__validating||!1}),m=!1;for(const p of c){let y=a[p],b=p in i;if(y){let _,T=i[p];h.path=(n.path?`${n.path}.`:"")+p,y=y.resolve({value:T,context:n.context,parent:u});let S=y instanceof ua?y.spec:void 0,E=S?.strict;if(S!=null&&S.strip){m=m||p in i;continue}_=!n.__validating||!E?y.cast(i[p],h):i[p],_!==void 0&&(u[p]=_)}else b&&!o&&(u[p]=i[p]);(b!==p in u||u[p]!==i[p])&&(m=!0)}return m?u:i}_validate(e,n={},r,i){let{from:a=[],originalValue:o=e,recursive:c=this.spec.recursive}=n;n.from=[{schema:this,value:o},...a],n.__validating=!0,n.originalValue=o,super._validate(e,n,r,(u,h)=>{if(!c||!YO(h)){i(u,h);return}o=o||h;let m=[];for(let p of this._nodes){let y=this.fields[p];!y||El.isRef(y)||m.push(y.asNestedTest({options:n,key:p,parent:h,parentPath:n.path,originalParent:o}))}this.runTests({tests:m,value:h,originalValue:o,options:n},r,p=>{i(p.sort(this._sortErrors).concat(u),h)})})}clone(e){const n=super.clone(e);return n.fields=Object.assign({},this.fields),n._nodes=this._nodes,n._excludedEdges=this._excludedEdges,n._sortErrors=this._sortErrors,n}concat(e){let n=super.concat(e),r=n.fields;for(let[i,a]of Object.entries(this.fields)){const o=r[i];r[i]=o===void 0?a:o}return n.withMutation(i=>i.setFields(r,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let n={};return this._nodes.forEach(r=>{var i;const a=this.fields[r];let o=e;(i=o)!=null&&i.value&&(o=Object.assign({},o,{parent:o.value,value:o.value[r]})),n[r]=a&&"getDefault"in a?a.getDefault(o):void 0}),n}setFields(e,n){let r=this.clone();return r.fields=e,r._nodes=ene(e,n),r._sortErrors=KL(Object.keys(e)),n&&(r._excludedEdges=n),r}shape(e,n=[]){return this.clone().withMutation(r=>{let i=r._excludedEdges;return n.length&&(Array.isArray(n[0])||(n=[n]),i=[...r._excludedEdges,...n]),r.setFields(Object.assign(r.fields,e),i)})}partial(){const e={};for(const[n,r]of Object.entries(this.fields))e[n]="optional"in r&&r.optional instanceof Function?r.optional():r;return this.setFields(e)}deepPartial(){return cy(this)}pick(e){const n={};for(const r of e)this.fields[r]&&(n[r]=this.fields[r]);return this.setFields(n,this._excludedEdges.filter(([r,i])=>e.includes(r)&&e.includes(i)))}omit(e){const n=[];for(const r of Object.keys(this.fields))e.includes(r)||n.push(r);return this.pick(n)}from(e,n,r){let i=Ec.getter(e,!0);return this.transform(a=>{if(!a)return a;let o=a;return nne(a,e)&&(o=Object.assign({},a),r||delete o[e],o[n]=i(a)),o})}json(){return this.transform(tne)}exact(e){return this.test({name:"exact",exclusive:!0,message:e||ly.exact,test(n){if(n==null)return!0;const r=XO(this.schema,n);return r.length===0||this.createError({params:{properties:r.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(e=!0,n=ly.noUnknown){typeof e!="boolean"&&(n=e,e=!0);let r=this.test({name:"noUnknown",exclusive:!0,message:n,test(i){if(i==null)return!0;const a=XO(this.schema,i);return!e||a.length===0||this.createError({params:{unknown:a.join(", ")}})}});return r.spec.noUnknown=e,r}unknown(e=!0,n=ly.noUnknown){return this.noUnknown(!e,n)}transformKeys(e){return this.transform(n=>{if(!n)return n;const r={};for(const i of Object.keys(n))r[e(i)]=n[i];return r})}camelCase(){return this.transformKeys(Cx.camelCase)}snakeCase(){return this.transformKeys(Cx.snakeCase)}constantCase(){return this.transformKeys(e=>Cx.snakeCase(e).toUpperCase())}describe(e){const n=(e?this.resolve(e):this).clone(),r=super.describe(e);r.fields={};for(const[a,o]of Object.entries(n.fields)){var i;let c=e;(i=c)!=null&&i.value&&(c=Object.assign({},c,{parent:c.value,value:c.value[a]})),r.fields[a]=o.describe(c)}return r}}pa.prototype=GL.prototype;const ine=pa({email:Nt().email("Email không hợp lệ").required("Vui lòng nhập email"),username:Nt().required("Vui lòng nhập tên người dùng"),role:Nt().oneOf(["hocvien","giangvien"],"Vui lòng chọn vai trò").required(),password:Nt().min(6,"Mật khẩu tối thiểu 6 ký tự").required(),passwordConfirm:Nt().oneOf([UL("password")],"Mật khẩu không khớp").required()}),ane={giangvien:"GIANG_VIEN",hocvien:"HOC_VIEN"};function sne(){const{register:t,handleSubmit:e,formState:{errors:n}}=WE({resolver:RL(ine)}),[r,i]=w.useState(!1),a=wt(),o=async c=>{i(!0);try{const u=await Lq(lt,c.email,c.password);await Uq(u.user,{displayName:c.username});const h=u.user.uid;await hi(Ae(se,"nguoiDung",h),{idNguoiDung:h,email:c.email,tenNguoiDung:c.username,hoten:"",anhDaiDien:"",vaiTro:ane[c.role],ngayTaoTaiKhoan:jt()}),await hi(Ae(se,"vi",h),{idVi:h,idNguoiDung:h,soDu:0,ngayTao:jt(),ngayCapNhat:jt()}),alert("Đăng ký thành công!"),a("/dang-nhap")}catch(u){const h=u?.code||"";let m=u?.message||"Đăng ký thất bại!";h==="auth/email-already-in-use"?m="Email đã được sử dụng.":h==="auth/invalid-email"?m="Email không hợp lệ.":h==="auth/weak-password"&&(m="Mật khẩu quá yếu."),alert(m)}finally{i(!1)}};return d.jsx("div",{className:"signup-container",children:d.jsxs("div",{className:"signup-card",children:[d.jsx("div",{className:"signup-left",children:d.jsx("img",{src:"/src/assets/image/logo.jpg",alt:"imgsignupform"})}),d.jsxs("div",{className:"signup-right",children:[d.jsxs("div",{className:"signup-tabs",children:[d.jsx("span",{className:"active",onClick:()=>a("/dang-ky"),style:{cursor:"pointer"},children:"Đăng ký"}),d.jsx("span",{onClick:()=>a("/dang-nhap"),style:{cursor:"pointer"},children:"Đăng nhập"})]}),d.jsxs("form",{onSubmit:e(o),className:"signup-form",children:[d.jsx("label",{children:"Email"}),d.jsx("input",{type:"text",...t("email"),className:n.email?"error":""}),n.email&&d.jsx("span",{className:"error",children:n.email.message}),d.jsx("label",{children:"Tên người dùng"}),d.jsx("input",{type:"text",...t("username"),className:n.username?"error":""}),n.username&&d.jsx("span",{className:"error",children:n.username.message}),d.jsx("label",{children:"Vai trò"}),d.jsxs("select",{...t("role"),className:n.role?"error":"",children:[d.jsx("option",{value:"",children:"-- Chọn vai trò --"}),d.jsx("option",{value:"giangvien",children:"Giảng viên"}),d.jsx("option",{value:"hocvien",children:"Học viên"})]}),n.role&&d.jsx("span",{className:"error",children:n.role.message}),d.jsx("label",{children:"Mật khẩu"}),d.jsx("input",{type:"password",...t("password"),className:n.password?"error":""}),n.password&&d.jsx("span",{className:"error",children:n.password.message}),d.jsx("label",{children:"Nhập lại mật khẩu"}),d.jsx("input",{type:"password",...t("passwordConfirm"),className:n.passwordConfirm?"error":""}),n.passwordConfirm&&d.jsx("span",{className:"error",children:n.passwordConfirm.message}),d.jsx("button",{type:"submit",className:"signup-btn submit",disabled:r,children:r?"Đang đăng ký...":"Đăng Ký"})]})]})]})})}const one=pa({email:Nt().email("Email không hợp lệ").required("Vui lòng nhập email")}),lne=pa({matkhau:Nt().min(6,"Mật khẩu tối thiểu 6 ký tự").required("Vui lòng nhập mật khẩu mới"),xacNhanMatKhau:Nt().oneOf([UL("matkhau")],"Mật khẩu xác nhận không khớp").required("Vui lòng xác nhận mật khẩu")});function cne(){const t=wt(),[e]=FF(),n=e.get("oobCode"),i=e.get("mode")==="resetPassword"&&!!n,[a,o]=w.useState(i),[c,u]=w.useState(""),[h,m]=w.useState(""),[p,y]=w.useState(!1),[b,_]=w.useState(!1),T=w.useMemo(()=>RL(i?lne:one),[i]),{register:S,handleSubmit:E,formState:{errors:N}}=WE({resolver:T});w.useEffect(()=>{let L=!0;return(async()=>{if(i)try{await Mq(lt,n),L&&(o(!1),u(""))}catch{L&&(o(!1),u("Liên kết đặt lại mật khẩu không hợp lệ hoặc đã hết hạn."))}})(),()=>L=!1},[i,n]);const C=async L=>{m("");try{if(!i){await Iq(lt,L.email.trim()),y(!0);return}await Pq(lt,n,L.matkhau),_(!0)}catch(D){m(D?.message||"Có lỗi xảy ra, vui lòng thử lại sau.")}};return p&&!i?d.jsx("div",{className:"login-container",children:d.jsxs("div",{className:"login-card",children:[d.jsx("div",{className:"login-left",children:d.jsx("img",{src:"/src/assets/image/logo.jpg",alt:"imgloginform"})}),d.jsx("div",{className:"login-right",children:d.jsxs("div",{className:"success-message",children:[d.jsx("div",{className:"success-icon",children:"✓"}),d.jsx("h2",{children:"Đã gửi email đặt lại mật khẩu!"}),d.jsx("p",{children:"Vui lòng kiểm tra hộp thư của bạn và làm theo hướng dẫn trong email."}),d.jsx("button",{onClick:()=>t("/dang-nhap"),className:"login-btn submit",children:"Về trang đăng nhập"})]})})]})}):b&&i?d.jsx("div",{className:"login-container",children:d.jsxs("div",{className:"login-card",children:[d.jsx("div",{className:"login-left",children:d.jsx("img",{src:"/src/assets/image/logo.jpg",alt:"imgloginform"})}),d.jsx("div",{className:"login-right",children:d.jsxs("div",{className:"success-message",children:[d.jsx("div",{className:"success-icon",children:"✓"}),d.jsx("h2",{children:"Đặt lại mật khẩu thành công!"}),d.jsx("p",{children:"Bây giờ bạn có thể đăng nhập với mật khẩu mới."}),d.jsx("button",{onClick:()=>t("/dang-nhap"),className:"login-btn submit",children:"Đăng nhập ngay"})]})})]})}):i&&c?d.jsx("div",{className:"login-container",children:d.jsxs("div",{className:"login-card",children:[d.jsx("div",{className:"login-left",children:d.jsx("img",{src:"/src/assets/image/logo.jpg",alt:"imgloginform"})}),d.jsx("div",{className:"login-right",children:d.jsxs("div",{className:"error-message",children:[d.jsx("h2",{children:"Liên kết không hợp lệ"}),d.jsx("p",{children:c}),d.jsx("button",{onClick:()=>t("/quen-mat-khau"),className:"login-btn submit",children:"Gửi lại email đặt lại"})]})})]})}):d.jsx("div",{className:"login-container",children:d.jsxs("div",{className:"login-card",children:[d.jsx("div",{className:"login-left",children:d.jsx("img",{src:"/src/assets/image/logo.jpg",alt:"imgloginform"})}),d.jsxs("div",{className:"login-right",children:[d.jsxs("div",{className:"login-tabs",children:[d.jsx("span",{onClick:()=>t("/dang-ky"),style:{cursor:"pointer"},children:"Đăng ký"}),d.jsx("span",{onClick:()=>t("/dang-nhap"),style:{cursor:"pointer"},children:"Đăng nhập"}),d.jsx("span",{className:"active",children:"Quên mật khẩu"})]}),d.jsxs("div",{className:"forgot-password-info",children:[d.jsx("h2",{children:i?"Nhập mật khẩu mới":"Quên mật khẩu?"}),d.jsx("p",{children:i?"Vui lòng nhập mật khẩu mới cho tài khoản của bạn.":"Nhập địa chỉ email để nhận liên kết đặt lại mật khẩu."})]}),i&&a?d.jsx("div",{style:{padding:12},children:"Đang kiểm tra liên kết…"}):d.jsxs("form",{onSubmit:E(C),className:"login-form",children:[!i&&d.jsxs(d.Fragment,{children:[d.jsx("label",{children:"Email"}),d.jsx("input",{type:"text",...S("email"),className:N.email?"error":"",placeholder:"Nhập email của bạn"}),N.email&&d.jsx("span",{className:"error",children:N.email.message})]}),i&&d.jsxs(d.Fragment,{children:[d.jsx("label",{children:"Mật khẩu mới"}),d.jsx("input",{type:"password",...S("matkhau"),className:N.matkhau?"error":"",placeholder:"Nhập mật khẩu mới"}),N.matkhau&&d.jsx("span",{className:"error",children:N.matkhau.message}),d.jsx("label",{children:"Xác nhận mật khẩu"}),d.jsx("input",{type:"password",...S("xacNhanMatKhau"),className:N.xacNhanMatKhau?"error":"",placeholder:"Nhập lại mật khẩu mới"}),N.xacNhanMatKhau&&d.jsx("span",{className:"error",children:N.xacNhanMatKhau.message})]}),h&&d.jsx("span",{className:"error",children:h}),d.jsx("button",{type:"submit",className:"login-btn submit",children:i?"Đặt lại mật khẩu":"Gửi email đặt lại"})]}),!i&&d.jsx("div",{className:"back-to-login",children:d.jsx("a",{onClick:()=>t("/dang-nhap"),style:{cursor:"pointer"},children:"← Quay lại đăng nhập"})})]})]})})}const une=async t=>{const e="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",n=`
Phân tích dữ liệu thống kê của ứng dụng học từ vựng và đưa ra insights chi tiết:

DỮ LIỆU HIỆN TẠI:
- Tổng người dùng: ${t.users.length}
- Tổng khóa học: ${t.classes.length} 
- Tổng bộ thẻ: ${t.cards.length}
- Doanh thu tháng này: ${t.revenue.monthRevenue?.toLocaleString("vi-VN")} VNĐ
- Doanh thu tổng: ${t.revenue.total?.toLocaleString("vi-VN")} VNĐ

THỐNG KÊ CHI TIẾT:
${JSON.stringify(t.userStats,null,2)}

PHÂN TÍCH DOANH THU THEO THÁNG:
${JSON.stringify(t.revenue.byMonth,null,2)}

Trả về kết quả bằng tiếng Việt, ngắn gọn nhưng chi tiết và chuyên nghiệp.
`;try{const r=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({model:"deepseek/deepseek-r1:free",temperature:.3,messages:[{role:"user",content:n}]})});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return((await r.json())?.choices?.[0]?.message?.content||"").replace(/<think>[\s\S]*?<\/think>/g,"").trim()}catch(r){throw console.error("Lỗi khi phân tích AI:",r),r}};function fne({users:t=[],classes:e=[],cards:n=[],userStats:r=[],revenue:i={}}){const[a,o]=w.useState(""),[c,u]=w.useState(!1),[h,m]=w.useState(""),[p,y]=w.useState(null),b=w.useMemo(()=>({users:t,classes:e,cards:n,userStats:r,revenue:i}),[t,e,n,r,i]),_=async()=>{u(!0),m("");try{const E=await une(b);o(E),y(new Date)}catch(E){console.error("Lỗi phân tích AI:",E),m("Không thể kết nối AI. Vui lòng kiểm tra API key hoặc thử lại sau.")}finally{u(!1)}},T=()=>{(t.length>0||e.length>0||n.length>0)&&_()},S=w.useMemo(()=>{const E=t.length,N=e.length,C=n.length,L=i.monthRevenue||0,D=i.total||0,R=[];return E>0&&R.push(`📊 Hiện có ${E} người dùng đang hoạt động`),N>0&&R.push(`🎓 Có ${N} khóa học được tạo`),C>0&&R.push(`📝 Tổng cộng ${C} bộ thẻ học tập`),L>0&&R.push(`💰 Doanh thu tháng: ${L.toLocaleString("vi-VN")} VNĐ`),D>0&&R.push(`💎 Tổng doanh thu: ${D.toLocaleString("vi-VN")} VNĐ`),R.join(`
`)},[t,e,n,i]);return d.jsxs("div",{style:{background:"#fff",borderRadius:12,padding:20,boxShadow:"0 4px 12px rgba(0,0,0,0.1)",border:"1px solid #e1e5e9",minHeight:"200px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx(CX,{style:{color:"#f59e0b",fontSize:20}}),d.jsx("h3",{style:{margin:0,color:"#1f2937",fontSize:18,fontWeight:600},children:"Phân tích dự án hiện tại"})]}),d.jsx("button",{onClick:T,disabled:c,style:{background:"#3b82f6",color:"white",border:"none",borderRadius:6,padding:"8px 12px",fontSize:14,cursor:c?"not-allowed":"pointer",opacity:c?.6:1,display:"flex",alignItems:"center",gap:6},children:c?d.jsxs(d.Fragment,{children:[d.jsx(Sf,{style:{animation:"spin 1s linear infinite"}}),"Đang phân tích..."]}):d.jsxs(d.Fragment,{children:[d.jsx(jE,{}),"Phân tích"]})})]}),h&&d.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:6,padding:12,marginBottom:16,color:"#dc2626",fontSize:14},children:["⚠️ ",h]}),c?d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"40px 20px",color:"#6b7280"},children:[d.jsx(Sf,{style:{animation:"spin 1s linear infinite",marginRight:12,fontSize:20}}),"AI đang phân tích dữ liệu..."]}):a?d.jsxs("div",{children:[d.jsx("div",{style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:8,padding:16,lineHeight:1.6,fontSize:14,color:"#374151",whiteSpace:"pre-wrap"},children:a}),p&&d.jsxs("div",{style:{marginTop:12,fontSize:12,color:"#6b7280",textAlign:"right"},children:["Cập nhật lúc: ",p.toLocaleString("vi-VN")]})]}):d.jsx("div",{style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:8,padding:16,lineHeight:1.6,fontSize:14,color:"#374151",whiteSpace:"pre-wrap",minHeight:"120px",display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center"},children:S||"Chưa có dữ liệu để phân tích"})]})}function hne(t){return Hr({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"},child:[]}]})(t)}const dne=async t=>{const e="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",n=t.users.length,r=t.classes.length,i=t.cards.length,a=t.revenue.monthRevenue||0,o=t.revenue.total||0,u=t.users.filter(m=>m.ngayTao).map(m=>new Date(m.ngayTao.seconds*1e3)).sort((m,p)=>m-p).filter(m=>{const p=new Date;return p.setDate(p.getDate()-30),m>p}).length,h=`
Phân tích xu hướng và dự báo cho ứng dụng học từ vựng:

DỮ LIỆU HIỆN TẠI:
- Tổng người dùng: ${n}
- Người dùng mới (30 ngày): ${u}
- Tổng khóa học: ${r}
- Tổng bộ thẻ: ${i}
- Doanh thu tháng: ${a.toLocaleString("vi-VN")} VNĐ
- Doanh thu tổng: ${o.toLocaleString("vi-VN")} VNĐ

PHÂN TÍCH DOANH THU THEO THÁNG:
${JSON.stringify(t.revenue.byMonth,null,2)}

Hãy phân tích và đưa ra:

1. XU HƯỚNG TĂNG TRƯỞNG:
   - Tốc độ tăng trưởng người dùng
   - Xu hướng doanh thu
   - Mức độ hoạt động của hệ thống

2. DỰ BÁO 30 NGÀY TỚI:
   - Số người dùng mới dự kiến
   - Doanh thu dự kiến
   - Các chỉ số KPI quan trọng

3. PHÂN TÍCH RỦI RO:
   - Các vấn đề tiềm ẩn
   - Điểm yếu cần cải thiện
   - Cảnh báo nếu có

4. ĐỀ XUẤT CHIẾN LƯỢC:
   - Cách tăng trưởng người dùng
   - Cải thiện doanh thu
   - Tối ưu hóa hệ thống

Trả về kết quả bằng tiếng Việt, có cấu trúc rõ ràng với các emoji phù hợp.
`;try{const m=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({model:"deepseek/deepseek-r1:free",temperature:.4,messages:[{role:"user",content:h}]})});if(!m.ok)throw new Error(`HTTP error! status: ${m.status}`);return((await m.json())?.choices?.[0]?.message?.content||"").replace(/<think>[\s\S]*?<\/think>/g,"").trim()}catch(m){throw console.error("Lỗi khi phân tích xu hướng AI:",m),m}};function mne({users:t=[],classes:e=[],cards:n=[],revenue:r={}}){const[i,a]=w.useState(""),[o,c]=w.useState(!1),[u,h]=w.useState(""),m={totalUsers:t.length,totalClasses:e.length,totalCards:n.length,monthRevenue:r.monthRevenue||0,totalRevenue:r.total||0,recentUsers:t.filter(b=>{if(!b.ngayTao)return!1;const _=new Date(b.ngayTao.seconds*1e3),T=new Date;return T.setDate(T.getDate()-30),_>T}).length},p=async()=>{c(!0),h("");try{const b=await dne({users:t,classes:e,cards:n,revenue:r});a(b)}catch(b){console.error("Lỗi phân tích xu hướng AI:",b),h("Không thể kết nối AI để phân tích xu hướng. Vui lòng thử lại sau.")}finally{c(!1)}},y=()=>{(t.length>0||e.length>0||n.length>0)&&p()};return d.jsxs("div",{style:{background:"#fff",borderRadius:12,padding:20,boxShadow:"0 4px 12px rgba(0,0,0,0.1)",border:"1px solid #e1e5e9",minHeight:"300px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx(AX,{style:{color:"#10b981",fontSize:20}}),d.jsx("h3",{style:{margin:0,color:"#1f2937",fontSize:18,fontWeight:600},children:"Phân tích xu hướng & Dự báo"})]}),d.jsx("button",{onClick:y,disabled:o,style:{background:"#10b981",color:"white",border:"none",borderRadius:6,padding:"8px 12px",fontSize:14,cursor:o?"not-allowed":"pointer",opacity:o?.6:1,display:"flex",alignItems:"center",gap:6},children:o?d.jsxs(d.Fragment,{children:[d.jsx(Sf,{style:{animation:"spin 1s linear infinite"}}),"Đang phân tích..."]}):d.jsxs(d.Fragment,{children:[d.jsx(hne,{}),"Phân tích"]})})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:16,marginBottom:20},children:[d.jsxs("div",{style:{background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:8,padding:12,textAlign:"center"},children:[d.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#0ea5e9"},children:m.totalUsers}),d.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Tổng người dùng"})]}),d.jsxs("div",{style:{background:"#f0fdf4",border:"1px solid #22c55e",borderRadius:8,padding:12,textAlign:"center"},children:[d.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#22c55e"},children:m.recentUsers}),d.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Người dùng mới (30 ngày)"})]}),d.jsxs("div",{style:{background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:8,padding:12,textAlign:"center"},children:[d.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#f59e0b"},children:m.monthRevenue.toLocaleString("vi-VN")}),d.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Doanh thu tháng (VNĐ)"})]}),d.jsxs("div",{style:{background:"#f3e8ff",border:"1px solid #8b5cf6",borderRadius:8,padding:12,textAlign:"center"},children:[d.jsx("div",{style:{fontSize:24,fontWeight:"bold",color:"#8b5cf6"},children:m.totalRevenue.toLocaleString("vi-VN")}),d.jsx("div",{style:{fontSize:12,color:"#64748b"},children:"Tổng doanh thu (VNĐ)"})]})]}),u&&d.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:6,padding:12,marginBottom:16,color:"#dc2626",fontSize:14,display:"flex",alignItems:"center",gap:8},children:[d.jsx(v5,{}),u]}),o?d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"40px 20px",color:"#6b7280"},children:[d.jsx(Sf,{style:{animation:"spin 1s linear infinite",marginRight:12,fontSize:20}}),"AI đang phân tích xu hướng..."]}):i?d.jsx("div",{style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:8,padding:16,lineHeight:1.6,fontSize:14,color:"#374151",whiteSpace:"pre-wrap"},children:i}):d.jsx("div",{style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:8,padding:16,lineHeight:1.6,fontSize:14,color:"#6b7280",textAlign:"center",minHeight:"120px",display:"flex",alignItems:"center",justifyContent:"center"},children:"Chưa có dữ liệu để phân tích xu hướng"})]})}const gne=async t=>{const e="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",n=t.users.length,r=t.users.filter(_=>_.vaiTro&&_.vaiTro!=="DELETED").length,i=t.users.filter(_=>_.vaiTro==="ADMIN").length,a=t.users.filter(_=>_.vaiTro==="HOC_VIEN").length,o=t.users.filter(_=>_.vaiTro==="GIANG_VIEN").length,c=t.users.filter(_=>_.ngayTao).map(_=>new Date(_.ngayTao.seconds*1e3)).sort((_,T)=>_-T),u=c.filter(_=>{const T=new Date;return T.setDate(T.getDate()-30),_>T}).length,h=c.filter(_=>{const T=new Date;return T.setDate(T.getDate()-7),_>T}).length,m=t.cards.filter(_=>_.cheDo==="cong_khai").length,p=t.cards.filter(_=>_.cheDo==="ca_nhan").length,y=t.cards.filter(_=>_.luotHoc&&_.luotHoc>0).length,b=`
Phân tích hành vi người dùng trong ứng dụng học từ vựng:

DỮ LIỆU NGƯỜI DÙNG:
- Tổng người dùng: ${n}
- Người dùng hoạt động: ${r}
- Admin: ${i}
- Học viên: ${a}
- Giảng viên: ${o}
- Người dùng mới (7 ngày): ${h}
- Người dùng mới (30 ngày): ${u}

DỮ LIỆU BỘ THẺ:
- Tổng bộ thẻ: ${t.cards.length}
- Bộ thẻ công khai: ${m}
- Bộ thẻ cá nhân: ${p}
- Bộ thẻ có lượt học: ${y}

DỮ LIỆU KHÓA HỌC:
- Tổng khóa học: ${t.classes.length}

Hãy phân tích và đưa ra:

1. PHÂN TÍCH HÀNH VI NGƯỜI DÙNG:
   - Mức độ hoạt động của người dùng
   - Xu hướng tạo nội dung (bộ thẻ, khóa học)
   - Sự tương tác giữa các vai trò

2. PHÂN TÍCH NỘI DUNG:
   - Tỷ lệ bộ thẻ công khai vs cá nhân
   - Mức độ sử dụng bộ thẻ (lượt học)
   - Chất lượng nội dung được tạo

3. ĐIỂM MẠNH VÀ ĐIỂM YẾU:
   - Những gì đang hoạt động tốt
   - Những vấn đề cần cải thiện
   - Cơ hội tăng trưởng

4. ĐỀ XUẤT CẢI THIỆN:
   - Cách tăng engagement
   - Cải thiện trải nghiệm người dùng
   - Tối ưu hóa hệ thống

Trả về kết quả bằng tiếng Việt, có cấu trúc rõ ràng với các emoji phù hợp.
`;try{const _=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({model:"deepseek/deepseek-r1:free",temperature:.3,messages:[{role:"user",content:b}]})});if(!_.ok)throw new Error(`HTTP error! status: ${_.status}`);return((await _.json())?.choices?.[0]?.message?.content||"").replace(/<think>[\s\S]*?<\/think>/g,"").trim()}catch(_){throw console.error("Lỗi khi phân tích hành vi người dùng AI:",_),_}};function pne({users:t=[],classes:e=[],cards:n=[]}){const[r,i]=w.useState(""),[a,o]=w.useState(!1),[c,u]=w.useState(""),h={totalUsers:t.length,activeUsers:t.filter(y=>y.vaiTro&&y.vaiTro!=="DELETED").length,adminUsers:t.filter(y=>y.vaiTro==="ADMIN").length,studentUsers:t.filter(y=>y.vaiTro==="HOC_VIEN").length,teacherUsers:t.filter(y=>y.vaiTro==="GIANG_VIEN").length,recentUsers:t.filter(y=>{if(!y.ngayTao)return!1;const b=new Date(y.ngayTao.seconds*1e3),_=new Date;return _.setDate(_.getDate()-30),b>_}).length,weeklyUsers:t.filter(y=>{if(!y.ngayTao)return!1;const b=new Date(y.ngayTao.seconds*1e3),_=new Date;return _.setDate(_.getDate()-7),b>_}).length,publicCards:n.filter(y=>y.cheDo==="cong_khai").length,privateCards:n.filter(y=>y.cheDo==="ca_nhan").length,cardsWithLearning:n.filter(y=>y.luotHoc&&y.luotHoc>0).length,totalCards:n.length,totalClasses:e.length},m=async()=>{o(!0),u("");try{const y=await gne({users:t,classes:e,cards:n});i(y)}catch(y){console.error("Lỗi phân tích hành vi AI:",y),u("Không thể kết nối AI để phân tích hành vi. Vui lòng thử lại sau.")}finally{o(!1)}},p=()=>{(t.length>0||e.length>0||n.length>0)&&m()};return d.jsxs("div",{style:{background:"#fff",borderRadius:12,padding:20,boxShadow:"0 4px 12px rgba(0,0,0,0.1)",border:"1px solid #e1e5e9",minHeight:"250px"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:16},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[d.jsx(kX,{style:{color:"#8b5cf6",fontSize:20}}),d.jsx("h3",{style:{margin:0,color:"#1f2937",fontSize:18,fontWeight:600},children:"Phân tích hành vi người dùng"})]}),d.jsx("button",{onClick:p,disabled:a,style:{background:"#8b5cf6",color:"white",border:"none",borderRadius:6,padding:"8px 12px",fontSize:14,cursor:a?"not-allowed":"pointer",opacity:a?.6:1,display:"flex",alignItems:"center",gap:6},children:a?d.jsxs(d.Fragment,{children:[d.jsx(Sf,{style:{animation:"spin 1s linear infinite"}}),"Đang phân tích..."]}):d.jsxs(d.Fragment,{children:[d.jsx(SX,{}),"phân tích"]})})]}),d.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:12,marginBottom:20},children:[d.jsxs("div",{style:{background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:8,padding:10,textAlign:"center"},children:[d.jsx("div",{style:{fontSize:20,fontWeight:"bold",color:"#0ea5e9"},children:h.activeUsers}),d.jsx("div",{style:{fontSize:11,color:"#64748b"},children:"Người dùng hoạt động"})]}),d.jsxs("div",{style:{background:"#f0fdf4",border:"1px solid #22c55e",borderRadius:8,padding:10,textAlign:"center"},children:[d.jsx("div",{style:{fontSize:20,fontWeight:"bold",color:"#22c55e"},children:h.studentUsers}),d.jsx("div",{style:{fontSize:11,color:"#64748b"},children:"Học viên"})]}),d.jsxs("div",{style:{background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:8,padding:10,textAlign:"center"},children:[d.jsx("div",{style:{fontSize:20,fontWeight:"bold",color:"#f59e0b"},children:h.teacherUsers}),d.jsx("div",{style:{fontSize:11,color:"#64748b"},children:"Giảng viên"})]}),d.jsxs("div",{style:{background:"#f3e8ff",border:"1px solid #8b5cf6",borderRadius:8,padding:10,textAlign:"center"},children:[d.jsx("div",{style:{fontSize:20,fontWeight:"bold",color:"#8b5cf6"},children:h.weeklyUsers}),d.jsx("div",{style:{fontSize:11,color:"#64748b"},children:"Mới (7 ngày)"})]}),d.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #ef4444",borderRadius:8,padding:10,textAlign:"center"},children:[d.jsx("div",{style:{fontSize:20,fontWeight:"bold",color:"#ef4444"},children:h.publicCards}),d.jsx("div",{style:{fontSize:11,color:"#64748b"},children:"Bộ thẻ công khai"})]}),d.jsxs("div",{style:{background:"#f1f5f9",border:"1px solid #64748b",borderRadius:8,padding:10,textAlign:"center"},children:[d.jsx("div",{style:{fontSize:20,fontWeight:"bold",color:"#64748b"},children:h.cardsWithLearning}),d.jsx("div",{style:{fontSize:11,color:"#64748b"},children:"Bộ thẻ có học"})]})]}),c&&d.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:6,padding:12,marginBottom:16,color:"#dc2626",fontSize:14,display:"flex",alignItems:"center",gap:8},children:[d.jsx(v5,{}),c]}),a?d.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"40px 20px",color:"#6b7280"},children:[d.jsx(Sf,{style:{animation:"spin 1s linear infinite",marginRight:12,fontSize:20}}),"AI đang phân tích hành vi người dùng..."]}):r?d.jsx("div",{style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:8,padding:16,lineHeight:1.6,fontSize:14,color:"#374151",whiteSpace:"pre-wrap"},children:r}):d.jsx("div",{style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:8,padding:16,lineHeight:1.6,fontSize:14,color:"#6b7280",textAlign:"center",minHeight:"120px",display:"flex",alignItems:"center",justifyContent:"center"},children:"Chưa có dữ liệu để phân tích hành vi"})]})}function WL(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=WL(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function zt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=WL(t))&&(r&&(r+=" "),r+=e);return r}var jx={},Dx={},QO;function yne(){return QO||(QO=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e}(Dx)),Dx}var kx={},ZO;function YL(){return ZO||(ZO=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e}(kx)),kx}var Ox={},JO;function XL(){return JO||(JO=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e}(Ox)),Ox}var Ix={},eI;function ZE(){return eI||(eI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){const r=[],i=n.length;if(i===0)return r;let a=0,o="",c="",u=!1;for(n.charCodeAt(0)===46&&(r.push(""),a++);a<i;){const h=n[a];c?h==="\\"&&a+1<i?(a++,o+=n[a]):h===c?c="":o+=h:u?h==='"'||h==="'"?c=h:h==="]"?(u=!1,r.push(o),o=""):o+=h:h==="["?(u=!0,o&&(r.push(o),o="")):h==="."?o&&(r.push(o),o=""):o+=h,a++}return o&&r.push(o),r}t.toPath=e}(Ix)),Ix}var tI;function JE(){return tI||(tI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yne(),n=YL(),r=XL(),i=ZE();function a(c,u,h){if(c==null)return h;switch(typeof u){case"string":{if(e.isUnsafeProperty(u))return h;const m=c[u];return m===void 0?n.isDeepKey(u)?a(c,i.toPath(u),h):h:m}case"number":case"symbol":{typeof u=="number"&&(u=r.toKey(u));const m=c[u];return m===void 0?h:m}default:{if(Array.isArray(u))return o(c,u,h);if(Object.is(u?.valueOf(),-0)?u="-0":u=String(u),e.isUnsafeProperty(u))return h;const m=c[u];return m===void 0?h:m}}}function o(c,u,h){if(u.length===0)return h;let m=c;for(let p=0;p<u.length;p++){if(m==null||e.isUnsafeProperty(u[p]))return h;m=m[u[p]]}return m===void 0?h:m}t.get=a}(jx)),jx}var Px,nI;function vne(){return nI||(nI=1,Px=JE().get),Px}var bne=vne();const Bc=zi(bne);var Rx={exports:{}},Lt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rI;function xne(){if(rI)return Lt;rI=1;var t=typeof Symbol=="function"&&Symbol.for,e=t?Symbol.for("react.element"):60103,n=t?Symbol.for("react.portal"):60106,r=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,a=t?Symbol.for("react.profiler"):60114,o=t?Symbol.for("react.provider"):60109,c=t?Symbol.for("react.context"):60110,u=t?Symbol.for("react.async_mode"):60111,h=t?Symbol.for("react.concurrent_mode"):60111,m=t?Symbol.for("react.forward_ref"):60112,p=t?Symbol.for("react.suspense"):60113,y=t?Symbol.for("react.suspense_list"):60120,b=t?Symbol.for("react.memo"):60115,_=t?Symbol.for("react.lazy"):60116,T=t?Symbol.for("react.block"):60121,S=t?Symbol.for("react.fundamental"):60117,E=t?Symbol.for("react.responder"):60118,N=t?Symbol.for("react.scope"):60119;function C(D){if(typeof D=="object"&&D!==null){var R=D.$$typeof;switch(R){case e:switch(D=D.type,D){case u:case h:case r:case a:case i:case p:return D;default:switch(D=D&&D.$$typeof,D){case c:case m:case _:case b:case o:return D;default:return R}}case n:return R}}}function L(D){return C(D)===h}return Lt.AsyncMode=u,Lt.ConcurrentMode=h,Lt.ContextConsumer=c,Lt.ContextProvider=o,Lt.Element=e,Lt.ForwardRef=m,Lt.Fragment=r,Lt.Lazy=_,Lt.Memo=b,Lt.Portal=n,Lt.Profiler=a,Lt.StrictMode=i,Lt.Suspense=p,Lt.isAsyncMode=function(D){return L(D)||C(D)===u},Lt.isConcurrentMode=L,Lt.isContextConsumer=function(D){return C(D)===c},Lt.isContextProvider=function(D){return C(D)===o},Lt.isElement=function(D){return typeof D=="object"&&D!==null&&D.$$typeof===e},Lt.isForwardRef=function(D){return C(D)===m},Lt.isFragment=function(D){return C(D)===r},Lt.isLazy=function(D){return C(D)===_},Lt.isMemo=function(D){return C(D)===b},Lt.isPortal=function(D){return C(D)===n},Lt.isProfiler=function(D){return C(D)===a},Lt.isStrictMode=function(D){return C(D)===i},Lt.isSuspense=function(D){return C(D)===p},Lt.isValidElementType=function(D){return typeof D=="string"||typeof D=="function"||D===r||D===h||D===a||D===i||D===p||D===y||typeof D=="object"&&D!==null&&(D.$$typeof===_||D.$$typeof===b||D.$$typeof===o||D.$$typeof===c||D.$$typeof===m||D.$$typeof===S||D.$$typeof===E||D.$$typeof===N||D.$$typeof===T)},Lt.typeOf=C,Lt}var iI;function wne(){return iI||(iI=1,Rx.exports=xne()),Rx.exports}var _ne=wne(),Fr=t=>t===0?0:t>0?1:-1,di=t=>typeof t=="number"&&t!=+t,yc=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Ue=t=>(typeof t=="number"||t instanceof Number)&&!di(t),Qa=t=>Ue(t)||typeof t=="string",Sne=0,nm=t=>{var e=++Sne;return"".concat(t||"").concat(e)},fa=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ue(e)&&typeof e!="string")return r;var a;if(yc(e)){if(n==null)return r;var o=e.indexOf("%");a=n*parseFloat(e.slice(0,o))/100}else a=+e;return di(a)&&(a=r),i&&n!=null&&a>n&&(a=n),a},QL=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[t[r]])n[t[r]]=!0;else return!0;return!1};function ea(t,e,n){return Ue(t)&&Ue(e)?t+n*(e-t):e}function ZL(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):Bc(r,e))===n)}var an=t=>t===null||typeof t>"u",Pm=t=>an(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),Tne=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function eA(t){if(typeof t!="string")return!1;var e=Tne;return e.includes(t)}var Ene=["viewBox","children"],aI=["points","pathLength"],Mx={svg:Ene,polygon:aI,polyline:aI},tA=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(w.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{eA(i)&&(r[i]=a=>n[i](n,a))}),r},Ane=(t,e,n)=>r=>(t(e,n,r),null),f0=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var a=t[i];eA(i)&&typeof a=="function"&&(r||(r={}),r[i]=Ane(a,e,n))}),r},Nne=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function JL(t){if(typeof t!="string")return!1;var e=Nne;return e.includes(t)}function Yc(t){var e=Object.entries(t).filter(n=>{var[r]=n;return JL(r)});return Object.fromEntries(e)}var sI=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",oI=null,Lx=null,e8=t=>{if(t===oI&&Array.isArray(Lx))return Lx;var e=[];return w.Children.forEach(t,n=>{an(n)||(_ne.isFragment(n)?e=e.concat(e8(n.props.children)):e.push(n))}),Lx=e,oI=t,e};function nA(t,e){var n=[],r=[];return Array.isArray(e)?r=e.map(i=>sI(i)):r=[sI(e)],e8(t).forEach(i=>{var a=Bc(i,"type.displayName")||Bc(i,"type.name");r.indexOf(a)!==-1&&n.push(i)}),n}var t8=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,Cne=(t,e,n,r)=>{var i;if(typeof e=="symbol"||typeof e=="number")return!0;var a=(i=r&&Mx?.[r])!==null&&i!==void 0?i:[],o=e.startsWith("data-"),c=typeof t!="function"&&(!!r&&a.includes(e)||JL(e)),u=!!n&&eA(e);return o||c||u},yn=(t,e,n)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(w.isValidElement(t)&&(r=t.props),typeof r!="object"&&typeof r!="function")return null;var i={};return Object.keys(r).forEach(a=>{var o;Cne((o=r)===null||o===void 0?void 0:o[a],a,e,n)&&(i[a]=r[a])}),i},jne=["children","width","height","viewBox","className","style","title","desc"];function bS(){return bS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bS.apply(null,arguments)}function Dne(t,e){if(t==null)return{};var n,r,i=kne(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function kne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var rA=w.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:a,className:o,style:c,title:u,desc:h}=t,m=Dne(t,jne),p=a||{width:r,height:i,x:0,y:0},y=zt("recharts-surface",o);return w.createElement("svg",bS({},yn(m,!0,"svg"),{className:y,width:r,height:i,style:c,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:e}),w.createElement("title",null,u),w.createElement("desc",null,h),n)}),One=["children","className"];function xS(){return xS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xS.apply(null,arguments)}function Ine(t,e){if(t==null)return{};var n,r,i=Pne(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Pne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ha=w.forwardRef((t,e)=>{var{children:n,className:r}=t,i=Ine(t,One),a=zt("recharts-layer",r);return w.createElement("g",xS({className:a},yn(i,!0),{ref:e}),n)}),n8=w.createContext(null),Rne=()=>w.useContext(n8);function Jt(t){return function(){return t}}const r8=Math.cos,Ky=Math.sin,ya=Math.sqrt,Gy=Math.PI,h0=2*Gy,wS=Math.PI,_S=2*wS,fc=1e-6,Mne=_S-fc;function i8(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function Lne(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return i8;const n=10**e;return function(r){this._+=r[0];for(let i=1,a=r.length;i<a;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Vne{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?i8:Lne(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,a,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+a},${this._y1=+o}`}arcTo(e,n,r,i,a){if(e=+e,n=+n,r=+r,i=+i,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,c=this._y1,u=r-e,h=i-n,m=o-e,p=c-n,y=m*m+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(y>fc)if(!(Math.abs(p*u-h*m)>fc)||!a)this._append`L${this._x1=e},${this._y1=n}`;else{let b=r-o,_=i-c,T=u*u+h*h,S=b*b+_*_,E=Math.sqrt(T),N=Math.sqrt(y),C=a*Math.tan((wS-Math.acos((T+y-S)/(2*E*N)))/2),L=C/N,D=C/E;Math.abs(L-1)>fc&&this._append`L${e+L*m},${n+L*p}`,this._append`A${a},${a},0,0,${+(p*b>m*_)},${this._x1=e+D*u},${this._y1=n+D*h}`}}arc(e,n,r,i,a,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let c=r*Math.cos(i),u=r*Math.sin(i),h=e+c,m=n+u,p=1^o,y=o?i-a:a-i;this._x1===null?this._append`M${h},${m}`:(Math.abs(this._x1-h)>fc||Math.abs(this._y1-m)>fc)&&this._append`L${h},${m}`,r&&(y<0&&(y=y%_S+_S),y>Mne?this._append`A${r},${r},0,1,${p},${e-c},${n-u}A${r},${r},0,1,${p},${this._x1=h},${this._y1=m}`:y>fc&&this._append`A${r},${r},0,${+(y>=wS)},${p},${this._x1=e+r*Math.cos(a)},${this._y1=n+r*Math.sin(a)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function iA(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Vne(e)}function aA(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function a8(t){this._context=t}a8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function d0(t){return new a8(t)}function s8(t){return t[0]}function o8(t){return t[1]}function l8(t,e){var n=Jt(!0),r=null,i=d0,a=null,o=iA(c);t=typeof t=="function"?t:t===void 0?s8:Jt(t),e=typeof e=="function"?e:e===void 0?o8:Jt(e);function c(u){var h,m=(u=aA(u)).length,p,y=!1,b;for(r==null&&(a=i(b=o())),h=0;h<=m;++h)!(h<m&&n(p=u[h],h,u))===y&&((y=!y)?a.lineStart():a.lineEnd()),y&&a.point(+t(p,h,u),+e(p,h,u));if(b)return a=null,b+""||null}return c.x=function(u){return arguments.length?(t=typeof u=="function"?u:Jt(+u),c):t},c.y=function(u){return arguments.length?(e=typeof u=="function"?u:Jt(+u),c):e},c.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Jt(!!u),c):n},c.curve=function(u){return arguments.length?(i=u,r!=null&&(a=i(r)),c):i},c.context=function(u){return arguments.length?(u==null?r=a=null:a=i(r=u),c):r},c}function Dp(t,e,n){var r=null,i=Jt(!0),a=null,o=d0,c=null,u=iA(h);t=typeof t=="function"?t:t===void 0?s8:Jt(+t),e=typeof e=="function"?e:Jt(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?o8:Jt(+n);function h(p){var y,b,_,T=(p=aA(p)).length,S,E=!1,N,C=new Array(T),L=new Array(T);for(a==null&&(c=o(N=u())),y=0;y<=T;++y){if(!(y<T&&i(S=p[y],y,p))===E)if(E=!E)b=y,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),_=y-1;_>=b;--_)c.point(C[_],L[_]);c.lineEnd(),c.areaEnd()}E&&(C[y]=+t(S,y,p),L[y]=+e(S,y,p),c.point(r?+r(S,y,p):C[y],n?+n(S,y,p):L[y]))}if(N)return c=null,N+""||null}function m(){return l8().defined(i).curve(o).context(a)}return h.x=function(p){return arguments.length?(t=typeof p=="function"?p:Jt(+p),r=null,h):t},h.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Jt(+p),h):t},h.x1=function(p){return arguments.length?(r=p==null?null:typeof p=="function"?p:Jt(+p),h):r},h.y=function(p){return arguments.length?(e=typeof p=="function"?p:Jt(+p),n=null,h):e},h.y0=function(p){return arguments.length?(e=typeof p=="function"?p:Jt(+p),h):e},h.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Jt(+p),h):n},h.lineX0=h.lineY0=function(){return m().x(t).y(e)},h.lineY1=function(){return m().x(t).y(n)},h.lineX1=function(){return m().x(r).y(e)},h.defined=function(p){return arguments.length?(i=typeof p=="function"?p:Jt(!!p),h):i},h.curve=function(p){return arguments.length?(o=p,a!=null&&(c=o(a)),h):o},h.context=function(p){return arguments.length?(p==null?a=c=null:c=o(a=p),h):a},h}class c8{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function Bne(t){return new c8(t,!0)}function Une(t){return new c8(t,!1)}const sA={draw(t,e){const n=ya(e/Gy);t.moveTo(n,0),t.arc(0,0,n,0,h0)}},$ne={draw(t,e){const n=ya(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},u8=ya(1/3),Fne=u8*2,zne={draw(t,e){const n=ya(e/Fne),r=n*u8;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Hne={draw(t,e){const n=ya(e),r=-n/2;t.rect(r,r,n,n)}},qne=.8908130915292852,f8=Ky(Gy/10)/Ky(7*Gy/10),Kne=Ky(h0/10)*f8,Gne=-r8(h0/10)*f8,Wne={draw(t,e){const n=ya(e*qne),r=Kne*n,i=Gne*n;t.moveTo(0,-n),t.lineTo(r,i);for(let a=1;a<5;++a){const o=h0*a/5,c=r8(o),u=Ky(o);t.lineTo(u*n,-c*n),t.lineTo(c*r-u*i,u*r+c*i)}t.closePath()}},Vx=ya(3),Yne={draw(t,e){const n=-ya(e/(Vx*3));t.moveTo(0,n*2),t.lineTo(-Vx*n,-n),t.lineTo(Vx*n,-n),t.closePath()}},Oi=-.5,Ii=ya(3)/2,SS=1/ya(12),Xne=(SS/2+1)*3,Qne={draw(t,e){const n=ya(e/Xne),r=n/2,i=n*SS,a=r,o=n*SS+n,c=-a,u=o;t.moveTo(r,i),t.lineTo(a,o),t.lineTo(c,u),t.lineTo(Oi*r-Ii*i,Ii*r+Oi*i),t.lineTo(Oi*a-Ii*o,Ii*a+Oi*o),t.lineTo(Oi*c-Ii*u,Ii*c+Oi*u),t.lineTo(Oi*r+Ii*i,Oi*i-Ii*r),t.lineTo(Oi*a+Ii*o,Oi*o-Ii*a),t.lineTo(Oi*c+Ii*u,Oi*u-Ii*c),t.closePath()}};function Zne(t,e){let n=null,r=iA(i);t=typeof t=="function"?t:Jt(t||sA),e=typeof e=="function"?e:Jt(e===void 0?64:+e);function i(){let a;if(n||(n=a=r()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),a)return n=null,a+""||null}return i.type=function(a){return arguments.length?(t=typeof a=="function"?a:Jt(a),i):t},i.size=function(a){return arguments.length?(e=typeof a=="function"?a:Jt(+a),i):e},i.context=function(a){return arguments.length?(n=a??null,i):n},i}function Wy(){}function Yy(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function h8(t){this._context=t}h8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Yy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Yy(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Jne(t){return new h8(t)}function d8(t){this._context=t}d8.prototype={areaStart:Wy,areaEnd:Wy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Yy(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function ere(t){return new d8(t)}function m8(t){this._context=t}m8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Yy(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function tre(t){return new m8(t)}function g8(t){this._context=t}g8.prototype={areaStart:Wy,areaEnd:Wy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function nre(t){return new g8(t)}function lI(t){return t<0?-1:1}function cI(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),c=(a*i+o*r)/(r+i);return(lI(a)+lI(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(c))||0}function uI(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Bx(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,c=(a-r)/3;t._context.bezierCurveTo(r+c,i+c*e,a-c,o-c*n,a,o)}function Xy(t){this._context=t}Xy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Bx(this,this._t0,uI(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Bx(this,uI(this,n=cI(this,t,e)),n);break;default:Bx(this,this._t0,n=cI(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function p8(t){this._context=new y8(t)}(p8.prototype=Object.create(Xy.prototype)).point=function(t,e){Xy.prototype.point.call(this,e,t)};function y8(t){this._context=t}y8.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){this._context.bezierCurveTo(e,t,r,n,a,i)}};function rre(t){return new Xy(t)}function ire(t){return new p8(t)}function v8(t){this._context=t}v8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=fI(t),i=fI(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function fI(t){var e,n=t.length-1,r,i=new Array(n),a=new Array(n),o=new Array(n);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/a[e-1],a[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/a[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function are(t){return new v8(t)}function m0(t,e){this._context=t,this._t=e}m0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function sre(t){return new m0(t,.5)}function ore(t){return new m0(t,0)}function lre(t){return new m0(t,1)}function Ef(t,e){if((o=t.length)>1)for(var n=1,r,i,a=t[e[0]],o,c=a.length;n<o;++n)for(i=a,a=t[e[n]],r=0;r<c;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function TS(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function cre(t,e){return t[e]}function ure(t){const e=[];return e.key=t,e}function fre(){var t=Jt([]),e=TS,n=Ef,r=cre;function i(a){var o=Array.from(t.apply(this,arguments),ure),c,u=o.length,h=-1,m;for(const p of a)for(c=0,++h;c<u;++c)(o[c][h]=[0,+r(p,o[c].key,h,a)]).data=p;for(c=0,m=aA(e(o));c<u;++c)o[m[c]].index=c;return n(o,m),o}return i.keys=function(a){return arguments.length?(t=typeof a=="function"?a:Jt(Array.from(a)),i):t},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Jt(+a),i):r},i.order=function(a){return arguments.length?(e=a==null?TS:typeof a=="function"?a:Jt(Array.from(a)),i):e},i.offset=function(a){return arguments.length?(n=a??Ef,i):n},i}function hre(t,e){if((r=t.length)>0){for(var n,r,i=0,a=t[0].length,o;i<a;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}Ef(t,e)}}function dre(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,a=r.length;n<a;++n){for(var o=0,c=0;o<i;++o)c+=t[o][n][1]||0;r[n][1]+=r[n][0]=-c/2}Ef(t,e)}}function mre(t,e){if(!(!((o=t.length)>0)||!((a=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,a,o;r<a;++r){for(var c=0,u=0,h=0;c<o;++c){for(var m=t[e[c]],p=m[r][1]||0,y=m[r-1][1]||0,b=(p-y)/2,_=0;_<c;++_){var T=t[e[_]],S=T[r][1]||0,E=T[r-1][1]||0;b+=S-E}u+=p,h+=b*p}i[r-1][1]+=i[r-1][0]=n,u&&(n-=h/u)}i[r-1][1]+=i[r-1][0]=n,Ef(t,e)}}var gre=["type","size","sizeType"];function ES(){return ES=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ES.apply(null,arguments)}function hI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dI(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hI(Object(n),!0).forEach(function(r){pre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pre(t,e,n){return(e=yre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yre(t){var e=vre(t,"string");return typeof e=="symbol"?e:e+""}function vre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function bre(t,e){if(t==null)return{};var n,r,i=xre(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function xre(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var b8={symbolCircle:sA,symbolCross:$ne,symbolDiamond:zne,symbolSquare:Hne,symbolStar:Wne,symbolTriangle:Yne,symbolWye:Qne},wre=Math.PI/180,_re=t=>{var e="symbol".concat(Pm(t));return b8[e]||sA},Sre=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var r=18*wre;return 1.25*t*t*(Math.tan(r)-Math.tan(r*2)*Math.tan(r)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Tre=(t,e)=>{b8["symbol".concat(Pm(t))]=e},oA=t=>{var{type:e="circle",size:n=64,sizeType:r="area"}=t,i=bre(t,gre),a=dI(dI({},i),{},{type:e,size:n,sizeType:r}),o=()=>{var p=_re(e),y=Zne().type(p).size(Sre(n,r,e));return y()},{className:c,cx:u,cy:h}=a,m=yn(a,!0);return u===+u&&h===+h&&n===+n?w.createElement("path",ES({},m,{className:zt("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(h,")"),d:o()})):null};oA.registerSymbol=Tre;function AS(){return AS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AS.apply(null,arguments)}function mI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ere(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mI(Object(n),!0).forEach(function(r){lA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lA(t,e,n){return(e=Are(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Are(t){var e=Nre(t,"string");return typeof e=="symbol"?e:e+""}function Nre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Pi=32;class cA extends w.PureComponent{renderIcon(e,n){var{inactiveColor:r}=this.props,i=Pi/2,a=Pi/6,o=Pi/3,c=e.inactive?r:e.color,u=n??e.type;if(u==="none")return null;if(u==="plainline")return w.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:i,x2:Pi,y2:i,className:"recharts-legend-icon"});if(u==="line")return w.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(o,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(i,`
            H`).concat(Pi,"M").concat(2*o,",").concat(i,`
            A`).concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(i),className:"recharts-legend-icon"});if(u==="rect")return w.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Pi/8,"h").concat(Pi,"v").concat(Pi*3/4,"h").concat(-Pi,"z"),className:"recharts-legend-icon"});if(w.isValidElement(e.legendIcon)){var h=Ere({},e);return delete h.legendIcon,w.cloneElement(e.legendIcon,h)}return w.createElement(oA,{fill:c,cx:i,cy:i,size:Pi,sizeType:"diameter",type:u})}renderItems(){var{payload:e,iconSize:n,layout:r,formatter:i,inactiveColor:a,iconType:o}=this.props,c={x:0,y:0,width:Pi,height:Pi},u={display:r==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((m,p)=>{var y=m.formatter||i,b=zt({"recharts-legend-item":!0,["legend-item-".concat(p)]:!0,inactive:m.inactive});if(m.type==="none")return null;var _=m.inactive?a:m.color,T=y?y(m.value,m,p):m.value;return w.createElement("li",AS({className:b,style:u,key:"legend-item-".concat(p)},f0(this.props,m,p)),w.createElement(rA,{width:n,height:n,viewBox:c,style:h,"aria-label":"".concat(T," legend icon")},this.renderIcon(m,o)),w.createElement("span",{className:"recharts-legend-item-text",style:{color:_}},T))})}render(){var{payload:e,layout:n,align:r}=this.props;if(!e||!e.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?r:"left"};return w.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}lA(cA,"displayName","Legend");lA(cA,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Ux={},$x={},gI;function Cre(){return gI||(gI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let a=0;a<n.length;a++){const o=n[a],c=r(o);i.has(c)||i.set(c,o)}return Array.from(i.values())}t.uniqBy=e}($x)),$x}var Fx={},pI;function x8(){return pI||(pI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e}(Fx)),Fx}var zx={},Hx={},qx={},yI;function jre(){return yI||(yI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e}(qx)),qx}var vI;function uA(){return vI||(vI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jre();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n}(Hx)),Hx}var Kx={},bI;function Dre(){return bI||(bI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e}(Kx)),Kx}var xI;function kre(){return xI||(xI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=uA(),n=Dre();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r}(zx)),zx}var Gx={},Wx={},wI;function Ore(){return wI||(wI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=JE();function n(r){return function(i){return e.get(i,r)}}t.property=n}(Wx)),Wx}var Yx={},Xx={},Qx={},Zx={},_I;function w8(){return _I||(_I=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e}(Zx)),Zx}var Jx={},SI;function _8(){return SI||(SI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e}(Jx)),Jx}var ew={},TI;function fA(){return TI||(TI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.eq=e}(ew)),ew}var EI;function Ire(){return EI||(EI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hA(),n=w8(),r=_8(),i=fA();function a(p,y,b){return typeof b!="function"?e.isMatch(p,y):o(p,y,function _(T,S,E,N,C,L){const D=b(T,S,E,N,C,L);return D!==void 0?!!D:o(T,S,_,L)},new Map)}function o(p,y,b,_){if(y===p)return!0;switch(typeof y){case"object":return c(p,y,b,_);case"function":return Object.keys(y).length>0?o(p,{...y},b,_):i.eq(p,y);default:return n.isObject(p)?typeof y=="string"?y==="":!0:i.eq(p,y)}}function c(p,y,b,_){if(y==null)return!0;if(Array.isArray(y))return h(p,y,b,_);if(y instanceof Map)return u(p,y,b,_);if(y instanceof Set)return m(p,y,b,_);const T=Object.keys(y);if(p==null)return T.length===0;if(T.length===0)return!0;if(_&&_.has(y))return _.get(y)===p;_&&_.set(y,p);try{for(let S=0;S<T.length;S++){const E=T[S];if(!r.isPrimitive(p)&&!(E in p)||y[E]===void 0&&p[E]!==void 0||y[E]===null&&p[E]!==null||!b(p[E],y[E],E,p,y,_))return!1}return!0}finally{_&&_.delete(y)}}function u(p,y,b,_){if(y.size===0)return!0;if(!(p instanceof Map))return!1;for(const[T,S]of y.entries()){const E=p.get(T);if(b(E,S,T,p,y,_)===!1)return!1}return!0}function h(p,y,b,_){if(y.length===0)return!0;if(!Array.isArray(p))return!1;const T=new Set;for(let S=0;S<y.length;S++){const E=y[S];let N=!1;for(let C=0;C<p.length;C++){if(T.has(C))continue;const L=p[C];let D=!1;if(b(L,E,S,p,y,_)&&(D=!0),D){T.add(C),N=!0;break}}if(!N)return!1}return!0}function m(p,y,b,_){return y.size===0?!0:p instanceof Set?h([...p],[...y],b,_):!1}t.isMatchWith=a,t.isSetMatch=m}(Qx)),Qx}var AI;function hA(){return AI||(AI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ire();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n}(Xx)),Xx}var tw={},nw={},rw={},NI;function S8(){return NI||(NI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e}(rw)),rw}var iw={},CI;function dA(){return CI||(CI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e}(iw)),iw}var aw={},jI;function mA(){return jI||(jI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",a="[object Arguments]",o="[object Symbol]",c="[object Date]",u="[object Map]",h="[object Set]",m="[object Array]",p="[object Function]",y="[object ArrayBuffer]",b="[object Object]",_="[object Error]",T="[object DataView]",S="[object Uint8Array]",E="[object Uint8ClampedArray]",N="[object Uint16Array]",C="[object Uint32Array]",L="[object BigUint64Array]",D="[object Int8Array]",R="[object Int16Array]",k="[object Int32Array]",I="[object BigInt64Array]",O="[object Float32Array]",U="[object Float64Array]";t.argumentsTag=a,t.arrayBufferTag=y,t.arrayTag=m,t.bigInt64ArrayTag=I,t.bigUint64ArrayTag=L,t.booleanTag=i,t.dataViewTag=T,t.dateTag=c,t.errorTag=_,t.float32ArrayTag=O,t.float64ArrayTag=U,t.functionTag=p,t.int16ArrayTag=R,t.int32ArrayTag=k,t.int8ArrayTag=D,t.mapTag=u,t.numberTag=r,t.objectTag=b,t.regexpTag=e,t.setTag=h,t.stringTag=n,t.symbolTag=o,t.uint16ArrayTag=N,t.uint32ArrayTag=C,t.uint8ArrayTag=S,t.uint8ClampedArrayTag=E}(aw)),aw}var sw={},DI;function Pre(){return DI||(DI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e}(sw)),sw}var kI;function T8(){return kI||(kI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=S8(),n=dA(),r=mA(),i=_8(),a=Pre();function o(m,p){return c(m,void 0,m,new Map,p)}function c(m,p,y,b=new Map,_=void 0){const T=_?.(m,p,y,b);if(T!==void 0)return T;if(i.isPrimitive(m))return m;if(b.has(m))return b.get(m);if(Array.isArray(m)){const S=new Array(m.length);b.set(m,S);for(let E=0;E<m.length;E++)S[E]=c(m[E],E,y,b,_);return Object.hasOwn(m,"index")&&(S.index=m.index),Object.hasOwn(m,"input")&&(S.input=m.input),S}if(m instanceof Date)return new Date(m.getTime());if(m instanceof RegExp){const S=new RegExp(m.source,m.flags);return S.lastIndex=m.lastIndex,S}if(m instanceof Map){const S=new Map;b.set(m,S);for(const[E,N]of m)S.set(E,c(N,E,y,b,_));return S}if(m instanceof Set){const S=new Set;b.set(m,S);for(const E of m)S.add(c(E,void 0,y,b,_));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(m))return m.subarray();if(a.isTypedArray(m)){const S=new(Object.getPrototypeOf(m)).constructor(m.length);b.set(m,S);for(let E=0;E<m.length;E++)S[E]=c(m[E],E,y,b,_);return S}if(m instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&m instanceof SharedArrayBuffer)return m.slice(0);if(m instanceof DataView){const S=new DataView(m.buffer.slice(0),m.byteOffset,m.byteLength);return b.set(m,S),u(S,m,y,b,_),S}if(typeof File<"u"&&m instanceof File){const S=new File([m],m.name,{type:m.type});return b.set(m,S),u(S,m,y,b,_),S}if(m instanceof Blob){const S=new Blob([m],{type:m.type});return b.set(m,S),u(S,m,y,b,_),S}if(m instanceof Error){const S=new m.constructor;return b.set(m,S),S.message=m.message,S.name=m.name,S.stack=m.stack,S.cause=m.cause,u(S,m,y,b,_),S}if(typeof m=="object"&&h(m)){const S=Object.create(Object.getPrototypeOf(m));return b.set(m,S),u(S,m,y,b,_),S}return m}function u(m,p,y=m,b,_){const T=[...Object.keys(p),...e.getSymbols(p)];for(let S=0;S<T.length;S++){const E=T[S],N=Object.getOwnPropertyDescriptor(m,E);(N==null||N.writable)&&(m[E]=c(p[E],E,y,b,_))}}function h(m){switch(n.getTag(m)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=c,t.copyProperties=u}(nw)),nw}var OI;function Rre(){return OI||(OI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=T8();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n}(tw)),tw}var II;function Mre(){return II||(II=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hA(),n=Rre();function r(i){return i=n.cloneDeep(i),a=>e.isMatch(a,i)}t.matches=r}(Yx)),Yx}var ow={},lw={},cw={},PI;function Lre(){return PI||(PI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=T8(),n=mA();function r(i,a){return e.cloneDeepWith(i,(o,c,u,h)=>{const m=a?.(o,c,u,h);if(m!==void 0)return m;if(typeof i=="object")switch(Object.prototype.toString.call(i)){case n.numberTag:case n.stringTag:case n.booleanTag:{const p=new i.constructor(i?.valueOf());return e.copyProperties(p,i),p}case n.argumentsTag:{const p={};return e.copyProperties(p,i),p.length=i.length,p[Symbol.iterator]=i[Symbol.iterator],p}default:return}})}t.cloneDeepWith=r}(cw)),cw}var RI;function Vre(){return RI||(RI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Lre();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n}(lw)),lw}var uw={},fw={},MI;function E8(){return MI||(MI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n}(fw)),fw}var hw={},LI;function Bre(){return LI||(LI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dA();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n}(hw)),hw}var VI;function Ure(){return VI||(VI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=YL(),n=E8(),r=Bre(),i=ZE();function a(o,c){let u;if(Array.isArray(c)?u=c:typeof c=="string"&&e.isDeepKey(c)&&o?.[c]==null?u=i.toPath(c):u=[c],u.length===0)return!1;let h=o;for(let m=0;m<u.length;m++){const p=u[m];if((h==null||!Object.hasOwn(h,p))&&!((Array.isArray(h)||r.isArguments(h))&&n.isIndex(p)&&p<h.length))return!1;h=h[p]}return!0}t.has=a}(uw)),uw}var BI;function $re(){return BI||(BI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hA(),n=XL(),r=Vre(),i=JE(),a=Ure();function o(c,u){switch(typeof c){case"object":{Object.is(c?.valueOf(),-0)&&(c="-0");break}case"number":{c=n.toKey(c);break}}return u=r.cloneDeep(u),function(h){const m=i.get(h,c);return m===void 0?a.has(h,c):u===void 0?m===void 0:e.isMatch(m,u)}}t.matchesProperty=o}(ow)),ow}var UI;function Fre(){return UI||(UI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=x8(),n=Ore(),r=Mre(),i=$re();function a(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return n.property(o)}}t.iteratee=a}(Gx)),Gx}var $I;function zre(){return $I||($I=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Cre(),n=x8(),r=kre(),i=Fre();function a(o,c=n.identity){return r.isArrayLikeObject(o)?e.uniqBy(Array.from(o),i.iteratee(c)):[]}t.uniqBy=a}(Ux)),Ux}var dw,FI;function Hre(){return FI||(FI=1,dw=zre().uniqBy),dw}var qre=Hre();const zI=zi(qre);function A8(t,e,n){return e===!0?zI(t,n):typeof e=="function"?zI(t,e):t}var mw={exports:{}},gw={},pw={exports:{}},yw={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HI;function Kre(){if(HI)return yw;HI=1;var t=Pf();function e(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,a=t.useLayoutEffect,o=t.useDebugValue;function c(p,y){var b=y(),_=r({inst:{value:b,getSnapshot:y}}),T=_[0].inst,S=_[1];return a(function(){T.value=b,T.getSnapshot=y,u(T)&&S({inst:T})},[p,b,y]),i(function(){return u(T)&&S({inst:T}),p(function(){u(T)&&S({inst:T})})},[p]),o(b),b}function u(p){var y=p.getSnapshot;p=p.value;try{var b=y();return!n(p,b)}catch{return!0}}function h(p,y){return y()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:c;return yw.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,yw}var qI;function Gre(){return qI||(qI=1,pw.exports=Kre()),pw.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KI;function Wre(){if(KI)return gw;KI=1;var t=Pf(),e=Gre();function n(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,a=t.useRef,o=t.useEffect,c=t.useMemo,u=t.useDebugValue;return gw.useSyncExternalStoreWithSelector=function(h,m,p,y,b){var _=a(null);if(_.current===null){var T={hasValue:!1,value:null};_.current=T}else T=_.current;_=c(function(){function E(R){if(!N){if(N=!0,C=R,R=y(R),b!==void 0&&T.hasValue){var k=T.value;if(b(k,R))return L=k}return L=R}if(k=L,r(C,R))return k;var I=y(R);return b!==void 0&&b(k,I)?(C=R,k):(C=R,L=I)}var N=!1,C,L,D=p===void 0?null:p;return[function(){return E(m())},D===null?void 0:function(){return E(D())}]},[m,p,y,b]);var S=i(h,_[0],_[1]);return o(function(){T.hasValue=!0,T.value=S},[S]),u(S),S},gw}var GI;function Yre(){return GI||(GI=1,mw.exports=Wre()),mw.exports}var Xre=Yre(),gA=w.createContext(null),Qre=t=>t,Pn=()=>{var t=w.useContext(gA);return t?t.store.dispatch:Qre},uy=()=>{},Zre=()=>uy,Jre=(t,e)=>t===e;function He(t){var e=w.useContext(gA);return Xre.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:Zre,e?e.store.getState:uy,e?e.store.getState:uy,e?t:uy,Jre)}function eie(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function tie(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function nie(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var WI=t=>Array.isArray(t)?t:[t];function rie(t){const e=Array.isArray(t[0])?t[0]:t;return nie(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function iie(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var aie=class{constructor(t){this.value=t}deref(){return this.value}},sie=typeof WeakRef<"u"?WeakRef:aie,oie=0,YI=1;function kp(){return{s:oie,v:void 0,o:null,p:null}}function N8(t,e={}){let n=kp();const{resultEqualityCheck:r}=e;let i,a=0;function o(){let c=n;const{length:u}=arguments;for(let p=0,y=u;p<y;p++){const b=arguments[p];if(typeof b=="function"||typeof b=="object"&&b!==null){let _=c.o;_===null&&(c.o=_=new WeakMap);const T=_.get(b);T===void 0?(c=kp(),_.set(b,c)):c=T}else{let _=c.p;_===null&&(c.p=_=new Map);const T=_.get(b);T===void 0?(c=kp(),_.set(b,c)):c=T}}const h=c;let m;if(c.s===YI)m=c.v;else if(m=t.apply(null,arguments),a++,r){const p=i?.deref?.()??i;p!=null&&r(p,m)&&(m=p,a!==0&&a--),i=typeof m=="object"&&m!==null||typeof m=="function"?new sie(m):m}return h.s=YI,h.v=m,m}return o.clearCache=()=>{n=kp(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function lie(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let a=0,o=0,c,u={},h=i.pop();typeof h=="object"&&(u=h,h=i.pop()),eie(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const m={...n,...u},{memoize:p,memoizeOptions:y=[],argsMemoize:b=N8,argsMemoizeOptions:_=[]}=m,T=WI(y),S=WI(_),E=rie(i),N=p(function(){return a++,h.apply(null,arguments)},...T),C=b(function(){o++;const D=iie(E,arguments);return c=N.apply(null,D),c},...S);return Object.assign(C,{resultFunc:h,memoizedResultFunc:N,dependencies:E,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>c,recomputations:()=>a,resetRecomputations:()=>{a=0},memoize:p,argsMemoize:b})};return Object.assign(r,{withTypes:()=>r}),r}var de=lie(N8),cie=Object.assign((t,e=de)=>{tie(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(a=>t[a]);return e(r,(...a)=>a.reduce((o,c,u)=>(o[n[u]]=c,o),{}))},{withTypes:()=>cie}),vw={},bw={},xw={},XI;function uie(){return XI||(XI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,a)=>{if(r!==i){const o=e(r),c=e(i);if(o===c&&o===0){if(r<i)return a==="desc"?1:-1;if(r>i)return a==="desc"?-1:1}return a==="desc"?c-o:o-c}return 0};t.compareValues=n}(xw)),xw}var ww={},_w={},QI;function C8(){return QI||(QI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e}(_w)),_w}var ZI;function fie(){return ZI||(ZI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=C8(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,o){return Array.isArray(a)?!1:typeof a=="number"||typeof a=="boolean"||a==null||e.isSymbol(a)?!0:typeof a=="string"&&(r.test(a)||!n.test(a))||o!=null&&Object.hasOwn(o,a)}t.isKey=i}(ww)),ww}var JI;function hie(){return JI||(JI=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=uie(),n=fie(),r=ZE();function i(a,o,c,u){if(a==null)return[];c=u?void 0:c,Array.isArray(a)||(a=Object.values(a)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(b=>String(b));const h=(b,_)=>{let T=b;for(let S=0;S<_.length&&T!=null;++S)T=T[_[S]];return T},m=(b,_)=>_==null||b==null?_:typeof b=="object"&&"key"in b?Object.hasOwn(_,b.key)?_[b.key]:h(_,b.path):typeof b=="function"?b(_):Array.isArray(b)?h(_,b):typeof _=="object"?_[b]:_,p=o.map(b=>(Array.isArray(b)&&b.length===1&&(b=b[0]),b==null||typeof b=="function"||Array.isArray(b)||n.isKey(b)?b:{key:b,path:r.toPath(b)}));return a.map(b=>({original:b,criteria:p.map(_=>m(_,b))})).slice().sort((b,_)=>{for(let T=0;T<p.length;T++){const S=e.compareValues(b.criteria[T],_.criteria[T],c[T]);if(S!==0)return S}return 0}).map(b=>b.original)}t.orderBy=i}(bw)),bw}var Sw={},eP;function die(){return eP||(eP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],a=Math.floor(r),o=(c,u)=>{for(let h=0;h<c.length;h++){const m=c[h];Array.isArray(m)&&u<a?o(m,u+1):i.push(m)}};return o(n,0),i}t.flatten=e}(Sw)),Sw}var Tw={},tP;function j8(){return tP||(tP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=E8(),n=uA(),r=w8(),i=fA();function a(o,c,u){return r.isObject(u)&&(typeof c=="number"&&n.isArrayLike(u)&&e.isIndex(c)&&c<u.length||typeof c=="string"&&c in u)?i.eq(u[c],o):!1}t.isIterateeCall=a}(Tw)),Tw}var nP;function mie(){return nP||(nP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=hie(),n=die(),r=j8();function i(a,...o){const c=o.length;return c>1&&r.isIterateeCall(a,o[0],o[1])?o=[]:c>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(a,n.flatten(o),["asc"])}t.sortBy=i}(vw)),vw}var Ew,rP;function gie(){return rP||(rP=1,Ew=mie().sortBy),Ew}var pie=gie();const g0=zi(pie);var D8=t=>t.legend.settings,yie=t=>t.legend.size,vie=t=>t.legend.payload,bie=de([vie,D8],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?g0(r,n):r});function xie(){return He(bie)}var Op=1;function k8(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=w.useState({height:0,left:0,top:0,width:0}),r=w.useCallback(i=>{if(i!=null){var a=i.getBoundingClientRect(),o={height:a.height,left:a.left,top:a.top,width:a.width};(Math.abs(o.height-e.height)>Op||Math.abs(o.left-e.left)>Op||Math.abs(o.top-e.top)>Op||Math.abs(o.width-e.width)>Op)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function lr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var wie=typeof Symbol=="function"&&Symbol.observable||"@@observable",iP=wie,Aw=()=>Math.random().toString(36).substring(7).split("").join("."),_ie={INIT:`@@redux/INIT${Aw()}`,REPLACE:`@@redux/REPLACE${Aw()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Aw()}`},Qy=_ie;function pA(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function O8(t,e,n){if(typeof t!="function")throw new Error(lr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(lr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(lr(1));return n(O8)(t,e)}let r=t,i=e,a=new Map,o=a,c=0,u=!1;function h(){o===a&&(o=new Map,a.forEach((S,E)=>{o.set(E,S)}))}function m(){if(u)throw new Error(lr(3));return i}function p(S){if(typeof S!="function")throw new Error(lr(4));if(u)throw new Error(lr(5));let E=!0;h();const N=c++;return o.set(N,S),function(){if(E){if(u)throw new Error(lr(6));E=!1,h(),o.delete(N),a=null}}}function y(S){if(!pA(S))throw new Error(lr(7));if(typeof S.type>"u")throw new Error(lr(8));if(typeof S.type!="string")throw new Error(lr(17));if(u)throw new Error(lr(9));try{u=!0,i=r(i,S)}finally{u=!1}return(a=o).forEach(N=>{N()}),S}function b(S){if(typeof S!="function")throw new Error(lr(10));r=S,y({type:Qy.REPLACE})}function _(){const S=p;return{subscribe(E){if(typeof E!="object"||E===null)throw new Error(lr(11));function N(){const L=E;L.next&&L.next(m())}return N(),{unsubscribe:S(N)}},[iP](){return this}}}return y({type:Qy.INIT}),{dispatch:y,subscribe:p,getState:m,replaceReducer:b,[iP]:_}}function Sie(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:Qy.INIT})>"u")throw new Error(lr(12));if(typeof n(void 0,{type:Qy.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(lr(13))})}function I8(t){const e=Object.keys(t),n={};for(let a=0;a<e.length;a++){const o=e[a];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{Sie(n)}catch(a){i=a}return function(o={},c){if(i)throw i;let u=!1;const h={};for(let m=0;m<r.length;m++){const p=r[m],y=n[p],b=o[p],_=y(b,c);if(typeof _>"u")throw c&&c.type,new Error(lr(14));h[p]=_,u=u||_!==b}return u=u||r.length!==Object.keys(o).length,u?h:o}}function Zy(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function Tie(...t){return e=>(n,r)=>{const i=e(n,r);let a=()=>{throw new Error(lr(15))};const o={getState:i.getState,dispatch:(u,...h)=>a(u,...h)},c=t.map(u=>u(o));return a=Zy(...c)(i.dispatch),{...i,dispatch:a}}}function P8(t){return pA(t)&&"type"in t&&typeof t.type=="string"}var R8=Symbol.for("immer-nothing"),aP=Symbol.for("immer-draftable"),mi=Symbol.for("immer-state");function ia(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Af=Object.getPrototypeOf;function Uc(t){return!!t&&!!t[mi]}function Zs(t){return t?M8(t)||Array.isArray(t)||!!t[aP]||!!t.constructor?.[aP]||y0(t)||v0(t):!1}var Eie=Object.prototype.constructor.toString();function M8(t){if(!t||typeof t!="object")return!1;const e=Af(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Eie}function Jy(t,e){p0(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function p0(t){const e=t[mi];return e?e.type_:Array.isArray(t)?1:y0(t)?2:v0(t)?3:0}function NS(t,e){return p0(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function L8(t,e,n){const r=p0(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Aie(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function y0(t){return t instanceof Map}function v0(t){return t instanceof Set}function hc(t){return t.copy_||t.base_}function CS(t,e){if(y0(t))return new Map(t);if(v0(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=M8(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[mi];let i=Reflect.ownKeys(r);for(let a=0;a<i.length;a++){const o=i[a],c=r[o];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(r[o]={configurable:!0,writable:!0,enumerable:c.enumerable,value:t[o]})}return Object.create(Af(t),r)}else{const r=Af(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function yA(t,e=!1){return b0(t)||Uc(t)||!Zs(t)||(p0(t)>1&&(t.set=t.add=t.clear=t.delete=Nie),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>yA(r,!0))),t}function Nie(){ia(2)}function b0(t){return Object.isFrozen(t)}var Cie={};function $c(t){const e=Cie[t];return e||ia(0,t),e}var rm;function V8(){return rm}function jie(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function sP(t,e){e&&($c("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function jS(t){DS(t),t.drafts_.forEach(Die),t.drafts_=null}function DS(t){t===rm&&(rm=t.parent_)}function oP(t){return rm=jie(rm,t)}function Die(t){const e=t[mi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function lP(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[mi].modified_&&(jS(e),ia(4)),Zs(t)&&(t=ev(e,t),e.parent_||tv(e,t)),e.patches_&&$c("Patches").generateReplacementPatches_(n[mi].base_,t,e.patches_,e.inversePatches_)):t=ev(e,n,[]),jS(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==R8?t:void 0}function ev(t,e,n){if(b0(e))return e;const r=e[mi];if(!r)return Jy(e,(i,a)=>cP(t,r,e,i,a,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return tv(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let a=i,o=!1;r.type_===3&&(a=new Set(i),i.clear(),o=!0),Jy(a,(c,u)=>cP(t,r,i,c,u,n,o)),tv(t,i,!1),n&&t.patches_&&$c("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function cP(t,e,n,r,i,a,o){if(Uc(i)){const c=a&&e&&e.type_!==3&&!NS(e.assigned_,r)?a.concat(r):void 0,u=ev(t,i,c);if(L8(n,r,u),Uc(u))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Zs(i)&&!b0(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;ev(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&tv(t,i)}}function tv(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&yA(e,n)}function kie(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:V8(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,a=vA;n&&(i=[r],a=im);const{revoke:o,proxy:c}=Proxy.revocable(i,a);return r.draft_=c,r.revoke_=o,c}var vA={get(t,e){if(e===mi)return t;const n=hc(t);if(!NS(n,e))return Oie(t,n,e);const r=n[e];return t.finalized_||!Zs(r)?r:r===Nw(t.base_,e)?(Cw(t),t.copy_[e]=OS(r,t)):r},has(t,e){return e in hc(t)},ownKeys(t){return Reflect.ownKeys(hc(t))},set(t,e,n){const r=B8(hc(t),e);if(r?.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=Nw(hc(t),e),a=i?.[mi];if(a&&a.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Aie(n,i)&&(n!==void 0||NS(t.base_,e)))return!0;Cw(t),kS(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Nw(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Cw(t),kS(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=hc(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){ia(11)},getPrototypeOf(t){return Af(t.base_)},setPrototypeOf(){ia(12)}},im={};Jy(vA,(t,e)=>{im[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});im.deleteProperty=function(t,e){return im.set.call(this,t,e,void 0)};im.set=function(t,e,n){return vA.set.call(this,t[0],e,n,t[0])};function Nw(t,e){const n=t[mi];return(n?hc(n):t)[e]}function Oie(t,e,n){const r=B8(e,n);return r?"value"in r?r.value:r.get?.call(t.draft_):void 0}function B8(t,e){if(!(e in t))return;let n=Af(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Af(n)}}function kS(t){t.modified_||(t.modified_=!0,t.parent_&&kS(t.parent_))}function Cw(t){t.copy_||(t.copy_=CS(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Iie=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const a=n;n=e;const o=this;return function(u=a,...h){return o.produce(u,m=>n.call(this,m,...h))}}typeof n!="function"&&ia(6),r!==void 0&&typeof r!="function"&&ia(7);let i;if(Zs(e)){const a=oP(this),o=OS(e,void 0);let c=!0;try{i=n(o),c=!1}finally{c?jS(a):DS(a)}return sP(a,r),lP(i,a)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===R8&&(i=void 0),this.autoFreeze_&&yA(i,!0),r){const a=[],o=[];$c("Patches").generateReplacementPatches_(e,i,a,o),r(a,o)}return i}else ia(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...c)=>this.produceWithPatches(o,u=>e(u,...c));let r,i;return[this.produce(e,n,(o,c)=>{r=o,i=c}),r,i]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Zs(t)||ia(8),Uc(t)&&(t=$s(t));const e=oP(this),n=OS(t,void 0);return n[mi].isManual_=!0,DS(e),n}finishDraft(t,e){const n=t&&t[mi];(!n||!n.isManual_)&&ia(9);const{scope_:r}=n;return sP(r,e),lP(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=$c("Patches").applyPatches_;return Uc(t)?r(t,e):this.produce(t,i=>r(i,e))}};function OS(t,e){const n=y0(t)?$c("MapSet").proxyMap_(t,e):v0(t)?$c("MapSet").proxySet_(t,e):kie(t,e);return(e?e.scope_:V8()).drafts_.push(n),n}function $s(t){return Uc(t)||ia(10,t),U8(t)}function U8(t){if(!Zs(t)||b0(t))return t;const e=t[mi];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=CS(t,e.scope_.immer_.useStrictShallowCopy_)}else n=CS(t,!0);return Jy(n,(r,i)=>{L8(n,r,U8(i))}),e&&(e.finalized_=!1),n}var gi=new Iie,$8=gi.produce;gi.produceWithPatches.bind(gi);gi.setAutoFreeze.bind(gi);gi.setUseStrictShallowCopy.bind(gi);gi.applyPatches.bind(gi);gi.createDraft.bind(gi);gi.finishDraft.bind(gi);function F8(t){return({dispatch:n,getState:r})=>i=>a=>typeof a=="function"?a(n,r,t):i(a)}var Pie=F8(),Rie=F8,Mie=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Zy:Zy.apply(null,arguments)};function $i(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(fi(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>P8(r)&&r.type===t,n}var z8=class Cd extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,Cd.prototype)}static get[Symbol.species](){return Cd}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new Cd(...e[0].concat(this)):new Cd(...e.concat(this))}};function uP(t){return Zs(t)?$8(t,()=>{}):t}function Ip(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function Lie(t){return typeof t=="boolean"}var Vie=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let o=new z8;return n&&(Lie(n)?o.push(Pie):o.push(Rie(n.extraArgument))),o},Bie="RTK_autoBatch",fP=t=>e=>{setTimeout(e,t)},Uie=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,a=!1,o=!1;const c=new Set,u=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:fP(10):t.type==="callback"?t.queueNotification:fP(t.timeout),h=()=>{o=!1,a&&(a=!1,c.forEach(m=>m()))};return Object.assign({},r,{subscribe(m){const p=()=>i&&m(),y=r.subscribe(p);return c.add(m),()=>{y(),c.delete(m)}},dispatch(m){try{return i=!m?.meta?.[Bie],a=!i,a&&(o||(o=!0,u(h))),r.dispatch(m)}finally{i=!0}}})},$ie=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new z8(t);return r&&i.push(Uie(typeof r=="object"?r:void 0)),i};function Fie(t){const e=Vie(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=t||{};let c;if(typeof n=="function")c=n;else if(pA(n))c=I8(n);else throw new Error(fi(1));let u;typeof r=="function"?u=r(e):u=e();let h=Zy;i&&(h=Mie({trace:!1,...typeof i=="object"&&i}));const m=Tie(...u),p=$ie(m);let y=typeof o=="function"?o(p):p();const b=h(...y);return O8(c,a,b)}function H8(t){const e={},n=[];let r;const i={addCase(a,o){const c=typeof a=="string"?a:a.type;if(!c)throw new Error(fi(28));if(c in e)throw new Error(fi(29));return e[c]=o,i},addMatcher(a,o){return n.push({matcher:a,reducer:o}),i},addDefaultCase(a){return r=a,i}};return t(i),[e,n,r]}function zie(t){return typeof t=="function"}function Hie(t,e){let[n,r,i]=H8(e),a;if(zie(t))a=()=>uP(t());else{const c=uP(t);a=()=>c}function o(c=a(),u){let h=[n[u.type],...r.filter(({matcher:m})=>m(u)).map(({reducer:m})=>m)];return h.filter(m=>!!m).length===0&&(h=[i]),h.reduce((m,p)=>{if(p)if(Uc(m)){const b=p(m,u);return b===void 0?m:b}else{if(Zs(m))return $8(m,y=>p(y,u));{const y=p(m,u);if(y===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return m},c)}return o.getInitialState=a,o}var qie="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Kie=(t=21)=>{let e="",n=t;for(;n--;)e+=qie[Math.random()*64|0];return e},Gie=Symbol.for("rtk-slice-createasyncthunk");function Wie(t,e){return`${t}/${e}`}function Yie({creators:t}={}){const e=t?.asyncThunk?.[Gie];return function(r){const{name:i,reducerPath:a=i}=r;if(!i)throw new Error(fi(11));const o=(typeof r.reducers=="function"?r.reducers(Qie()):r.reducers)||{},c=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(C,L){const D=typeof C=="string"?C:C.type;if(!D)throw new Error(fi(12));if(D in u.sliceCaseReducersByType)throw new Error(fi(13));return u.sliceCaseReducersByType[D]=L,h},addMatcher(C,L){return u.sliceMatchers.push({matcher:C,reducer:L}),h},exposeAction(C,L){return u.actionCreators[C]=L,h},exposeCaseReducer(C,L){return u.sliceCaseReducersByName[C]=L,h}};c.forEach(C=>{const L=o[C],D={reducerName:C,type:Wie(i,C),createNotation:typeof r.reducers=="function"};Jie(L)?tae(D,L,h,e):Zie(D,L,h)});function m(){const[C={},L=[],D=void 0]=typeof r.extraReducers=="function"?H8(r.extraReducers):[r.extraReducers],R={...C,...u.sliceCaseReducersByType};return Hie(r.initialState,k=>{for(let I in R)k.addCase(I,R[I]);for(let I of u.sliceMatchers)k.addMatcher(I.matcher,I.reducer);for(let I of L)k.addMatcher(I.matcher,I.reducer);D&&k.addDefaultCase(D)})}const p=C=>C,y=new Map,b=new WeakMap;let _;function T(C,L){return _||(_=m()),_(C,L)}function S(){return _||(_=m()),_.getInitialState()}function E(C,L=!1){function D(k){let I=k[C];return typeof I>"u"&&L&&(I=Ip(b,D,S)),I}function R(k=p){const I=Ip(y,L,()=>new WeakMap);return Ip(I,k,()=>{const O={};for(const[U,$]of Object.entries(r.selectors??{}))O[U]=Xie($,k,()=>Ip(b,k,S),L);return O})}return{reducerPath:C,getSelectors:R,get selectors(){return R(D)},selectSlice:D}}const N={name:i,reducer:T,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:S,...E(a),injectInto(C,{reducerPath:L,...D}={}){const R=L??a;return C.inject({reducerPath:R,reducer:T},D),{...N,...E(R,!0)}}};return N}}function Xie(t,e,n,r){function i(a,...o){let c=e(a);return typeof c>"u"&&r&&(c=n()),t(c,...o)}return i.unwrapped=t,i}var vi=Yie();function Qie(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function Zie({type:t,reducerName:e,createNotation:n},r,i){let a,o;if("reducer"in r){if(n&&!eae(r))throw new Error(fi(17));a=r.reducer,o=r.prepare}else a=r;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,o?$i(t,o):$i(t))}function Jie(t){return t._reducerDefinitionType==="asyncThunk"}function eae(t){return t._reducerDefinitionType==="reducerWithPrepare"}function tae({type:t,reducerName:e},n,r,i){if(!i)throw new Error(fi(18));const{payloadCreator:a,fulfilled:o,pending:c,rejected:u,settled:h,options:m}=n,p=i(t,a,m);r.exposeAction(e,p),o&&r.addCase(p.fulfilled,o),c&&r.addCase(p.pending,c),u&&r.addCase(p.rejected,u),h&&r.addMatcher(p.settled,h),r.exposeCaseReducer(e,{fulfilled:o||Pp,pending:c||Pp,rejected:u||Pp,settled:h||Pp})}function Pp(){}var nae="task",q8="listener",K8="completed",bA="cancelled",rae=`task-${bA}`,iae=`task-${K8}`,IS=`${q8}-${bA}`,aae=`${q8}-${K8}`,x0=class{constructor(t){this.code=t,this.message=`${nae} ${bA} (reason: ${t})`}name="TaskAbortError";message},xA=(t,e)=>{if(typeof t!="function")throw new TypeError(fi(32))},nv=()=>{},G8=(t,e=nv)=>(t.catch(e),t),W8=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),Ac=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},Nc=t=>{if(t.aborted){const{reason:e}=t;throw new x0(e)}};function Y8(t,e){let n=nv;return new Promise((r,i)=>{const a=()=>i(new x0(t.reason));if(t.aborted){a();return}n=W8(t,a),e.finally(()=>n()).then(r,i)}).finally(()=>{n=nv})}var sae=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof x0?"cancelled":"rejected",error:n}}finally{e?.()}},rv=t=>e=>G8(Y8(t,e).then(n=>(Nc(t),n))),X8=t=>{const e=rv(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:ff}=Object,hP={},w0="listenerMiddleware",oae=(t,e)=>{const n=r=>W8(t,()=>Ac(r,t.reason));return(r,i)=>{xA(r);const a=new AbortController;n(a);const o=sae(async()=>{Nc(t),Nc(a.signal);const c=await r({pause:rv(a.signal),delay:X8(a.signal),signal:a.signal});return Nc(a.signal),c},()=>Ac(a,iae));return i?.autoJoin&&e.push(o.catch(nv)),{result:rv(t)(o),cancel(){Ac(a,rae)}}}},lae=(t,e)=>{const n=async(r,i)=>{Nc(e);let a=()=>{};const c=[new Promise((u,h)=>{let m=t({predicate:r,effect:(p,y)=>{y.unsubscribe(),u([p,y.getState(),y.getOriginalState()])}});a=()=>{m(),h()}})];i!=null&&c.push(new Promise(u=>setTimeout(u,i,null)));try{const u=await Y8(e,Promise.race(c));return Nc(e),u}finally{a()}};return(r,i)=>G8(n(r,i))},Q8=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:a}=t;if(e)i=$i(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(fi(21));return xA(a),{predicate:i,type:e,effect:a}},Z8=ff(t=>{const{type:e,predicate:n,effect:r}=Q8(t);return{id:Kie(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(fi(22))}}},{withTypes:()=>Z8}),dP=(t,e)=>{const{type:n,effect:r,predicate:i}=Q8(e);return Array.from(t.values()).find(a=>(typeof n=="string"?a.type===n:a.predicate===i)&&a.effect===r)},PS=t=>{t.pending.forEach(e=>{Ac(e,IS)})},cae=t=>()=>{t.forEach(PS),t.clear()},mP=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},J8=ff($i(`${w0}/add`),{withTypes:()=>J8}),uae=$i(`${w0}/removeAll`),e9=ff($i(`${w0}/remove`),{withTypes:()=>e9}),fae=(...t)=>{console.error(`${w0}/error`,...t)},Rm=(t={})=>{const e=new Map,{extra:n,onError:r=fae}=t;xA(r);const i=m=>(m.unsubscribe=()=>e.delete(m.id),e.set(m.id,m),p=>{m.unsubscribe(),p?.cancelActive&&PS(m)}),a=m=>{const p=dP(e,m)??Z8(m);return i(p)};ff(a,{withTypes:()=>a});const o=m=>{const p=dP(e,m);return p&&(p.unsubscribe(),m.cancelActive&&PS(p)),!!p};ff(o,{withTypes:()=>o});const c=async(m,p,y,b)=>{const _=new AbortController,T=lae(a,_.signal),S=[];try{m.pending.add(_),await Promise.resolve(m.effect(p,ff({},y,{getOriginalState:b,condition:(E,N)=>T(E,N).then(Boolean),take:T,delay:X8(_.signal),pause:rv(_.signal),extra:n,signal:_.signal,fork:oae(_.signal,S),unsubscribe:m.unsubscribe,subscribe:()=>{e.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((E,N,C)=>{E!==_&&(Ac(E,IS),C.delete(E))})},cancel:()=>{Ac(_,IS),m.pending.delete(_)},throwIfCancelled:()=>{Nc(_.signal)}})))}catch(E){E instanceof x0||mP(r,E,{raisedBy:"effect"})}finally{await Promise.all(S),Ac(_,aae),m.pending.delete(_)}},u=cae(e);return{middleware:m=>p=>y=>{if(!P8(y))return p(y);if(J8.match(y))return a(y.payload);if(uae.match(y)){u();return}if(e9.match(y))return o(y.payload);let b=m.getState();const _=()=>{if(b===hP)throw new Error(fi(23));return b};let T;try{if(T=p(y),e.size>0){const S=m.getState(),E=Array.from(e.values());for(const N of E){let C=!1;try{C=N.predicate(y,S,b)}catch(L){C=!1,mP(r,L,{raisedBy:"predicate"})}C&&c(N,y,m,_)}}}finally{b=hP}return T},startListening:a,stopListening:o,clearListeners:u}};function fi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var hae={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},t9=vi({name:"chartLayout",initialState:hae,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){t.margin.top=e.payload.top,t.margin.right=e.payload.right,t.margin.bottom=e.payload.bottom,t.margin.left=e.payload.left},setScale(t,e){t.scale=e.payload}}}),{setMargin:dae,setLayout:mae,setChartSize:gae,setScale:pae}=t9.actions,yae=t9.reducer;function gP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gP(Object(n),!0).forEach(function(r){vae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vae(t,e,n){return(e=bae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bae(t){var e=xae(t,"string");return typeof e=="symbol"?e:e+""}function xae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var iv=Math.PI/180,wae=t=>t*180/Math.PI,hr=(t,e,n,r)=>({x:t+Math.cos(-iv*r)*n,y:e+Math.sin(-iv*r)*n}),_ae=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},Sae=(t,e)=>{var{x:n,y:r}=t,{x:i,y:a}=e;return Math.sqrt((n-i)**2+(r-a)**2)},Tae=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:a}=e,o=Sae({x:n,y:r},{x:i,y:a});if(o<=0)return{radius:o,angle:0};var c=(n-i)/o,u=Math.acos(c);return r>a&&(u=2*Math.PI-u),{radius:o,angle:wae(u),angleInRadian:u}},Eae=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),a=Math.min(r,i);return{startAngle:e-a*360,endAngle:n-a*360}},Aae=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),a=Math.floor(r/360),o=Math.min(i,a);return t+o*360},Nae=(t,e)=>{var{x:n,y:r}=t,{radius:i,angle:a}=Tae({x:n,y:r},e),{innerRadius:o,outerRadius:c}=e;if(i<o||i>c||i===0)return null;var{startAngle:u,endAngle:h}=Eae(e),m=a,p;if(u<=h){for(;m>h;)m-=360;for(;m<u;)m+=360;p=m>=u&&m<=h}else{for(;m>u;)m-=360;for(;m<h;)m+=360;p=m>=h&&m<=u}return p?pP(pP({},e),{},{radius:i,angle:Aae(m,e)}):null};function n9(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function yP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mi(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yP(Object(n),!0).forEach(function(r){Cae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cae(t,e,n){return(e=jae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jae(t){var e=Dae(t,"string");return typeof e=="symbol"?e:e+""}function Dae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function er(t,e,n){return an(t)||an(e)?n:Qa(e)?Bc(t,e,n):typeof e=="function"?e(t):n}var kae=(t,e,n,r,i)=>{var a,o=-1,c=(a=e?.length)!==null&&a!==void 0?a:0;if(c<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var u=0;u<c;u++){var h=u>0?n[u-1].coordinate:n[c-1].coordinate,m=n[u].coordinate,p=u>=c-1?n[0].coordinate:n[u+1].coordinate,y=void 0;if(Fr(m-h)!==Fr(p-m)){var b=[];if(Fr(p-m)===Fr(i[1]-i[0])){y=p;var _=m+i[1]-i[0];b[0]=Math.min(_,(_+h)/2),b[1]=Math.max(_,(_+h)/2)}else{y=h;var T=p+i[1]-i[0];b[0]=Math.min(m,(T+m)/2),b[1]=Math.max(m,(T+m)/2)}var S=[Math.min(m,(y+m)/2),Math.max(m,(y+m)/2)];if(t>S[0]&&t<=S[1]||t>=b[0]&&t<=b[1]){({index:o}=n[u]);break}}else{var E=Math.min(h,p),N=Math.max(h,p);if(t>(E+m)/2&&t<=(N+m)/2){({index:o}=n[u]);break}}}else if(e){for(var C=0;C<c;C++)if(C===0&&t<=(e[C].coordinate+e[C+1].coordinate)/2||C>0&&C<c-1&&t>(e[C].coordinate+e[C-1].coordinate)/2&&t<=(e[C].coordinate+e[C+1].coordinate)/2||C===c-1&&t>(e[C].coordinate+e[C-1].coordinate)/2){({index:o}=e[C]);break}}return o},Oae=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:a,verticalAlign:o,layout:c}=e;if((c==="vertical"||c==="horizontal"&&o==="middle")&&a!=="center"&&Ue(t[a]))return Mi(Mi({},t),{},{[a]:t[a]+(r||0)});if((c==="horizontal"||c==="vertical"&&a==="center")&&o!=="middle"&&Ue(t[o]))return Mi(Mi({},t),{},{[o]:t[o]+(i||0)})}return t},Al=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",r9=(t,e,n,r)=>{if(r)return t.map(c=>c.coordinate);var i,a,o=t.map(c=>(c.coordinate===e&&(i=!0),c.coordinate===n&&(a=!0),c.coordinate));return i||o.push(e),a||o.push(n),o},i9=(t,e,n)=>{if(!t)return null;var{duplicateDomain:r,type:i,range:a,scale:o,realScaleType:c,isCategorical:u,categoricalDomain:h,tickCount:m,ticks:p,niceTicks:y,axisType:b}=t;if(!o)return null;var _=c==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,T=i==="category"&&o.bandwidth?o.bandwidth()/_:0;if(T=b==="angleAxis"&&a&&a.length>=2?Fr(a[0]-a[1])*2*T:T,p||y){var S=(p||y||[]).map((E,N)=>{var C=r?r.indexOf(E):E;return{coordinate:o(C)+T,value:E,offset:T,index:N}});return S.filter(E=>!di(E.coordinate))}return u&&h?h.map((E,N)=>({coordinate:o(E)+T,value:E,index:N,offset:T})):o.ticks&&m!=null?o.ticks(m).map((E,N)=>({coordinate:o(E)+T,value:E,offset:T,index:N})):o.domain().map((E,N)=>({coordinate:o(E)+T,value:r?r[E]:E,index:N,offset:T}))},vP=1e-4,Iae=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,r=t.range(),i=Math.min(r[0],r[1])-vP,a=Math.max(r[0],r[1])+vP,o=t(e[0]),c=t(e[n-1]);(o<i||o>a||c<i||c>a)&&t.domain([e[0],e[n-1]])}},Pae=(t,e)=>{if(!e||e.length!==2||!Ue(e[0])||!Ue(e[1]))return t;var n=Math.min(e[0],e[1]),r=Math.max(e[0],e[1]),i=[t[0],t[1]];return(!Ue(t[0])||t[0]<n)&&(i[0]=n),(!Ue(t[1])||t[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i},Rae=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,a=0,o=0;o<e;++o){var c=di(t[o][n][1])?t[o][n][0]:t[o][n][1];c>=0?(t[o][n][0]=i,t[o][n][1]=i+c,i=t[o][n][1]):(t[o][n][0]=a,t[o][n][1]=a+c,a=t[o][n][1])}},Mae=t=>{var e=t.length;if(!(e<=0))for(var n=0,r=t[0].length;n<r;++n)for(var i=0,a=0;a<e;++a){var o=di(t[a][n][1])?t[a][n][0]:t[a][n][1];o>=0?(t[a][n][0]=i,t[a][n][1]=i+o,i=t[a][n][1]):(t[a][n][0]=0,t[a][n][1]=0)}},Lae={sign:Rae,expand:hre,none:Ef,silhouette:dre,wiggle:mre,positive:Mae},Vae=(t,e,n)=>{var r=Lae[n],i=fre().keys(e).value((a,o)=>+er(a,o,0)).order(TS).offset(r);return i(t)};function Bae(t){return t==null?void 0:String(t)}function bP(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:a,dataKey:o}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!an(i[e.dataKey])){var c=ZL(n,"value",i[e.dataKey]);if(c)return c.coordinate+r/2}return n[a]?n[a].coordinate+r/2:null}var u=er(i,an(o)?e.dataKey:o);return an(u)?null:e.scale(u)}var xP=t=>{var{axis:e,ticks:n,offset:r,bandSize:i,entry:a,index:o}=t;if(e.type==="category")return n[o]?n[o].coordinate+r:null;var c=er(a,e.dataKey,e.scale.domain()[o]);return an(c)?null:e.scale(c)-i/2+r},Uae=t=>{var{numericAxis:e}=t,n=e.scale.domain();if(e.type==="number"){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]},$ae=t=>{var e=t.flat(2).filter(Ue);return[Math.min(...e),Math.max(...e)]},Fae=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],zae=(t,e,n)=>{if(t!=null)return Fae(Object.keys(t).reduce((r,i)=>{var a=t[i],{stackedData:o}=a,c=o.reduce((u,h)=>{var m=n9(h,e,n),p=$ae(m);return[Math.min(u[0],p[0]),Math.max(u[1],p[1])]},[1/0,-1/0]);return[Math.min(c[0],r[0]),Math.max(c[1],r[1])]},[1/0,-1/0]))},wP=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,_P=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,am=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=g0(e,m=>m.coordinate),a=1/0,o=1,c=i.length;o<c;o++){var u=i[o],h=i[o-1];a=Math.min((u.coordinate||0)-(h.coordinate||0),a)}return a===1/0?0:a}return n?void 0:0};function SP(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:a}=t;return Mi(Mi({},e),{},{dataKey:n,payload:r,value:i,name:a})}function _0(t,e){if(t)return String(t);if(typeof e=="string")return e}function Hae(t,e,n,r,i){if(n==="horizontal"||n==="vertical"){var a=t>=i.left&&t<=i.left+i.width&&e>=i.top&&e<=i.top+i.height;return a?{x:t,y:e}:null}return r?Nae({x:t,y:e},r):null}var qae=(t,e,n,r)=>{var i=e.find(h=>h&&h.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.y};if(t==="vertical")return{x:r.x,y:i.coordinate};if(t==="centric"){var a=i.coordinate,{radius:o}=r;return Mi(Mi(Mi({},r),hr(r.cx,r.cy,o,a)),{},{angle:a,radius:o})}var c=i.coordinate,{angle:u}=r;return Mi(Mi(Mi({},r),hr(r.cx,r.cy,c,u)),{},{angle:u,radius:c})}return{x:0,y:0}},Kae=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,so=t=>t.layout.width,oo=t=>t.layout.height,Gae=t=>t.layout.scale,a9=t=>t.layout.margin,wA=de(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),_A=de(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),Wae="data-recharts-item-index",Yae="data-recharts-item-data-key",S0=60;function TP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TP(Object(n),!0).forEach(function(r){Xae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xae(t,e,n){return(e=Qae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qae(t){var e=Zae(t,"string");return typeof e=="symbol"?e:e+""}function Zae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jae=t=>t.brush.height,tr=de([so,oo,a9,Jae,wA,_A,D8,yie],(t,e,n,r,i,a,o,c)=>{var u=a.reduce((_,T)=>{var{orientation:S}=T;if(!T.mirror&&!T.hide){var E=typeof T.width=="number"?T.width:S0;return Fo(Fo({},_),{},{[S]:_[S]+E})}return _},{left:n.left||0,right:n.right||0}),h=i.reduce((_,T)=>{var{orientation:S}=T;return!T.mirror&&!T.hide?Fo(Fo({},_),{},{[S]:Bc(_,"".concat(S))+T.height}):_},{top:n.top||0,bottom:n.bottom||0}),m=Fo(Fo({},h),u),p=m.bottom;m.bottom+=r,m=Oae(m,o,c);var y=t-m.left-m.right,b=e-m.top-m.bottom;return Fo(Fo({brushBottom:p},m),{},{width:Math.max(y,0),height:Math.max(b,0)})}),ese=de(tr,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),s9=de(so,oo,(t,e)=>({x:0,y:0,width:t,height:e})),tse=w.createContext(null),qr=()=>w.useContext(tse)!=null,T0=t=>t.brush,E0=de([T0,tr,a9],(t,e,n)=>({height:t.height,x:Ue(t.x)?t.x:e.left,y:Ue(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:Ue(t.width)?t.width:e.width})),SA=()=>{var t,e=qr(),n=He(ese),r=He(E0),i=(t=He(T0))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},nse={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},o9=()=>{var t;return(t=He(tr))!==null&&t!==void 0?t:nse},TA=()=>He(so),EA=()=>He(oo),rse={top:0,right:0,bottom:0,left:0},ise=()=>{var t;return(t=He(e=>e.layout.margin))!==null&&t!==void 0?t:rse},It=t=>t.layout.layoutType,A0=()=>He(It),ase={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},l9=vi({name:"legend",initialState:ase,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload(t,e){t.payload.push(e.payload)},removeLegendPayload(t,e){var n=$s(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)}}}),{setLegendSize:EP,setLegendSettings:sse,addLegendPayload:ose,removeLegendPayload:lse}=l9.actions,cse=l9.reducer,use=["contextPayload"];function RS(){return RS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},RS.apply(null,arguments)}function AP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?AP(Object(n),!0).forEach(function(r){AA(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function AA(t,e,n){return(e=fse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fse(t){var e=hse(t,"string");return typeof e=="symbol"?e:e+""}function hse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dse(t,e){if(t==null)return{};var n,r,i=mse(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function mse(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function gse(t){return t.value}function pse(t){var{contextPayload:e}=t,n=dse(t,use),r=A8(e,t.payloadUniqBy,gse),i=Nf(Nf({},n),{},{payload:r});return w.isValidElement(t.content)?w.cloneElement(t.content,i):typeof t.content=="function"?w.createElement(t.content,i):w.createElement(cA,i)}function yse(t,e,n,r,i,a){var{layout:o,align:c,verticalAlign:u}=e,h,m;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(c==="center"&&o==="vertical"?h={left:((r||0)-a.width)/2}:h=c==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(u==="middle"?m={top:((i||0)-a.height)/2}:m=u==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),Nf(Nf({},h),m)}function vse(t){var e=Pn();return w.useEffect(()=>{e(sse(t))},[e,t]),null}function bse(t){var e=Pn();return w.useEffect(()=>(e(EP(t)),()=>{e(EP({width:0,height:0}))}),[e,t]),null}function xse(t){var e=xie(),n=Rne(),r=ise(),{width:i,height:a,wrapperStyle:o,portal:c}=t,[u,h]=k8([e]),m=TA(),p=EA(),y=m-(r.left||0)-(r.right||0),b=Mm.getWidthOrHeight(t.layout,a,i,y),_=c?o:Nf(Nf({position:"absolute",width:b?.width||i||"auto",height:b?.height||a||"auto"},yse(o,t,r,m,p,u)),o),T=c??n;if(T==null)return null;var S=w.createElement("div",{className:"recharts-legend-wrapper",style:_,ref:h},w.createElement(vse,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),w.createElement(bse,{width:u.width,height:u.height}),w.createElement(pse,RS({},t,b,{margin:r,chartWidth:m,chartHeight:p,contextPayload:e})));return B3.createPortal(S,T)}class Mm extends w.PureComponent{static getWidthOrHeight(e,n,r,i){return e==="vertical"&&Ue(n)?{height:n}:e==="horizontal"?{width:r||i}:null}render(){return w.createElement(xse,this.props)}}AA(Mm,"displayName","Legend");AA(Mm,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function MS(){return MS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MS.apply(null,arguments)}function NP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function jw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NP(Object(n),!0).forEach(function(r){wse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wse(t,e,n){return(e=_se(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _se(t){var e=Sse(t,"string");return typeof e=="symbol"?e:e+""}function Sse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tse(t){return Array.isArray(t)&&Qa(t[0])&&Qa(t[1])?t.join(" ~ "):t}var Ese=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:r={},labelStyle:i={},payload:a,formatter:o,itemSorter:c,wrapperClassName:u,labelClassName:h,label:m,labelFormatter:p,accessibilityLayer:y=!1}=t,b=()=>{if(a&&a.length){var D={padding:0,margin:0},R=(c?g0(a,c):a).map((k,I)=>{if(k.type==="none")return null;var O=k.formatter||o||Tse,{value:U,name:$}=k,V=U,B=$;if(O){var Y=O(U,$,k,I,a);if(Array.isArray(Y))[V,B]=Y;else if(Y!=null)V=Y;else return null}var ee=jw({display:"block",paddingTop:4,paddingBottom:4,color:k.color||"#000"},r);return w.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(I),style:ee},Qa(B)?w.createElement("span",{className:"recharts-tooltip-item-name"},B):null,Qa(B)?w.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,w.createElement("span",{className:"recharts-tooltip-item-value"},V),w.createElement("span",{className:"recharts-tooltip-item-unit"},k.unit||""))});return w.createElement("ul",{className:"recharts-tooltip-item-list",style:D},R)}return null},_=jw({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),T=jw({margin:0},i),S=!an(m),E=S?m:"",N=zt("recharts-default-tooltip",u),C=zt("recharts-tooltip-label",h);S&&p&&a!==void 0&&a!==null&&(E=p(m,a));var L=y?{role:"status","aria-live":"assertive"}:{};return w.createElement("div",MS({className:N,style:_},L),w.createElement("p",{className:C,style:T},w.isValidElement(E)?E:"".concat(E)),b())},dd="recharts-tooltip-wrapper",Ase={visibility:"hidden"};function Nse(t){var{coordinate:e,translateX:n,translateY:r}=t;return zt(dd,{["".concat(dd,"-right")]:Ue(n)&&e&&Ue(e.x)&&n>=e.x,["".concat(dd,"-left")]:Ue(n)&&e&&Ue(e.x)&&n<e.x,["".concat(dd,"-bottom")]:Ue(r)&&e&&Ue(e.y)&&r>=e.y,["".concat(dd,"-top")]:Ue(r)&&e&&Ue(e.y)&&r<e.y})}function CP(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offsetTopLeft:i,position:a,reverseDirection:o,tooltipDimension:c,viewBox:u,viewBoxDimension:h}=t;if(a&&Ue(a[r]))return a[r];var m=n[r]-c-(i>0?i:0),p=n[r]+i;if(e[r])return o[r]?m:p;var y=u[r];if(y==null)return 0;if(o[r]){var b=m,_=y;return b<_?Math.max(p,y):Math.max(m,y)}if(h==null)return 0;var T=p+c,S=y+h;return T>S?Math.max(m,y):Math.max(p,y)}function Cse(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function jse(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:r,position:i,reverseDirection:a,tooltipBox:o,useTranslate3d:c,viewBox:u}=t,h,m,p;return o.height>0&&o.width>0&&n?(m=CP({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.width,viewBox:u,viewBoxDimension:u.width}),p=CP({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:r,position:i,reverseDirection:a,tooltipDimension:o.height,viewBox:u,viewBoxDimension:u.height}),h=Cse({translateX:m,translateY:p,useTranslate3d:c})):h=Ase,{cssProperties:h,cssClasses:Nse({translateX:m,translateY:p,coordinate:n})}}function jP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jP(Object(n),!0).forEach(function(r){LS(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LS(t,e,n){return(e=Dse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dse(t){var e=kse(t,"string");return typeof e=="symbol"?e:e+""}function kse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Ose extends w.PureComponent{constructor(){super(...arguments),LS(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),LS(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,a;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:a,coordinate:o,hasPayload:c,isAnimationActive:u,offset:h,position:m,reverseDirection:p,useTranslate3d:y,viewBox:b,wrapperStyle:_,lastBoundingBox:T,innerRef:S,hasPortalFromProps:E}=this.props,{cssClasses:N,cssProperties:C}=jse({allowEscapeViewBox:n,coordinate:o,offsetTopLeft:h,position:m,reverseDirection:p,tooltipBox:{height:T.height,width:T.width},useTranslate3d:y,viewBox:b}),L=E?{}:Rp(Rp({transition:u&&e?"transform ".concat(r,"ms ").concat(i):void 0},C),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&c?"visible":"hidden",position:"absolute",top:0,left:0}),D=Rp(Rp({},L),{},{visibility:!this.state.dismissed&&e&&c?"visible":"hidden"},_);return w.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:N,style:D,ref:S},a)}}var Ise=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Yf={isSsr:Ise()},c9=()=>He(t=>t.rootProps.accessibilityLayer);function pi(t){return Number.isFinite(t)}function av(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function VS(){return VS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},VS.apply(null,arguments)}function DP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DP(Object(n),!0).forEach(function(r){Pse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pse(t,e,n){return(e=Rse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rse(t){var e=Mse(t,"string");return typeof e=="symbol"?e:e+""}function Mse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var OP={curveBasisClosed:ere,curveBasisOpen:tre,curveBasis:Jne,curveBumpX:Bne,curveBumpY:Une,curveLinearClosed:nre,curveLinear:d0,curveMonotoneX:rre,curveMonotoneY:ire,curveNatural:are,curveStep:sre,curveStepAfter:lre,curveStepBefore:ore},Mp=t=>pi(t.x)&&pi(t.y),md=t=>t.x,gd=t=>t.y,Lse=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(Pm(t));return(n==="curveMonotone"||n==="curveBump")&&e?OP["".concat(n).concat(e==="vertical"?"Y":"X")]:OP[n]||d0},Vse=t=>{var{type:e="linear",points:n=[],baseLine:r,layout:i,connectNulls:a=!1}=t,o=Lse(e,i),c=a?n.filter(Mp):n,u;if(Array.isArray(r)){var h=a?r.filter(p=>Mp(p)):r,m=c.map((p,y)=>kP(kP({},p),{},{base:h[y]}));return i==="vertical"?u=Dp().y(gd).x1(md).x0(p=>p.base.x):u=Dp().x(md).y1(gd).y0(p=>p.base.y),u.defined(Mp).curve(o),u(m)}return i==="vertical"&&Ue(r)?u=Dp().y(gd).x1(md).x0(r):Ue(r)?u=Dp().x(md).y1(gd).y0(r):u=l8().x(md).y(gd),u.defined(Mp).curve(o),u(c)},u9=t=>{var{className:e,points:n,path:r,pathRef:i}=t;if((!n||!n.length)&&!r)return null;var a=n&&n.length?Vse(t):r;return w.createElement("path",VS({},Yc(t),tA(t),{className:zt("recharts-curve",e),d:a===null?void 0:a,ref:i}))},Bse=["x","y","top","left","width","height","className"];function BS(){return BS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},BS.apply(null,arguments)}function IP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Use(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IP(Object(n),!0).forEach(function(r){$se(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $se(t,e,n){return(e=Fse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fse(t){var e=zse(t,"string");return typeof e=="symbol"?e:e+""}function zse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hse(t,e){if(t==null)return{};var n,r,i=qse(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function qse(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Kse=(t,e,n,r,i,a)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(a,",").concat(e,"h").concat(n),Gse=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:a=0,height:o=0,className:c}=t,u=Hse(t,Bse),h=Use({x:e,y:n,top:r,left:i,width:a,height:o},u);return!Ue(e)||!Ue(n)||!Ue(a)||!Ue(o)||!Ue(r)||!Ue(i)?null:w.createElement("path",BS({},yn(h,!0),{className:zt("recharts-cross",c),d:Kse(e,n,a,o,r,i)}))};function Wse(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function PP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yse(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PP(Object(n),!0).forEach(function(r){Xse(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xse(t,e,n){return(e=Qse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qse(t){var e=Zse(t,"string");return typeof e=="symbol"?e:e+""}function Zse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function es(t,e){var n=Yse({},t),r=e,i=Object.keys(e),a=i.reduce((o,c)=>(o[c]===void 0&&r[c]!==void 0&&(o[c]=r[c]),o),n);return a}var Dw={},kw={},Ow={},RP;function Jse(){return RP||(RP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(!n||typeof n!="object")return!1;const r=Object.getPrototypeOf(n);return r===null||r===Object.prototype||Object.getPrototypeOf(r)===null?Object.prototype.toString.call(n)==="[object Object]":!1}t.isPlainObject=e}(Ow)),Ow}var MP;function eoe(){return MP||(MP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Jse(),n=S8(),r=dA(),i=mA(),a=fA();function o(h,m,p){return c(h,m,void 0,void 0,void 0,void 0,p)}function c(h,m,p,y,b,_,T){const S=T(h,m,p,y,b,_);if(S!==void 0)return S;if(typeof h==typeof m)switch(typeof h){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return h===m;case"number":return h===m||Object.is(h,m);case"function":return h===m;case"object":return u(h,m,_,T)}return u(h,m,_,T)}function u(h,m,p,y){if(Object.is(h,m))return!0;let b=r.getTag(h),_=r.getTag(m);if(b===i.argumentsTag&&(b=i.objectTag),_===i.argumentsTag&&(_=i.objectTag),b!==_)return!1;switch(b){case i.stringTag:return h.toString()===m.toString();case i.numberTag:{const E=h.valueOf(),N=m.valueOf();return a.eq(E,N)}case i.booleanTag:case i.dateTag:case i.symbolTag:return Object.is(h.valueOf(),m.valueOf());case i.regexpTag:return h.source===m.source&&h.flags===m.flags;case i.functionTag:return h===m}p=p??new Map;const T=p.get(h),S=p.get(m);if(T!=null&&S!=null)return T===m;p.set(h,m),p.set(m,h);try{switch(b){case i.mapTag:{if(h.size!==m.size)return!1;for(const[E,N]of h.entries())if(!m.has(E)||!c(N,m.get(E),E,h,m,p,y))return!1;return!0}case i.setTag:{if(h.size!==m.size)return!1;const E=Array.from(h.values()),N=Array.from(m.values());for(let C=0;C<E.length;C++){const L=E[C],D=N.findIndex(R=>c(L,R,void 0,h,m,p,y));if(D===-1)return!1;N.splice(D,1)}return!0}case i.arrayTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:case i.bigUint64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.bigInt64ArrayTag:case i.float32ArrayTag:case i.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(h)!==Buffer.isBuffer(m)||h.length!==m.length)return!1;for(let E=0;E<h.length;E++)if(!c(h[E],m[E],E,h,m,p,y))return!1;return!0}case i.arrayBufferTag:return h.byteLength!==m.byteLength?!1:u(new Uint8Array(h),new Uint8Array(m),p,y);case i.dataViewTag:return h.byteLength!==m.byteLength||h.byteOffset!==m.byteOffset?!1:u(new Uint8Array(h),new Uint8Array(m),p,y);case i.errorTag:return h.name===m.name&&h.message===m.message;case i.objectTag:{if(!(u(h.constructor,m.constructor,p,y)||e.isPlainObject(h)&&e.isPlainObject(m)))return!1;const N=[...Object.keys(h),...n.getSymbols(h)],C=[...Object.keys(m),...n.getSymbols(m)];if(N.length!==C.length)return!1;for(let L=0;L<N.length;L++){const D=N[L],R=h[D];if(!Object.hasOwn(m,D))return!1;const k=m[D];if(!c(R,k,D,h,m,p,y))return!1}return!0}default:return!1}}finally{p.delete(h),p.delete(m)}}t.isEqualWith=o}(kw)),kw}var Iw={},LP;function toe(){return LP||(LP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(){}t.noop=e}(Iw)),Iw}var VP;function noe(){return VP||(VP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eoe(),n=toe();function r(i,a){return e.isEqualWith(i,a,n.noop)}t.isEqual=r}(Dw)),Dw}var Pw,BP;function roe(){return BP||(BP=1,Pw=noe().isEqual),Pw}var ioe=roe();const aoe=zi(ioe);var sv=1e-4,f9=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],h9=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),UP=(t,e)=>n=>{var r=f9(t,e);return h9(r,n)},soe=(t,e)=>n=>{var r=f9(t,e),i=[...r.map((a,o)=>a*o).slice(1),0];return h9(i,n)},$P=function(){for(var e,n,r,i,a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];if(o.length===1)switch(o[0]){case"linear":[e,r,n,i]=[0,0,1,1];break;case"ease":[e,r,n,i]=[.25,.1,.25,1];break;case"ease-in":[e,r,n,i]=[.42,0,1,1];break;case"ease-out":[e,r,n,i]=[.42,0,.58,1];break;case"ease-in-out":[e,r,n,i]=[0,0,.58,1];break;default:{var u=o[0].split("(");u[0]==="cubic-bezier"&&u[1].split(")")[0].split(",").length===4&&([e,r,n,i]=u[1].split(")")[0].split(",").map(_=>parseFloat(_)))}}else o.length===4&&([e,r,n,i]=o);var h=UP(e,n),m=UP(r,i),p=soe(e,n),y=_=>_>1?1:_<0?0:_,b=_=>{for(var T=_>1?1:_,S=T,E=0;E<8;++E){var N=h(S)-T,C=p(S);if(Math.abs(N-T)<sv||C<sv)return m(S);S=y(S-N/C)}return m(S)};return b.isStepper=!1,b},ooe=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,a=(o,c,u)=>{var h=-(o-c)*n,m=u*r,p=u+(h-m)*i/1e3,y=u*i/1e3+o;return Math.abs(y-c)<sv&&Math.abs(p)<sv?[c,0]:[y,p]};return a.isStepper=!0,a.dt=i,a},d9=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return $P(t);case"spring":return ooe();default:if(t.split("(")[0]==="cubic-bezier")return $P(t)}return typeof t=="function"?t:null};function FP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FP(Object(n),!0).forEach(function(r){loe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function loe(t,e,n){return(e=coe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function coe(t){var e=uoe(t,"string");return typeof e=="symbol"?e:e+""}function uoe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var foe=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),hoe=(t,e,n)=>t.map(r=>"".concat(foe(r)," ").concat(e,"ms ").concat(n)).join(","),doe=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),sm=(t,e)=>Object.keys(e).reduce((n,r)=>zP(zP({},n),{},{[r]:t(r,e[r])}),{});function HP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ur(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HP(Object(n),!0).forEach(function(r){moe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function moe(t,e,n){return(e=goe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function goe(t){var e=poe(t,"string");return typeof e=="symbol"?e:e+""}function poe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ov=(t,e,n)=>t+(e-t)*n,US=t=>{var{from:e,to:n}=t;return e!==n},m9=(t,e,n)=>{var r=sm((i,a)=>{if(US(a)){var[o,c]=t(a.from,a.to,a.velocity);return ur(ur({},a),{},{from:o,velocity:c})}return a},e);return n<1?sm((i,a)=>US(a)?ur(ur({},a),{},{velocity:ov(a.velocity,r[i].velocity,n),from:ov(a.from,r[i].from,n)}):a,e):m9(t,r,n-1)};function yoe(t,e,n,r,i,a){var o,c=r.reduce((y,b)=>ur(ur({},y),{},{[b]:{from:t[b],velocity:0,to:e[b]}}),{}),u=()=>sm((y,b)=>b.from,c),h=()=>!Object.values(c).filter(US).length,m=null,p=y=>{o||(o=y);var b=y-o,_=b/n.dt;c=m9(n,c,_),i(ur(ur(ur({},t),e),u())),o=y,h()||(m=a.setTimeout(p))};return()=>(m=a.setTimeout(p),()=>{m()})}function voe(t,e,n,r,i,a,o){var c=null,u=i.reduce((p,y)=>ur(ur({},p),{},{[y]:[t[y],e[y]]}),{}),h,m=p=>{h||(h=p);var y=(p-h)/r,b=sm((T,S)=>ov(...S,n(y)),u);if(a(ur(ur(ur({},t),e),b)),y<1)c=o.setTimeout(m);else{var _=sm((T,S)=>ov(...S,n(1)),u);a(ur(ur(ur({},t),e),_))}};return()=>(c=o.setTimeout(m),()=>{c()})}const g9=(t,e,n,r,i,a)=>{var o=doe(t,e);return n.isStepper===!0?yoe(t,e,n,o,i,a):voe(t,e,n,r,o,i,a)};function boe(t){var e,n=()=>null,r=!1,i=null,a=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var c=o,[u,...h]=c;if(typeof u=="number"){i=t.setTimeout(a.bind(null,h),u);return}a(u),i=t.setTimeout(a.bind(null,h));return}typeof o=="string"&&(e=o,n(e)),typeof o=="object"&&(e=o,n(e)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,i&&(i(),i=null),a(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>t}}class xoe{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,a=o=>{o-r>=n?e(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(a))};return i=requestAnimationFrame(a),()=>{cancelAnimationFrame(i)}}}function woe(){return boe(new xoe)}var _oe=w.createContext(woe);function p9(t,e){var n=w.useContext(_oe);return w.useMemo(()=>e??n(t),[t,e,n])}var Soe=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function $S(){return $S=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$S.apply(null,arguments)}function Toe(t,e){if(t==null)return{};var n,r,i=Eoe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Eoe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function qP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zo(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qP(Object(n),!0).forEach(function(r){vc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vc(t,e,n){return(e=Aoe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Aoe(t){var e=Noe(t,"string");return typeof e=="symbol"?e:e+""}function Noe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class NA extends w.PureComponent{constructor(e,n){super(e,n),vc(this,"mounted",!1),vc(this,"manager",void 0),vc(this,"stopJSAnimation",null),vc(this,"unSubscribe",null);var{isActive:r,attributeName:i,from:a,to:o,children:c,duration:u,animationManager:h}=this.props;if(this.manager=h,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!r||u<=0){this.state={style:{}},typeof c=="function"&&(this.state={style:o});return}if(a){if(typeof c=="function"){this.state={style:a};return}this.state={style:i?{[i]:a}:a}}else this.state={style:{}}}componentDidMount(){var{isActive:e,canBegin:n}=this.props;this.mounted=!0,!(!e||!n)&&this.runAnimation(this.props)}componentDidUpdate(e){var{isActive:n,canBegin:r,attributeName:i,shouldReAnimate:a,to:o,from:c}=this.props,{style:u}=this.state;if(r){if(!n){var h={style:i?{[i]:o}:o};this.state&&u&&(i&&u[i]!==o||!i&&u!==o)&&this.setState(h);return}if(!(aoe(e.to,o)&&e.canBegin&&e.isActive)){var m=!e.canBegin||!e.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=m||a?c:e.to;if(this.state&&u){var y={style:i?{[i]:p}:p};(i&&u[i]!==p||!i&&u!==p)&&this.setState(y)}this.runAnimation(zo(zo({},this.props),{},{from:p,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:e}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}handleStyleChange(e){this.changeStyle(e)}changeStyle(e){this.mounted&&this.setState({style:e})}runJSAnimation(e){var{from:n,to:r,duration:i,easing:a,begin:o,onAnimationEnd:c,onAnimationStart:u}=e,h=g9(n,r,d9(a),i,this.changeStyle,this.manager.getTimeoutController()),m=()=>{this.stopJSAnimation=h()};this.manager.start([u,o,m,i,c])}runAnimation(e){var{begin:n,duration:r,attributeName:i,to:a,easing:o,onAnimationStart:c,onAnimationEnd:u,children:h}=e;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof h=="function"||o==="spring"){this.runJSAnimation(e);return}var m=i?{[i]:a}:a,p=hoe(Object.keys(m),r,o);this.manager.start([c,n,zo(zo({},m),{},{transition:p}),r,u])}render(){var e=this.props,{children:n,begin:r,duration:i,attributeName:a,easing:o,isActive:c,from:u,to:h,canBegin:m,onAnimationEnd:p,shouldReAnimate:y,onAnimationReStart:b,animationManager:_}=e,T=Toe(e,Soe),S=w.Children.count(n),E=this.state.style;if(typeof n=="function")return n(E);if(!c||S===0||i<=0)return n;var N=C=>{var{style:L={},className:D}=C.props,R=w.cloneElement(C,zo(zo({},T),{},{style:zo(zo({},L),E),className:D}));return R};return S===1?N(w.Children.only(n)):w.createElement("div",null,w.Children.map(n,C=>N(C)))}}vc(NA,"displayName","Animate");vc(NA,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function lv(t){var e,n=p9((e=t.attributeName)!==null&&e!==void 0?e:Object.keys(t.to).join(","),t.animationManager);return w.createElement(NA,$S({},t,{animationManager:n}))}function cv(){return cv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cv.apply(null,arguments)}var KP=(t,e,n,r,i)=>{var a=Math.min(Math.abs(n)/2,Math.abs(r)/2),o=r>=0?1:-1,c=n>=0?1:-1,u=r>=0&&n>=0||r<0&&n<0?1:0,h;if(a>0&&i instanceof Array){for(var m=[0,0,0,0],p=0,y=4;p<y;p++)m[p]=i[p]>a?a:i[p];h="M".concat(t,",").concat(e+o*m[0]),m[0]>0&&(h+="A ".concat(m[0],",").concat(m[0],",0,0,").concat(u,",").concat(t+c*m[0],",").concat(e)),h+="L ".concat(t+n-c*m[1],",").concat(e),m[1]>0&&(h+="A ".concat(m[1],",").concat(m[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(e+o*m[1])),h+="L ".concat(t+n,",").concat(e+r-o*m[2]),m[2]>0&&(h+="A ".concat(m[2],",").concat(m[2],",0,0,").concat(u,`,
        `).concat(t+n-c*m[2],",").concat(e+r)),h+="L ".concat(t+c*m[3],",").concat(e+r),m[3]>0&&(h+="A ".concat(m[3],",").concat(m[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(e+r-o*m[3])),h+="Z"}else if(a>0&&i===+i&&i>0){var b=Math.min(a,i);h="M ".concat(t,",").concat(e+o*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+c*b,",").concat(e,`
            L `).concat(t+n-c*b,",").concat(e,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+n,",").concat(e+o*b,`
            L `).concat(t+n,",").concat(e+r-o*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t+n-c*b,",").concat(e+r,`
            L `).concat(t+c*b,",").concat(e+r,`
            A `).concat(b,",").concat(b,",0,0,").concat(u,",").concat(t,",").concat(e+r-o*b," Z")}else h="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return h},Coe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},y9=t=>{var e=es(t,Coe),n=w.useRef(null),[r,i]=w.useState(-1);w.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var E=n.current.getTotalLength();E&&i(E)}catch{}},[]);var{x:a,y:o,width:c,height:u,radius:h,className:m}=e,{animationEasing:p,animationDuration:y,animationBegin:b,isAnimationActive:_,isUpdateAnimationActive:T}=e;if(a!==+a||o!==+o||c!==+c||u!==+u||c===0||u===0)return null;var S=zt("recharts-rectangle",m);return T?w.createElement(lv,{canBegin:r>0,from:{width:c,height:u,x:a,y:o},to:{width:c,height:u,x:a,y:o},duration:y,animationEasing:p,isActive:T},E=>{var{width:N,height:C,x:L,y:D}=E;return w.createElement(lv,{canBegin:r>0,from:"0px ".concat(r===-1?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:y,isActive:_,easing:p},w.createElement("path",cv({},yn(e,!0),{className:S,d:KP(L,D,N,C,h),ref:n})))}):w.createElement("path",cv({},yn(e,!0),{className:S,d:KP(a,o,c,u,h)}))};function v9(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:a}=t,o=hr(e,n,r,i),c=hr(e,n,r,a);return{points:[o,c],cx:e,cy:n,radius:r,startAngle:i,endAngle:a}}function FS(){return FS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},FS.apply(null,arguments)}var joe=(t,e)=>{var n=Fr(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},Lp=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:a,isExternal:o,cornerRadius:c,cornerIsExternal:u}=t,h=c*(o?1:-1)+r,m=Math.asin(c/h)/iv,p=u?i:i+a*m,y=hr(e,n,h,p),b=hr(e,n,r,p),_=u?i-a*m:i,T=hr(e,n,h*Math.cos(m*iv),_);return{center:y,circleTangency:b,lineTangency:T,theta:m}},b9=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:a,endAngle:o}=t,c=joe(a,o),u=a+c,h=hr(e,n,i,a),m=hr(e,n,i,u),p="M ".concat(h.x,",").concat(h.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(a>u),`,
    `).concat(m.x,",").concat(m.y,`
  `);if(r>0){var y=hr(e,n,r,a),b=hr(e,n,r,u);p+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(r,",").concat(r,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(a<=u),`,
            `).concat(y.x,",").concat(y.y," Z")}else p+="L ".concat(e,",").concat(n," Z");return p},Doe=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:h}=t,m=Fr(h-u),{circleTangency:p,lineTangency:y,theta:b}=Lp({cx:e,cy:n,radius:i,angle:u,sign:m,cornerRadius:a,cornerIsExternal:c}),{circleTangency:_,lineTangency:T,theta:S}=Lp({cx:e,cy:n,radius:i,angle:h,sign:-m,cornerRadius:a,cornerIsExternal:c}),E=c?Math.abs(u-h):Math.abs(u-h)-b-S;if(E<0)return o?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(a,",").concat(a,",0,0,1,").concat(a*2,`,0
        a`).concat(a,",").concat(a,",0,0,1,").concat(-a*2,`,0
      `):b9({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:u,endAngle:h});var N="M ".concat(y.x,",").concat(y.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(m<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(E>180),",").concat(+(m<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(a,",").concat(a,",0,0,").concat(+(m<0),",").concat(T.x,",").concat(T.y,`
  `);if(r>0){var{circleTangency:C,lineTangency:L,theta:D}=Lp({cx:e,cy:n,radius:r,angle:u,sign:m,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),{circleTangency:R,lineTangency:k,theta:I}=Lp({cx:e,cy:n,radius:r,angle:h,sign:-m,isExternal:!0,cornerRadius:a,cornerIsExternal:c}),O=c?Math.abs(u-h):Math.abs(u-h)-D-I;if(O<0&&a===0)return"".concat(N,"L").concat(e,",").concat(n,"Z");N+="L".concat(k.x,",").concat(k.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(m<0),",").concat(R.x,",").concat(R.y,`
      A`).concat(r,",").concat(r,",0,").concat(+(O>180),",").concat(+(m>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(a,",").concat(a,",0,0,").concat(+(m<0),",").concat(L.x,",").concat(L.y,"Z")}else N+="L".concat(e,",").concat(n,"Z");return N},koe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},x9=t=>{var e=es(t,koe),{cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:o,forceCornerRadius:c,cornerIsExternal:u,startAngle:h,endAngle:m,className:p}=e;if(a<i||h===m)return null;var y=zt("recharts-sector",p),b=a-i,_=fa(o,b,0,!0),T;return _>0&&Math.abs(h-m)<360?T=Doe({cx:n,cy:r,innerRadius:i,outerRadius:a,cornerRadius:Math.min(_,b/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:h,endAngle:m}):T=b9({cx:n,cy:r,innerRadius:i,outerRadius:a,startAngle:h,endAngle:m}),w.createElement("path",FS({},yn(e,!0),{className:y,d:T}))};function Ooe(t,e,n){var r,i,a,o;if(t==="horizontal")r=e.x,a=r,i=n.top,o=n.top+n.height;else if(t==="vertical")i=e.y,o=i,r=n.left,a=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:c,cy:u,innerRadius:h,outerRadius:m,angle:p}=e,y=hr(c,u,h,p),b=hr(c,u,m,p);r=y.x,i=y.y,a=b.x,o=b.y}else return v9(e);return[{x:r,y:i},{x:a,y:o}]}var Rw={},Mw={},Lw={},GP;function Ioe(){return GP||(GP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=C8();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n}(Lw)),Lw}var WP;function Poe(){return WP||(WP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Ioe();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n}(Mw)),Mw}var YP;function Roe(){return YP||(YP=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=j8(),n=Poe();function r(i,a,o){o&&typeof o!="number"&&e.isIterateeCall(i,a,o)&&(a=o=void 0),i=n.toFinite(i),a===void 0?(a=i,i=0):a=n.toFinite(a),o=o===void 0?i<a?1:-1:n.toFinite(o);const c=Math.max(Math.ceil((a-i)/(o||1)),0),u=new Array(c);for(let h=0;h<c;h++)u[h]=i,i+=o;return u}t.range=r}(Rw)),Rw}var Vw,XP;function Moe(){return XP||(XP=1,Vw=Roe().range),Vw}var Loe=Moe();const w9=zi(Loe);function cl(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Voe(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function CA(t){let e,n,r;t.length!==2?(e=cl,n=(c,u)=>cl(t(c),u),r=(c,u)=>t(c)-u):(e=t===cl||t===Voe?t:Boe,n=t,r=t);function i(c,u,h=0,m=c.length){if(h<m){if(e(u,u)!==0)return m;do{const p=h+m>>>1;n(c[p],u)<0?h=p+1:m=p}while(h<m)}return h}function a(c,u,h=0,m=c.length){if(h<m){if(e(u,u)!==0)return m;do{const p=h+m>>>1;n(c[p],u)<=0?h=p+1:m=p}while(h<m)}return h}function o(c,u,h=0,m=c.length){const p=i(c,u,h,m-1);return p>h&&r(c[p-1],u)>-r(c[p],u)?p-1:p}return{left:i,center:o,right:a}}function Boe(){return 0}function _9(t){return t===null?NaN:+t}function*Uoe(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const $oe=CA(cl),Lm=$oe.right;CA(_9).center;class QP extends Map{constructor(e,n=Hoe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(ZP(this,e))}has(e){return super.has(ZP(this,e))}set(e,n){return super.set(Foe(this,e),n)}delete(e){return super.delete(zoe(this,e))}}function ZP({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Foe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function zoe({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Hoe(t){return t!==null&&typeof t=="object"?t.valueOf():t}function qoe(t=cl){if(t===cl)return S9;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function S9(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const Koe=Math.sqrt(50),Goe=Math.sqrt(10),Woe=Math.sqrt(2);function uv(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Koe?10:a>=Goe?5:a>=Woe?2:1;let c,u,h;return i<0?(h=Math.pow(10,-i)/o,c=Math.round(t*h),u=Math.round(e*h),c/h<t&&++c,u/h>e&&--u,h=-h):(h=Math.pow(10,i)*o,c=Math.round(t/h),u=Math.round(e/h),c*h<t&&++c,u*h>e&&--u),u<c&&.5<=n&&n<2?uv(t,e,n*2):[c,u,h]}function zS(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,a,o]=r?uv(e,t,n):uv(t,e,n);if(!(a>=i))return[];const c=a-i+1,u=new Array(c);if(r)if(o<0)for(let h=0;h<c;++h)u[h]=(a-h)/-o;else for(let h=0;h<c;++h)u[h]=(a-h)*o;else if(o<0)for(let h=0;h<c;++h)u[h]=(i+h)/-o;else for(let h=0;h<c;++h)u[h]=(i+h)*o;return u}function HS(t,e,n){return e=+e,t=+t,n=+n,uv(t,e,n)[2]}function qS(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?HS(e,t,n):HS(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function JP(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function e4(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function T9(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?S9:qoe(i);r>n;){if(r-n>600){const u=r-n+1,h=e-n+1,m=Math.log(u),p=.5*Math.exp(2*m/3),y=.5*Math.sqrt(m*p*(u-p)/u)*(h-u/2<0?-1:1),b=Math.max(n,Math.floor(e-h*p/u+y)),_=Math.min(r,Math.floor(e+(u-h)*p/u+y));T9(t,e,b,_,i)}const a=t[e];let o=n,c=r;for(pd(t,n,e),i(t[r],a)>0&&pd(t,n,r);o<c;){for(pd(t,o,c),++o,--c;i(t[o],a)<0;)++o;for(;i(t[c],a)>0;)--c}i(t[n],a)===0?pd(t,n,c):(++c,pd(t,c,r)),c<=e&&(n=c+1),e<=c&&(r=c-1)}return t}function pd(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Yoe(t,e,n){if(t=Float64Array.from(Uoe(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return e4(t);if(e>=1)return JP(t);var r,i=(r-1)*e,a=Math.floor(i),o=JP(T9(t,a).subarray(0,a+1)),c=e4(t.subarray(a+1));return o+(c-o)*(i-a)}}function Xoe(t,e,n=_9){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t),c=+n(t[a+1],a+1,t);return o+(c-o)*(i-a)}}function Qoe(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,a=new Array(i);++r<i;)a[r]=t+r*n;return a}function Ki(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function lo(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const KS=Symbol("implicit");function jA(){var t=new QP,e=[],n=[],r=KS;function i(a){let o=t.get(a);if(o===void 0){if(r!==KS)return r;t.set(a,o=e.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=new QP;for(const o of a)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return jA(e,n).unknown(r)},Ki.apply(i,arguments),i}function DA(){var t=jA().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,a,o,c=!1,u=0,h=0,m=.5;delete t.unknown;function p(){var y=e().length,b=i<r,_=b?i:r,T=b?r:i;a=(T-_)/Math.max(1,y-u+h*2),c&&(a=Math.floor(a)),_+=(T-_-a*(y-u))*m,o=a*(1-u),c&&(_=Math.round(_),o=Math.round(o));var S=Qoe(y).map(function(E){return _+a*E});return n(b?S.reverse():S)}return t.domain=function(y){return arguments.length?(e(y),p()):e()},t.range=function(y){return arguments.length?([r,i]=y,r=+r,i=+i,p()):[r,i]},t.rangeRound=function(y){return[r,i]=y,r=+r,i=+i,c=!0,p()},t.bandwidth=function(){return o},t.step=function(){return a},t.round=function(y){return arguments.length?(c=!!y,p()):c},t.padding=function(y){return arguments.length?(u=Math.min(1,h=+y),p()):u},t.paddingInner=function(y){return arguments.length?(u=Math.min(1,y),p()):u},t.paddingOuter=function(y){return arguments.length?(h=+y,p()):h},t.align=function(y){return arguments.length?(m=Math.max(0,Math.min(1,y)),p()):m},t.copy=function(){return DA(e(),[r,i]).round(c).paddingInner(u).paddingOuter(h).align(m)},Ki.apply(p(),arguments)}function E9(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return E9(e())},t}function Zoe(){return E9(DA.apply(null,arguments).paddingInner(1))}function kA(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function A9(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Vm(){}var om=.7,fv=1/om,hf="\\s*([+-]?\\d+)\\s*",lm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Joe=/^#([0-9a-f]{3,8})$/,ele=new RegExp(`^rgb\\(${hf},${hf},${hf}\\)$`),tle=new RegExp(`^rgb\\(${Wa},${Wa},${Wa}\\)$`),nle=new RegExp(`^rgba\\(${hf},${hf},${hf},${lm}\\)$`),rle=new RegExp(`^rgba\\(${Wa},${Wa},${Wa},${lm}\\)$`),ile=new RegExp(`^hsl\\(${lm},${Wa},${Wa}\\)$`),ale=new RegExp(`^hsla\\(${lm},${Wa},${Wa},${lm}\\)$`),t4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};kA(Vm,cm,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:n4,formatHex:n4,formatHex8:sle,formatHsl:ole,formatRgb:r4,toString:r4});function n4(){return this.rgb().formatHex()}function sle(){return this.rgb().formatHex8()}function ole(){return N9(this).formatHsl()}function r4(){return this.rgb().formatRgb()}function cm(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Joe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?i4(e):n===3?new zr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Vp(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Vp(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ele.exec(t))?new zr(e[1],e[2],e[3],1):(e=tle.exec(t))?new zr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=nle.exec(t))?Vp(e[1],e[2],e[3],e[4]):(e=rle.exec(t))?Vp(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=ile.exec(t))?o4(e[1],e[2]/100,e[3]/100,1):(e=ale.exec(t))?o4(e[1],e[2]/100,e[3]/100,e[4]):t4.hasOwnProperty(t)?i4(t4[t]):t==="transparent"?new zr(NaN,NaN,NaN,0):null}function i4(t){return new zr(t>>16&255,t>>8&255,t&255,1)}function Vp(t,e,n,r){return r<=0&&(t=e=n=NaN),new zr(t,e,n,r)}function lle(t){return t instanceof Vm||(t=cm(t)),t?(t=t.rgb(),new zr(t.r,t.g,t.b,t.opacity)):new zr}function GS(t,e,n,r){return arguments.length===1?lle(t):new zr(t,e,n,r??1)}function zr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}kA(zr,GS,A9(Vm,{brighter(t){return t=t==null?fv:Math.pow(fv,t),new zr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?om:Math.pow(om,t),new zr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new zr(Cc(this.r),Cc(this.g),Cc(this.b),hv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:a4,formatHex:a4,formatHex8:cle,formatRgb:s4,toString:s4}));function a4(){return`#${bc(this.r)}${bc(this.g)}${bc(this.b)}`}function cle(){return`#${bc(this.r)}${bc(this.g)}${bc(this.b)}${bc((isNaN(this.opacity)?1:this.opacity)*255)}`}function s4(){const t=hv(this.opacity);return`${t===1?"rgb(":"rgba("}${Cc(this.r)}, ${Cc(this.g)}, ${Cc(this.b)}${t===1?")":`, ${t})`}`}function hv(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Cc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function bc(t){return t=Cc(t),(t<16?"0":"")+t.toString(16)}function o4(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new aa(t,e,n,r)}function N9(t){if(t instanceof aa)return new aa(t.h,t.s,t.l,t.opacity);if(t instanceof Vm||(t=cm(t)),!t)return new aa;if(t instanceof aa)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,c=a-i,u=(a+i)/2;return c?(e===a?o=(n-r)/c+(n<r)*6:n===a?o=(r-e)/c+2:o=(e-n)/c+4,c/=u<.5?a+i:2-a-i,o*=60):c=u>0&&u<1?0:o,new aa(o,c,u,t.opacity)}function ule(t,e,n,r){return arguments.length===1?N9(t):new aa(t,e,n,r??1)}function aa(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}kA(aa,ule,A9(Vm,{brighter(t){return t=t==null?fv:Math.pow(fv,t),new aa(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?om:Math.pow(om,t),new aa(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new zr(Bw(t>=240?t-240:t+120,i,r),Bw(t,i,r),Bw(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new aa(l4(this.h),Bp(this.s),Bp(this.l),hv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=hv(this.opacity);return`${t===1?"hsl(":"hsla("}${l4(this.h)}, ${Bp(this.s)*100}%, ${Bp(this.l)*100}%${t===1?")":`, ${t})`}`}}));function l4(t){return t=(t||0)%360,t<0?t+360:t}function Bp(t){return Math.max(0,Math.min(1,t||0))}function Bw(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const OA=t=>()=>t;function fle(t,e){return function(n){return t+n*e}}function hle(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function dle(t){return(t=+t)==1?C9:function(e,n){return n-e?hle(e,n,t):OA(isNaN(e)?n:e)}}function C9(t,e){var n=e-t;return n?fle(t,n):OA(isNaN(t)?e:t)}const c4=function t(e){var n=dle(e);function r(i,a){var o=n((i=GS(i)).r,(a=GS(a)).r),c=n(i.g,a.g),u=n(i.b,a.b),h=C9(i.opacity,a.opacity);return function(m){return i.r=o(m),i.g=c(m),i.b=u(m),i.opacity=h(m),i+""}}return r.gamma=t,r}(1);function mle(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function gle(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ple(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Xf(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(c){for(o=0;o<r;++o)a[o]=i[o](c);return a}}function yle(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function dv(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function vle(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Xf(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var WS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Uw=new RegExp(WS.source,"g");function ble(t){return function(){return t}}function xle(t){return function(e){return t(e)+""}}function wle(t,e){var n=WS.lastIndex=Uw.lastIndex=0,r,i,a,o=-1,c=[],u=[];for(t=t+"",e=e+"";(r=WS.exec(t))&&(i=Uw.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),c[o]?c[o]+=a:c[++o]=a),(r=r[0])===(i=i[0])?c[o]?c[o]+=i:c[++o]=i:(c[++o]=null,u.push({i:o,x:dv(r,i)})),n=Uw.lastIndex;return n<e.length&&(a=e.slice(n),c[o]?c[o]+=a:c[++o]=a),c.length<2?u[0]?xle(u[0].x):ble(e):(e=u.length,function(h){for(var m=0,p;m<e;++m)c[(p=u[m]).i]=p.x(h);return c.join("")})}function Xf(t,e){var n=typeof e,r;return e==null||n==="boolean"?OA(e):(n==="number"?dv:n==="string"?(r=cm(e))?(e=r,c4):wle:e instanceof cm?c4:e instanceof Date?yle:gle(e)?mle:Array.isArray(e)?ple:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?vle:dv)(t,e)}function IA(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function _le(t,e){e===void 0&&(e=t,t=Xf);for(var n=0,r=e.length-1,i=e[0],a=new Array(r<0?0:r);n<r;)a[n]=t(i,i=e[++n]);return function(o){var c=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[c](o-c)}}function Sle(t){return function(){return t}}function mv(t){return+t}var u4=[0,1];function Dr(t){return t}function YS(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Sle(isNaN(e)?NaN:.5)}function Tle(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Ele(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=YS(i,r),a=n(o,a)):(r=YS(r,i),a=n(a,o)),function(c){return a(r(c))}}function Ale(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=YS(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(c){var u=Lm(t,c,1,r)-1;return a[u](i[u](c))}}function Bm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function N0(){var t=u4,e=u4,n=Xf,r,i,a,o=Dr,c,u,h;function m(){var y=Math.min(t.length,e.length);return o!==Dr&&(o=Tle(t[0],t[y-1])),c=y>2?Ale:Ele,u=h=null,p}function p(y){return y==null||isNaN(y=+y)?a:(u||(u=c(t.map(r),e,n)))(r(o(y)))}return p.invert=function(y){return o(i((h||(h=c(e,t.map(r),dv)))(y)))},p.domain=function(y){return arguments.length?(t=Array.from(y,mv),m()):t.slice()},p.range=function(y){return arguments.length?(e=Array.from(y),m()):e.slice()},p.rangeRound=function(y){return e=Array.from(y),n=IA,m()},p.clamp=function(y){return arguments.length?(o=y?!0:Dr,m()):o!==Dr},p.interpolate=function(y){return arguments.length?(n=y,m()):n},p.unknown=function(y){return arguments.length?(a=y,p):a},function(y,b){return r=y,i=b,m()}}function PA(){return N0()(Dr,Dr)}function Nle(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function gv(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Cf(t){return t=gv(Math.abs(t)),t?t[1]:NaN}function Cle(t,e){return function(n,r){for(var i=n.length,a=[],o=0,c=t[0],u=0;i>0&&c>0&&(u+c+1>r&&(c=Math.max(1,r-u)),a.push(n.substring(i-=c,i+c)),!((u+=c+1)>r));)c=t[o=(o+1)%t.length];return a.reverse().join(e)}}function jle(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Dle=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function um(t){if(!(e=Dle.exec(t)))throw new Error("invalid format: "+t);var e;return new RA({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}um.prototype=RA.prototype;function RA(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}RA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function kle(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var j9;function Ole(t,e){var n=gv(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(j9=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+gv(t,Math.max(0,e+a-1))[0]}function f4(t,e){var n=gv(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const h4={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Nle,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>f4(t*100,e),r:f4,s:Ole,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function d4(t){return t}var m4=Array.prototype.map,g4=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ile(t){var e=t.grouping===void 0||t.thousands===void 0?d4:Cle(m4.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?d4:jle(m4.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"−":t.minus+"",u=t.nan===void 0?"NaN":t.nan+"";function h(p){p=um(p);var y=p.fill,b=p.align,_=p.sign,T=p.symbol,S=p.zero,E=p.width,N=p.comma,C=p.precision,L=p.trim,D=p.type;D==="n"?(N=!0,D="g"):h4[D]||(C===void 0&&(C=12),L=!0,D="g"),(S||y==="0"&&b==="=")&&(S=!0,y="0",b="=");var R=T==="$"?n:T==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():"",k=T==="$"?r:/[%p]/.test(D)?o:"",I=h4[D],O=/[defgprs%]/.test(D);C=C===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,C)):Math.max(0,Math.min(20,C));function U($){var V=R,B=k,Y,ee,q;if(D==="c")B=I($)+B,$="";else{$=+$;var G=$<0||1/$<0;if($=isNaN($)?u:I(Math.abs($),C),L&&($=kle($)),G&&+$==0&&_!=="+"&&(G=!1),V=(G?_==="("?_:c:_==="-"||_==="("?"":_)+V,B=(D==="s"?g4[8+j9/3]:"")+B+(G&&_==="("?")":""),O){for(Y=-1,ee=$.length;++Y<ee;)if(q=$.charCodeAt(Y),48>q||q>57){B=(q===46?i+$.slice(Y+1):$.slice(Y))+B,$=$.slice(0,Y);break}}}N&&!S&&($=e($,1/0));var K=V.length+$.length+B.length,oe=K<E?new Array(E-K+1).join(y):"";switch(N&&S&&($=e(oe+$,oe.length?E-B.length:1/0),oe=""),b){case"<":$=V+$+B+oe;break;case"=":$=V+oe+$+B;break;case"^":$=oe.slice(0,K=oe.length>>1)+V+$+B+oe.slice(K);break;default:$=oe+V+$+B;break}return a($)}return U.toString=function(){return p+""},U}function m(p,y){var b=h((p=um(p),p.type="f",p)),_=Math.max(-8,Math.min(8,Math.floor(Cf(y)/3)))*3,T=Math.pow(10,-_),S=g4[8+_/3];return function(E){return b(T*E)+S}}return{format:h,formatPrefix:m}}var Up,MA,D9;Ple({thousands:",",grouping:[3],currency:["$",""]});function Ple(t){return Up=Ile(t),MA=Up.format,D9=Up.formatPrefix,Up}function Rle(t){return Math.max(0,-Cf(Math.abs(t)))}function Mle(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Cf(e)/3)))*3-Cf(Math.abs(t)))}function Lle(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Cf(e)-Cf(t))+1}function k9(t,e,n,r){var i=qS(t,e,n),a;switch(r=um(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Mle(i,o))&&(r.precision=a),D9(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Lle(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=Rle(i))&&(r.precision=a-(r.type==="%")*2);break}}return MA(r)}function Nl(t){var e=t.domain;return t.ticks=function(n){var r=e();return zS(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return k9(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],c=r[a],u,h,m=10;for(c<o&&(h=o,o=c,c=h,h=i,i=a,a=h);m-- >0;){if(h=HS(o,c,n),h===u)return r[i]=o,r[a]=c,e(r);if(h>0)o=Math.floor(o/h)*h,c=Math.ceil(c/h)*h;else if(h<0)o=Math.ceil(o*h)/h,c=Math.floor(c*h)/h;else break;u=h}return t},t}function O9(){var t=PA();return t.copy=function(){return Bm(t,O9())},Ki.apply(t,arguments),Nl(t)}function I9(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,mv),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return I9(t).unknown(e)},t=arguments.length?Array.from(t,mv):[0,1],Nl(n)}function P9(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}function p4(t){return Math.log(t)}function y4(t){return Math.exp(t)}function Vle(t){return-Math.log(-t)}function Ble(t){return-Math.exp(-t)}function Ule(t){return isFinite(t)?+("1e"+t):t<0?0:t}function $le(t){return t===10?Ule:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Fle(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function v4(t){return(e,n)=>-t(-e,n)}function LA(t){const e=t(p4,y4),n=e.domain;let r=10,i,a;function o(){return i=Fle(r),a=$le(r),n()[0]<0?(i=v4(i),a=v4(a),t(Vle,Ble)):t(p4,y4),e}return e.base=function(c){return arguments.length?(r=+c,o()):r},e.domain=function(c){return arguments.length?(n(c),o()):n()},e.ticks=c=>{const u=n();let h=u[0],m=u[u.length-1];const p=m<h;p&&([h,m]=[m,h]);let y=i(h),b=i(m),_,T;const S=c==null?10:+c;let E=[];if(!(r%1)&&b-y<S){if(y=Math.floor(y),b=Math.ceil(b),h>0){for(;y<=b;++y)for(_=1;_<r;++_)if(T=y<0?_/a(-y):_*a(y),!(T<h)){if(T>m)break;E.push(T)}}else for(;y<=b;++y)for(_=r-1;_>=1;--_)if(T=y>0?_/a(-y):_*a(y),!(T<h)){if(T>m)break;E.push(T)}E.length*2<S&&(E=zS(h,m,S))}else E=zS(y,b,Math.min(b-y,S)).map(a);return p?E.reverse():E},e.tickFormat=(c,u)=>{if(c==null&&(c=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=um(u)).precision==null&&(u.trim=!0),u=MA(u)),c===1/0)return u;const h=Math.max(1,r*c/e.ticks().length);return m=>{let p=m/a(Math.round(i(m)));return p*r<r-.5&&(p*=r),p<=h?u(m):""}},e.nice=()=>n(P9(n(),{floor:c=>a(Math.floor(i(c))),ceil:c=>a(Math.ceil(i(c)))})),e}function R9(){const t=LA(N0()).domain([1,10]);return t.copy=()=>Bm(t,R9()).base(t.base()),Ki.apply(t,arguments),t}function b4(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function x4(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function VA(t){var e=1,n=t(b4(e),x4(e));return n.constant=function(r){return arguments.length?t(b4(e=+r),x4(e)):e},Nl(n)}function M9(){var t=VA(N0());return t.copy=function(){return Bm(t,M9()).constant(t.constant())},Ki.apply(t,arguments)}function w4(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function zle(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Hle(t){return t<0?-t*t:t*t}function BA(t){var e=t(Dr,Dr),n=1;function r(){return n===1?t(Dr,Dr):n===.5?t(zle,Hle):t(w4(n),w4(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Nl(e)}function UA(){var t=BA(N0());return t.copy=function(){return Bm(t,UA()).exponent(t.exponent())},Ki.apply(t,arguments),t}function qle(){return UA.apply(null,arguments).exponent(.5)}function _4(t){return Math.sign(t)*t*t}function Kle(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function L9(){var t=PA(),e=[0,1],n=!1,r;function i(a){var o=Kle(t(a));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(a){return t.invert(_4(a))},i.domain=function(a){return arguments.length?(t.domain(a),i):t.domain()},i.range=function(a){return arguments.length?(t.range((e=Array.from(a,mv)).map(_4)),i):e.slice()},i.rangeRound=function(a){return i.range(a).round(!0)},i.round=function(a){return arguments.length?(n=!!a,i):n},i.clamp=function(a){return arguments.length?(t.clamp(a),i):t.clamp()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return L9(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Ki.apply(i,arguments),Nl(i)}function V9(){var t=[],e=[],n=[],r;function i(){var o=0,c=Math.max(1,e.length);for(n=new Array(c-1);++o<c;)n[o-1]=Xoe(t,o/c);return a}function a(o){return o==null||isNaN(o=+o)?r:e[Lm(n,o)]}return a.invertExtent=function(o){var c=e.indexOf(o);return c<0?[NaN,NaN]:[c>0?n[c-1]:t[0],c<n.length?n[c]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let c of o)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(cl),i()},a.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return V9().domain(t).range(e).unknown(r)},Ki.apply(a,arguments)}function B9(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function o(u){return u!=null&&u<=u?i[Lm(r,u,0,n)]:a}function c(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*e-(u-n)*t)/(n+1);return o}return o.domain=function(u){return arguments.length?([t,e]=u,t=+t,e=+e,c()):[t,e]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,c()):i.slice()},o.invertExtent=function(u){var h=i.indexOf(u);return h<0?[NaN,NaN]:h<1?[t,r[0]]:h>=n?[r[n-1],e]:[r[h-1],r[h]]},o.unknown=function(u){return arguments.length&&(a=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return B9().domain([t,e]).range(i).unknown(a)},Ki.apply(Nl(o),arguments)}function U9(){var t=[.5],e=[0,1],n,r=1;function i(a){return a!=null&&a<=a?e[Lm(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=Array.from(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=Array.from(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return U9().domain(t).range(e).unknown(n)},Ki.apply(i,arguments)}const $w=new Date,Fw=new Date;function zn(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(t(a=new Date(+a)),a),i.ceil=a=>(t(a=new Date(a-1)),e(a,1),t(a),a),i.round=a=>{const o=i(a),c=i.ceil(a);return a-o<c-a?o:c},i.offset=(a,o)=>(e(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,c)=>{const u=[];if(a=i.ceil(a),c=c==null?1:Math.floor(c),!(a<o)||!(c>0))return u;let h;do u.push(h=new Date(+a)),e(a,c),t(a);while(h<a&&a<o);return u},i.filter=a=>zn(o=>{if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;e(o,-1),!a(o););else for(;--c>=0;)for(;e(o,1),!a(o););}),n&&(i.count=(a,o)=>($w.setTime(+a),Fw.setTime(+o),t($w),t(Fw),Math.floor(n($w,Fw))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const pv=zn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);pv.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?zn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):pv);pv.range;const Ls=1e3,Vi=Ls*60,Vs=Vi*60,Js=Vs*24,$A=Js*7,S4=Js*30,zw=Js*365,xc=zn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ls)},(t,e)=>(e-t)/Ls,t=>t.getUTCSeconds());xc.range;const FA=zn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ls)},(t,e)=>{t.setTime(+t+e*Vi)},(t,e)=>(e-t)/Vi,t=>t.getMinutes());FA.range;const zA=zn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Vi)},(t,e)=>(e-t)/Vi,t=>t.getUTCMinutes());zA.range;const HA=zn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ls-t.getMinutes()*Vi)},(t,e)=>{t.setTime(+t+e*Vs)},(t,e)=>(e-t)/Vs,t=>t.getHours());HA.range;const qA=zn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Vs)},(t,e)=>(e-t)/Vs,t=>t.getUTCHours());qA.range;const Um=zn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Vi)/Js,t=>t.getDate()-1);Um.range;const C0=zn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Js,t=>t.getUTCDate()-1);C0.range;const $9=zn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Js,t=>Math.floor(t/Js));$9.range;function Xc(t){return zn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Vi)/$A)}const j0=Xc(0),yv=Xc(1),Gle=Xc(2),Wle=Xc(3),jf=Xc(4),Yle=Xc(5),Xle=Xc(6);j0.range;yv.range;Gle.range;Wle.range;jf.range;Yle.range;Xle.range;function Qc(t){return zn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/$A)}const D0=Qc(0),vv=Qc(1),Qle=Qc(2),Zle=Qc(3),Df=Qc(4),Jle=Qc(5),ece=Qc(6);D0.range;vv.range;Qle.range;Zle.range;Df.range;Jle.range;ece.range;const KA=zn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());KA.range;const GA=zn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());GA.range;const eo=zn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());eo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:zn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});eo.range;const to=zn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());to.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:zn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});to.range;function F9(t,e,n,r,i,a){const o=[[xc,1,Ls],[xc,5,5*Ls],[xc,15,15*Ls],[xc,30,30*Ls],[a,1,Vi],[a,5,5*Vi],[a,15,15*Vi],[a,30,30*Vi],[i,1,Vs],[i,3,3*Vs],[i,6,6*Vs],[i,12,12*Vs],[r,1,Js],[r,2,2*Js],[n,1,$A],[e,1,S4],[e,3,3*S4],[t,1,zw]];function c(h,m,p){const y=m<h;y&&([h,m]=[m,h]);const b=p&&typeof p.range=="function"?p:u(h,m,p),_=b?b.range(h,+m+1):[];return y?_.reverse():_}function u(h,m,p){const y=Math.abs(m-h)/p,b=CA(([,,S])=>S).right(o,y);if(b===o.length)return t.every(qS(h/zw,m/zw,p));if(b===0)return pv.every(Math.max(qS(h,m,p),1));const[_,T]=o[y/o[b-1][2]<o[b][2]/y?b-1:b];return _.every(T)}return[c,u]}const[tce,nce]=F9(to,GA,D0,$9,qA,zA),[rce,ice]=F9(eo,KA,j0,Um,HA,FA);function Hw(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function qw(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function yd(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function ace(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,c=t.months,u=t.shortMonths,h=vd(i),m=bd(i),p=vd(a),y=bd(a),b=vd(o),_=bd(o),T=vd(c),S=bd(c),E=vd(u),N=bd(u),C={a:G,A:K,b:oe,B:H,c:null,d:j4,e:j4,f:Cce,g:Vce,G:Uce,H:Ece,I:Ace,j:Nce,L:z9,m:jce,M:Dce,p:Z,q:te,Q:O4,s:I4,S:kce,u:Oce,U:Ice,V:Pce,w:Rce,W:Mce,x:null,X:null,y:Lce,Y:Bce,Z:$ce,"%":k4},L={a:fe,A:Ce,b:Ie,B:Fe,c:null,d:D4,e:D4,f:qce,g:tue,G:rue,H:Fce,I:zce,j:Hce,L:q9,m:Kce,M:Gce,p:Pt,q:Ne,Q:O4,s:I4,S:Wce,u:Yce,U:Xce,V:Qce,w:Zce,W:Jce,x:null,X:null,y:eue,Y:nue,Z:iue,"%":k4},D={a:U,A:$,b:V,B,c:Y,d:N4,e:N4,f:wce,g:A4,G:E4,H:C4,I:C4,j:yce,L:xce,m:pce,M:vce,p:O,q:gce,Q:Sce,s:Tce,S:bce,u:uce,U:fce,V:hce,w:cce,W:dce,x:ee,X:q,y:A4,Y:E4,Z:mce,"%":_ce};C.x=R(n,C),C.X=R(r,C),C.c=R(e,C),L.x=R(n,L),L.X=R(r,L),L.c=R(e,L);function R(we,Le){return function(xe){var ce=[],Pe=-1,qe=0,Ke=we.length,kt,Rt,Gr;for(xe instanceof Date||(xe=new Date(+xe));++Pe<Ke;)we.charCodeAt(Pe)===37&&(ce.push(we.slice(qe,Pe)),(Rt=T4[kt=we.charAt(++Pe)])!=null?kt=we.charAt(++Pe):Rt=kt==="e"?" ":"0",(Gr=Le[kt])&&(kt=Gr(xe,Rt)),ce.push(kt),qe=Pe+1);return ce.push(we.slice(qe,Pe)),ce.join("")}}function k(we,Le){return function(xe){var ce=yd(1900,void 0,1),Pe=I(ce,we,xe+="",0),qe,Ke;if(Pe!=xe.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(Le&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(qe=qw(yd(ce.y,0,1)),Ke=qe.getUTCDay(),qe=Ke>4||Ke===0?vv.ceil(qe):vv(qe),qe=C0.offset(qe,(ce.V-1)*7),ce.y=qe.getUTCFullYear(),ce.m=qe.getUTCMonth(),ce.d=qe.getUTCDate()+(ce.w+6)%7):(qe=Hw(yd(ce.y,0,1)),Ke=qe.getDay(),qe=Ke>4||Ke===0?yv.ceil(qe):yv(qe),qe=Um.offset(qe,(ce.V-1)*7),ce.y=qe.getFullYear(),ce.m=qe.getMonth(),ce.d=qe.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),Ke="Z"in ce?qw(yd(ce.y,0,1)).getUTCDay():Hw(yd(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(Ke+5)%7:ce.w+ce.U*7-(Ke+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,qw(ce)):Hw(ce)}}function I(we,Le,xe,ce){for(var Pe=0,qe=Le.length,Ke=xe.length,kt,Rt;Pe<qe;){if(ce>=Ke)return-1;if(kt=Le.charCodeAt(Pe++),kt===37){if(kt=Le.charAt(Pe++),Rt=D[kt in T4?Le.charAt(Pe++):kt],!Rt||(ce=Rt(we,xe,ce))<0)return-1}else if(kt!=xe.charCodeAt(ce++))return-1}return ce}function O(we,Le,xe){var ce=h.exec(Le.slice(xe));return ce?(we.p=m.get(ce[0].toLowerCase()),xe+ce[0].length):-1}function U(we,Le,xe){var ce=b.exec(Le.slice(xe));return ce?(we.w=_.get(ce[0].toLowerCase()),xe+ce[0].length):-1}function $(we,Le,xe){var ce=p.exec(Le.slice(xe));return ce?(we.w=y.get(ce[0].toLowerCase()),xe+ce[0].length):-1}function V(we,Le,xe){var ce=E.exec(Le.slice(xe));return ce?(we.m=N.get(ce[0].toLowerCase()),xe+ce[0].length):-1}function B(we,Le,xe){var ce=T.exec(Le.slice(xe));return ce?(we.m=S.get(ce[0].toLowerCase()),xe+ce[0].length):-1}function Y(we,Le,xe){return I(we,e,Le,xe)}function ee(we,Le,xe){return I(we,n,Le,xe)}function q(we,Le,xe){return I(we,r,Le,xe)}function G(we){return o[we.getDay()]}function K(we){return a[we.getDay()]}function oe(we){return u[we.getMonth()]}function H(we){return c[we.getMonth()]}function Z(we){return i[+(we.getHours()>=12)]}function te(we){return 1+~~(we.getMonth()/3)}function fe(we){return o[we.getUTCDay()]}function Ce(we){return a[we.getUTCDay()]}function Ie(we){return u[we.getUTCMonth()]}function Fe(we){return c[we.getUTCMonth()]}function Pt(we){return i[+(we.getUTCHours()>=12)]}function Ne(we){return 1+~~(we.getUTCMonth()/3)}return{format:function(we){var Le=R(we+="",C);return Le.toString=function(){return we},Le},parse:function(we){var Le=k(we+="",!1);return Le.toString=function(){return we},Le},utcFormat:function(we){var Le=R(we+="",L);return Le.toString=function(){return we},Le},utcParse:function(we){var Le=k(we+="",!0);return Le.toString=function(){return we},Le}}}var T4={"-":"",_:" ",0:"0"},nr=/^\s*\d+/,sce=/^%/,oce=/[\\^$*+?|[\]().{}]/g;function Dt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function lce(t){return t.replace(oce,"\\$&")}function vd(t){return new RegExp("^(?:"+t.map(lce).join("|")+")","i")}function bd(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function cce(t,e,n){var r=nr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function uce(t,e,n){var r=nr.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function fce(t,e,n){var r=nr.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function hce(t,e,n){var r=nr.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function dce(t,e,n){var r=nr.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function E4(t,e,n){var r=nr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function A4(t,e,n){var r=nr.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function mce(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function gce(t,e,n){var r=nr.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function pce(t,e,n){var r=nr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function N4(t,e,n){var r=nr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function yce(t,e,n){var r=nr.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function C4(t,e,n){var r=nr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function vce(t,e,n){var r=nr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function bce(t,e,n){var r=nr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function xce(t,e,n){var r=nr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function wce(t,e,n){var r=nr.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function _ce(t,e,n){var r=sce.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Sce(t,e,n){var r=nr.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Tce(t,e,n){var r=nr.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function j4(t,e){return Dt(t.getDate(),e,2)}function Ece(t,e){return Dt(t.getHours(),e,2)}function Ace(t,e){return Dt(t.getHours()%12||12,e,2)}function Nce(t,e){return Dt(1+Um.count(eo(t),t),e,3)}function z9(t,e){return Dt(t.getMilliseconds(),e,3)}function Cce(t,e){return z9(t,e)+"000"}function jce(t,e){return Dt(t.getMonth()+1,e,2)}function Dce(t,e){return Dt(t.getMinutes(),e,2)}function kce(t,e){return Dt(t.getSeconds(),e,2)}function Oce(t){var e=t.getDay();return e===0?7:e}function Ice(t,e){return Dt(j0.count(eo(t)-1,t),e,2)}function H9(t){var e=t.getDay();return e>=4||e===0?jf(t):jf.ceil(t)}function Pce(t,e){return t=H9(t),Dt(jf.count(eo(t),t)+(eo(t).getDay()===4),e,2)}function Rce(t){return t.getDay()}function Mce(t,e){return Dt(yv.count(eo(t)-1,t),e,2)}function Lce(t,e){return Dt(t.getFullYear()%100,e,2)}function Vce(t,e){return t=H9(t),Dt(t.getFullYear()%100,e,2)}function Bce(t,e){return Dt(t.getFullYear()%1e4,e,4)}function Uce(t,e){var n=t.getDay();return t=n>=4||n===0?jf(t):jf.ceil(t),Dt(t.getFullYear()%1e4,e,4)}function $ce(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Dt(e/60|0,"0",2)+Dt(e%60,"0",2)}function D4(t,e){return Dt(t.getUTCDate(),e,2)}function Fce(t,e){return Dt(t.getUTCHours(),e,2)}function zce(t,e){return Dt(t.getUTCHours()%12||12,e,2)}function Hce(t,e){return Dt(1+C0.count(to(t),t),e,3)}function q9(t,e){return Dt(t.getUTCMilliseconds(),e,3)}function qce(t,e){return q9(t,e)+"000"}function Kce(t,e){return Dt(t.getUTCMonth()+1,e,2)}function Gce(t,e){return Dt(t.getUTCMinutes(),e,2)}function Wce(t,e){return Dt(t.getUTCSeconds(),e,2)}function Yce(t){var e=t.getUTCDay();return e===0?7:e}function Xce(t,e){return Dt(D0.count(to(t)-1,t),e,2)}function K9(t){var e=t.getUTCDay();return e>=4||e===0?Df(t):Df.ceil(t)}function Qce(t,e){return t=K9(t),Dt(Df.count(to(t),t)+(to(t).getUTCDay()===4),e,2)}function Zce(t){return t.getUTCDay()}function Jce(t,e){return Dt(vv.count(to(t)-1,t),e,2)}function eue(t,e){return Dt(t.getUTCFullYear()%100,e,2)}function tue(t,e){return t=K9(t),Dt(t.getUTCFullYear()%100,e,2)}function nue(t,e){return Dt(t.getUTCFullYear()%1e4,e,4)}function rue(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Df(t):Df.ceil(t),Dt(t.getUTCFullYear()%1e4,e,4)}function iue(){return"+0000"}function k4(){return"%"}function O4(t){return+t}function I4(t){return Math.floor(+t/1e3)}var qu,G9,W9;aue({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function aue(t){return qu=ace(t),G9=qu.format,qu.parse,W9=qu.utcFormat,qu.utcParse,qu}function sue(t){return new Date(t)}function oue(t){return t instanceof Date?+t:+new Date(+t)}function WA(t,e,n,r,i,a,o,c,u,h){var m=PA(),p=m.invert,y=m.domain,b=h(".%L"),_=h(":%S"),T=h("%I:%M"),S=h("%I %p"),E=h("%a %d"),N=h("%b %d"),C=h("%B"),L=h("%Y");function D(R){return(u(R)<R?b:c(R)<R?_:o(R)<R?T:a(R)<R?S:r(R)<R?i(R)<R?E:N:n(R)<R?C:L)(R)}return m.invert=function(R){return new Date(p(R))},m.domain=function(R){return arguments.length?y(Array.from(R,oue)):y().map(sue)},m.ticks=function(R){var k=y();return t(k[0],k[k.length-1],R??10)},m.tickFormat=function(R,k){return k==null?D:h(k)},m.nice=function(R){var k=y();return(!R||typeof R.range!="function")&&(R=e(k[0],k[k.length-1],R??10)),R?y(P9(k,R)):m},m.copy=function(){return Bm(m,WA(t,e,n,r,i,a,o,c,u,h))},m}function lue(){return Ki.apply(WA(rce,ice,eo,KA,j0,Um,HA,FA,xc,G9).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function cue(){return Ki.apply(WA(tce,nce,to,GA,D0,C0,qA,zA,xc,W9).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function k0(){var t=0,e=1,n,r,i,a,o=Dr,c=!1,u;function h(p){return p==null||isNaN(p=+p)?u:o(i===0?.5:(p=(a(p)-n)*i,c?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([t,e]=p,n=a(t=+t),r=a(e=+e),i=n===r?0:1/(r-n),h):[t,e]},h.clamp=function(p){return arguments.length?(c=!!p,h):c},h.interpolator=function(p){return arguments.length?(o=p,h):o};function m(p){return function(y){var b,_;return arguments.length?([b,_]=y,o=p(b,_),h):[o(0),o(1)]}}return h.range=m(Xf),h.rangeRound=m(IA),h.unknown=function(p){return arguments.length?(u=p,h):u},function(p){return a=p,n=p(t),r=p(e),i=n===r?0:1/(r-n),h}}function Cl(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Y9(){var t=Nl(k0()(Dr));return t.copy=function(){return Cl(t,Y9())},lo.apply(t,arguments)}function X9(){var t=LA(k0()).domain([1,10]);return t.copy=function(){return Cl(t,X9()).base(t.base())},lo.apply(t,arguments)}function Q9(){var t=VA(k0());return t.copy=function(){return Cl(t,Q9()).constant(t.constant())},lo.apply(t,arguments)}function YA(){var t=BA(k0());return t.copy=function(){return Cl(t,YA()).exponent(t.exponent())},lo.apply(t,arguments)}function uue(){return YA.apply(null,arguments).exponent(.5)}function Z9(){var t=[],e=Dr;function n(r){if(r!=null&&!isNaN(r=+r))return e((Lm(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(cl),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,a)=>Yoe(t,a/r))},n.copy=function(){return Z9(e).domain(t)},lo.apply(n,arguments)}function O0(){var t=0,e=.5,n=1,r=1,i,a,o,c,u,h=Dr,m,p=!1,y;function b(T){return isNaN(T=+T)?y:(T=.5+((T=+m(T))-a)*(r*T<r*a?c:u),h(p?Math.max(0,Math.min(1,T)):T))}b.domain=function(T){return arguments.length?([t,e,n]=T,i=m(t=+t),a=m(e=+e),o=m(n=+n),c=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),r=a<i?-1:1,b):[t,e,n]},b.clamp=function(T){return arguments.length?(p=!!T,b):p},b.interpolator=function(T){return arguments.length?(h=T,b):h};function _(T){return function(S){var E,N,C;return arguments.length?([E,N,C]=S,h=_le(T,[E,N,C]),b):[h(0),h(.5),h(1)]}}return b.range=_(Xf),b.rangeRound=_(IA),b.unknown=function(T){return arguments.length?(y=T,b):y},function(T){return m=T,i=T(t),a=T(e),o=T(n),c=i===a?0:.5/(a-i),u=a===o?0:.5/(o-a),r=a<i?-1:1,b}}function J9(){var t=Nl(O0()(Dr));return t.copy=function(){return Cl(t,J9())},lo.apply(t,arguments)}function eV(){var t=LA(O0()).domain([.1,1,10]);return t.copy=function(){return Cl(t,eV()).base(t.base())},lo.apply(t,arguments)}function tV(){var t=VA(O0());return t.copy=function(){return Cl(t,tV()).constant(t.constant())},lo.apply(t,arguments)}function XA(){var t=BA(O0());return t.copy=function(){return Cl(t,XA()).exponent(t.exponent())},lo.apply(t,arguments)}function fue(){return XA.apply(null,arguments).exponent(.5)}const jd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:DA,scaleDiverging:J9,scaleDivergingLog:eV,scaleDivergingPow:XA,scaleDivergingSqrt:fue,scaleDivergingSymlog:tV,scaleIdentity:I9,scaleImplicit:KS,scaleLinear:O9,scaleLog:R9,scaleOrdinal:jA,scalePoint:Zoe,scalePow:UA,scaleQuantile:V9,scaleQuantize:B9,scaleRadial:L9,scaleSequential:Y9,scaleSequentialLog:X9,scaleSequentialPow:YA,scaleSequentialQuantile:Z9,scaleSequentialSqrt:uue,scaleSequentialSymlog:Q9,scaleSqrt:qle,scaleSymlog:M9,scaleThreshold:U9,scaleTime:lue,scaleUtc:cue,tickFormat:k9},Symbol.toStringTag,{value:"Module"}));var jl=t=>t.chartData,hue=de([jl],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),I0=(t,e,n,r)=>r?hue(t):jl(t);function kf(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(pi(e)&&pi(n))return!0}return!1}function P4(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function due(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,a;if(pi(n))i=n;else if(typeof n=="function")return;if(pi(r))a=r;else if(typeof r=="function")return;var o=[i,a];if(kf(o))return o}}function mue(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(kf(r))return P4(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,a]=t,o,c;if(i==="auto")e!=null&&(o=Math.min(...e));else if(Ue(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e?.[0]))}catch{}else if(typeof i=="string"&&wP.test(i)){var u=wP.exec(i);if(u==null||e==null)o=void 0;else{var h=+u[1];o=e[0]-h}}else o=e?.[0];if(a==="auto")e!=null&&(c=Math.max(...e));else if(Ue(a))c=a;else if(typeof a=="function")try{e!=null&&(c=a(e?.[1]))}catch{}else if(typeof a=="string"&&_P.test(a)){var m=_P.exec(a);if(m==null||e==null)c=void 0;else{var p=+m[1];c=e[1]+p}}else c=e?.[1];var y=[o,c];if(kf(y))return e==null?y:P4(y,e,n)}}}var Qf=1e9,gue={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},ZA,ln=!0,Fi="[DecimalError] ",jc=Fi+"Invalid argument: ",QA=Fi+"Exponent out of range: ",Zf=Math.floor,dc=Math.pow,pue=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ci,Jn=1e7,tn=7,nV=9007199254740991,bv=Zf(nV/tn),Me={};Me.absoluteValue=Me.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Me.comparedTo=Me.cmp=function(t){var e,n,r,i,a=this;if(t=new a.constructor(t),a.s!==t.s)return a.s||-t.s;if(a.e!==t.e)return a.e>t.e^a.s<0?1:-1;for(r=a.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(a.d[e]!==t.d[e])return a.d[e]>t.d[e]^a.s<0?1:-1;return r===i?0:r>i^a.s<0?1:-1};Me.decimalPlaces=Me.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*tn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Me.dividedBy=Me.div=function(t){return Fs(this,new this.constructor(t))};Me.dividedToIntegerBy=Me.idiv=function(t){var e=this,n=e.constructor;return Xt(Fs(e,new n(t),0,1),n.precision)};Me.equals=Me.eq=function(t){return!this.cmp(t)};Me.exponent=function(){return In(this)};Me.greaterThan=Me.gt=function(t){return this.cmp(t)>0};Me.greaterThanOrEqualTo=Me.gte=function(t){return this.cmp(t)>=0};Me.isInteger=Me.isint=function(){return this.e>this.d.length-2};Me.isNegative=Me.isneg=function(){return this.s<0};Me.isPositive=Me.ispos=function(){return this.s>0};Me.isZero=function(){return this.s===0};Me.lessThan=Me.lt=function(t){return this.cmp(t)<0};Me.lessThanOrEqualTo=Me.lte=function(t){return this.cmp(t)<1};Me.logarithm=Me.log=function(t){var e,n=this,r=n.constructor,i=r.precision,a=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(ci))throw Error(Fi+"NaN");if(n.s<1)throw Error(Fi+(n.s?"NaN":"-Infinity"));return n.eq(ci)?new r(0):(ln=!1,e=Fs(fm(n,a),fm(t,a),a),ln=!0,Xt(e,i))};Me.minus=Me.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?aV(e,t):rV(e,(t.s=-t.s,t))};Me.modulo=Me.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(Fi+"NaN");return n.s?(ln=!1,e=Fs(n,t,0,1).times(t),ln=!0,n.minus(e)):Xt(new r(n),i)};Me.naturalExponential=Me.exp=function(){return iV(this)};Me.naturalLogarithm=Me.ln=function(){return fm(this)};Me.negated=Me.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Me.plus=Me.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?rV(e,t):aV(e,(t.s=-t.s,t))};Me.precision=Me.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(jc+t);if(e=In(i)+1,r=i.d.length-1,n=r*tn+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};Me.squareRoot=Me.sqrt=function(){var t,e,n,r,i,a,o,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(Fi+"NaN")}for(t=In(c),ln=!1,i=Math.sqrt(+c),i==0||i==1/0?(e=Ua(c.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Zf((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new u(e)):r=new u(i.toString()),n=u.precision,i=o=n+3;;)if(a=r,r=a.plus(Fs(c,a,o+2)).times(.5),Ua(a.d).slice(0,o)===(e=Ua(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(Xt(a,n+1,0),a.times(a).eq(c)){r=a;break}}else if(e!="9999")break;o+=4}return ln=!0,Xt(r,n)};Me.times=Me.mul=function(t){var e,n,r,i,a,o,c,u,h,m=this,p=m.constructor,y=m.d,b=(t=new p(t)).d;if(!m.s||!t.s)return new p(0);for(t.s*=m.s,n=m.e+t.e,u=y.length,h=b.length,u<h&&(a=y,y=b,b=a,o=u,u=h,h=o),a=[],o=u+h,r=o;r--;)a.push(0);for(r=h;--r>=0;){for(e=0,i=u+r;i>r;)c=a[i]+b[r]*y[i-r-1]+e,a[i--]=c%Jn|0,e=c/Jn|0;a[i]=(a[i]+e)%Jn|0}for(;!a[--o];)a.pop();return e?++n:a.shift(),t.d=a,t.e=n,ln?Xt(t,p.precision):t};Me.toDecimalPlaces=Me.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Za(t,0,Qf),e===void 0?e=r.rounding:Za(e,0,8),Xt(n,t+In(n)+1,e))};Me.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Fc(r,!0):(Za(t,0,Qf),e===void 0?e=i.rounding:Za(e,0,8),r=Xt(new i(r),t+1,e),n=Fc(r,!0,t+1)),n};Me.toFixed=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?Fc(i):(Za(t,0,Qf),e===void 0?e=a.rounding:Za(e,0,8),r=Xt(new a(i),t+In(i)+1,e),n=Fc(r.abs(),!1,t+In(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};Me.toInteger=Me.toint=function(){var t=this,e=t.constructor;return Xt(new e(t),In(t)+1,e.rounding)};Me.toNumber=function(){return+this};Me.toPower=Me.pow=function(t){var e,n,r,i,a,o,c=this,u=c.constructor,h=12,m=+(t=new u(t));if(!t.s)return new u(ci);if(c=new u(c),!c.s){if(t.s<1)throw Error(Fi+"Infinity");return c}if(c.eq(ci))return c;if(r=u.precision,t.eq(ci))return Xt(c,r);if(e=t.e,n=t.d.length-1,o=e>=n,a=c.s,o){if((n=m<0?-m:m)<=nV){for(i=new u(ci),e=Math.ceil(r/tn+4),ln=!1;n%2&&(i=i.times(c),M4(i.d,e)),n=Zf(n/2),n!==0;)c=c.times(c),M4(c.d,e);return ln=!0,t.s<0?new u(ci).div(i):Xt(i,r)}}else if(a<0)throw Error(Fi+"NaN");return a=a<0&&t.d[Math.max(e,n)]&1?-1:1,c.s=1,ln=!1,i=t.times(fm(c,r+h)),ln=!0,i=iV(i),i.s=a,i};Me.toPrecision=function(t,e){var n,r,i=this,a=i.constructor;return t===void 0?(n=In(i),r=Fc(i,n<=a.toExpNeg||n>=a.toExpPos)):(Za(t,1,Qf),e===void 0?e=a.rounding:Za(e,0,8),i=Xt(new a(i),t,e),n=In(i),r=Fc(i,t<=n||n<=a.toExpNeg,t)),r};Me.toSignificantDigits=Me.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Za(t,1,Qf),e===void 0?e=r.rounding:Za(e,0,8)),Xt(new r(n),t,e)};Me.toString=Me.valueOf=Me.val=Me.toJSON=Me[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=In(t),n=t.constructor;return Fc(t,e<=n.toExpNeg||e>=n.toExpPos)};function rV(t,e){var n,r,i,a,o,c,u,h,m=t.constructor,p=m.precision;if(!t.s||!e.s)return e.s||(e=new m(t)),ln?Xt(e,p):e;if(u=t.d,h=e.d,o=t.e,i=e.e,u=u.slice(),a=o-i,a){for(a<0?(r=u,a=-a,c=h.length):(r=h,i=o,c=u.length),o=Math.ceil(p/tn),c=o>c?o+1:c+1,a>c&&(a=c,r.length=1),r.reverse();a--;)r.push(0);r.reverse()}for(c=u.length,a=h.length,c-a<0&&(a=c,r=h,h=u,u=r),n=0;a;)n=(u[--a]=u[a]+h[a]+n)/Jn|0,u[a]%=Jn;for(n&&(u.unshift(n),++i),c=u.length;u[--c]==0;)u.pop();return e.d=u,e.e=i,ln?Xt(e,p):e}function Za(t,e,n){if(t!==~~t||t<e||t>n)throw Error(jc+t)}function Ua(t){var e,n,r,i=t.length-1,a="",o=t[0];if(i>0){for(a+=o,e=1;e<i;e++)r=t[e]+"",n=tn-r.length,n&&(a+=Wo(n)),a+=r;o=t[e],r=o+"",n=tn-r.length,n&&(a+=Wo(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return a+o}var Fs=function(){function t(r,i){var a,o=0,c=r.length;for(r=r.slice();c--;)a=r[c]*i+o,r[c]=a%Jn|0,o=a/Jn|0;return o&&r.unshift(o),r}function e(r,i,a,o){var c,u;if(a!=o)u=a>o?1:-1;else for(c=u=0;c<a;c++)if(r[c]!=i[c]){u=r[c]>i[c]?1:-1;break}return u}function n(r,i,a){for(var o=0;a--;)r[a]-=o,o=r[a]<i[a]?1:0,r[a]=o*Jn+r[a]-i[a];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,a,o){var c,u,h,m,p,y,b,_,T,S,E,N,C,L,D,R,k,I,O=r.constructor,U=r.s==i.s?1:-1,$=r.d,V=i.d;if(!r.s)return new O(r);if(!i.s)throw Error(Fi+"Division by zero");for(u=r.e-i.e,k=V.length,D=$.length,b=new O(U),_=b.d=[],h=0;V[h]==($[h]||0);)++h;if(V[h]>($[h]||0)&&--u,a==null?N=a=O.precision:o?N=a+(In(r)-In(i))+1:N=a,N<0)return new O(0);if(N=N/tn+2|0,h=0,k==1)for(m=0,V=V[0],N++;(h<D||m)&&N--;h++)C=m*Jn+($[h]||0),_[h]=C/V|0,m=C%V|0;else{for(m=Jn/(V[0]+1)|0,m>1&&(V=t(V,m),$=t($,m),k=V.length,D=$.length),L=k,T=$.slice(0,k),S=T.length;S<k;)T[S++]=0;I=V.slice(),I.unshift(0),R=V[0],V[1]>=Jn/2&&++R;do m=0,c=e(V,T,k,S),c<0?(E=T[0],k!=S&&(E=E*Jn+(T[1]||0)),m=E/R|0,m>1?(m>=Jn&&(m=Jn-1),p=t(V,m),y=p.length,S=T.length,c=e(p,T,y,S),c==1&&(m--,n(p,k<y?I:V,y))):(m==0&&(c=m=1),p=V.slice()),y=p.length,y<S&&p.unshift(0),n(T,p,S),c==-1&&(S=T.length,c=e(V,T,k,S),c<1&&(m++,n(T,k<S?I:V,S))),S=T.length):c===0&&(m++,T=[0]),_[h++]=m,c&&T[0]?T[S++]=$[L]||0:(T=[$[L]],S=1);while((L++<D||T[0]!==void 0)&&N--)}return _[0]||_.shift(),b.e=u,Xt(b,o?a+In(b)+1:a)}}();function iV(t,e){var n,r,i,a,o,c,u=0,h=0,m=t.constructor,p=m.precision;if(In(t)>16)throw Error(QA+In(t));if(!t.s)return new m(ci);for(ln=!1,c=p,o=new m(.03125);t.abs().gte(.1);)t=t.times(o),h+=5;for(r=Math.log(dc(2,h))/Math.LN10*2+5|0,c+=r,n=i=a=new m(ci),m.precision=c;;){if(i=Xt(i.times(t),c),n=n.times(++u),o=a.plus(Fs(i,n,c)),Ua(o.d).slice(0,c)===Ua(a.d).slice(0,c)){for(;h--;)a=Xt(a.times(a),c);return m.precision=p,e==null?(ln=!0,Xt(a,p)):a}a=o}}function In(t){for(var e=t.e*tn,n=t.d[0];n>=10;n/=10)e++;return e}function Kw(t,e,n){if(e>t.LN10.sd())throw ln=!0,n&&(t.precision=n),Error(Fi+"LN10 precision limit exceeded");return Xt(new t(t.LN10),e)}function Wo(t){for(var e="";t--;)e+="0";return e}function fm(t,e){var n,r,i,a,o,c,u,h,m,p=1,y=10,b=t,_=b.d,T=b.constructor,S=T.precision;if(b.s<1)throw Error(Fi+(b.s?"NaN":"-Infinity"));if(b.eq(ci))return new T(0);if(e==null?(ln=!1,h=S):h=e,b.eq(10))return e==null&&(ln=!0),Kw(T,h);if(h+=y,T.precision=h,n=Ua(_),r=n.charAt(0),a=In(b),Math.abs(a)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)b=b.times(t),n=Ua(b.d),r=n.charAt(0),p++;a=In(b),r>1?(b=new T("0."+n),a++):b=new T(r+"."+n.slice(1))}else return u=Kw(T,h+2,S).times(a+""),b=fm(new T(r+"."+n.slice(1)),h-y).plus(u),T.precision=S,e==null?(ln=!0,Xt(b,S)):b;for(c=o=b=Fs(b.minus(ci),b.plus(ci),h),m=Xt(b.times(b),h),i=3;;){if(o=Xt(o.times(m),h),u=c.plus(Fs(o,new T(i),h)),Ua(u.d).slice(0,h)===Ua(c.d).slice(0,h))return c=c.times(2),a!==0&&(c=c.plus(Kw(T,h+2,S).times(a+""))),c=Fs(c,new T(p),h),T.precision=S,e==null?(ln=!0,Xt(c,S)):c;c=u,i+=2}}function R4(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Zf(n/tn),t.d=[],r=(n+1)%tn,n<0&&(r+=tn),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=tn;r<i;)t.d.push(+e.slice(r,r+=tn));e=e.slice(r),r=tn-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),ln&&(t.e>bv||t.e<-bv))throw Error(QA+n)}else t.s=0,t.e=0,t.d=[0];return t}function Xt(t,e,n){var r,i,a,o,c,u,h,m,p=t.d;for(o=1,a=p[0];a>=10;a/=10)o++;if(r=e-o,r<0)r+=tn,i=e,h=p[m=0];else{if(m=Math.ceil((r+1)/tn),a=p.length,m>=a)return t;for(h=a=p[m],o=1;a>=10;a/=10)o++;r%=tn,i=r-tn+o}if(n!==void 0&&(a=dc(10,o-i-1),c=h/a%10|0,u=e<0||p[m+1]!==void 0||h%a,u=n<4?(c||u)&&(n==0||n==(t.s<0?3:2)):c>5||c==5&&(n==4||u||n==6&&(r>0?i>0?h/dc(10,o-i):0:p[m-1])%10&1||n==(t.s<0?8:7))),e<1||!p[0])return u?(a=In(t),p.length=1,e=e-a-1,p[0]=dc(10,(tn-e%tn)%tn),t.e=Zf(-e/tn)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(r==0?(p.length=m,a=1,m--):(p.length=m+1,a=dc(10,tn-r),p[m]=i>0?(h/dc(10,o-i)%dc(10,i)|0)*a:0),u)for(;;)if(m==0){(p[0]+=a)==Jn&&(p[0]=1,++t.e);break}else{if(p[m]+=a,p[m]!=Jn)break;p[m--]=0,a=1}for(r=p.length;p[--r]===0;)p.pop();if(ln&&(t.e>bv||t.e<-bv))throw Error(QA+In(t));return t}function aV(t,e){var n,r,i,a,o,c,u,h,m,p,y=t.constructor,b=y.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new y(t),ln?Xt(e,b):e;if(u=t.d,p=e.d,r=e.e,h=t.e,u=u.slice(),o=h-r,o){for(m=o<0,m?(n=u,o=-o,c=p.length):(n=p,r=h,c=u.length),i=Math.max(Math.ceil(b/tn),c)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=u.length,c=p.length,m=i<c,m&&(c=i),i=0;i<c;i++)if(u[i]!=p[i]){m=u[i]<p[i];break}o=0}for(m&&(n=u,u=p,p=n,e.s=-e.s),c=u.length,i=p.length-c;i>0;--i)u[c++]=0;for(i=p.length;i>o;){if(u[--i]<p[i]){for(a=i;a&&u[--a]===0;)u[a]=Jn-1;--u[a],u[i]+=Jn}u[i]-=p[i]}for(;u[--c]===0;)u.pop();for(;u[0]===0;u.shift())--r;return u[0]?(e.d=u,e.e=r,ln?Xt(e,b):e):new y(0)}function Fc(t,e,n){var r,i=In(t),a=Ua(t.d),o=a.length;return e?(n&&(r=n-o)>0?a=a.charAt(0)+"."+a.slice(1)+Wo(r):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+Wo(-i-1)+a,n&&(r=n-o)>0&&(a+=Wo(r))):i>=o?(a+=Wo(i+1-o),n&&(r=n-i-1)>0&&(a=a+"."+Wo(r))):((r=i+1)<o&&(a=a.slice(0,r)+"."+a.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(a+="."),a+=Wo(r))),t.s<0?"-"+a:a}function M4(t,e){if(t.length>e)return t.length=e,!0}function sV(t){var e,n,r;function i(a){var o=this;if(!(o instanceof i))return new i(a);if(o.constructor=i,a instanceof i){o.s=a.s,o.e=a.e,o.d=(a=a.d)?a.slice():a;return}if(typeof a=="number"){if(a*0!==0)throw Error(jc+a);if(a>0)o.s=1;else if(a<0)a=-a,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(a===~~a&&a<1e7){o.e=0,o.d=[a];return}return R4(o,a.toString())}else if(typeof a!="string")throw Error(jc+a);if(a.charCodeAt(0)===45?(a=a.slice(1),o.s=-1):o.s=1,pue.test(a))R4(o,a);else throw Error(jc+a)}if(i.prototype=Me,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=sV,i.config=i.set=yue,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function yue(t){if(!t||typeof t!="object")throw Error(Fi+"Object expected");var e,n,r,i=["precision",1,Qf,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Zf(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(jc+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(jc+n+": "+r);return this}var ZA=sV(gue);ci=new ZA(1);const Ft=ZA;var vue=t=>t,oV={},lV=t=>t===oV,L4=t=>function e(){return arguments.length===0||arguments.length===1&&lV(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},cV=(t,e)=>t===1?e:L4(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r.filter(o=>o!==oV).length;return a>=t?e(...r):cV(t-a,L4(function(){for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];var h=r.map(m=>lV(m)?c.shift():m);return e(...h,...c)}))}),P0=t=>cV(t.length,t),XS=(t,e)=>{for(var n=[],r=t;r<e;++r)n[r-t]=r;return n},bue=P0((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),xue=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(!n.length)return vue;var i=n.reverse(),a=i[0],o=i.slice(1);return function(){return o.reduce((c,u)=>u(c),a(...arguments))}},QS=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),uV=t=>{var e=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e&&i.every((o,c)=>{var u;return o===((u=e)===null||u===void 0?void 0:u[c])})||(e=i,n=t(...i)),n}};function fV(t){var e;return t===0?e=1:e=Math.floor(new Ft(t).abs().log(10).toNumber())+1,e}function hV(t,e,n){for(var r=new Ft(t),i=0,a=[];r.lt(e)&&i<1e5;)a.push(r.toNumber()),r=r.add(n),i++;return a}P0((t,e,n)=>{var r=+t,i=+e;return r+n*(i-r)});P0((t,e,n)=>{var r=e-+t;return r=r||1/0,(n-t)/r});P0((t,e,n)=>{var r=e-+t;return r=r||1/0,Math.max(0,Math.min(1,(n-t)/r))});var dV=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},mV=(t,e,n)=>{if(t.lte(0))return new Ft(0);var r=fV(t.toNumber()),i=new Ft(10).pow(r),a=t.div(i),o=r!==1?.05:.1,c=new Ft(Math.ceil(a.div(o).toNumber())).add(n).mul(o),u=c.mul(i);return e?new Ft(u.toNumber()):new Ft(Math.ceil(u.toNumber()))},wue=(t,e,n)=>{var r=new Ft(1),i=new Ft(t);if(!i.isint()&&n){var a=Math.abs(t);a<1?(r=new Ft(10).pow(fV(t)-1),i=new Ft(Math.floor(i.div(r).toNumber())).mul(r)):a>1&&(i=new Ft(Math.floor(t)))}else t===0?i=new Ft(Math.floor((e-1)/2)):n||(i=new Ft(Math.floor(t)));var o=Math.floor((e-1)/2),c=xue(bue(u=>i.add(new Ft(u-o).mul(r)).toNumber()),XS);return c(0,e)},gV=function(e,n,r,i){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new Ft(0),tickMin:new Ft(0),tickMax:new Ft(0)};var o=mV(new Ft(n).sub(e).div(r-1),i,a),c;e<=0&&n>=0?c=new Ft(0):(c=new Ft(e).add(n).div(2),c=c.sub(new Ft(c).mod(o)));var u=Math.ceil(c.sub(e).div(o).toNumber()),h=Math.ceil(new Ft(n).sub(c).div(o).toNumber()),m=u+h+1;return m>r?gV(e,n,r,i,a+1):(m<r&&(h=n>0?h+(r-m):h,u=n>0?u:u+(r-m)),{step:o,tickMin:c.sub(new Ft(u).mul(o)),tickMax:c.add(new Ft(h).mul(o))})};function _ue(t){var[e,n]=t,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,a=Math.max(r,2),[o,c]=dV([e,n]);if(o===-1/0||c===1/0){var u=c===1/0?[o,...XS(0,r-1).map(()=>1/0)]:[...XS(0,r-1).map(()=>-1/0),c];return e>n?QS(u):u}if(o===c)return wue(o,r,i);var{step:h,tickMin:m,tickMax:p}=gV(o,c,a,i,0),y=hV(m,p.add(new Ft(.1).mul(h)),h);return e>n?QS(y):y}function Sue(t,e){var[n,r]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[a,o]=dV([n,r]);if(a===-1/0||o===1/0)return[n,r];if(a===o)return[a];var c=Math.max(e,2),u=mV(new Ft(o).sub(a).div(c-1),i,0),h=[...hV(new Ft(a),new Ft(o),u),o];return i===!1&&(h=h.map(m=>Math.round(m))),n>r?QS(h):h}var Tue=uV(_ue),Eue=uV(Sue),pV=t=>t.rootProps.maxBarSize,Aue=t=>t.rootProps.barGap,yV=t=>t.rootProps.barCategoryGap,Nue=t=>t.rootProps.barSize,R0=t=>t.rootProps.stackOffset,JA=t=>t.options.chartName,e2=t=>t.rootProps.syncId,vV=t=>t.rootProps.syncMethod,t2=t=>t.options.eventEmitter,Os={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},si={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},M0=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},Cue={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Os.angleAxisId,includeHidden:!1,name:void 0,reversed:Os.reversed,scale:Os.scale,tick:Os.tick,tickCount:void 0,ticks:void 0,type:Os.type,unit:void 0},jue={allowDataOverflow:si.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:si.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:si.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:si.scale,tick:si.tick,tickCount:si.tickCount,ticks:void 0,type:si.type,unit:void 0},Due={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Os.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Os.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Os.scale,tick:Os.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},kue={allowDataOverflow:si.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:si.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:si.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:si.scale,tick:si.tick,tickCount:si.tickCount,ticks:void 0,type:"category",unit:void 0},n2=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?Due:Cue,r2=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?kue:jue,L0=t=>t.polarOptions,i2=de([so,oo,tr],_ae),bV=de([L0,i2],(t,e)=>{if(t!=null)return fa(t.innerRadius,e,0)}),xV=de([L0,i2],(t,e)=>{if(t!=null)return fa(t.outerRadius,e,e*.8)}),Oue=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},wV=de([L0],Oue);de([n2,wV],M0);var _V=de([i2,bV,xV],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});de([r2,_V],M0);var SV=de([It,L0,bV,xV,so,oo],(t,e,n,r,i,a)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:o,cy:c,startAngle:u,endAngle:h}=e;return{cx:fa(o,i,i/2),cy:fa(c,a,a/2),innerRadius:n,outerRadius:r,startAngle:u,endAngle:h,clockWise:!1}}}),Rn=(t,e)=>e,V0=(t,e,n)=>n;function a2(t){return t?.id}var Hn=t=>{var e=It(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Jf=t=>t.tooltip.settings.axisId,qn=t=>{var e=Hn(t),n=Jf(t);return $m(t,e,n)};function TV(t,e,n){var{chartData:r=[]}=e,i=n?.dataKey,a=new Map;return t.forEach(o=>{var c,u=(c=o.data)!==null&&c!==void 0?c:r;if(!(u==null||u.length===0)){var h=a2(o);u.forEach((m,p)=>{var y=i==null?p:String(er(m,i,null)),b=er(m,o.dataKey,0),_;a.has(y)?_=a.get(y):_={},Object.assign(_,{[h]:b}),a.set(y,_)})}}),Array.from(a.values())}function B0(t){return t.stackId!=null&&t.dataKey!=null}function V4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xv(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?V4(Object(n),!0).forEach(function(r){Iue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Iue(t,e,n){return(e=Pue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pue(t){var e=Rue(t,"string");return typeof e=="symbol"?e:e+""}function Rue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ZS=[0,"auto"],ii={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},co=(t,e)=>{var n=t.cartesianAxis.xAxis[e];return n??ii},ai={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:ZS,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:S0},Dl=(t,e)=>{var n=t.cartesianAxis.yAxis[e];return n??ai},Mue={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},s2=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??Mue},Kr=(t,e,n)=>{switch(e){case"xAxis":return co(t,n);case"yAxis":return Dl(t,n);case"zAxis":return s2(t,n);case"angleAxis":return n2(t,n);case"radiusAxis":return r2(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Lue=(t,e,n)=>{switch(e){case"xAxis":return co(t,n);case"yAxis":return Dl(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},$m=(t,e,n)=>{switch(e){case"xAxis":return co(t,n);case"yAxis":return Dl(t,n);case"angleAxis":return n2(t,n);case"radiusAxis":return r2(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},EV=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function AV(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var U0=t=>t.graphicalItems.cartesianItems,Vue=de([Rn,V0],AV),NV=(t,e,n)=>t.filter(n).filter(r=>e?.includeHidden===!0?!0:!r.hide),Fm=de([U0,Kr,Vue],NV),CV=de([Fm],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(B0)),jV=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),DV=de([Fm],jV),kV=t=>t.map(e=>e.data).filter(Boolean).flat(1),Bue=de([Fm],kV),OV=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},o2=de([Bue,I0],OV),IV=(t,e,n)=>e?.dataKey!=null?t.map(r=>({value:er(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:er(i,r)}))):t.map(r=>({value:r})),$0=de([o2,Kr,Fm],IV);function PV(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Zc(t){return t.filter(e=>Qa(e)||e instanceof Date).map(Number).filter(e=>di(e)===!1)}function Uue(t,e,n){return!n||typeof e!="number"||di(e)?[]:n.length?Zc(n.flatMap(r=>{var i=er(t,r.dataKey),a,o;if(Array.isArray(i)?[a,o]=i:a=o=i,!(!pi(a)||!pi(o)))return[e-a,e+o]})):[]}var $ue=de([CV,I0,qn],TV),RV=(t,e,n)=>{var r={},i=e.reduce((a,o)=>(o.stackId==null||(a[o.stackId]==null&&(a[o.stackId]=[]),a[o.stackId].push(o)),a),r);return Object.fromEntries(Object.entries(i).map(a=>{var[o,c]=a,u=c.map(a2);return[o,{stackedData:Vae(t,u,n),graphicalItems:c}]}))},JS=de([$ue,CV,R0],RV),MV=(t,e,n)=>{var{dataStartIndex:r,dataEndIndex:i}=e;if(n!=="zAxis"){var a=zae(t,r,i);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},Fue=de([JS,jl,Rn],MV),LV=(t,e,n,r,i)=>n.length>0?t.flatMap(a=>n.flatMap(o=>{var c,u,h=(c=r[o.id])===null||c===void 0?void 0:c.filter(p=>PV(i,p)),m=er(a,(u=e.dataKey)!==null&&u!==void 0?u:o.dataKey);return{value:m,errorDomain:Uue(a,m,h)}})).filter(Boolean):e?.dataKey!=null?t.map(a=>({value:er(a,e.dataKey),errorDomain:[]})):t.map(a=>({value:a,errorDomain:[]})),F0=t=>t.errorBars,VV=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>PV(n,r));de([DV,F0,Rn],VV);var zue=de([o2,Kr,DV,F0,Rn],LV);function Hue(t){var{value:e}=t;if(Qa(e)||e instanceof Date)return e}var B4=t=>{var e=t.flatMap(r=>[r.value,r.errorDomain]).flat(1),n=Zc(e);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},que=(t,e,n)=>{var r=t.map(Hue).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&QL(r))?w9(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},l2=t=>{var e;if(t==null||!("domain"in t))return ZS;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=Zc(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:ZS},wv=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var a=i.flat(),o=Math.min(...a),c=Math.max(...a);return[o,c]}},BV=t=>t.referenceElements.dots,eh=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),Kue=de([BV,Rn,V0],eh),UV=t=>t.referenceElements.areas,Gue=de([UV,Rn,V0],eh),$V=t=>t.referenceElements.lines,Wue=de([$V,Rn,V0],eh),FV=(t,e)=>{var n=Zc(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Yue=de(Kue,Rn,FV),zV=(t,e)=>{var n=Zc(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Xue=de([Gue,Rn],zV),HV=(t,e)=>{var n=Zc(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Que=de(Wue,Rn,HV),Zue=de(Yue,Que,Xue,(t,e,n)=>wv(t,n,e)),Jue=de([Kr],l2),qV=(t,e,n,r,i,a,o)=>{var c=due(e,t.allowDataOverflow);if(c!=null)return c;var u=a==="vertical"&&o==="xAxis"||a==="horizontal"&&o==="yAxis",h=u?wv(n,i,B4(r)):wv(i,B4(r));return mue(e,h,t.allowDataOverflow)},efe=de([Kr,Jue,Fue,zue,Zue,It,Rn],qV),tfe=[0,1],KV=(t,e,n,r,i,a,o)=>{if(!((t==null||n==null||n.length===0)&&o===void 0)){var{dataKey:c,type:u}=t,h=Al(e,a);return h&&c==null?w9(0,n.length):u==="category"?que(r,t,h):i==="expand"?tfe:o}},c2=de([Kr,It,o2,$0,R0,Rn,efe],KV),GV=(t,e,n,r,i)=>{if(t!=null){var{scale:a,type:o}=t;if(a==="auto")return e==="radial"&&i==="radiusAxis"?"band":e==="radial"&&i==="angleAxis"?"linear":o==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?"point":o==="category"?"band":"linear";if(typeof a=="string"){var c="scale".concat(Pm(a));return c in jd?c:"point"}}},zm=de([Kr,It,EV,JA,Rn],GV);function nfe(t){if(t!=null){if(t in jd)return jd[t]();var e="scale".concat(Pm(t));if(e in jd)return jd[e]()}}function u2(t,e,n,r){if(!(n==null||r==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(r);var i=nfe(e);if(i!=null){var a=i.domain(n).range(r);return Iae(a),a}}}var WV=(t,e,n)=>{var r=l2(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&kf(t))return Tue(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&kf(t))return Eue(t,e.tickCount,e.allowDecimals)}},f2=de([c2,$m,zm],WV),YV=(t,e,n,r)=>{if(r!=="angleAxis"&&t?.type==="number"&&kf(e)&&Array.isArray(n)&&n.length>0){var i=e[0],a=n[0],o=e[1],c=n[n.length-1];return[Math.min(i,a),Math.max(o,c)]}return e},rfe=de([Kr,c2,f2,Rn],YV),ife=de($0,Kr,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(Zc(t.map(c=>c.value))).sort((c,u)=>c-u);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(i===0)return 1/0;for(var a=0;a<r.length-1;a++){var o=r[a+1]-r[a];n=Math.min(n,o)}return n/i}}),XV=de(ife,It,yV,tr,(t,e,n,r)=>r,(t,e,n,r,i)=>{if(!pi(t))return 0;var a=e==="vertical"?r.height:r.width;if(i==="gap")return t*a/2;if(i==="no-gap"){var o=fa(n,t*a),c=t*a/2;return c-o-(c-o)/a*o}return 0}),afe=(t,e)=>{var n=co(t,e);return n==null||typeof n.padding!="string"?0:XV(t,"xAxis",e,n.padding)},sfe=(t,e)=>{var n=Dl(t,e);return n==null||typeof n.padding!="string"?0:XV(t,"yAxis",e,n.padding)},ofe=de(co,afe,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),lfe=de(Dl,sfe,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),cfe=de([tr,ofe,E0,T0,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:a}=r;return i?[a.left,n.width-a.right]:[t.left+e.left,t.left+t.width-e.right]}),ufe=de([tr,It,lfe,E0,T0,(t,e,n)=>n],(t,e,n,r,i,a)=>{var{padding:o}=i;return a?[r.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),Hm=(t,e,n,r)=>{var i;switch(e){case"xAxis":return cfe(t,n,r);case"yAxis":return ufe(t,n,r);case"zAxis":return(i=s2(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return wV(t);case"radiusAxis":return _V(t,n);default:return}},QV=de([Kr,Hm],M0),th=de([Kr,zm,rfe,QV],u2);de([Fm,F0,Rn],VV);function ZV(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var z0=(t,e)=>e,H0=(t,e,n)=>n,ffe=de(wA,z0,H0,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(ZV)),hfe=de(_A,z0,H0,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(ZV)),JV=(t,e)=>({width:t.width,height:e.height}),dfe=(t,e)=>{var n=typeof e.width=="number"?e.width:S0;return{width:n,height:t.height}},e7=de(tr,co,JV),mfe=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},gfe=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},pfe=de(oo,tr,ffe,z0,H0,(t,e,n,r,i)=>{var a={},o;return n.forEach(c=>{var u=JV(e,c);o==null&&(o=mfe(e,r,t));var h=r==="top"&&!i||r==="bottom"&&i;a[c.id]=o-Number(h)*u.height,o+=(h?-1:1)*u.height}),a}),yfe=de(so,tr,hfe,z0,H0,(t,e,n,r,i)=>{var a={},o;return n.forEach(c=>{var u=dfe(e,c);o==null&&(o=gfe(e,r,t));var h=r==="left"&&!i||r==="right"&&i;a[c.id]=o-Number(h)*u.width,o+=(h?-1:1)*u.width}),a}),vfe=(t,e)=>{var n=tr(t),r=co(t,e);if(r!=null){var i=pfe(t,r.orientation,r.mirror),a=i[e];return a==null?{x:n.left,y:0}:{x:n.left,y:a}}},bfe=(t,e)=>{var n=tr(t),r=Dl(t,e);if(r!=null){var i=yfe(t,r.orientation,r.mirror),a=i[e];return a==null?{x:0,y:n.top}:{x:a,y:n.top}}},t7=de(tr,Dl,(t,e)=>{var n=typeof e.width=="number"?e.width:S0;return{width:n,height:t.height}}),U4=(t,e,n)=>{switch(e){case"xAxis":return e7(t,n).width;case"yAxis":return t7(t,n).height;default:return}},n7=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:a,dataKey:o}=n,c=Al(t,r),u=e.map(h=>h.value);if(o&&c&&a==="category"&&i&&QL(u))return u}},h2=de([It,$0,Kr,Rn],n7),r7=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:a}=n,o=Al(t,r);if(o&&(i==="number"||a!=="auto"))return e.map(c=>c.value)}},d2=de([It,$0,$m,Rn],r7),$4=de([It,Lue,zm,th,h2,d2,Hm,f2,Rn],(t,e,n,r,i,a,o,c,u)=>{if(e==null)return null;var h=Al(t,u);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:u,categoricalDomain:a,duplicateDomain:i,isCategorical:h,niceTicks:c,range:o,realScaleType:n,scale:r}}),xfe=(t,e,n,r,i,a,o,c,u)=>{if(!(e==null||r==null)){var h=Al(t,u),{type:m,ticks:p,tickCount:y}=e,b=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,_=m==="category"&&r.bandwidth?r.bandwidth()/b:0;_=u==="angleAxis"&&a!=null&&a.length>=2?Fr(a[0]-a[1])*2*_:_;var T=p||i;if(T){var S=T.map((E,N)=>{var C=o?o.indexOf(E):E;return{index:N,coordinate:r(C)+_,value:E,offset:_}});return S.filter(E=>!di(E.coordinate))}return h&&c?c.map((E,N)=>({coordinate:r(E)+_,value:E,index:N,offset:_})):r.ticks?r.ticks(y).map(E=>({coordinate:r(E)+_,value:E,offset:_})):r.domain().map((E,N)=>({coordinate:r(E)+_,value:o?o[E]:E,index:N,offset:_}))}},i7=de([It,$m,zm,th,f2,Hm,h2,d2,Rn],xfe),wfe=(t,e,n,r,i,a,o)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var c=Al(t,o),{tickCount:u}=e,h=0;return h=o==="angleAxis"&&r?.length>=2?Fr(r[0]-r[1])*2*h:h,c&&a?a.map((m,p)=>({coordinate:n(m)+h,value:m,index:p,offset:h})):n.ticks?n.ticks(u).map(m=>({coordinate:n(m)+h,value:m,offset:h})):n.domain().map((m,p)=>({coordinate:n(m)+h,value:i?i[m]:m,index:p,offset:h}))}},xl=de([It,$m,th,Hm,h2,d2,Rn],wfe),wl=de(Kr,th,(t,e)=>{if(!(t==null||e==null))return xv(xv({},t),{},{scale:e})}),_fe=de([Kr,zm,c2,QV],u2);de((t,e,n)=>s2(t,n),_fe,(t,e)=>{if(!(t==null||e==null))return xv(xv({},t),{},{scale:e})});var Sfe=de([It,wA,_A],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),a7=t=>t.options.defaultTooltipEventType,s7=t=>t.options.validateTooltipEventTypes;function o7(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function m2(t,e){var n=a7(t),r=s7(t);return o7(e,n,r)}function Tfe(t){return He(e=>m2(e,t))}var l7=(t,e)=>{var n,r=Number(e);if(!(di(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},Efe=t=>t.tooltip.settings,el={active:!1,index:null,dataKey:void 0,coordinate:void 0},Afe={itemInteraction:{click:el,hover:el},axisInteraction:{click:el,hover:el},keyboardInteraction:el,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},c7=vi({name:"tooltip",initialState:Afe,reducers:{addTooltipEntrySettings(t,e){t.tooltipItemPayloads.push(e.payload)},removeTooltipEntrySettings(t,e){var n=$s(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:Nfe,removeTooltipEntrySettings:Cfe,setTooltipSettingsState:jfe,setActiveMouseOverItemIndex:u7,mouseLeaveItem:Dfe,mouseLeaveChart:f7,setActiveClickItemIndex:kfe,setMouseOverAxisIndex:h7,setMouseClickAxisIndex:Ofe,setSyncInteraction:eT,setKeyboardInteraction:tT}=c7.actions,Ife=c7.reducer;function F4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $p(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?F4(Object(n),!0).forEach(function(r){Pfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pfe(t,e,n){return(e=Rfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rfe(t){var e=Mfe(t,"string");return typeof e=="symbol"?e:e+""}function Mfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Lfe(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function Vfe(t){return t.index!=null}var d7=(t,e,n,r)=>{if(e==null)return el;var i=Lfe(t,e,n);if(i==null)return el;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var a=t.settings.active===!0;if(Vfe(i)){if(a)return $p($p({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return $p($p({},el),{},{coordinate:i.coordinate})},g2=(t,e)=>{var n=t?.index;if(n==null)return null;var r=Number(n);if(!pi(r))return n;var i=0,a=1/0;return e.length>0&&(a=e.length-1),String(Math.max(i,Math.min(r,a)))},m7=(t,e,n,r,i,a,o,c)=>{if(!(a==null||c==null)){var u=o[0],h=u==null?void 0:c(u.positions,a);if(h!=null)return h;var m=i?.[Number(a)];if(m)switch(n){case"horizontal":return{x:m.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:m.coordinate}}}},g7=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;return n==="hover"?i=t.itemInteraction.hover.dataKey:i=t.itemInteraction.click.dataKey,i==null&&r!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(a=>{var o;return((o=a.settings)===null||o===void 0?void 0:o.dataKey)===i})},qm=t=>t.options.tooltipPayloadSearcher,nh=t=>t.tooltip;function z4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function H4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?z4(Object(n),!0).forEach(function(r){Bfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bfe(t,e,n){return(e=Ufe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ufe(t){var e=$fe(t,"string");return typeof e=="symbol"?e:e+""}function $fe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ffe(t,e){return t??e}var p7=(t,e,n,r,i,a,o)=>{if(!(e==null||a==null)){var{chartData:c,computedData:u,dataStartIndex:h,dataEndIndex:m}=n,p=[];return t.reduce((y,b)=>{var _,{dataDefinedOnItem:T,settings:S}=b,E=Ffe(T,c),N=Array.isArray(E)?n9(E,h,m):E,C=(_=S?.dataKey)!==null&&_!==void 0?_:r?.dataKey,L=S?.nameKey,D;if(r!=null&&r.dataKey&&Array.isArray(N)&&!Array.isArray(N[0])&&o==="axis"?D=ZL(N,r.dataKey,i):D=a(N,e,u,L),Array.isArray(D))D.forEach(k=>{var I=H4(H4({},S),{},{name:k.name,unit:k.unit,color:void 0,fill:void 0});y.push(SP({tooltipEntrySettings:I,dataKey:k.dataKey,payload:k.payload,value:er(k.payload,k.dataKey),name:k.name}))});else{var R;y.push(SP({tooltipEntrySettings:S,dataKey:C,payload:D,value:er(D,C),name:(R=er(D,L))!==null&&R!==void 0?R:S?.name}))}return y},p)}},p2=de([qn,It,EV,JA,Hn],GV),zfe=de([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Hfe=de([Hn,Jf],AV),Km=de([zfe,qn,Hfe],NV),qfe=de([Km],t=>t.filter(B0)),Kfe=de([Km],kV),rh=de([Kfe,jl],OV),Gfe=de([qfe,jl,qn],TV),y2=de([rh,qn,Km],IV),Wfe=de([qn],l2),Yfe=de([Km],t=>t.filter(B0)),Xfe=de([Gfe,Yfe,R0],RV),Qfe=de([Xfe,jl,Hn],MV),Zfe=de([Km],jV),Jfe=de([rh,qn,Zfe,F0,Hn],LV),ehe=de([BV,Hn,Jf],eh),the=de([ehe,Hn],FV),nhe=de([UV,Hn,Jf],eh),rhe=de([nhe,Hn],zV),ihe=de([$V,Hn,Jf],eh),ahe=de([ihe,Hn],HV),she=de([the,ahe,rhe],wv),ohe=de([qn,Wfe,Qfe,Jfe,she,It,Hn],qV),y7=de([qn,It,rh,y2,R0,Hn,ohe],KV),lhe=de([y7,qn,p2],WV),che=de([qn,y7,lhe,Hn],YV),v7=t=>{var e=Hn(t),n=Jf(t),r=!1;return Hm(t,e,n,r)},b7=de([qn,v7],M0),x7=de([qn,p2,che,b7],u2),uhe=de([It,y2,qn,Hn],n7),fhe=de([It,y2,qn,Hn],r7),hhe=(t,e,n,r,i,a,o,c)=>{if(e){var{type:u}=e,h=Al(t,c);if(r){var m=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,p=u==="category"&&r.bandwidth?r.bandwidth()/m:0;return p=c==="angleAxis"&&i!=null&&i?.length>=2?Fr(i[0]-i[1])*2*p:p,h&&o?o.map((y,b)=>({coordinate:r(y)+p,value:y,index:b,offset:p})):r.domain().map((y,b)=>({coordinate:r(y)+p,value:a?a[y]:y,index:b,offset:p}))}}},uo=de([It,qn,p2,x7,v7,uhe,fhe,Hn],hhe),v2=de([a7,s7,Efe],(t,e,n)=>o7(n.shared,t,e)),w7=t=>t.tooltip.settings.trigger,b2=t=>t.tooltip.settings.defaultIndex,q0=de([nh,v2,w7,b2],d7),zc=de([q0,rh],g2),_7=de([uo,zc],l7),S7=de([q0],t=>{if(t)return t.dataKey}),T7=de([nh,v2,w7,b2],g7),dhe=de([so,oo,It,tr,uo,b2,T7,qm],m7),mhe=de([q0,dhe],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),ghe=de([q0],t=>t.active),phe=de([T7,zc,jl,qn,_7,qm,v2],p7),yhe=de([phe],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function q4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function K4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q4(Object(n),!0).forEach(function(r){vhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vhe(t,e,n){return(e=bhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bhe(t){var e=xhe(t,"string");return typeof e=="symbol"?e:e+""}function xhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var whe=()=>He(qn),_he=()=>{var t=whe(),e=He(uo),n=He(x7);return am(K4(K4({},t),{},{scale:n}),e)},She=()=>He(JA),x2=(t,e)=>e,E7=(t,e,n)=>n,w2=(t,e,n,r)=>r,The=de(uo,t=>g0(t,e=>e.coordinate)),_2=de([nh,x2,E7,w2],d7),A7=de([_2,rh],g2),Ehe=(t,e,n)=>{if(e!=null){var r=nh(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},N7=de([nh,x2,E7,w2],g7),_v=de([so,oo,It,tr,uo,w2,N7,qm],m7),Ahe=de([_2,_v],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),C7=de(uo,A7,l7),Nhe=de([N7,A7,jl,qn,C7,qm,x2],p7),Che=de([_2],t=>({isActive:t.active,activeIndex:t.index})),jhe=(t,e,n,r,i,a,o,c)=>{if(!(!t||!e||!r||!i||!a)){var u=Hae(t.chartX,t.chartY,e,n,c);if(u){var h=Kae(u,e),m=kae(h,o,a,r,i),p=qae(e,a,m,u);return{activeIndex:String(m),activeCoordinate:p}}}};function nT(){return nT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},nT.apply(null,arguments)}function G4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?G4(Object(n),!0).forEach(function(r){Dhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dhe(t,e,n){return(e=khe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function khe(t){var e=Ohe(t,"string");return typeof e=="symbol"?e:e+""}function Ohe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ihe(t){var{coordinate:e,payload:n,index:r,offset:i,tooltipAxisBandSize:a,layout:o,cursor:c,tooltipEventType:u,chartName:h}=t,m=e,p=n,y=r;if(!c||!m||h!=="ScatterChart"&&u!=="axis")return null;var b,_;if(h==="ScatterChart")b=m,_=Gse;else if(h==="BarChart")b=Wse(o,m,i,a),_=y9;else if(o==="radial"){var{cx:T,cy:S,radius:E,startAngle:N,endAngle:C}=v9(m);b={cx:T,cy:S,startAngle:N,endAngle:C,innerRadius:E,outerRadius:E},_=x9}else b={points:Ooe(o,m,i)},_=u9;var L=typeof c=="object"&&"className"in c?c.className:void 0,D=Fp(Fp(Fp(Fp({stroke:"#ccc",pointerEvents:"none"},i),b),yn(c,!1)),{},{payload:p,payloadIndex:y,className:zt("recharts-tooltip-cursor",L)});return w.isValidElement(c)?w.cloneElement(c,D):w.createElement(_,D)}function Phe(t){var e=_he(),n=o9(),r=A0(),i=She();return w.createElement(Ihe,nT({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var j7=w.createContext(null),Rhe=()=>w.useContext(j7),Gw={exports:{}},W4;function Mhe(){return W4||(W4=1,function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(u,h,m){this.fn=u,this.context=h,this.once=m||!1}function a(u,h,m,p,y){if(typeof m!="function")throw new TypeError("The listener must be a function");var b=new i(m,p||u,y),_=n?n+h:h;return u._events[_]?u._events[_].fn?u._events[_]=[u._events[_],b]:u._events[_].push(b):(u._events[_]=b,u._eventsCount++),u}function o(u,h){--u._eventsCount===0?u._events=new r:delete u._events[h]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var h=[],m,p;if(this._eventsCount===0)return h;for(p in m=this._events)e.call(m,p)&&h.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(m)):h},c.prototype.listeners=function(h){var m=n?n+h:h,p=this._events[m];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,b=p.length,_=new Array(b);y<b;y++)_[y]=p[y].fn;return _},c.prototype.listenerCount=function(h){var m=n?n+h:h,p=this._events[m];return p?p.fn?1:p.length:0},c.prototype.emit=function(h,m,p,y,b,_){var T=n?n+h:h;if(!this._events[T])return!1;var S=this._events[T],E=arguments.length,N,C;if(S.fn){switch(S.once&&this.removeListener(h,S.fn,void 0,!0),E){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,m),!0;case 3:return S.fn.call(S.context,m,p),!0;case 4:return S.fn.call(S.context,m,p,y),!0;case 5:return S.fn.call(S.context,m,p,y,b),!0;case 6:return S.fn.call(S.context,m,p,y,b,_),!0}for(C=1,N=new Array(E-1);C<E;C++)N[C-1]=arguments[C];S.fn.apply(S.context,N)}else{var L=S.length,D;for(C=0;C<L;C++)switch(S[C].once&&this.removeListener(h,S[C].fn,void 0,!0),E){case 1:S[C].fn.call(S[C].context);break;case 2:S[C].fn.call(S[C].context,m);break;case 3:S[C].fn.call(S[C].context,m,p);break;case 4:S[C].fn.call(S[C].context,m,p,y);break;default:if(!N)for(D=1,N=new Array(E-1);D<E;D++)N[D-1]=arguments[D];S[C].fn.apply(S[C].context,N)}}return!0},c.prototype.on=function(h,m,p){return a(this,h,m,p,!1)},c.prototype.once=function(h,m,p){return a(this,h,m,p,!0)},c.prototype.removeListener=function(h,m,p,y){var b=n?n+h:h;if(!this._events[b])return this;if(!m)return o(this,b),this;var _=this._events[b];if(_.fn)_.fn===m&&(!y||_.once)&&(!p||_.context===p)&&o(this,b);else{for(var T=0,S=[],E=_.length;T<E;T++)(_[T].fn!==m||y&&!_[T].once||p&&_[T].context!==p)&&S.push(_[T]);S.length?this._events[b]=S.length===1?S[0]:S:o(this,b)}return this},c.prototype.removeAllListeners=function(h){var m;return h?(m=n?n+h:h,this._events[m]&&o(this,m)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c}(Gw)),Gw.exports}var Lhe=Mhe();const Vhe=zi(Lhe);var hm=new Vhe,rT="recharts.syncEvent.tooltip",Y4="recharts.syncEvent.brush";function D7(t,e){if(e){var n=Number.parseInt(e,10);if(!di(n))return t?.[n]}}var Bhe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},k7=vi({name:"options",initialState:Bhe,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Uhe=k7.reducer,{createEventEmitter:$he}=k7.actions;function Fhe(t){return t.tooltip.syncInteraction}var zhe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},O7=vi({name:"chartData",initialState:zhe,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:X4,setDataStartEndIndexes:Hhe,setComputedData:Wbe}=O7.actions,qhe=O7.reducer,I7=()=>{};function Khe(){var t=He(e2),e=He(t2),n=Pn(),r=He(vV),i=He(uo),a=A0(),o=SA(),c=He(u=>u.rootProps.className);w.useEffect(()=>{if(t==null)return I7;var u=(h,m,p)=>{if(e!==p&&t===h){if(r==="index"){n(m);return}if(i!=null){var y;if(typeof r=="function"){var b={activeTooltipIndex:m.payload.index==null?void 0:Number(m.payload.index),isTooltipActive:m.payload.active,activeIndex:m.payload.index==null?void 0:Number(m.payload.index),activeLabel:m.payload.label,activeDataKey:m.payload.dataKey,activeCoordinate:m.payload.coordinate},_=r(i,b);y=i[_]}else r==="value"&&(y=i.find(R=>String(R.value)===m.payload.label));var{coordinate:T}=m.payload;if(y==null||m.payload.active===!1||T==null||o==null){n(eT({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:S,y:E}=T,N=Math.min(S,o.x+o.width),C=Math.min(E,o.y+o.height),L={x:a==="horizontal"?y.coordinate:N,y:a==="horizontal"?C:y.coordinate},D=eT({active:m.payload.active,coordinate:L,dataKey:m.payload.dataKey,index:String(y.index),label:m.payload.label});n(D)}}};return hm.on(rT,u),()=>{hm.off(rT,u)}},[c,n,e,t,r,i,a,o])}function Ghe(){var t=He(e2),e=He(t2),n=Pn();w.useEffect(()=>{if(t==null)return I7;var r=(i,a,o)=>{e!==o&&t===i&&n(Hhe(a))};return hm.on(Y4,r),()=>{hm.off(Y4,r)}},[n,e,t])}function Whe(){var t=Pn();w.useEffect(()=>{t($he())},[t]),Khe(),Ghe()}function Yhe(t,e,n,r,i,a){var o=He(y=>Ehe(y,t,e)),c=He(t2),u=He(e2),h=He(vV),m=He(Fhe),p=m?.active;w.useEffect(()=>{if(!p&&u!=null&&c!=null){var y=eT({active:a,coordinate:n,dataKey:o,index:i,label:typeof r=="number"?String(r):r});hm.emit(rT,u,y,c)}},[p,n,o,i,r,c,u,h,a])}function Q4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Z4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q4(Object(n),!0).forEach(function(r){Xhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q4(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xhe(t,e,n){return(e=Qhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qhe(t){var e=Zhe(t,"string");return typeof e=="symbol"?e:e+""}function Zhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jhe(t){return t.dataKey}function ede(t,e){return w.isValidElement(t)?w.cloneElement(t,e):typeof t=="function"?w.createElement(t,e):w.createElement(Ese,e)}var J4=[],tde={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Yf.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function P7(t){var e=es(t,tde),{active:n,allowEscapeViewBox:r,animationDuration:i,animationEasing:a,content:o,filterNull:c,isAnimationActive:u,offset:h,payloadUniqBy:m,position:p,reverseDirection:y,useTranslate3d:b,wrapperStyle:_,cursor:T,shared:S,trigger:E,defaultIndex:N,portal:C,axisId:L}=e,D=Pn(),R=typeof N=="number"?String(N):N;w.useEffect(()=>{D(jfe({shared:S,trigger:E,axisId:L,active:n,defaultIndex:R}))},[D,S,E,L,n,R]);var k=SA(),I=c9(),O=Tfe(S),{activeIndex:U,isActive:$}=He(Ie=>Che(Ie,O,E,R)),V=He(Ie=>Nhe(Ie,O,E,R)),B=He(Ie=>C7(Ie,O,E,R)),Y=He(Ie=>Ahe(Ie,O,E,R)),ee=V,q=Rhe(),G=n??$,[K,oe]=k8([ee,G]),H=O==="axis"?B:void 0;Yhe(O,E,Y,H,U,G);var Z=C??q;if(Z==null)return null;var te=ee??J4;G||(te=J4),c&&te.length&&(te=A8(ee.filter(Ie=>Ie.value!=null&&(Ie.hide!==!0||e.includeHidden)),m,Jhe));var fe=te.length>0,Ce=w.createElement(Ose,{allowEscapeViewBox:r,animationDuration:i,animationEasing:a,isAnimationActive:u,active:G,coordinate:Y,hasPayload:fe,offset:h,position:p,reverseDirection:y,useTranslate3d:b,viewBox:k,wrapperStyle:_,lastBoundingBox:K,innerRef:oe,hasPortalFromProps:!!C},ede(o,Z4(Z4({},e),{},{payload:te,label:H,active:G,coordinate:Y,accessibilityLayer:I})));return w.createElement(w.Fragment,null,B3.createPortal(Ce,Z),G&&w.createElement(Phe,{cursor:T,tooltipEventType:O,coordinate:Y,payload:ee,index:U}))}var Ww={},Yw={},Xw={},eR;function nde(){return eR||(eR=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:a}={}){let o,c=null;const u=a!=null&&a.includes("leading"),h=a==null||a.includes("trailing"),m=()=>{c!==null&&(n.apply(o,c),o=void 0,c=null)},p=()=>{h&&m(),T()};let y=null;const b=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,p()},r)},_=()=>{y!==null&&(clearTimeout(y),y=null)},T=()=>{_(),o=void 0,c=null},S=()=>{m()},E=function(...N){if(i?.aborted)return;o=this,c=N;const C=y==null;b(),u&&C&&m()};return E.schedule=b,E.cancel=T,E.flush=S,i?.addEventListener("abort",T,{once:!0}),E}t.debounce=e}(Xw)),Xw}var tR;function rde(){return tR||(tR=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nde();function n(r,i=0,a={}){typeof a!="object"&&(a={});const{leading:o=!1,trailing:c=!0,maxWait:u}=a,h=Array(2);o&&(h[0]="leading"),c&&(h[1]="trailing");let m,p=null;const y=e.debounce(function(...T){m=r.apply(this,T),p=null},i,{edges:h}),b=function(...T){return u!=null&&(p===null&&(p=Date.now()),Date.now()-p>=u)?(m=r.apply(this,T),p=Date.now(),y.cancel(),y.schedule(),m):(y.apply(this,T),m)},_=()=>(y.flush(),m);return b.cancel=y.cancel,b.flush=_,b}t.debounce=n}(Yw)),Yw}var nR;function ide(){return nR||(nR=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rde();function n(r,i=0,a={}){const{leading:o=!0,trailing:c=!0}=a;return e.debounce(r,i,{leading:o,maxWait:i,trailing:c})}t.throttle=n}(Ww)),Ww}var Qw,rR;function ade(){return rR||(rR=1,Qw=ide().throttle),Qw}var sde=ade();const ode=zi(sde);var $d=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a]};function iR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iR(Object(n),!0).forEach(function(r){lde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function lde(t,e,n){return(e=cde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cde(t){var e=ude(t,"string");return typeof e=="symbol"?e:e+""}function ude(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var R7=w.forwardRef((t,e)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:i="100%",height:a="100%",minWidth:o=0,minHeight:c,maxHeight:u,children:h,debounce:m=0,id:p,className:y,onResize:b,style:_={}}=t,T=w.useRef(null),S=w.useRef();S.current=b,w.useImperativeHandle(e,()=>T.current);var[E,N]=w.useState({containerWidth:r.width,containerHeight:r.height}),C=w.useCallback((D,R)=>{N(k=>{var I=Math.round(D),O=Math.round(R);return k.containerWidth===I&&k.containerHeight===O?k:{containerWidth:I,containerHeight:O}})},[]);w.useEffect(()=>{var D=O=>{var U,{width:$,height:V}=O[0].contentRect;C($,V),(U=S.current)===null||U===void 0||U.call(S,$,V)};m>0&&(D=ode(D,m,{trailing:!0,leading:!1}));var R=new ResizeObserver(D),{width:k,height:I}=T.current.getBoundingClientRect();return C(k,I),R.observe(T.current),()=>{R.disconnect()}},[C,m]);var L=w.useMemo(()=>{var{containerWidth:D,containerHeight:R}=E;if(D<0||R<0)return null;$d(yc(i)||yc(a),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,i,a),$d(!n||n>0,"The aspect(%s) must be greater than zero.",n);var k=yc(i)?D:i,I=yc(a)?R:a;return n&&n>0&&(k?I=k/n:I&&(k=I*n),u&&I>u&&(I=u)),$d(k>0||I>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,k,I,i,a,o,c,n),w.Children.map(h,O=>w.cloneElement(O,{width:k,height:I,style:Zw({width:k,height:I},O.props.style)}))},[n,h,a,u,c,o,E,i]);return w.createElement("div",{id:p?"".concat(p):void 0,className:zt("recharts-responsive-container",y),style:Zw(Zw({},_),{},{width:i,height:a,minWidth:o,minHeight:c,maxHeight:u}),ref:T},w.createElement("div",{style:{width:0,height:0,overflow:"visible"}},L))}),S2=t=>null;S2.displayName="Cell";function fde(t,e,n){return(e=hde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hde(t){var e=dde(t,"string");return typeof e=="symbol"?e:e+""}function dde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class mde{constructor(e){fde(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function aR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gde(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aR(Object(n),!0).forEach(function(r){pde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pde(t,e,n){return(e=yde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yde(t){var e=vde(t,"string");return typeof e=="symbol"?e:e+""}function vde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bde={cacheSize:2e3,enableCache:!0},M7=gde({},bde),sR=new mde(M7.cacheSize),xde={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},oR="recharts_measurement_span";function wde(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",a=e.fontStyle||"",o=e.letterSpacing||"",c=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(a,"|").concat(o,"|").concat(c)}var lR=(t,e)=>{try{var n=document.getElementById(oR);n||(n=document.createElement("span"),n.setAttribute("id",oR),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,xde,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Fd=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||Yf.isSsr)return{width:0,height:0};if(!M7.enableCache)return lR(e,n);var r=wde(e,n),i=sR.get(r);if(i)return i;var a=lR(e,n);return sR.set(r,a),a},cR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,uR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,_de=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Sde=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,L7={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Tde=Object.keys(L7),nf="NaN";function Ede(t,e){return t*L7[e]}class Br{static parse(e){var n,[,r,i]=(n=Sde.exec(e))!==null&&n!==void 0?n:[];return new Br(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,di(e)&&(this.unit=""),n!==""&&!_de.test(n)&&(this.num=NaN,this.unit=""),Tde.includes(n)&&(this.num=Ede(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Br(NaN,""):new Br(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Br(NaN,""):new Br(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Br(NaN,""):new Br(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Br(NaN,""):new Br(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return di(this.num)}}function V7(t){if(t.includes(nf))return nf;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,a]=(n=cR.exec(e))!==null&&n!==void 0?n:[],o=Br.parse(r??""),c=Br.parse(a??""),u=i==="*"?o.multiply(c):o.divide(c);if(u.isNaN())return nf;e=e.replace(cR,u.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var h,[,m,p,y]=(h=uR.exec(e))!==null&&h!==void 0?h:[],b=Br.parse(m??""),_=Br.parse(y??""),T=p==="+"?b.add(_):b.subtract(_);if(T.isNaN())return nf;e=e.replace(uR,T.toString())}return e}var fR=/\(([^()]*)\)/;function Ade(t){for(var e=t,n;(n=fR.exec(e))!=null;){var[,r]=n;e=e.replace(fR,V7(r))}return e}function Nde(t){var e=t.replace(/\s+/g,"");return e=Ade(e),e=V7(e),e}function Cde(t){try{return Nde(t)}catch{return nf}}function Jw(t){var e=Cde(t.slice(5,-1));return e===nf?"":e}var jde=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Dde=["dx","dy","angle","className","breakAll"];function iT(){return iT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},iT.apply(null,arguments)}function hR(t,e){if(t==null)return{};var n,r,i=kde(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function kde(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var B7=/[ \f\n\r\t\v\u2028\u2029]+/,U7=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];an(e)||(n?i=e.toString().split(""):i=e.toString().split(B7));var a=i.map(c=>({word:c,width:Fd(c,r).width})),o=n?0:Fd(" ",r).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch{return null}},Ode=(t,e,n,r,i)=>{var{maxLines:a,children:o,style:c,breakAll:u}=t,h=Ue(a),m=o,p=function(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return $.reduce((V,B)=>{var{word:Y,width:ee}=B,q=V[V.length-1];if(q&&(r==null||i||q.width+ee+n<Number(r)))q.words.push(Y),q.width+=ee+n;else{var G={words:[Y],width:ee};V.push(G)}return V},[])},y=p(e),b=U=>U.reduce(($,V)=>$.width>V.width?$:V);if(!h||i)return y;var _=y.length>a||b(y).width>Number(r);if(!_)return y;for(var T="…",S=U=>{var $=m.slice(0,U),V=U7({breakAll:u,style:c,children:$+T}).wordsWithComputedWidth,B=p(V),Y=B.length>a||b(B).width>Number(r);return[Y,B]},E=0,N=m.length-1,C=0,L;E<=N&&C<=m.length-1;){var D=Math.floor((E+N)/2),R=D-1,[k,I]=S(R),[O]=S(D);if(!k&&!O&&(E=D+1),k&&O&&(N=D-1),!k&&O){L=I;break}C++}return L||y},dR=t=>{var e=an(t)?[]:t.toString().split(B7);return[{words:e}]},Ide=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:a,maxLines:o}=t;if((e||n)&&!Yf.isSsr){var c,u,h=U7({breakAll:a,children:r,style:i});if(h){var{wordsWithComputedWidth:m,spaceWidth:p}=h;c=m,u=p}else return dR(r);return Ode({breakAll:a,children:r,maxLines:o,style:i},c,u,e,n)}return dR(r)},mR="#808080",T2=w.forwardRef((t,e)=>{var{x:n=0,y:r=0,lineHeight:i="1em",capHeight:a="0.71em",scaleToFit:o=!1,textAnchor:c="start",verticalAnchor:u="end",fill:h=mR}=t,m=hR(t,jde),p=w.useMemo(()=>Ide({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:o,style:m.style,width:m.width}),[m.breakAll,m.children,m.maxLines,o,m.style,m.width]),{dx:y,dy:b,angle:_,className:T,breakAll:S}=m,E=hR(m,Dde);if(!Qa(n)||!Qa(r))return null;var N=n+(Ue(y)?y:0),C=r+(Ue(b)?b:0),L;switch(u){case"start":L=Jw("calc(".concat(a,")"));break;case"middle":L=Jw("calc(".concat((p.length-1)/2," * -").concat(i," + (").concat(a," / 2))"));break;default:L=Jw("calc(".concat(p.length-1," * -").concat(i,")"));break}var D=[];if(o){var R=p[0].width,{width:k}=m;D.push("scale(".concat(Ue(k)?k/R:1,")"))}return _&&D.push("rotate(".concat(_,", ").concat(N,", ").concat(C,")")),D.length&&(E.transform=D.join(" ")),w.createElement("text",iT({},yn(E,!0),{ref:e,x:N,y:C,className:zt("recharts-text",T),textAnchor:c,fill:h.includes("url")?mR:h}),p.map((I,O)=>{var U=I.words.join(S?"":" ");return w.createElement("tspan",{x:N,dy:O===0?L:i,key:"".concat(U,"-").concat(O)},U)}))});T2.displayName="Text";var Pde=["offset"],Rde=["labelRef"];function gR(t,e){if(t==null)return{};var n,r,i=Mde(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Mde(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function pR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pR(Object(n),!0).forEach(function(r){Lde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lde(t,e,n){return(e=Vde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vde(t){var e=Bde(t,"string");return typeof e=="symbol"?e:e+""}function Bde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Is(){return Is=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Is.apply(null,arguments)}var Ude=t=>{var{value:e,formatter:n}=t,r=an(t.children)?e:t.children;return typeof n=="function"?n(r):r},E2=t=>t!=null&&typeof t=="function",$de=(t,e)=>{var n=Fr(e-t),r=Math.min(Math.abs(e-t),360);return n*r},Fde=(t,e,n,r)=>{var{position:i,offset:a,className:o}=t,{cx:c,cy:u,innerRadius:h,outerRadius:m,startAngle:p,endAngle:y,clockWise:b}=r,_=(h+m)/2,T=$de(p,y),S=T>=0?1:-1,E,N;i==="insideStart"?(E=p+S*a,N=b):i==="insideEnd"?(E=y-S*a,N=!b):i==="end"&&(E=y+S*a,N=b),N=T<=0?N:!N;var C=hr(c,u,_,E),L=hr(c,u,_,E+(N?1:-1)*359),D="M".concat(C.x,",").concat(C.y,`
    A`).concat(_,",").concat(_,",0,1,").concat(N?0:1,`,
    `).concat(L.x,",").concat(L.y),R=an(t.id)?nm("recharts-radial-line-"):t.id;return w.createElement("text",Is({},n,{dominantBaseline:"central",className:zt("recharts-radial-bar-label",o)}),w.createElement("defs",null,w.createElement("path",{id:R,d:D})),w.createElement("textPath",{xlinkHref:"#".concat(R)},e))},zde=(t,e,n)=>{var{cx:r,cy:i,innerRadius:a,outerRadius:o,startAngle:c,endAngle:u}=t,h=(c+u)/2;if(n==="outside"){var{x:m,y:p}=hr(r,i,o+e,h);return{x:m,y:p,textAnchor:m>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var y=(a+o)/2,{x:b,y:_}=hr(r,i,y,h);return{x:b,y:_,textAnchor:"middle",verticalAnchor:"middle"}},Hde=(t,e)=>{var{parentViewBox:n,offset:r,position:i}=t,{x:a,y:o,width:c,height:u}=e,h=u>=0?1:-1,m=h*r,p=h>0?"end":"start",y=h>0?"start":"end",b=c>=0?1:-1,_=b*r,T=b>0?"end":"start",S=b>0?"start":"end";if(i==="top"){var E={x:a+c/2,y:o-h*r,textAnchor:"middle",verticalAnchor:p};return gn(gn({},E),n?{height:Math.max(o-n.y,0),width:c}:{})}if(i==="bottom"){var N={x:a+c/2,y:o+u+m,textAnchor:"middle",verticalAnchor:y};return gn(gn({},N),n?{height:Math.max(n.y+n.height-(o+u),0),width:c}:{})}if(i==="left"){var C={x:a-_,y:o+u/2,textAnchor:T,verticalAnchor:"middle"};return gn(gn({},C),n?{width:Math.max(C.x-n.x,0),height:u}:{})}if(i==="right"){var L={x:a+c+_,y:o+u/2,textAnchor:S,verticalAnchor:"middle"};return gn(gn({},L),n?{width:Math.max(n.x+n.width-L.x,0),height:u}:{})}var D=n?{width:c,height:u}:{};return i==="insideLeft"?gn({x:a+_,y:o+u/2,textAnchor:S,verticalAnchor:"middle"},D):i==="insideRight"?gn({x:a+c-_,y:o+u/2,textAnchor:T,verticalAnchor:"middle"},D):i==="insideTop"?gn({x:a+c/2,y:o+m,textAnchor:"middle",verticalAnchor:y},D):i==="insideBottom"?gn({x:a+c/2,y:o+u-m,textAnchor:"middle",verticalAnchor:p},D):i==="insideTopLeft"?gn({x:a+_,y:o+m,textAnchor:S,verticalAnchor:y},D):i==="insideTopRight"?gn({x:a+c-_,y:o+m,textAnchor:T,verticalAnchor:y},D):i==="insideBottomLeft"?gn({x:a+_,y:o+u-m,textAnchor:S,verticalAnchor:p},D):i==="insideBottomRight"?gn({x:a+c-_,y:o+u-m,textAnchor:T,verticalAnchor:p},D):i&&typeof i=="object"&&(Ue(i.x)||yc(i.x))&&(Ue(i.y)||yc(i.y))?gn({x:a+fa(i.x,c),y:o+fa(i.y,u),textAnchor:"end",verticalAnchor:"end"},D):gn({x:a+c/2,y:o+u/2,textAnchor:"middle",verticalAnchor:"middle"},D)},qde=t=>"cx"in t&&Ue(t.cx);function oi(t){var{offset:e=5}=t,n=gR(t,Pde),r=gn({offset:e},n),{viewBox:i,position:a,value:o,children:c,content:u,className:h="",textBreakAll:m,labelRef:p}=r,y=He(SV),b=SA(),_=a==="center"?b:y??b,T=i||_;if(!T||an(o)&&an(c)&&!w.isValidElement(u)&&typeof u!="function")return null;var S=gn(gn({},r),{},{viewBox:T});if(w.isValidElement(u)){var{labelRef:E}=S,N=gR(S,Rde);return w.cloneElement(u,N)}var C;if(typeof u=="function"){if(C=w.createElement(u,S),w.isValidElement(C))return C}else C=Ude(r);var L=qde(T),D=yn(r,!0);if(L&&(a==="insideStart"||a==="insideEnd"||a==="end"))return Fde(r,C,D,T);var R=L?zde(T,r.offset,r.position):Hde(r,T);return w.createElement(T2,Is({ref:p,className:zt("recharts-label",h)},D,R,{breakAll:m}),C)}oi.displayName="Label";var $7=t=>{var{cx:e,cy:n,angle:r,startAngle:i,endAngle:a,r:o,radius:c,innerRadius:u,outerRadius:h,x:m,y:p,top:y,left:b,width:_,height:T,clockWise:S,labelViewBox:E}=t;if(E)return E;if(Ue(_)&&Ue(T)){if(Ue(m)&&Ue(p))return{x:m,y:p,width:_,height:T};if(Ue(y)&&Ue(b))return{x:y,y:b,width:_,height:T}}if(Ue(m)&&Ue(p))return{x:m,y:p,width:0,height:0};if(Ue(e)&&Ue(n))return{cx:e,cy:n,startAngle:i||r||0,endAngle:a||r||0,innerRadius:u||0,outerRadius:h||c||o||0,clockWise:S};if(t.viewBox)return t.viewBox},Kde=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?w.createElement(oi,Is({key:"label-implicit"},r)):Qa(t)?w.createElement(oi,Is({key:"label-implicit",value:t},r)):w.isValidElement(t)?t.type===oi?w.cloneElement(t,gn({key:"label-implicit"},r)):w.createElement(oi,Is({key:"label-implicit",content:t},r)):E2(t)?w.createElement(oi,Is({key:"label-implicit",content:t},r)):t&&typeof t=="object"?w.createElement(oi,Is({},t,{key:"label-implicit"},r)):null},Gde=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:i,labelRef:a}=e,o=$7(e),c=nA(i,oi).map((h,m)=>w.cloneElement(h,{viewBox:n||o,key:"label-".concat(m)}));if(!r)return c;var u=Kde(e.label,n||o,a);return[u,...c]};oi.parseViewBox=$7;oi.renderCallByParent=Gde;var e_={},t_={},yR;function Wde(){return yR||(yR=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e}(t_)),t_}var n_={},vR;function Yde(){return vR||(vR=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e}(n_)),n_}var bR;function Xde(){return bR||(bR=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Wde(),n=Yde(),r=uA();function i(a){if(r.isArrayLike(a))return e.last(n.toArray(a))}t.last=i}(e_)),e_}var r_,xR;function Qde(){return xR||(xR=1,r_=Xde().last),r_}var Zde=Qde();const Jde=zi(Zde);var eme=["valueAccessor"],tme=["data","dataKey","clockWise","id","textBreakAll"];function Sv(){return Sv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sv.apply(null,arguments)}function wR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _R(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wR(Object(n),!0).forEach(function(r){nme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nme(t,e,n){return(e=rme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rme(t){var e=ime(t,"string");return typeof e=="symbol"?e:e+""}function ime(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function SR(t,e){if(t==null)return{};var n,r,i=ame(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ame(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var sme=t=>Array.isArray(t.value)?Jde(t.value):t.value;function ul(t){var{valueAccessor:e=sme}=t,n=SR(t,eme),{data:r,dataKey:i,clockWise:a,id:o,textBreakAll:c}=n,u=SR(n,tme);return!r||!r.length?null:w.createElement(ha,{className:"recharts-label-list"},r.map((h,m)=>{var p=an(i)?e(h,m):er(h&&h.payload,i),y=an(o)?{}:{id:"".concat(o,"-").concat(m)};return w.createElement(oi,Sv({},yn(h,!0),u,y,{parentViewBox:h.parentViewBox,value:p,textBreakAll:c,viewBox:oi.parseViewBox(an(a)?h:_R(_R({},h),{},{clockWise:a})),key:"label-".concat(m),index:m}))}))}ul.displayName="LabelList";function ome(t,e){return t?t===!0?w.createElement(ul,{key:"labelList-implicit",data:e}):w.isValidElement(t)||E2(t)?w.createElement(ul,{key:"labelList-implicit",data:e,content:t}):typeof t=="object"?w.createElement(ul,Sv({data:e},t,{key:"labelList-implicit"})):null:null}function lme(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:r}=t,i=nA(r,ul).map((o,c)=>w.cloneElement(o,{data:e,key:"labelList-".concat(c)}));if(!n)return i;var a=ome(t.label,e);return[a,...i]}ul.renderCallByParent=lme;function aT(){return aT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aT.apply(null,arguments)}var F7=t=>{var{cx:e,cy:n,r,className:i}=t,a=zt("recharts-dot",i);return e===+e&&n===+n&&r===+r?w.createElement("circle",aT({},Yc(t),tA(t),{className:a,cx:e,cy:n,r})):null},cme={radiusAxis:{},angleAxis:{}},z7=vi({name:"polarAxis",initialState:cme,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:Ybe,removeRadiusAxis:Xbe,addAngleAxis:Qbe,removeAngleAxis:Zbe}=z7.actions,ume=z7.reducer,i_={},TR;function fme(){return TR||(TR=1,function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const i=n[Symbol.toStringTag];return i==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${i}]`}let r=n;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(n)===r}t.isPlainObject=e}(i_)),i_}var a_,ER;function hme(){return ER||(ER=1,a_=fme().isPlainObject),a_}var dme=hme();const mme=zi(dme);function Tv(){return Tv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tv.apply(null,arguments)}var AR=(t,e,n,r,i)=>{var a=n-r,o;return o="M ".concat(t,",").concat(e),o+="L ".concat(t+n,",").concat(e),o+="L ".concat(t+n-a/2,",").concat(e+i),o+="L ".concat(t+n-a/2-r,",").concat(e+i),o+="L ".concat(t,",").concat(e," Z"),o},gme={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},pme=t=>{var e=es(t,gme),n=w.useRef(),[r,i]=w.useState(-1);w.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&i(S)}catch{}},[]);var{x:a,y:o,upperWidth:c,lowerWidth:u,height:h,className:m}=e,{animationEasing:p,animationDuration:y,animationBegin:b,isUpdateAnimationActive:_}=e;if(a!==+a||o!==+o||c!==+c||u!==+u||h!==+h||c===0&&u===0||h===0)return null;var T=zt("recharts-trapezoid",m);return _?w.createElement(lv,{canBegin:r>0,from:{upperWidth:0,lowerWidth:0,height:h,x:a,y:o},to:{upperWidth:c,lowerWidth:u,height:h,x:a,y:o},duration:y,animationEasing:p,isActive:_},S=>{var{upperWidth:E,lowerWidth:N,height:C,x:L,y:D}=S;return w.createElement(lv,{canBegin:r>0,from:"0px ".concat(r===-1?1:r,"px"),to:"".concat(r,"px 0px"),attributeName:"strokeDasharray",begin:b,duration:y,easing:p},w.createElement("path",Tv({},yn(e,!0),{className:T,d:AR(L,D,E,N,C),ref:n})))}):w.createElement("g",null,w.createElement("path",Tv({},yn(e,!0),{className:T,d:AR(a,o,c,u,h)})))},yme=["option","shapeType","propTransformer","activeClassName","isActive"];function vme(t,e){if(t==null)return{};var n,r,i=bme(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function bme(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function NR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ev(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NR(Object(n),!0).forEach(function(r){xme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xme(t,e,n){return(e=wme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wme(t){var e=_me(t,"string");return typeof e=="symbol"?e:e+""}function _me(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Sme(t,e){return Ev(Ev({},e),t)}function Tme(t,e){return t==="symbols"}function CR(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return w.createElement(y9,n);case"trapezoid":return w.createElement(pme,n);case"sector":return w.createElement(x9,n);case"symbols":if(Tme(e))return w.createElement(oA,n);break;default:return null}}function Eme(t){return w.isValidElement(t)?t.props:t}function Ame(t){var{option:e,shapeType:n,propTransformer:r=Sme,activeClassName:i="recharts-active-shape",isActive:a}=t,o=vme(t,yme),c;if(w.isValidElement(e))c=w.cloneElement(e,Ev(Ev({},o),Eme(e)));else if(typeof e=="function")c=e(o);else if(mme(e)&&typeof e!="boolean"){var u=r(e,o);c=w.createElement(CR,{shapeType:n,elementProps:u})}else{var h=o;c=w.createElement(CR,{shapeType:n,elementProps:h})}return a?w.createElement(ha,{className:i},c):c}var H7=(t,e)=>{var n=Pn();return(r,i)=>a=>{t?.(r,i,a),n(u7({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}},q7=t=>{var e=Pn();return(n,r)=>i=>{t?.(n,r,i),e(Dfe())}},K7=(t,e)=>{var n=Pn();return(r,i)=>a=>{t?.(r,i,a),n(kfe({activeIndex:String(i),activeDataKey:e,activeCoordinate:r.tooltipPosition}))}};function G7(t){var{fn:e,args:n}=t,r=Pn(),i=qr();return w.useEffect(()=>{if(!i){var a=e(n);return r(Nfe(a)),()=>{r(Cfe(a))}}},[e,n,r,i]),null}var Nme=()=>{};function W7(t){var{legendPayload:e}=t,n=Pn(),r=qr();return w.useEffect(()=>r?Nme:(n(ose(e)),()=>{n(lse(e))}),[n,r,e]),null}function Y7(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=w.useRef(nm(e)),r=w.useRef(t);return r.current!==t&&(n.current=nm(e),r.current=t),n.current}var s_,Cme=()=>{var[t]=w.useState(()=>nm("uid-"));return t},jme=(s_=g$.useId)!==null&&s_!==void 0?s_:Cme;function Dme(t,e){var n=jme();return e||(t?"".concat(t,"-").concat(n):n)}var kme=w.createContext(void 0),X7=t=>{var{id:e,type:n,children:r}=t,i=Dme("recharts-".concat(n),e);return w.createElement(kme.Provider,{value:i},r(i))},Ome={cartesianItems:[],polarItems:[]},Q7=vi({name:"graphicalItems",initialState:Ome,reducers:{addCartesianGraphicalItem(t,e){t.cartesianItems.push(e.payload)},replaceCartesianGraphicalItem(t,e){var{prev:n,next:r}=e.payload,i=$s(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},removeCartesianGraphicalItem(t,e){var n=$s(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},addPolarGraphicalItem(t,e){t.polarItems.push(e.payload)},removePolarGraphicalItem(t,e){var n=$s(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:Ime,replaceCartesianGraphicalItem:Pme,removeCartesianGraphicalItem:Rme,addPolarGraphicalItem:Jbe,removePolarGraphicalItem:e1e}=Q7.actions,Mme=Q7.reducer;function Z7(t){var e=Pn(),n=w.useRef(null);return w.useEffect(()=>{n.current===null?e(Ime(t)):n.current!==t&&e(Pme({prev:n.current,next:t})),n.current=t},[e,t]),w.useEffect(()=>()=>{n.current&&(e(Rme(n.current)),n.current=null)},[e]),null}function Lme(){}var Vme={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},jR={t:0},o_={t:1};function J7(t){var e=es(t,Vme),{isActive:n,canBegin:r,duration:i,easing:a,begin:o,onAnimationEnd:c,onAnimationStart:u,children:h}=e,m=p9("JavascriptAnimate",e.animationManager),[p,y]=w.useState(n?jR:o_),b=w.useRef(null);return w.useEffect(()=>{n||y(o_)},[n]),w.useEffect(()=>{if(!n||!r)return Lme;var _=g9(jR,o_,d9(a),i,y,m.getTimeoutController()),T=()=>{b.current=_()};return m.start([u,o,T,i,c]),()=>{m.stop(),b.current&&b.current(),c()}},[n,r,i,a,o,u,c,m]),h(p.t)}var Bme=de([tr],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),Ume=de([Bme,so,oo],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),A2=()=>He(Ume),$me=()=>He(yhe);function DR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DR(Object(n),!0).forEach(function(r){Fme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fme(t,e,n){return(e=zme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zme(t){var e=Hme(t,"string");return typeof e=="symbol"?e:e+""}function Hme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qme=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:a}=t;if(i===!1||e.x==null||e.y==null)return null;var o=kR(kR({index:n,dataKey:a,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},yn(i,!1)),tA(i)),c;return w.isValidElement(i)?c=w.cloneElement(i,o):typeof i=="function"?c=i(o):c=w.createElement(F7,o),w.createElement(ha,{className:"recharts-active-dot"},c)};function Kme(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i}=t,a=He(zc),o=$me();if(e==null||o==null)return null;var c=e.find(u=>o.includes(u.payload));return an(c)?null:qme({point:c,childIndex:Number(a),mainColor:n,dataKey:i,activeDot:r})}var Gme="Invariant failed";function Wme(t,e){throw new Error(Gme)}var Yme=["x","y"];function sT(){return sT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sT.apply(null,arguments)}function OR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xd(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OR(Object(n),!0).forEach(function(r){Xme(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xme(t,e,n){return(e=Qme(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qme(t){var e=Zme(t,"string");return typeof e=="symbol"?e:e+""}function Zme(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jme(t,e){if(t==null)return{};var n,r,i=ege(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ege(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function tge(t,e){var{x:n,y:r}=t,i=Jme(t,Yme),a="".concat(n),o=parseInt(a,10),c="".concat(r),u=parseInt(c,10),h="".concat(e.height||i.height),m=parseInt(h,10),p="".concat(e.width||i.width),y=parseInt(p,10);return xd(xd(xd(xd(xd({},e),i),o?{x:o}:{}),u?{y:u}:{}),{},{height:m,width:y,name:e.name,radius:e.radius})}function eB(t){return w.createElement(Ame,sT({shapeType:"rectangle",propTransformer:tge,activeClassName:"recharts-active-bar"},t))}var nge=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Ue(e))return e;var a=Ue(r)||an(r);return a?e(r,i):(a||Wme(),n)}},rge={},tB=vi({name:"errorBars",initialState:rge,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:t1e,removeErrorBar:n1e}=tB.actions,ige=tB.reducer,age=["children"];function sge(t,e){if(t==null)return{};var n,r,i=oge(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function oge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var lge={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},cge=w.createContext(lge);function nB(t){var{children:e}=t,n=sge(t,age);return w.createElement(cge.Provider,{value:n},e)}function N2(t,e){var n,r,i=He(h=>co(h,t)),a=He(h=>Dl(h,e)),o=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:ii.allowDataOverflow,c=(r=a?.allowDataOverflow)!==null&&r!==void 0?r:ai.allowDataOverflow,u=o||c;return{needClip:u,needClipX:o,needClipY:c}}function rB(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=A2(),{needClipX:a,needClipY:o,needClip:c}=N2(e,n);if(!c)return null;var{x:u,y:h,width:m,height:p}=i;return w.createElement("clipPath",{id:"clipPath-".concat(r)},w.createElement("rect",{x:a?u:u-m/2,y:o?h:h-p/2,width:a?m:m*2,height:o?p:p*2}))}var uge=["onMouseEnter","onMouseLeave","onClick"],fge=["value","background","tooltipPosition"],hge=["id"],dge=["onMouseEnter","onClick","onMouseLeave"];function Of(){return Of=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Of.apply(null,arguments)}function IR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IR(Object(n),!0).forEach(function(r){mge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mge(t,e,n){return(e=gge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gge(t){var e=pge(t,"string");return typeof e=="symbol"?e:e+""}function pge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Av(t,e){if(t==null)return{};var n,r,i=yge(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function yge(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var vge=t=>{var{dataKey:e,name:n,fill:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:_0(n,e),payload:t}]};function bge(t){var{dataKey:e,stroke:n,strokeWidth:r,fill:i,name:a,hide:o,unit:c}=t;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:n,strokeWidth:r,fill:i,dataKey:e,nameKey:void 0,name:_0(a,e),hide:o,type:t.tooltipType,color:t.fill,unit:c}}}function xge(t){var e=He(zc),{data:n,dataKey:r,background:i,allOtherBarProps:a}=t,{onMouseEnter:o,onMouseLeave:c,onClick:u}=a,h=Av(a,uge),m=H7(o,r),p=q7(c),y=K7(u,r);if(!i||n==null)return null;var b=yn(i,!1);return w.createElement(w.Fragment,null,n.map((_,T)=>{var{value:S,background:E,tooltipPosition:N}=_,C=Av(_,fge);if(!E)return null;var L=m(_,T),D=p(_,T),R=y(_,T),k=xr(xr(xr(xr(xr({option:i,isActive:String(T)===e},C),{},{fill:"#eee"},E),b),f0(h,_,T)),{},{onMouseEnter:L,onMouseLeave:D,onClick:R,dataKey:r,index:T,className:"recharts-bar-background-rectangle"});return w.createElement(eB,Of({key:"background-bar-".concat(T)},k))}))}function iB(t){var{data:e,props:n,showLabels:r}=t,i=Yc(n),{id:a}=i,o=Av(i,hge),{shape:c,dataKey:u,activeBar:h}=n,m=He(zc),p=He(S7),{onMouseEnter:y,onClick:b,onMouseLeave:_}=n,T=Av(n,dge),S=H7(y,u),E=q7(_),N=K7(b,u);return e?w.createElement(w.Fragment,null,e.map((C,L)=>{var D=h&&String(L)===m&&(p==null||u===p),R=D?h:c,k=xr(xr(xr({},o),C),{},{isActive:D,option:R,index:L,dataKey:u});return w.createElement(ha,Of({className:"recharts-bar-rectangle"},f0(T,C,L),{onMouseEnter:S(C,L),onMouseLeave:E(C,L),onClick:N(C,L),key:"rectangle-".concat(C?.x,"-").concat(C?.y,"-").concat(C?.value,"-").concat(L)}),w.createElement(eB,k))}),r&&ul.renderCallByParent(n,e)):null}function wge(t){var{props:e,previousRectanglesRef:n}=t,{data:r,layout:i,isAnimationActive:a,animationBegin:o,animationDuration:c,animationEasing:u,onAnimationEnd:h,onAnimationStart:m}=e,p=n.current,y=Y7(e,"recharts-bar-"),[b,_]=w.useState(!1),T=w.useCallback(()=>{typeof h=="function"&&h(),_(!1)},[h]),S=w.useCallback(()=>{typeof m=="function"&&m(),_(!0)},[m]);return w.createElement(J7,{begin:o,duration:c,isActive:a,easing:u,onAnimationEnd:T,onAnimationStart:S,key:y},E=>{var N=E===1?r:r?.map((C,L)=>{var D=p&&p[L];if(D)return xr(xr({},C),{},{x:ea(D.x,C.x,E),y:ea(D.y,C.y,E),width:ea(D.width,C.width,E),height:ea(D.height,C.height,E)});if(i==="horizontal"){var R=ea(0,C.height,E);return xr(xr({},C),{},{y:C.y+C.height-R,height:R})}var k=ea(0,C.width,E);return xr(xr({},C),{},{width:k})});return E>0&&(n.current=N??null),N==null?null:w.createElement(ha,null,w.createElement(iB,{props:e,data:N,showLabels:!b}))})}function _ge(t){var{data:e,isAnimationActive:n}=t,r=w.useRef(null);return n&&e&&e.length&&(r.current==null||r.current!==e)?w.createElement(wge,{previousRectanglesRef:r,props:t}):w.createElement(iB,{props:t,data:e,showLabels:!0})}var aB=0,Sge=(t,e)=>{var n=Array.isArray(t.value)?t.value[1]:t.value;return{x:t.x,y:t.y,value:n,errorVal:er(t,e)}};class Tge extends w.PureComponent{render(){var{hide:e,data:n,dataKey:r,className:i,xAxisId:a,yAxisId:o,needClip:c,background:u,id:h}=this.props;if(e)return null;var m=zt("recharts-bar",i),p=h;return w.createElement(ha,{className:m,id:h},c&&w.createElement("defs",null,w.createElement(rB,{clipPathId:p,xAxisId:a,yAxisId:o})),w.createElement(ha,{className:"recharts-bar-rectangles",clipPath:c?"url(#clipPath-".concat(p,")"):void 0},w.createElement(xge,{data:n,dataKey:r,background:u,allOtherBarProps:this.props}),w.createElement(_ge,this.props)),this.props.children)}}var Ege={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Yf.isSsr,legendType:"rect",minPointSize:aB,xAxisId:0,yAxisId:0};function Age(t){var{xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:o,animationBegin:c,animationDuration:u,animationEasing:h,isAnimationActive:m}=t,{needClip:p}=N2(e,n),y=A0(),b=qr(),_=nA(t.children,S2),T=He(N=>Jge(N,e,n,b,t.id,_));if(y!=="vertical"&&y!=="horizontal")return null;var S,E=T?.[0];return E==null||E.height==null||E.width==null?S=0:S=y==="vertical"?E.height/2:E.width/2,w.createElement(nB,{xAxisId:e,yAxisId:n,data:T,dataPointFormatter:Sge,errorBarOffset:S},w.createElement(Tge,Of({},t,{layout:y,needClip:p,data:T,xAxisId:e,yAxisId:n,hide:r,legendType:i,minPointSize:a,activeBar:o,animationBegin:c,animationDuration:u,animationEasing:h,isAnimationActive:m})))}function Nge(t){var{layout:e,barSettings:{dataKey:n,minPointSize:r},pos:i,bandSize:a,xAxis:o,yAxis:c,xAxisTicks:u,yAxisTicks:h,stackedData:m,displayedData:p,offset:y,cells:b}=t,_=e==="horizontal"?c:o,T=m?_.scale.domain():null,S=Uae({numericAxis:_});return p.map((E,N)=>{var C,L,D,R,k,I;m?C=Pae(m[N],T):(C=er(E,n),Array.isArray(C)||(C=[S,C]));var O=nge(r,aB)(C[1],N);if(e==="horizontal"){var U,[$,V]=[c.scale(C[0]),c.scale(C[1])];L=xP({axis:o,ticks:u,bandSize:a,offset:i.offset,entry:E,index:N}),D=(U=V??$)!==null&&U!==void 0?U:void 0,R=i.size;var B=$-V;if(k=di(B)?0:B,I={x:L,y:y.top,width:R,height:y.height},Math.abs(O)>0&&Math.abs(k)<Math.abs(O)){var Y=Fr(k||O)*(Math.abs(O)-Math.abs(k));D-=Y,k+=Y}}else{var[ee,q]=[o.scale(C[0]),o.scale(C[1])];if(L=ee,D=xP({axis:c,ticks:h,bandSize:a,offset:i.offset,entry:E,index:N}),R=q-ee,k=i.size,I={x:y.left,y:D,width:y.width,height:k},Math.abs(O)>0&&Math.abs(R)<Math.abs(O)){var G=Fr(R||O)*(Math.abs(O)-Math.abs(R));R+=G}}if(L==null||D==null||R==null||k==null)return null;var K=xr(xr({},E),{},{x:L,y:D,width:R,height:k,value:m?C:C[1],payload:E,background:I,tooltipPosition:{x:L+R/2,y:D+k/2}},b&&b[N]&&b[N].props);return K}).filter(Boolean)}function zd(t){var e=es(t,Ege),n=qr();return w.createElement(X7,{id:e.id,type:"bar"},r=>w.createElement(w.Fragment,null,w.createElement(W7,{legendPayload:vge(e)}),w.createElement(G7,{fn:bge,args:e}),w.createElement(Z7,{type:"bar",id:r,data:void 0,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,stackId:Bae(e.stackId),hide:e.hide,barSize:e.barSize,minPointSize:e.minPointSize,maxBarSize:e.maxBarSize,isPanorama:n}),w.createElement(Age,Of({},e,{id:r}))))}zd.displayName="Bar";function PR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PR(Object(n),!0).forEach(function(r){Cge(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Cge(t,e,n){return(e=jge(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jge(t){var e=Dge(t,"string");return typeof e=="symbol"?e:e+""}function Dge(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kge=(t,e)=>e,Oge=(t,e,n)=>n,Ige=(t,e,n,r)=>r,Pge=(t,e,n,r,i)=>i,Gm=de([U0,Pge],(t,e)=>t.filter(n=>n.type==="bar").find(n=>n.id===e)),Rge=de([Gm],t=>t?.maxBarSize),Mge=(t,e,n,r,i,a)=>a,RR=(t,e,n)=>{var r=n??t;if(!an(r))return fa(r,e,0)},Lge=de([It,U0,kge,Oge,Ige],(t,e,n,r,i)=>e.filter(a=>t==="horizontal"?a.xAxisId===n:a.yAxisId===r).filter(a=>a.isPanorama===i).filter(a=>a.hide===!1).filter(a=>a.type==="bar")),Vge=(t,e,n,r)=>{var i=It(t);return i==="horizontal"?JS(t,"yAxis",n,r):JS(t,"xAxis",e,r)},Bge=(t,e,n)=>{var r=It(t);return r==="horizontal"?U4(t,"xAxis",e):U4(t,"yAxis",n)},Uge=(t,e,n)=>{var r={},i=t.filter(B0),a=t.filter(h=>h.stackId==null),o=i.reduce((h,m)=>(h[m.stackId]||(h[m.stackId]=[]),h[m.stackId].push(m),h),r),c=Object.entries(o).map(h=>{var[m,p]=h,y=p.map(_=>_.dataKey),b=RR(e,n,p[0].barSize);return{stackId:m,dataKeys:y,barSize:b}}),u=a.map(h=>{var m=[h.dataKey].filter(y=>y!=null),p=RR(e,n,h.barSize);return{stackId:void 0,dataKeys:m,barSize:p}});return[...c,...u]},$ge=de([Lge,Nue,Bge],Uge),Fge=(t,e,n,r,i)=>{var a,o,c=Gm(t,e,n,r,i);if(c!=null){var u=It(t),h=pV(t),{maxBarSize:m}=c,p=an(m)?h:m,y,b;return u==="horizontal"?(y=wl(t,"xAxis",e,r),b=xl(t,"xAxis",e,r)):(y=wl(t,"yAxis",n,r),b=xl(t,"yAxis",n,r)),(a=(o=am(y,b,!0))!==null&&o!==void 0?o:p)!==null&&a!==void 0?a:0}},sB=(t,e,n,r)=>{var i=It(t),a,o;return i==="horizontal"?(a=wl(t,"xAxis",e,r),o=xl(t,"xAxis",e,r)):(a=wl(t,"yAxis",n,r),o=xl(t,"yAxis",n,r)),am(a,o)};function zge(t,e,n,r,i){var a=r.length;if(!(a<1)){var o=fa(t,n,0,!0),c,u=[];if(pi(r[0].barSize)){var h=!1,m=n/a,p=r.reduce((E,N)=>E+(N.barSize||0),0);p+=(a-1)*o,p>=n&&(p-=(a-1)*o,o=0),p>=n&&m>0&&(h=!0,m*=.9,p=a*m);var y=(n-p)/2>>0,b={offset:y-o,size:0};c=r.reduce((E,N)=>{var C,L={stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:b.offset+b.size+o,size:h?m:(C=N.barSize)!==null&&C!==void 0?C:0}},D=[...E,L];return b=D[D.length-1].position,D},u)}else{var _=fa(e,n,0,!0);n-2*_-(a-1)*o<=0&&(o=0);var T=(n-2*_-(a-1)*o)/a;T>1&&(T>>=0);var S=pi(i)?Math.min(T,i):T;c=r.reduce((E,N,C)=>[...E,{stackId:N.stackId,dataKeys:N.dataKeys,position:{offset:_+(T+o)*C+(T-S)/2,size:S}}],u)}return c}}var Hge=(t,e,n,r,i,a,o)=>{var c=an(o)?e:o,u=zge(n,r,i!==a?i:a,t,c);return i!==a&&u!=null&&(u=u.map(h=>zp(zp({},h),{},{position:zp(zp({},h.position),{},{offset:h.position.offset-i/2})}))),u},qge=de([$ge,pV,Aue,yV,Fge,sB,Rge],Hge),Kge=(t,e,n,r)=>wl(t,"xAxis",e,r),Gge=(t,e,n,r)=>wl(t,"yAxis",n,r),Wge=(t,e,n,r)=>xl(t,"xAxis",e,r),Yge=(t,e,n,r)=>xl(t,"yAxis",n,r),Xge=de([qge,Gm],(t,e)=>{if(!(t==null||e==null)){var n=t.find(r=>r.stackId===e.stackId&&e.dataKey!=null&&r.dataKeys.includes(e.dataKey));if(n!=null)return n.position}}),Qge=(t,e)=>{var n=a2(e);if(!(!t||n==null||e==null)){var{stackId:r}=e;if(r!=null){var i=t[r];if(i){var{stackedData:a}=i;if(a)return a.find(o=>o.key===n)}}}},Zge=de([Vge,Gm],Qge),Jge=de([tr,Kge,Gge,Wge,Yge,Xge,It,I0,sB,Zge,Gm,Mge],(t,e,n,r,i,a,o,c,u,h,m,p)=>{var{chartData:y,dataStartIndex:b,dataEndIndex:_}=c;if(!(m==null||a==null||o!=="horizontal"&&o!=="vertical"||e==null||n==null||r==null||i==null||u==null)){var{data:T}=m,S;if(T!=null&&T.length>0?S=T:S=y?.slice(b,_+1),S!=null)return Nge({layout:o,barSettings:m,pos:a,bandSize:u,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,stackedData:h,displayedData:S,offset:t,cells:p})}}),epe=t=>{var{chartData:e}=t,n=Pn(),r=qr();return w.useEffect(()=>r?()=>{}:(n(X4(e)),()=>{n(X4(void 0))}),[e,n,r]),null},MR={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},oB=vi({name:"brush",initialState:MR,reducers:{setBrushSettings(t,e){return e.payload==null?MR:e.payload}}}),{setBrushSettings:r1e}=oB.actions,tpe=oB.reducer;function npe(t,e,n){return(e=rpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rpe(t){var e=ipe(t,"string");return typeof e=="symbol"?e:e+""}function ipe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class C2{static create(e){return new C2(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:n,position:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e!==void 0){if(r)switch(r){case"start":return this.scale(e);case"middle":{var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i}case"end":{var a=this.bandwidth?this.bandwidth():0;return this.scale(e)+a}default:return this.scale(e)}if(n){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var n=this.range(),r=n[0],i=n[n.length-1];return r<=i?e>=r&&e<=i:e>=i&&e<=r}}npe(C2,"EPS",1e-4);function ape(t){return(t%180+180)%180}var spe=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=ape(i),o=a*Math.PI/180,c=Math.atan(r/n),u=o>c&&o<Math.PI-c?r/Math.sin(o):n/Math.cos(o);return Math.abs(u)},ope={dots:[],areas:[],lines:[]},lB=vi({name:"referenceElements",initialState:ope,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=$s(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=$s(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=$s(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:i1e,removeDot:a1e,addArea:s1e,removeArea:o1e,addLine:l1e,removeLine:c1e}=lB.actions,lpe=lB.reducer,cpe=w.createContext(void 0),upe=t=>{var{children:e}=t,[n]=w.useState("".concat(nm("recharts"),"-clip")),r=A2();if(r==null)return null;var{x:i,y:a,width:o,height:c}=r;return w.createElement(cpe.Provider,{value:n},w.createElement("defs",null,w.createElement("clipPath",{id:n},w.createElement("rect",{x:i,y:a,height:c,width:o}))),e)};function l_(t,e){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(e,n)||t[n]!==e[n]))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r)&&!{}.hasOwnProperty.call(t,r))return!1;return!0}function cB(t,e,n){if(e<1)return[];if(e===1&&n===void 0)return t;for(var r=[],i=0;i<t.length;i+=e)r.push(t[i]);return r}function fpe(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return spe(r,n)}function hpe(t,e,n){var r=n==="width",{x:i,y:a,width:o,height:c}=t;return e===1?{start:r?i:a,end:r?i+o:a+c}:{start:r?i+o:a+c,end:r?i:a}}function Nv(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var a=n();return t*(e-t*a/2-r)>=0&&t*(e+t*a/2-i)<=0}function dpe(t,e){return cB(t,e+1)}function mpe(t,e,n,r,i){for(var a=(r||[]).slice(),{start:o,end:c}=e,u=0,h=1,m=o,p=function(){var _=r?.[u];if(_===void 0)return{v:cB(r,h)};var T=u,S,E=()=>(S===void 0&&(S=n(_,T)),S),N=_.coordinate,C=u===0||Nv(t,N,E,m,c);C||(u=0,m=o,h+=1),C&&(m=N+t*(E()/2+i),u+=h)},y;h<=a.length;)if(y=p(),y)return y.v;return[]}function LR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LR(Object(n),!0).forEach(function(r){gpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gpe(t,e,n){return(e=ppe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ppe(t){var e=ype(t,"string");return typeof e=="symbol"?e:e+""}function ype(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vpe(t,e,n,r,i){for(var a=(r||[]).slice(),o=a.length,{start:c}=e,{end:u}=e,h=function(y){var b=a[y],_,T=()=>(_===void 0&&(_=n(b,y)),_);if(y===o-1){var S=t*(b.coordinate+t*T()/2-u);a[y]=b=yr(yr({},b),{},{tickCoord:S>0?b.coordinate-S*t:b.coordinate})}else a[y]=b=yr(yr({},b),{},{tickCoord:b.coordinate});var E=Nv(t,b.tickCoord,T,c,u);E&&(u=b.tickCoord-t*(T()/2+i),a[y]=yr(yr({},b),{},{isShow:!0}))},m=o-1;m>=0;m--)h(m);return a}function bpe(t,e,n,r,i,a){var o=(r||[]).slice(),c=o.length,{start:u,end:h}=e;if(a){var m=r[c-1],p=n(m,c-1),y=t*(m.coordinate+t*p/2-h);o[c-1]=m=yr(yr({},m),{},{tickCoord:y>0?m.coordinate-y*t:m.coordinate});var b=Nv(t,m.tickCoord,()=>p,u,h);b&&(h=m.tickCoord-t*(p/2+i),o[c-1]=yr(yr({},m),{},{isShow:!0}))}for(var _=a?c-1:c,T=function(N){var C=o[N],L,D=()=>(L===void 0&&(L=n(C,N)),L);if(N===0){var R=t*(C.coordinate-t*D()/2-u);o[N]=C=yr(yr({},C),{},{tickCoord:R<0?C.coordinate-R*t:C.coordinate})}else o[N]=C=yr(yr({},C),{},{tickCoord:C.coordinate});var k=Nv(t,C.tickCoord,D,u,h);k&&(u=C.tickCoord+t*(D()/2+i),o[N]=yr(yr({},C),{},{isShow:!0}))},S=0;S<_;S++)T(S);return o}function j2(t,e,n){var{tick:r,ticks:i,viewBox:a,minTickGap:o,orientation:c,interval:u,tickFormatter:h,unit:m,angle:p}=t;if(!i||!i.length||!r)return[];if(Ue(u)||Yf.isSsr){var y;return(y=dpe(i,Ue(u)?u:0))!==null&&y!==void 0?y:[]}var b=[],_=c==="top"||c==="bottom"?"width":"height",T=m&&_==="width"?Fd(m,{fontSize:e,letterSpacing:n}):{width:0,height:0},S=(C,L)=>{var D=typeof h=="function"?h(C.value,L):C.value;return _==="width"?fpe(Fd(D,{fontSize:e,letterSpacing:n}),T,p):Fd(D,{fontSize:e,letterSpacing:n})[_]},E=i.length>=2?Fr(i[1].coordinate-i[0].coordinate):1,N=hpe(a,E,_);return u==="equidistantPreserveStart"?mpe(E,N,S,i,o):(u==="preserveStart"||u==="preserveStartEnd"?b=bpe(E,N,S,i,o,u==="preserveStartEnd"):b=vpe(E,N,S,i,o),b.filter(C=>C.isShow))}var xpe=["viewBox"],wpe=["viewBox"];function rf(){return rf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rf.apply(null,arguments)}function VR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $n(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VR(Object(n),!0).forEach(function(r){D2(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function BR(t,e){if(t==null)return{};var n,r,i=_pe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function _pe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function D2(t,e,n){return(e=Spe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Spe(t){var e=Tpe(t,"string");return typeof e=="symbol"?e:e+""}function Tpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class kl extends w.Component{constructor(e){super(e),this.tickRefs=w.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(e,n){var{viewBox:r}=e,i=BR(e,xpe),a=this.props,{viewBox:o}=a,c=BR(a,wpe);return!l_(r,o)||!l_(i,c)||!l_(n,this.state)}getTickLineCoord(e){var{x:n,y:r,width:i,height:a,orientation:o,tickSize:c,mirror:u,tickMargin:h}=this.props,m,p,y,b,_,T,S=u?-1:1,E=e.tickSize||c,N=Ue(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":m=p=e.coordinate,b=r+ +!u*a,y=b-S*E,T=y-S*h,_=N;break;case"left":y=b=e.coordinate,p=n+ +!u*i,m=p-S*E,_=m-S*h,T=N;break;case"right":y=b=e.coordinate,p=n+ +u*i,m=p+S*E,_=m+S*h,T=N;break;default:m=p=e.coordinate,b=r+ +u*a,y=b+S*E,T=y+S*h,_=N;break}return{line:{x1:m,y1:y,x2:p,y2:b},tick:{x:_,y:T}}}getTickTextAnchor(){var{orientation:e,mirror:n}=this.props,r;switch(e){case"left":r=n?"start":"end";break;case"right":r=n?"end":"start";break;default:r="middle";break}return r}getTickVerticalAnchor(){var{orientation:e,mirror:n}=this.props;switch(e){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:e,y:n,width:r,height:i,orientation:a,mirror:o,axisLine:c}=this.props,u=$n($n($n({},yn(this.props,!1)),yn(c,!1)),{},{fill:"none"});if(a==="top"||a==="bottom"){var h=+(a==="top"&&!o||a==="bottom"&&o);u=$n($n({},u),{},{x1:e,y1:n+h*i,x2:e+r,y2:n+h*i})}else{var m=+(a==="left"&&!o||a==="right"&&o);u=$n($n({},u),{},{x1:e+m*r,y1:n,x2:e+m*r,y2:n+i})}return w.createElement("line",rf({},u,{className:zt("recharts-cartesian-axis-line",Bc(c,"className"))}))}static renderTickItem(e,n,r){var i,a=zt(n.className,"recharts-cartesian-axis-tick-value");if(w.isValidElement(e))i=w.cloneElement(e,$n($n({},n),{},{className:a}));else if(typeof e=="function")i=e($n($n({},n),{},{className:a}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=zt(o,e.className)),i=w.createElement(T2,rf({},n,{className:o}),r)}return i}renderTicks(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:i,stroke:a,tick:o,tickFormatter:c,unit:u,padding:h}=this.props,m=j2($n($n({},this.props),{},{ticks:r}),e,n),p=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),b=Yc(this.props),_=yn(o,!1),T=$n($n({},b),{},{fill:"none"},yn(i,!1)),S=m.map((E,N)=>{var{line:C,tick:L}=this.getTickLineCoord(E),D=$n($n($n($n({textAnchor:p,verticalAnchor:y},b),{},{stroke:"none",fill:a},_),L),{},{index:N,payload:E,visibleTicksCount:m.length,tickFormatter:c,padding:h});return w.createElement(ha,rf({className:"recharts-cartesian-axis-tick",key:"tick-".concat(E.value,"-").concat(E.coordinate,"-").concat(E.tickCoord)},f0(this.props,E,N)),i&&w.createElement("line",rf({},T,C,{className:zt("recharts-cartesian-axis-tick-line",Bc(i,"className"))})),o&&kl.renderTickItem(o,D,"".concat(typeof c=="function"?c(E.value,N):E.value).concat(u||"")))});return S.length>0?w.createElement("g",{className:"recharts-cartesian-axis-ticks"},S):null}render(){var{axisLine:e,width:n,height:r,className:i,hide:a}=this.props;if(a)return null;var{ticks:o}=this.props;return n!=null&&n<=0||r!=null&&r<=0?null:w.createElement(ha,{className:zt("recharts-cartesian-axis",i),ref:c=>{if(c){var u=c.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(u);var h=u[0];if(h){var m=window.getComputedStyle(h).fontSize,p=window.getComputedStyle(h).letterSpacing;(m!==this.state.fontSize||p!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(h).fontSize,letterSpacing:window.getComputedStyle(h).letterSpacing})}}}},e&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),oi.renderCallByParent(this.props))}}D2(kl,"displayName","CartesianAxis");D2(kl,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Epe=["x1","y1","x2","y2","key"],Ape=["offset"],Npe=["xAxisId","yAxisId"],Cpe=["xAxisId","yAxisId"];function UR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UR(Object(n),!0).forEach(function(r){jpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jpe(t,e,n){return(e=Dpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dpe(t){var e=kpe(t,"string");return typeof e=="symbol"?e:e+""}function kpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wc(){return wc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wc.apply(null,arguments)}function Cv(t,e){if(t==null)return{};var n,r,i=Ope(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ope(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Ipe=t=>{var{fill:e}=t;if(!e||e==="none")return null;var{fillOpacity:n,x:r,y:i,width:a,height:o,ry:c}=t;return w.createElement("rect",{x:r,y:i,ry:c,width:a,height:o,stroke:"none",fill:e,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function uB(t,e){var n;if(w.isValidElement(t))n=w.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{var{x1:r,y1:i,x2:a,y2:o,key:c}=e,u=Cv(e,Epe),h=Yc(u),{offset:m}=h,p=Cv(h,Ape);n=w.createElement("line",wc({},p,{x1:r,y1:i,x2:a,y2:o,fill:"none",key:c}))}return n}function Ppe(t){var{x:e,width:n,horizontal:r=!0,horizontalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=t,c=Cv(t,Npe),u=i.map((h,m)=>{var p=wr(wr({},c),{},{x1:e,y1:h,x2:e+n,y2:h,key:"line-".concat(m),index:m});return uB(r,p)});return w.createElement("g",{className:"recharts-cartesian-grid-horizontal"},u)}function Rpe(t){var{y:e,height:n,vertical:r=!0,verticalPoints:i}=t;if(!r||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=t,c=Cv(t,Cpe),u=i.map((h,m)=>{var p=wr(wr({},c),{},{x1:h,y1:e,x2:h,y2:e+n,key:"line-".concat(m),index:m});return uB(r,p)});return w.createElement("g",{className:"recharts-cartesian-grid-vertical"},u)}function Mpe(t){var{horizontalFill:e,fillOpacity:n,x:r,y:i,width:a,height:o,horizontalPoints:c,horizontal:u=!0}=t;if(!u||!e||!e.length)return null;var h=c.map(p=>Math.round(p+i-i)).sort((p,y)=>p-y);i!==h[0]&&h.unshift(0);var m=h.map((p,y)=>{var b=!h[y+1],_=b?i+o-p:h[y+1]-p;if(_<=0)return null;var T=y%e.length;return w.createElement("rect",{key:"react-".concat(y),y:p,x:r,height:_,width:a,stroke:"none",fill:e[T],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},m)}function Lpe(t){var{vertical:e=!0,verticalFill:n,fillOpacity:r,x:i,y:a,width:o,height:c,verticalPoints:u}=t;if(!e||!n||!n.length)return null;var h=u.map(p=>Math.round(p+i-i)).sort((p,y)=>p-y);i!==h[0]&&h.unshift(0);var m=h.map((p,y)=>{var b=!h[y+1],_=b?i+o-p:h[y+1]-p;if(_<=0)return null;var T=y%n.length;return w.createElement("rect",{key:"react-".concat(y),x:p,y:a,width:_,height:c,stroke:"none",fill:n[T],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return w.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},m)}var Vpe=(t,e)=>{var{xAxis:n,width:r,height:i,offset:a}=t;return r9(j2(wr(wr(wr({},kl.defaultProps),n),{},{ticks:i9(n),viewBox:{x:0,y:0,width:r,height:i}})),a.left,a.left+a.width,e)},Bpe=(t,e)=>{var{yAxis:n,width:r,height:i,offset:a}=t;return r9(j2(wr(wr(wr({},kl.defaultProps),n),{},{ticks:i9(n),viewBox:{x:0,y:0,width:r,height:i}})),a.top,a.top+a.height,e)},Upe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function k2(t){var e=TA(),n=EA(),r=o9(),i=wr(wr({},es(t,Upe)),{},{x:Ue(t.x)?t.x:r.left,y:Ue(t.y)?t.y:r.top,width:Ue(t.width)?t.width:r.width,height:Ue(t.height)?t.height:r.height}),{xAxisId:a,yAxisId:o,x:c,y:u,width:h,height:m,syncWithTicks:p,horizontalValues:y,verticalValues:b}=i,_=qr(),T=He(O=>$4(O,"xAxis",a,_)),S=He(O=>$4(O,"yAxis",o,_));if(!Ue(h)||h<=0||!Ue(m)||m<=0||!Ue(c)||c!==+c||!Ue(u)||u!==+u)return null;var E=i.verticalCoordinatesGenerator||Vpe,N=i.horizontalCoordinatesGenerator||Bpe,{horizontalPoints:C,verticalPoints:L}=i;if((!C||!C.length)&&typeof N=="function"){var D=y&&y.length,R=N({yAxis:S?wr(wr({},S),{},{ticks:D?y:S.ticks}):void 0,width:e,height:n,offset:r},D?!0:p);$d(Array.isArray(R),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(C=R)}if((!L||!L.length)&&typeof E=="function"){var k=b&&b.length,I=E({xAxis:T?wr(wr({},T),{},{ticks:k?b:T.ticks}):void 0,width:e,height:n,offset:r},k?!0:p);$d(Array.isArray(I),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(L=I)}return w.createElement("g",{className:"recharts-cartesian-grid"},w.createElement(Ipe,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),w.createElement(Mpe,wc({},i,{horizontalPoints:C})),w.createElement(Lpe,wc({},i,{verticalPoints:L})),w.createElement(Ppe,wc({},i,{offset:r,horizontalPoints:C,xAxis:T,yAxis:S})),w.createElement(Rpe,wc({},i,{offset:r,verticalPoints:L,xAxis:T,yAxis:S})))}k2.displayName="CartesianGrid";var fB=(t,e,n,r)=>wl(t,"xAxis",e,r),hB=(t,e,n,r)=>xl(t,"xAxis",e,r),dB=(t,e,n,r)=>wl(t,"yAxis",n,r),mB=(t,e,n,r)=>xl(t,"yAxis",n,r),$pe=de([It,fB,dB,hB,mB],(t,e,n,r,i)=>Al(t,"xAxis")?am(e,r,!1):am(n,i,!1)),Fpe=(t,e,n,r,i)=>i;function zpe(t){return t.type==="line"}var Hpe=de([U0,Fpe],(t,e)=>t.filter(zpe).find(n=>n.id===e)),qpe=de([It,fB,dB,hB,mB,Hpe,$pe,I0],(t,e,n,r,i,a,o,c)=>{var{chartData:u,dataStartIndex:h,dataEndIndex:m}=c;if(!(a==null||e==null||n==null||r==null||i==null||r.length===0||i.length===0||o==null)){var{dataKey:p,data:y}=a,b;if(y!=null&&y.length>0?b=y:b=u?.slice(h,m+1),b!=null)return hye({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataKey:p,bandSize:o,displayedData:b})}}),Kpe=["id"],Gpe=["type","layout","connectNulls","needClip"],Wpe=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function $R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ta(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$R(Object(n),!0).forEach(function(r){Ype(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$R(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ype(t,e,n){return(e=Xpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xpe(t){var e=Qpe(t,"string");return typeof e=="symbol"?e:e+""}function Qpe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function O2(t,e){if(t==null)return{};var n,r,i=Zpe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Zpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Hc(){return Hc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hc.apply(null,arguments)}var Jpe=t=>{var{dataKey:e,name:n,stroke:r,legendType:i,hide:a}=t;return[{inactive:a,dataKey:e,type:i,color:r,value:_0(n,e),payload:t}]};function eye(t){var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:a,name:o,hide:c,unit:u}=t;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:a,dataKey:e,nameKey:void 0,name:_0(o,e),hide:c,type:t.tooltipType,color:t.stroke,unit:u}}}var gB=(t,e)=>"".concat(e,"px ").concat(t-e,"px");function tye(t,e){for(var n=t.length%2!==0?[...t,0]:t,r=[],i=0;i<e;++i)r=[...r,...n];return r}var nye=(t,e,n)=>{var r=n.reduce((p,y)=>p+y);if(!r)return gB(e,t);for(var i=Math.floor(t/r),a=t%r,o=e-t,c=[],u=0,h=0;u<n.length;h+=n[u],++u)if(h+n[u]>a){c=[...n.slice(0,u),a-h];break}var m=c.length%2===0?[0,o]:[o];return[...tye(n,i),...c,...m].map(p=>"".concat(p,"px")).join(", ")};function rye(t,e){var n;if(w.isValidElement(t))n=w.cloneElement(t,e);else if(typeof t=="function")n=t(e);else{var r=zt("recharts-line-dot",typeof t!="boolean"?t.className:"");n=w.createElement(F7,Hc({},e,{className:r}))}return n}function iye(t,e){return t==null?!1:e?!0:t.length===1}function aye(t){var{clipPathId:e,points:n,props:r}=t,{dot:i,dataKey:a,needClip:o}=r;if(!iye(n,i))return null;var{id:c}=r,u=O2(r,Kpe),h=t8(i),m=Yc(u),p=yn(i,!0),y=n.map((_,T)=>{var S=ta(ta(ta({key:"dot-".concat(T),r:3},m),p),{},{index:T,cx:_.x,cy:_.y,dataKey:a,value:_.value,payload:_.payload,points:n});return rye(i,S)}),b={clipPath:o?"url(#clipPath-".concat(h?"":"dots-").concat(e,")"):void 0};return w.createElement(ha,Hc({className:"recharts-line-dots",key:"dots"},b),y)}function oT(t){var{clipPathId:e,pathRef:n,points:r,strokeDasharray:i,props:a,showLabels:o}=t,{type:c,layout:u,connectNulls:h,needClip:m}=a,p=O2(a,Gpe),y=ta(ta({},yn(p,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:m?"url(#clipPath-".concat(e,")"):void 0,points:r,type:c,layout:u,connectNulls:h,strokeDasharray:i??a.strokeDasharray});return w.createElement(w.Fragment,null,r?.length>1&&w.createElement(u9,Hc({},y,{pathRef:n})),w.createElement(aye,{points:r,clipPathId:e,props:a}),o&&ul.renderCallByParent(a,r))}function sye(t){try{return t&&t.getTotalLength&&t.getTotalLength()||0}catch{return 0}}function oye(t){var{clipPathId:e,props:n,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:a}=t,{points:o,strokeDasharray:c,isAnimationActive:u,animationBegin:h,animationDuration:m,animationEasing:p,animateNewValues:y,width:b,height:_,onAnimationEnd:T,onAnimationStart:S}=n,E=i.current,N=Y7(n,"recharts-line-"),[C,L]=w.useState(!1),D=w.useCallback(()=>{typeof T=="function"&&T(),L(!1)},[T]),R=w.useCallback(()=>{typeof S=="function"&&S(),L(!0)},[S]),k=sye(r.current),I=a.current;return w.createElement(J7,{begin:h,duration:m,isActive:u,easing:p,onAnimationEnd:D,onAnimationStart:R,key:N},O=>{var U=ea(I,k+I,O),$=Math.min(U,k),V;if(c){var B="".concat(c).split(/[,\s]+/gim).map(q=>parseFloat(q));V=nye($,k,B)}else V=gB(k,$);if(E){var Y=E.length/o.length,ee=O===1?o:o.map((q,G)=>{var K=Math.floor(G*Y);if(E[K]){var oe=E[K];return ta(ta({},q),{},{x:ea(oe.x,q.x,O),y:ea(oe.y,q.y,O)})}return y?ta(ta({},q),{},{x:ea(b*2,q.x,O),y:ea(_/2,q.y,O)}):ta(ta({},q),{},{x:q.x,y:q.y})});return i.current=ee,w.createElement(oT,{props:n,points:ee,clipPathId:e,pathRef:r,showLabels:!C,strokeDasharray:V})}return O>0&&k>0&&(i.current=o,a.current=$),w.createElement(oT,{props:n,points:o,clipPathId:e,pathRef:r,showLabels:!C,strokeDasharray:V})})}function lye(t){var{clipPathId:e,props:n}=t,{points:r,isAnimationActive:i}=n,a=w.useRef(null),o=w.useRef(0),c=w.useRef(null),u=a.current;return i&&r&&r.length&&u!==r?w.createElement(oye,{props:n,clipPathId:e,previousPointsRef:a,longestAnimatedLengthRef:o,pathRef:c}):w.createElement(oT,{props:n,points:r,clipPathId:e,pathRef:c,showLabels:!0})}var cye=(t,e)=>({x:t.x,y:t.y,value:t.value,errorVal:er(t.payload,e)});class uye extends w.Component{render(){var e,{hide:n,dot:r,points:i,className:a,xAxisId:o,yAxisId:c,top:u,left:h,width:m,height:p,id:y,needClip:b}=this.props;if(n)return null;var _=zt("recharts-line",a),T=y,{r:S=3,strokeWidth:E=2}=(e=yn(r,!1))!==null&&e!==void 0?e:{r:3,strokeWidth:2},N=t8(r),C=S*2+E;return w.createElement(w.Fragment,null,w.createElement(ha,{className:_},b&&w.createElement("defs",null,w.createElement(rB,{clipPathId:T,xAxisId:o,yAxisId:c}),!N&&w.createElement("clipPath",{id:"clipPath-dots-".concat(T)},w.createElement("rect",{x:h-C/2,y:u-C/2,width:m+C,height:p+C}))),w.createElement(lye,{props:this.props,clipPathId:T}),w.createElement(nB,{xAxisId:o,yAxisId:c,data:i,dataPointFormatter:cye,errorBarOffset:0},this.props.children)),w.createElement(Kme,{activeDot:this.props.activeDot,points:i,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var pB={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Yf.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0};function fye(t){var e=es(t,pB),{activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:a,animationEasing:o,connectNulls:c,dot:u,hide:h,isAnimationActive:m,label:p,legendType:y,xAxisId:b,yAxisId:_,id:T}=e,S=O2(e,Wpe),{needClip:E}=N2(b,_),N=A2(),C=A0(),L=qr(),D=He(U=>qpe(U,b,_,L,T));if(C!=="horizontal"&&C!=="vertical"||D==null||N==null)return null;var{height:R,width:k,x:I,y:O}=N;return w.createElement(uye,Hc({},S,{id:T,connectNulls:c,dot:u,activeDot:n,animateNewValues:r,animationBegin:i,animationDuration:a,animationEasing:o,isAnimationActive:m,hide:h,label:p,legendType:y,xAxisId:b,yAxisId:_,points:D,layout:C,height:R,width:k,left:I,top:O,needClip:E}))}function hye(t){var{layout:e,xAxis:n,yAxis:r,xAxisTicks:i,yAxisTicks:a,dataKey:o,bandSize:c,displayedData:u}=t;return u.map((h,m)=>{var p=er(h,o);if(e==="horizontal"){var y=bP({axis:n,ticks:i,bandSize:c,entry:h,index:m}),b=an(p)?null:r.scale(p);return{x:y,y:b,value:p,payload:h}}var _=an(p)?null:n.scale(p),T=bP({axis:r,ticks:a,bandSize:c,entry:h,index:m});return _==null||T==null?null:{x:_,y:T,value:p,payload:h}}).filter(Boolean)}function yB(t){var e=es(t,pB),n=qr();return w.createElement(X7,{id:e.id,type:"line"},r=>w.createElement(w.Fragment,null,w.createElement(W7,{legendPayload:Jpe(e)}),w.createElement(G7,{fn:eye,args:e}),w.createElement(Z7,{type:"line",id:r,data:e.data,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,dataKey:e.dataKey,hide:e.hide,isPanorama:n}),w.createElement(fye,Hc({},e,{id:r}))))}yB.displayName="Line";function FR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?FR(Object(n),!0).forEach(function(r){dye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function dye(t,e,n){return(e=mye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mye(t){var e=gye(t,"string");return typeof e=="symbol"?e:e+""}function gye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pye={xAxis:{},yAxis:{},zAxis:{}},vB=vi({name:"cartesianAxis",initialState:pye,reducers:{addXAxis(t,e){t.xAxis[e.payload.id]=e.payload},removeXAxis(t,e){delete t.xAxis[e.payload.id]},addYAxis(t,e){t.yAxis[e.payload.id]=e.payload},removeYAxis(t,e){delete t.yAxis[e.payload.id]},addZAxis(t,e){t.zAxis[e.payload.id]=e.payload},removeZAxis(t,e){delete t.zAxis[e.payload.id]},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload;t.yAxis[n]&&(t.yAxis[n]=zR(zR({},t.yAxis[n]),{},{width:r}))}}}),{addXAxis:yye,removeXAxis:vye,addYAxis:bye,removeYAxis:xye,addZAxis:u1e,removeZAxis:f1e,updateYAxisWidth:wye}=vB.actions,_ye=vB.reducer,Sye=["children"],Tye=["dangerouslySetInnerHTML","ticks"];function bB(t,e,n){return(e=Eye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eye(t){var e=Aye(t,"string");return typeof e=="symbol"?e:e+""}function Aye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lT(){return lT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lT.apply(null,arguments)}function xB(t,e){if(t==null)return{};var n,r,i=Nye(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Nye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Cye(t){var e=Pn(),n=w.useMemo(()=>{var{children:a}=t,o=xB(t,Sye);return o},[t]),r=He(a=>co(a,n.id)),i=n===r;return w.useEffect(()=>(e(yye(n)),()=>{e(vye(n))}),[n,e]),i?t.children:null}var jye=t=>{var{xAxisId:e,className:n}=t,r=He(s9),i=qr(),a="xAxis",o=He(b=>th(b,a,e,i)),c=He(b=>i7(b,a,e,i)),u=He(b=>e7(b,e)),h=He(b=>vfe(b,e));if(u==null||h==null)return null;var{dangerouslySetInnerHTML:m,ticks:p}=t,y=xB(t,Tye);return w.createElement(kl,lT({},y,{scale:o,x:h.x,y:h.y,width:u.width,height:u.height,className:zt("recharts-".concat(a," ").concat(a),n),viewBox:r,ticks:c}))},Dye=t=>{var e,n,r,i,a;return w.createElement(Cye,{interval:(e=t.interval)!==null&&e!==void 0?e:"preserveEnd",id:t.xAxisId,scale:t.scale,type:t.type,padding:t.padding,allowDataOverflow:t.allowDataOverflow,domain:t.domain,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,includeHidden:(n=t.includeHidden)!==null&&n!==void 0?n:!1,reversed:t.reversed,ticks:t.ticks,height:t.height,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(r=t.angle)!==null&&r!==void 0?r:0,minTickGap:(i=t.minTickGap)!==null&&i!==void 0?i:5,tick:(a=t.tick)!==null&&a!==void 0?a:!0,tickFormatter:t.tickFormatter},w.createElement(jye,t))};class K0 extends w.Component{render(){return w.createElement(Dye,this.props)}}bB(K0,"displayName","XAxis");bB(K0,"defaultProps",{allowDataOverflow:ii.allowDataOverflow,allowDecimals:ii.allowDecimals,allowDuplicatedCategory:ii.allowDuplicatedCategory,height:ii.height,hide:!1,mirror:ii.mirror,orientation:ii.orientation,padding:ii.padding,reversed:ii.reversed,scale:ii.scale,tickCount:ii.tickCount,type:ii.type,xAxisId:0});var kye=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:a=0}=t,o=0;if(e){e.forEach(m=>{if(m){var p=m.getBoundingClientRect();p.width>o&&(o=p.width)}});var c=n?n.getBoundingClientRect().width:0,u=i+a,h=o+u+c+(n?r:0);return Math.round(h)}return 0},Oye=["dangerouslySetInnerHTML","ticks"];function wB(t,e,n){return(e=Iye(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Iye(t){var e=Pye(t,"string");return typeof e=="symbol"?e:e+""}function Pye(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cT(){return cT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cT.apply(null,arguments)}function Rye(t,e){if(t==null)return{};var n,r,i=Mye(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Mye(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Lye(t){var e=Pn();return w.useEffect(()=>(e(bye(t)),()=>{e(xye(t))}),[t,e]),null}var Vye=t=>{var e,{yAxisId:n,className:r,width:i,label:a}=t,o=w.useRef(null),c=w.useRef(null),u=He(s9),h=qr(),m=Pn(),p="yAxis",y=He(C=>th(C,p,n,h)),b=He(C=>t7(C,n)),_=He(C=>bfe(C,n)),T=He(C=>i7(C,p,n,h));if(w.useLayoutEffect(()=>{var C;if(!(i!=="auto"||!b||E2(a)||w.isValidElement(a))){var L=o.current,D=L==null||(C=L.tickRefs)===null||C===void 0?void 0:C.current,{tickSize:R,tickMargin:k}=L.props,I=kye({ticks:D,label:c.current,labelGapWithTick:5,tickSize:R,tickMargin:k});Math.round(b.width)!==Math.round(I)&&m(wye({id:n,width:I}))}},[o,o==null||(e=o.current)===null||e===void 0||(e=e.tickRefs)===null||e===void 0?void 0:e.current,b?.width,b,m,a,n,i]),b==null||_==null)return null;var{dangerouslySetInnerHTML:S,ticks:E}=t,N=Rye(t,Oye);return w.createElement(kl,cT({},N,{ref:o,labelRef:c,scale:y,x:_.x,y:_.y,width:b.width,height:b.height,className:zt("recharts-".concat(p," ").concat(p),r),viewBox:u,ticks:T}))},Bye=t=>{var e,n,r,i,a;return w.createElement(w.Fragment,null,w.createElement(Lye,{interval:(e=t.interval)!==null&&e!==void 0?e:"preserveEnd",id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:(n=t.includeHidden)!==null&&n!==void 0?n:!1,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(r=t.angle)!==null&&r!==void 0?r:0,minTickGap:(i=t.minTickGap)!==null&&i!==void 0?i:5,tick:(a=t.tick)!==null&&a!==void 0?a:!0,tickFormatter:t.tickFormatter}),w.createElement(Vye,t))},Uye={allowDataOverflow:ai.allowDataOverflow,allowDecimals:ai.allowDecimals,allowDuplicatedCategory:ai.allowDuplicatedCategory,hide:!1,mirror:ai.mirror,orientation:ai.orientation,padding:ai.padding,reversed:ai.reversed,scale:ai.scale,tickCount:ai.tickCount,type:ai.type,width:ai.width,yAxisId:0};class dm extends w.Component{render(){return w.createElement(Bye,this.props)}}wB(dm,"displayName","YAxis");wB(dm,"defaultProps",Uye);var c_={exports:{}},u_={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HR;function $ye(){if(HR)return u_;HR=1;var t=Pf();function e(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,a=t.useEffect,o=t.useMemo,c=t.useDebugValue;return u_.useSyncExternalStoreWithSelector=function(u,h,m,p,y){var b=i(null);if(b.current===null){var _={hasValue:!1,value:null};b.current=_}else _=b.current;b=o(function(){function S(D){if(!E){if(E=!0,N=D,D=p(D),y!==void 0&&_.hasValue){var R=_.value;if(y(R,D))return C=R}return C=D}if(R=C,n(N,D))return R;var k=p(D);return y!==void 0&&y(R,k)?(N=D,R):(N=D,C=k)}var E=!1,N,C,L=m===void 0?null:m;return[function(){return S(h())},L===null?void 0:function(){return S(L())}]},[h,m,p,y]);var T=r(u,b[0],b[1]);return a(function(){_.hasValue=!0,_.value=T},[T]),c(T),T},u_}var qR;function Fye(){return qR||(qR=1,c_.exports=$ye()),c_.exports}Fye();function zye(t){t()}function Hye(){let t=null,e=null;return{clear(){t=null,e=null},notify(){zye(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var KR={notify(){},get:()=>[]};function qye(t,e){let n,r=KR,i=0,a=!1;function o(T){m();const S=r.subscribe(T);let E=!1;return()=>{E||(E=!0,S(),p())}}function c(){r.notify()}function u(){_.onStateChange&&_.onStateChange()}function h(){return a}function m(){i++,n||(n=t.subscribe(u),r=Hye())}function p(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=KR)}function y(){a||(a=!0,m())}function b(){a&&(a=!1,p())}const _={addNestedSub:o,notifyNestedSubs:c,handleChangeWrapper:u,isSubscribed:h,trySubscribe:y,tryUnsubscribe:b,getListeners:()=>r};return _}var Kye=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Gye=Kye(),Wye=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Yye=Wye(),Xye=()=>Gye||Yye?w.useLayoutEffect:w.useEffect,Qye=Xye(),Zye=Symbol.for("react-redux-context"),Jye=typeof globalThis<"u"?globalThis:{};function eve(){if(!w.createContext)return{};const t=Jye[Zye]??=new Map;let e=t.get(w.createContext);return e||(e=w.createContext(null),t.set(w.createContext,e)),e}var tve=eve();function nve(t){const{children:e,context:n,serverState:r,store:i}=t,a=w.useMemo(()=>{const u=qye(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),o=w.useMemo(()=>i.getState(),[i]);Qye(()=>{const{subscription:u}=a;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[a,o]);const c=n||tve;return w.createElement(c.Provider,{value:a},e)}var rve=nve,ive=(t,e)=>e,I2=de([ive,It,SV,Hn,b7,uo,The,tr],jhe),P2=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},_B=$i("mouseClick"),SB=Rm();SB.startListening({actionCreator:_B,effect:(t,e)=>{var n=t.payload,r=I2(e.getState(),P2(n));r?.activeIndex!=null&&e.dispatch(Ofe({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var uT=$i("mouseMove"),TB=Rm();TB.startListening({actionCreator:uT,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=m2(r,r.tooltip.settings.shared),a=I2(r,P2(n));i==="axis"&&(a?.activeIndex!=null?e.dispatch(h7({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate})):e.dispatch(f7()))}});function ave(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":e}var GR={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},EB=vi({name:"rootProps",initialState:GR,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:GR.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),sve=EB.reducer,{updateOptions:ove}=EB.actions,AB=vi({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:h1e}=AB.actions,lve=AB.reducer,NB=$i("keyDown"),CB=$i("focus"),R2=Rm();R2.startListening({actionCreator:NB,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,a=t.payload;if(!(a!=="ArrowRight"&&a!=="ArrowLeft"&&a!=="Enter")){var o=Number(g2(i,rh(n))),c=uo(n);if(a==="Enter"){var u=_v(n,"axis","hover",String(i.index));e.dispatch(tT({active:!i.active,activeIndex:i.index,activeDataKey:i.dataKey,activeCoordinate:u}));return}var h=Sfe(n),m=h==="left-to-right"?1:-1,p=a==="ArrowRight"?1:-1,y=o+p*m;if(!(c==null||y>=c.length||y<0)){var b=_v(n,"axis","hover",String(y));e.dispatch(tT({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:b}))}}}}});R2.startListening({actionCreator:CB,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var a="0",o=_v(n,"axis","hover",String(a));e.dispatch(tT({activeDataKey:void 0,active:!0,activeIndex:a,activeCoordinate:o}))}}}});var Ri=$i("externalEvent"),jB=Rm();jB.startListening({actionCreator:Ri,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),r={activeCoordinate:mhe(n),activeDataKey:S7(n),activeIndex:zc(n),activeLabel:_7(n),activeTooltipIndex:zc(n),isTooltipActive:ghe(n)};t.payload.handler(r,t.payload.reactEvent)}}});var cve=de([nh],t=>t.tooltipItemPayloads),uve=de([cve,qm,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,r)=>{var i=t.find(c=>c.settings.dataKey===r);if(i!=null){var{positions:a}=i;if(a!=null){var o=e(a,n);return o}}}),DB=$i("touchMove"),kB=Rm();kB.startListening({actionCreator:DB,effect:(t,e)=>{var n=t.payload,r=e.getState(),i=m2(r,r.tooltip.settings.shared);if(i==="axis"){var a=I2(r,P2({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));a?.activeIndex!=null&&e.dispatch(h7({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if(i==="item"){var o,c=n.touches[0],u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var h=u.getAttribute(Wae),m=(o=u.getAttribute(Yae))!==null&&o!==void 0?o:void 0,p=uve(e.getState(),h,m);e.dispatch(u7({activeDataKey:m,activeIndex:h,activeCoordinate:p}))}}});var fve=I8({brush:tpe,cartesianAxis:_ye,chartData:qhe,errorBars:ige,graphicalItems:Mme,layout:yae,legend:cse,options:Uhe,polarAxis:ume,polarOptions:lve,referenceElements:lpe,rootProps:sve,tooltip:Ife}),hve=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Fie({reducer:fve,preloadedState:e,middleware:r=>r({serializableCheck:!1}).concat([SB.middleware,TB.middleware,R2.middleware,jB.middleware,kB.middleware]),devTools:{serialize:{replacer:ave},name:"recharts-".concat(n)}})};function dve(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=qr(),a=w.useRef(null);if(i)return n;a.current==null&&(a.current=hve(e,r));var o=gA;return w.createElement(rve,{context:o,store:a.current},n)}function mve(t){var{layout:e,width:n,height:r,margin:i}=t,a=Pn(),o=qr();return w.useEffect(()=>{o||(a(mae(e)),a(gae({width:n,height:r})),a(dae(i)))},[a,o,e,n,r,i]),null}function gve(t){var e=Pn();return w.useEffect(()=>{e(ove(t))},[e,t]),null}var pve=["children"];function yve(t,e){if(t==null)return{};var n,r,i=vve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function vve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function jv(){return jv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},jv.apply(null,arguments)}var bve={width:"100%",height:"100%"},xve=w.forwardRef((t,e)=>{var n=TA(),r=EA(),i=c9();if(!av(n)||!av(r))return null;var{children:a,otherAttributes:o,title:c,desc:u}=t,h,m;return typeof o.tabIndex=="number"?h=o.tabIndex:h=i?0:void 0,typeof o.role=="string"?m=o.role:m=i?"application":void 0,w.createElement(rA,jv({},o,{title:c,desc:u,role:m,tabIndex:h,width:n,height:r,style:bve,ref:e}),a)}),wve=t=>{var{children:e}=t,n=He(E0);if(!n)return null;var{width:r,height:i,y:a,x:o}=n;return w.createElement(rA,{width:r,height:i,x:o,y:a},e)},WR=w.forwardRef((t,e)=>{var{children:n}=t,r=yve(t,pve),i=qr();return i?w.createElement(wve,null,n):w.createElement(xve,jv({ref:e},r),n)});function _ve(){var t=Pn(),[e,n]=w.useState(null),r=He(Gae);return w.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),a=i.width/e.offsetWidth;pi(a)&&a!==r&&t(pae(a))}},[e,t,r]),n}function YR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sve(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YR(Object(n),!0).forEach(function(r){Tve(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tve(t,e,n){return(e=Eve(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eve(t){var e=Ave(t,"string");return typeof e=="symbol"?e:e+""}function Ave(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Nve=w.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:a,onContextMenu:o,onDoubleClick:c,onMouseDown:u,onMouseEnter:h,onMouseLeave:m,onMouseMove:p,onMouseUp:y,onTouchEnd:b,onTouchMove:_,onTouchStart:T,style:S,width:E}=t,N=Pn(),[C,L]=w.useState(null),[D,R]=w.useState(null);Whe();var k=_ve(),I=w.useCallback(te=>{k(te),typeof e=="function"&&e(te),L(te),R(te)},[k,e,L,R]),O=w.useCallback(te=>{N(_B(te)),N(Ri({handler:a,reactEvent:te}))},[N,a]),U=w.useCallback(te=>{N(uT(te)),N(Ri({handler:h,reactEvent:te}))},[N,h]),$=w.useCallback(te=>{N(f7()),N(Ri({handler:m,reactEvent:te}))},[N,m]),V=w.useCallback(te=>{N(uT(te)),N(Ri({handler:p,reactEvent:te}))},[N,p]),B=w.useCallback(()=>{N(CB())},[N]),Y=w.useCallback(te=>{N(NB(te.key))},[N]),ee=w.useCallback(te=>{N(Ri({handler:o,reactEvent:te}))},[N,o]),q=w.useCallback(te=>{N(Ri({handler:c,reactEvent:te}))},[N,c]),G=w.useCallback(te=>{N(Ri({handler:u,reactEvent:te}))},[N,u]),K=w.useCallback(te=>{N(Ri({handler:y,reactEvent:te}))},[N,y]),oe=w.useCallback(te=>{N(Ri({handler:T,reactEvent:te}))},[N,T]),H=w.useCallback(te=>{N(DB(te)),N(Ri({handler:_,reactEvent:te}))},[N,_]),Z=w.useCallback(te=>{N(Ri({handler:b,reactEvent:te}))},[N,b]);return w.createElement(j7.Provider,{value:C},w.createElement(n8.Provider,{value:D},w.createElement("div",{className:zt("recharts-wrapper",r),style:Sve({position:"relative",cursor:"default",width:E,height:i},S),onClick:O,onContextMenu:ee,onDoubleClick:q,onFocus:B,onKeyDown:Y,onMouseDown:G,onMouseEnter:U,onMouseLeave:$,onMouseMove:V,onMouseUp:K,onTouchEnd:Z,onTouchMove:H,onTouchStart:oe,ref:I},n)))}),Cve=["children","className","width","height","style","compact","title","desc"];function jve(t,e){if(t==null)return{};var n,r,i=Dve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Dve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var kve=w.forwardRef((t,e)=>{var{children:n,className:r,width:i,height:a,style:o,compact:c,title:u,desc:h}=t,m=jve(t,Cve),p=Yc(m);return c?w.createElement(WR,{otherAttributes:p,title:u,desc:h},n):w.createElement(Nve,{className:r,style:o,width:i,height:a,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},w.createElement(WR,{otherAttributes:p,title:u,desc:h,ref:e},w.createElement(upe,null,n)))}),Ove=["width","height"];function fT(){return fT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fT.apply(null,arguments)}function Ive(t,e){if(t==null)return{};var n,r,i=Pve(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Pve(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Rve={top:5,right:5,bottom:5,left:5},Mve={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Rve,reverseStackOrder:!1,syncMethod:"index"},OB=w.forwardRef(function(e,n){var r,i=es(e.categoricalChartProps,Mve),{width:a,height:o}=i,c=Ive(i,Ove);if(!av(a)||!av(o))return null;var{chartName:u,defaultTooltipEventType:h,validateTooltipEventTypes:m,tooltipPayloadSearcher:p,categoricalChartProps:y}=e,b={chartName:u,defaultTooltipEventType:h,validateTooltipEventTypes:m,tooltipPayloadSearcher:p,eventEmitter:void 0};return w.createElement(dve,{preloadedState:{options:b},reduxStoreName:(r=y.id)!==null&&r!==void 0?r:u},w.createElement(epe,{chartData:y.data}),w.createElement(mve,{width:a,height:o,layout:i.layout,margin:i.margin}),w.createElement(gve,{accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className}),w.createElement(kve,fT({},c,{width:a,height:o,ref:n})))}),Lve=["axis","item"],Vve=w.forwardRef((t,e)=>w.createElement(OB,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Lve,tooltipPayloadSearcher:D7,categoricalChartProps:t,ref:e})),Bve=["axis"],Uve=w.forwardRef((t,e)=>w.createElement(OB,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Bve,tooltipPayloadSearcher:D7,categoricalChartProps:t,ref:e}));const $ve={users:"#3b82f6",classes:"#10b981",cards:"#f59e0b"},Ho=t=>{if(!t)return null;try{if(typeof t?.toDate=="function")return t.toDate();if(typeof t=="object"&&typeof t.seconds=="number")return new Date(t.seconds*1e3);if(t instanceof Date)return t;if(typeof t=="number")return new Date(t>1e12?t:t*1e3);if(typeof t=="string"){const e=new Date(t);if(!isNaN(e.getTime()))return e;const n=t.split("/");if(n.length===3){const r=Number(n[0]),i=Number(n[1]),a=Number(n[2]);if(a)return new Date(a,(i||1)-1,r||1)}}}catch{}return null},Fve=t=>Ho(t?.createdAt)||Ho(t?.created_at)||Ho(t?.ngayTao)||Ho(t?.NgayTao)||Ho(t?.NgayBatDau)||Ho(t?.createdDate)||Ho(t?.timestamp)||Ho(t?.time)||null,IB=t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,zve=(t=6)=>{const e=new Date,n=[];for(let r=t-1;r>=0;r-=1){const i=new Date(e.getFullYear(),e.getMonth()-r,1);n.push(IB(i))}return n};function Hve({users:t=[],classes:e=[],cards:n=[],revenue:r={byMonth:{}}}){const i=w.useMemo(()=>[{name:"Người dùng",value:Array.isArray(t)?t.length:Number(t||0),key:"users"},{name:"Lớp học",value:Array.isArray(e)?e.length:Number(e||0),key:"classes"},{name:"Bộ thẻ",value:Array.isArray(n)?n.length:Number(n||0),key:"cards"}],[t,e,n]),a=w.useMemo(()=>{const o=zve(6),c=p=>{const y=Object.fromEntries(o.map(b=>[b,0]));return(Array.isArray(p)?p:[]).forEach(b=>{const _=Fve(b);if(!_||isNaN(_.getTime()))return;const T=IB(_);T in y&&(y[T]+=1)}),y},u=c(t),h=c(e),m=c(n);return o.map(p=>({month:p,users:u[p],classes:h[p],cards:m[p]}))},[t,e,n]);return w.useMemo(()=>{if(!Array.isArray(a)||a.length===0)return[];const o=0,c={users:a[o]?.users||0,classes:a[o]?.classes||0,cards:a[o]?.cards||0},u=(h,m)=>!m||m===0?0:(h-m)/m*100;return a.map(h=>({month:h.month,usersPct:u(h.users,c.users),classesPct:u(h.classes,c.classes),cardsPct:u(h.cards,c.cards),users:h.users,classes:h.classes,cards:h.cards}))},[a]),d.jsxs("div",{style:{background:"#fff",borderRadius:10,padding:16,boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:[d.jsx("h3",{style:{margin:0,marginBottom:12},children:"Thống kê tổng quan"}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:16,marginBottom:16},children:d.jsx("div",{style:{width:"100%",height:240},children:d.jsx(R7,{width:"100%",height:"100%",children:d.jsxs(Vve,{data:i,margin:{top:8,right:16,left:0,bottom:8},children:[d.jsx(k2,{strokeDasharray:"3 3"}),d.jsx(K0,{dataKey:"name"}),d.jsx(dm,{allowDecimals:!1}),d.jsx(P7,{formatter:o=>[o,"Số lượng"]}),d.jsx(Mm,{}),d.jsx(zd,{dataKey:"value",name:"Số lượng",radius:[6,6,0,0],children:i.map((o,c)=>d.jsx(S2,{fill:$ve[o.key]},`cell-${c}`))})]})})})})]})}const oc={users:"#2563eb",classes:"#059669",cards:"#f59e0b",revenue:"#7c3aed"},PB=t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`,qve=(t=6)=>{const e=new Date,n=[];for(let r=t-1;r>=0;r-=1){const i=new Date(e.getFullYear(),e.getMonth()-r,1);n.push(PB(i))}return n},qo=t=>{if(!t)return null;try{if(typeof t?.toDate=="function")return t.toDate();if(typeof t=="object"&&typeof t.seconds=="number")return new Date(t.seconds*1e3);if(t instanceof Date)return t;if(typeof t=="number")return new Date(t>1e12?t:t*1e3);const e=new Date(t);if(!isNaN(e.getTime()))return e;const n=String(t).split("/");if(n.length===3){const r=Number(n[0]),i=Number(n[1]),a=Number(n[2]);if(a)return new Date(a,(i||1)-1,r||1)}}catch{}return null},Kve=t=>qo(t?.createdAt)||qo(t?.created_at)||qo(t?.ngayTao)||qo(t?.NgayTao)||qo(t?.NgayBatDau)||qo(t?.createdDate)||qo(t?.timestamp)||qo(t?.time)||null;function Gve({users:t=[],classes:e=[],cards:n=[],revenue:r={byMonth:{},total:0}}){const[i,a]=w.useState(8),[o,c]=w.useState(!1),u=w.useMemo(()=>qve(i),[i]),h=w.useMemo(()=>{const b=Object.fromEntries(u.map(T=>[T,0])),_=T=>{const S={...b};return(Array.isArray(T)?T:[]).forEach(E=>{const N=Kve(E);if(!N||isNaN(N.getTime()))return;const C=PB(N);C in S&&(S[C]+=1)}),S};return{users:_(t),classes:_(e),cards:_(n)}},[t,e,n,u]),m=w.useMemo(()=>{const b=r?.byMonth||{},_=Object.fromEntries(u.map(T=>[T,0]));return u.forEach(T=>{_[T]=Number(b[T]||0)}),_},[r,u]),p=w.useMemo(()=>{const b=u.map(_=>({month:_,users:h.users[_],classes:h.classes[_],cards:h.cards[_],revenue:m[_]}));return o?b.map(_=>{const T=Math.max(1,_.users+_.classes+_.cards);return{..._,users:_.users/T*100,classes:_.classes/T*100,cards:_.cards/T*100}}):b},[u,h,m,o]),y=w.useMemo(()=>({users:(Array.isArray(t)?t.length:Number(t||0))||0,classes:(Array.isArray(e)?e.length:Number(e||0))||0,cards:(Array.isArray(n)?n.length:Number(n||0))||0,revenue:Number(r?.total||0)}),[t,e,n,r]);return w.useMemo(()=>[{name:"Người dùng",value:y.users,color:oc.users},{name:"Lớp học",value:y.classes,color:oc.classes},{name:"Bộ thẻ",value:y.cards,color:oc.cards}],[y]),d.jsxs("div",{style:{marginTop:16},children:[d.jsxs("div",{style:{display:"flex",gap:12,alignItems:"center",marginBottom:12},children:[d.jsx("div",{style:{fontWeight:700,fontSize:16},children:"Phân tích nâng cao"}),d.jsx("div",{style:{marginLeft:"auto",display:"flex",gap:12,alignItems:"center"},children:d.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:6},children:[d.jsx("span",{children:"Khoảng thời gian:"}),d.jsxs("select",{value:i,onChange:b=>a(Number(b.target.value)),style:{padding:"6px 10px",borderRadius:6},children:[d.jsx("option",{value:6,children:"6 tháng"}),d.jsx("option",{value:12,children:"12 tháng"})]})]})})]}),d.jsxs("div",{style:{background:"#fff",borderRadius:12,padding:16,boxShadow:"0 2px 8px rgba(0,0,0,0.08)",marginBottom:16},children:[d.jsx("div",{style:{fontWeight:600,marginBottom:8},children:"Tăng trưởng theo tháng"}),d.jsx("div",{style:{width:"100%",height:320},children:d.jsx(R7,{width:"100%",height:"100%",children:d.jsxs(Uve,{data:p,margin:{top:8,right:16,left:0,bottom:8},children:[d.jsx(k2,{strokeDasharray:"3 3"}),d.jsx(K0,{dataKey:"month"}),d.jsx(dm,{yAxisId:"left",allowDecimals:!1,tickFormatter:b=>o?`${Math.round(b)}%`:b}),d.jsx(dm,{yAxisId:"right",orientation:"right",tickFormatter:b=>`${Math.round(b/1e3)}k`}),d.jsx(P7,{formatter:(b,_)=>{const T=_==="users"?"Người dùng":_==="classes"?"Lớp học":_==="cards"?"Bộ thẻ":"Doanh thu";return _==="revenue"?[`${Number(b).toLocaleString("vi-VN")} đ`,T]:[o?`${Number(b).toFixed(0)}%`:b,T]}}),d.jsx(Mm,{}),d.jsx(zd,{yAxisId:"left",dataKey:"users",name:"Người dùng",fill:oc.users,radius:[6,6,0,0]}),d.jsx(zd,{yAxisId:"left",dataKey:"classes",name:"Lớp học",fill:oc.classes,radius:[6,6,0,0]}),d.jsx(zd,{yAxisId:"left",dataKey:"cards",name:"Bộ thẻ",fill:oc.cards,radius:[6,6,0,0]}),d.jsx(yB,{yAxisId:"right",type:"monotone",dataKey:"revenue",name:"Doanh thu",stroke:oc.revenue,strokeWidth:3,dot:{r:3}})]})})})]})]})}const Wve=t=>{if(!t||typeof t!="string")return null;const[e,n,r]=t.split("/").map(Number);return r?new Date(r,(n||1)-1,e||1):null},XR=t=>`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`;function RB(){const[t,e]=w.useState([]),[n,r]=w.useState([]),[i,a]=w.useState([]),[o,c]=w.useState([]),[u,h]=w.useState({total:0,monthRevenue:0,byMonth:{}}),m=async()=>{try{const y=(await ct(Oe(se,"nguoiDung"))).docs.map(B=>({id:B.id,...B.data()})),_=(await ct(Oe(se,"khoaHoc"))).docs.map(B=>({id:B.id,...B.data()})),S=(await ct(Oe(se,"boThe"))).docs.map(B=>({id:B.id,...B.data()})),N=(await ct(Oe(se,"donHangTraPhi"))).docs.map(B=>({id:B.id,...B.data()}));console.log("Sample đơn hàng đầu tiên:",N[0]);const C=y.length,L=_.length,D=S.length;console.log(`
=== TÍNH DOANH THU ===`);const R=[...new Set(N.map(B=>B.trangThai))];console.log("Các trạng thái đơn hàng có trong DB:",R);const k=N.filter(B=>{const Y=B.trangThai?.toLowerCase?.();return Y==="paid"||Y==="thành công"||Y==="hoàn thành"});console.log("Số đơn hàng đã thanh toán:",k.length),k.length>0&&console.log("Sample đơn hàng đã thanh toán:",k[0]);let I=0;const O={},U=[];k.forEach((B,Y)=>{console.log(`
--- Xử lý đơn hàng ${Y+1} (ID: ${B.id}) ---`);let ee=null,q="";B.paidAt?(ee=new Date(B.paidAt),q="paidAt",console.log("Sử dụng paidAt:",B.paidAt)):B.createdAt?(ee=new Date(B.createdAt),q="createdAt",console.log("Sử dụng createdAt:",B.createdAt)):B.NgayBatDau&&(ee=Wve(B.NgayBatDau),q="NgayBatDau",console.log("Sử dụng NgayBatDau:",B.NgayBatDau,"->",ee)),(!ee||isNaN(ee.getTime()))&&(ee=new Date,q="current",console.log("⚠️ Không có ngày hợp lệ, sử dụng ngày hiện tại"));const G=XR(ee);console.log("Key tháng-năm:",G);let K=0;B.soTienThanhToanThucTe!==null&&B.soTienThanhToanThucTe!==void 0?(K=Number(B.soTienThanhToanThucTe),console.log("Sử dụng soTienThanhToanThucTe:",B.soTienThanhToanThucTe)):B.soTienThanhToan!==null&&B.soTienThanhToan!==void 0&&(K=Number(B.soTienThanhToan),console.log("Sử dụng soTienThanhToan:",B.soTienThanhToan)),console.log("Số tiền final:",K),K>0?(I+=K,O[G]=(O[G]||0)+K,console.log("✅ Đã cộng vào tổng. Tổng hiện tại:",I.toLocaleString("vi-VN")),U.push({orderId:B.id,date:ee.toLocaleDateString("vi-VN"),monthKey:G,amount:K,dateSource:q})):console.log("⚠️ Số tiền = 0 hoặc không hợp lệ, bỏ qua")});const $=XR(new Date),V=O[$]||0;console.log(`
=== KẾT QUẢ CUỐI CÙNG ===`),console.log("Tháng hiện tại:",$),console.log("Tổng doanh thu:",I.toLocaleString("vi-VN"),"đ"),console.log("Doanh thu tháng này:",V.toLocaleString("vi-VN"),"đ"),console.log("Doanh thu theo tháng:",Object.entries(O).map(([B,Y])=>`${B}: ${Y.toLocaleString("vi-VN")}đ`)),console.log("Debug info:",U),e([{id:1,name:"Người dùng",value:C,title:"Tổng số người dùng trong hệ thống"},{id:2,name:"Lớp học",value:L,title:"Tổng số lớp học đã tạo"},{id:3,name:"Bộ thẻ",value:D,title:"Tổng số bộ thẻ hiện có"},{id:4,name:"Doanh thu (tháng này)",value:V.toLocaleString("vi-VN")+" đ",title:"Tổng doanh thu tháng hiện tại (đơn đã thanh toán)"}]),r(y),a(_),c(S),h({total:I,monthRevenue:V,byMonth:O})}catch(p){console.error("Lỗi khi load dữ liệu:",p)}};return w.useEffect(()=>{m()},[]),d.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 20px"},children:[d.jsx("div",{style:{width:"100%",height:"100px",display:"flex",alignItems:"center",justifyContent:"center"},children:d.jsx("h1",{style:{margin:0,fontSize:"2rem",fontWeight:"bold",color:"#1f2937"},children:"THỐNG KÊ"})}),d.jsx("div",{style:{marginBottom:"24px"},children:d.jsx(fne,{users:n,classes:i,cards:o,userStats:t,revenue:u})}),d.jsx("div",{style:{marginBottom:"24px"},children:d.jsx(mne,{users:n,classes:i,cards:o,revenue:u})}),d.jsx("div",{style:{marginBottom:"24px"},children:d.jsx(pne,{users:n,classes:i,cards:o})}),d.jsx("div",{style:{marginBottom:"24px"},children:d.jsx(Hve,{users:n,classes:i,cards:o,revenue:u})}),d.jsx("div",{style:{marginBottom:"24px"},children:d.jsx(Gve,{users:n,classes:i,cards:o,revenue:u})})]})}function Yve(){return d.jsx("div",{children:d.jsx(b5,{children:d.jsx(RB,{})})})}function Xve(){return d.jsx("div",{children:d.jsx(RB,{})})}const Qve="modulepreload",Zve=function(t){return"/"+t},QR={},Jve=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let h=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};var o=h;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");i=h(n.map(m=>{if(m=Zve(m),m in QR)return;QR[m]=!0;const p=m.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${y}`))return;const b=document.createElement("link");if(b.rel=p?"stylesheet":Qve,p||(b.as="script"),b.crossOrigin="",b.href=m,u&&b.setAttribute("nonce",u),document.head.appendChild(b),p)return new Promise((_,T)=>{b.addEventListener("load",_),b.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return i.then(c=>{for(const u of c||[])u.status==="rejected"&&a(u.reason);return e().catch(a)})};function e0e(){const t=wt(),[e,n]=w.useState(void 0),[r,i]=w.useState([]),a=w.useMemo(()=>{try{return JSON.parse(sessionStorage.getItem("session")||"null")}catch{return null}},[]);w.useEffect(()=>{const c=lt.currentUser?.uid||a?.idNguoiDung||null;c&&n(c);const u=ga(lt,h=>n(h?.uid||null));return()=>u()},[a]),w.useEffect(()=>{if(e===void 0)return;let c=()=>{},u=!1;return e?(()=>{const p=Ge(Oe(se,"tienDoHoc"),Qe("idNguoiDung","==",String(e)),Iy("ngayHocGanDay","desc"),vn(6));c=nt(p,async y=>{try{const _=y.docs.map(C=>C.data()).map(C=>String(C.idBoThe)).filter(Boolean);if(_.length===0){u||i([]);return}const T=[];for(let C=0;C<_.length;C+=10)T.push(_.slice(C,C+10));const S=await Promise.all(T.map(C=>ct(Ge(Oe(se,"boThe"),Qe(Ys(),"in",C))))),E=new Map;S.forEach(C=>C.forEach(L=>E.set(L.id,L.data())));const N=_.map(C=>E.get(C)).filter(Boolean).map(C=>({...C,soTu:typeof C.soTu=="number"?C.soTu:Array.isArray(C.danhSachThe)?C.danhSachThe.length:0,luotHoc:Number(C.luotHoc||0)}));u||i(N)}catch(b){console.error("Lỗi nạp học gần đây:",b),u||i([])}},async y=>{if(y?.code==="failed-precondition"&&/index/i.test(y?.message||""))try{const T=(await ct(Ge(Oe(se,"tienDoHoc"),Qe("idNguoiDung","==",String(e))))).docs.map(L=>L.data()).sort((L,D)=>(D?.ngayHocGanDay?.toMillis?.()||0)-(L?.ngayHocGanDay?.toMillis?.()||0)).slice(0,6).map(L=>String(L.idBoThe));if(T.length===0){u||i([]);return}const S=[];for(let L=0;L<T.length;L+=10)S.push(T.slice(L,L+10));const E=await Promise.all(S.map(L=>ct(Ge(Oe(se,"boThe"),Qe(Ys(),"in",L))))),N=new Map;E.forEach(L=>L.forEach(D=>N.set(D.id,D.data())));const C=T.map(L=>N.get(L)).filter(Boolean).map(L=>({...L,soTu:typeof L.soTu=="number"?L.soTu:Array.isArray(L.danhSachThe)?L.danhSachThe.length:0,luotHoc:Number(L.luotHoc||0)}));u||i(C)}catch(b){console.error("Fallback học gần đây lỗi:",b),u||i([])}else u||i([])})})():(()=>{const p=Ge(Oe(se,"boThe"),Iy("idBoThe","desc"),vn(6));c=nt(p,y=>{const b=y.docs.map(_=>{const T=_.data();return{...T,soTu:typeof T.soTu=="number"?T.soTu:Array.isArray(T.danhSachThe)?T.danhSachThe.length:0,luotHoc:Number(T.luotHoc||0)}});u||i(b)},()=>!u&&i([]))})(),()=>{u=!0,c&&c()}},[e]);const o=async c=>{if(!c)return;const u=String(c);try{if(e&&(await ht(Ae(se,"boThe",u))).exists()){const m=`${e}_${u}`;await hi(Ae(se,"tienDoHoc",m),{idTDH:m,idBoThe:Number.isFinite(Number(u))?Number(u):u,idNguoiDung:String(e),ngayHocGanDay:jt()},{merge:!0}),await yt(Ae(se,"boThe",u),{luotHoc:i0(1),ngayChinhSua:jt()}),window.dispatchEvent(new Event("tienDoHocUpdated"))}}catch(h){console.warn("Tracking học gần đây lỗi (bỏ qua):",h)}t(`/flashcard/${u}`)};return d.jsxs("section",{className:"block",children:[d.jsx("div",{className:"block-head",children:d.jsx("h2",{className:"block-title",children:"Học gần đây"})}),r.length===0?d.jsx("div",{className:"empty",children:"Chưa có bộ thẻ nào. Hãy bắt đầu học!"}):d.jsx("ul",{className:"recent-list",children:r.map(c=>d.jsxs("li",{className:"recent-item",onClick:()=>o(c.idBoThe),children:[d.jsx(mt,{icon:bee,className:"icon-book"}),d.jsx("span",{className:"recent-name",children:c.tenBoThe||`Bộ thẻ #${c.idBoThe}`}),d.jsxs("span",{className:"recent-count",children:[(typeof c.soTu=="number"?c.soTu:Array.isArray(c.danhSachThe)?c.danhSachThe.length:0)||0," ","từ"]})]},c.idBoThe))})]})}function M2({item:t={},author:e,dsNguoiDung:n,onClick:r,onLearn:i,inCourse:a=!1,onRemoveFromCourse:o}){const c=wt(),u=e||(Array.isArray(n)?n.find(E=>String(E.idNguoiDung)===String(t?.idNguoiDung)):null),h=u?.tenNguoiDung||u?.gmail||u?.email||"Ẩn danh",m=u?.anhDaiDien||"",p=typeof t?.soTu=="number"?t.soTu:Array.isArray(t?.danhSachThe)?t.danhSachThe.length:0,y=Number(t?.luotHoc||0),b=()=>{t?.idBoThe&&c(`/bothe/${t.idBoThe}`)},_=()=>{r?r(t?.idBoThe):b()},T=E=>{E.stopPropagation(),i?i(t?.idBoThe):b()},S=E=>{E.stopPropagation(),t?.idBoThe&&typeof o=="function"&&o(t.idBoThe)};return d.jsxs("div",{className:"bo-card",onClick:_,children:[d.jsx("div",{className:"bo-title",children:t?.tenBoThe||"Không tên"}),d.jsxs("div",{className:"bo-meta",children:[p," thẻ • ",y," lượt học"]}),d.jsxs("div",{className:"bo-author",onClick:E=>E.stopPropagation(),children:[d.jsx("div",{className:"bo-avatar",style:m?{backgroundImage:`url(${m})`}:{}}),d.jsx("span",{className:"bo-name",children:h})]}),a&&typeof o=="function"?d.jsxs("div",{className:"bo-actions",onClick:E=>E.stopPropagation(),children:[d.jsx("button",{className:"bo-btn",onClick:T,title:"Học bộ thẻ này",children:"Học"}),d.jsx("button",{className:"bo-btn bo-btn-danger",onClick:S,title:"Gỡ bộ thẻ khỏi khóa học",children:"Gỡ khỏi khóa học"})]}):d.jsx("button",{className:"bo-btn",onClick:T,title:"Học bộ thẻ này",children:"Học"})]})}function t0e(){const[t,e]=w.useState(null),[n,r]=w.useState([]),[i,a]=w.useState(!0),[o,c]=w.useState({}),u=w.useRef({});w.useEffect(()=>{const m=ga(lt,p=>e(p?.uid||null));return()=>m()},[]),w.useEffect(()=>{let m=!1;const p=y=>y.docs.map(b=>{const _=b.data()||{};return{..._,idBoThe:_.idBoThe??b.id,soTu:typeof _.soTu=="number"?_.soTu:Array.isArray(_.danhSachThe)?_.danhSachThe.length:0,luotHoc:Number(_.luotHoc||0)}});return(async()=>{try{a(!0);const y=Ge(Oe(se,"boThe"),Qe("cheDo","==","cong_khai"),vn(120)),b=await ct(y);if(m)return;const _=p(b).sort((T,S)=>S.luotHoc-T.luotHoc).slice(0,12);r(_)}catch(y){console.error("Fetch popular failed:",y),m||r([])}finally{m||a(!1)}})(),()=>{m=!0}},[]),w.useEffect(()=>{const m=n.map(_=>_?.idNguoiDung!=null?String(_.idNguoiDung):null).filter(Boolean),y=Array.from(new Set(m)).filter(_=>!u.current[_]);if(y.length===0)return;const b=[];for(let _=0;_<y.length;_+=10)b.push(y.slice(_,_+10));(async()=>{try{const _=await Promise.all(b.map(S=>ct(Ge(Oe(se,"nguoiDung"),Qe(Ys(),"in",S))))),T={...u.current};_.forEach(S=>S.forEach(E=>T[E.id]=E.data())),u.current=T,c(T)}catch(_){console.error("Fetch authors failed:",_)}})()},[n]);const h=async m=>{if(!m)return;const p=String(m);try{if(t&&(await ht(Ae(se,"boThe",p))).exists()){const b=`${t}_${p}`;await hi(Ae(se,"tienDoHoc",b),{idTDH:b,idBoThe:Number.isFinite(Number(p))?Number(p):p,idNguoiDung:String(t),ngayHocGanDay:jt()},{merge:!0}),await yt(Ae(se,"boThe",p),{luotHoc:i0(1),ngayChinhSua:jt()}),window.dispatchEvent(new Event("tienDoHocUpdated"))}}catch(y){console.warn("Tracking popular lỗi (bỏ qua):",y)}window.location.href=`/flashcard/${p}`};return d.jsxs("section",{className:"block",children:[d.jsx("div",{className:"block-head",children:d.jsx("h2",{className:"block-title",children:"Bộ thẻ phổ biến"})}),i?d.jsx("div",{className:"empty",children:"Đang tải…"}):n.length===0?d.jsx("div",{className:"empty",children:"Chưa có dữ liệu để hiển thị."}):d.jsx("div",{className:"mini-grid",children:n.map(m=>d.jsx(M2,{item:m,author:o[String(m.idNguoiDung)],onClick:h,onLearn:h},m.idBoThe))})]})}function MB({item:t={},author:e,dsNguoiDung:n,onClick:r,onEnter:i,isJoined:a=!1}){const o=wt(),c=t?.idKhoaHoc,u=t?.tenKhoaHoc||"Khóa học",h=e||(Array.isArray(n)?n.find(k=>String(k.idNguoiDung)===String(t?.idNguoiDung)):null),m=h?.tenNguoiDung||h?.gmail||h?.email||"Ẩn danh",p=h?.anhDaiDien||"",y=Array.isArray(t?.boTheIds)?t.boTheIds.length:Number(t?.soBoThe||0),b=Array.isArray(t?.thanhVienIds)?t.thanhVienIds.length:Number(t?.soHocVien||0),S=Number(t?.giaThamGia??t?.hocPhi??t?.giaKhoaHoc??0).toLocaleString("vi-VN")+" đ",[E,N]=w.useState(0);w.useEffect(()=>{if(a||!c){N(0);return}const k=Ge(Oe(se,"feedbackKhoaHoc"),Qe("idKhoaHoc","==",String(c))),I=nt(k,O=>{let U=0,$=0;O.forEach(V=>{const B=Math.max(0,Math.min(5,Number(V.data()?.rating)||0));U+=B,$++}),N($?U/$:0)});return()=>I()},[c,a]);const C=()=>{c&&o(`/khoaHoc/${c}`)},L=()=>{r?r(c):C()},D=k=>{k.stopPropagation(),i?i(c):C()},R=Math.max(0,Math.min(100,E/5*100));return d.jsxs("div",{className:"kh-card",onClick:a?void 0:L,children:[d.jsx("div",{className:"kh-title",children:u}),d.jsxs("div",{className:"kh-meta",children:[y," bộ thẻ ",d.jsx("span",{className:"dot",children:"•"})," ",b," thành viên"]}),d.jsxs("div",{className:"kh-author",onClick:k=>k.stopPropagation(),children:[d.jsx("div",{className:"kh-avatar",style:p?{backgroundImage:`url(${p})`}:{}}),d.jsx("span",{className:"kh-name",children:m})]}),a?d.jsx("button",{className:"kh-btn",onClick:D,title:"Vào lớp",children:"Vào lớp"}):d.jsxs("div",{className:"kh-bottom",children:[d.jsxs("div",{className:"kh-rating-row",onClick:k=>k.stopPropagation(),"aria-label":`Đánh giá ${E.toFixed(1)}/5`,children:[d.jsxs("div",{className:"kh-stars2",children:[d.jsx("div",{className:"stars stars-bg",children:Array.from({length:5}).map((k,I)=>d.jsx(mt,{icon:Uy},`bg-${I}`))}),d.jsx("div",{className:"stars stars-fill",style:{width:`${R}%`},children:Array.from({length:5}).map((k,I)=>d.jsx(mt,{icon:Uy},`fg-${I}`))})]}),d.jsx("span",{className:"kh-rating-num",children:E.toFixed(1)})]}),d.jsx("div",{className:"kh-price",children:S})]})]})}function n0e(){const t=wt(),[e,n]=w.useState([]),[r,i]=w.useState({}),a=w.useMemo(()=>{try{const o=JSON.parse(sessionStorage.getItem("session")||"null");return String(lt.currentUser?.uid||o?.idNguoiDung||"")}catch{return""}},[]);return w.useEffect(()=>{const o=nt(Oe(se,"khoaHoc"),c=>{const u=c.docs.map(h=>{const m=h.data()||{},p=Array.isArray(m.thanhVienIds)?m.thanhVienIds.length:0,y=Array.isArray(m.boTheIds)?m.boTheIds.length:0;return{...m,idKhoaHoc:m.idKhoaHoc??h.id,_soTV:p,_soBo:y}});u.sort((h,m)=>m._soTV-h._soTV),n(u.slice(0,12))},()=>n([]));return()=>o()},[]),w.useEffect(()=>{const o=[...new Set(e.map(u=>u?.idNguoiDung!=null?String(u.idNguoiDung):null).filter(Boolean))];if(o.length===0){i({});return}const c=[];for(let u=0;u<o.length;u+=10)c.push(o.slice(u,u+10));(async()=>{const u={};for(const h of c){const m=Ge(Oe(se,"nguoiDung"),Qe(Ys(),"in",h));(await ct(m)).forEach(y=>u[y.id]=y.data())}i(u)})()},[e]),d.jsxs("section",{className:"home-section",children:[d.jsx("div",{className:"home-section-header",children:d.jsx("h2",{className:"home-title",children:"Khóa học phổ biến"})}),d.jsxs("div",{className:"home-grid",children:[e.map(o=>{const c=r[String(o.idNguoiDung)]||{},u=!!a&&(String(o.idNguoiDung)===a||Array.isArray(o.thanhVienIds)&&o.thanhVienIds.map(String).includes(a));return d.jsx(MB,{item:o,author:c,isJoined:u,onClick:h=>t(`/khoaHoc/${h}`),onEnter:h=>t(`/khoaHoc/${h}`)},o.idKhoaHoc)}),e.length===0&&d.jsx("p",{className:"emty",children:"Chưa có khóa học nào."})]})]})}const r0e=w.lazy(()=>Jve(()=>Promise.resolve().then(()=>RX),[]));function i0e(){const[t,e]=w.useState(!1);return w.useEffect(()=>{const n=JSON.parse(sessionStorage.getItem("session")||"null"),r=lt.currentUser?.uid||n?.idNguoiDung||null;if(!r){e(!1);return}const i=Ge(Oe(se,"goiTraPhiCuaNguoiDung"),Qe("idNguoiDung","==",String(r))),a=nt(i,o=>{const c=new Date,u=o.docs.some(h=>{const m=h.data();if(m?.status==="Đã hủy")return!1;const p=m?.NgayKetThuc;if(typeof p!="string")return!1;const[y,b,_]=p.split("/").map(Number),T=y&&b&&_?new Date(_,b-1,y):null;return T&&T>=c});e(u)},()=>e(!1));return()=>a()},[]),d.jsxs(d.Fragment,{children:[t&&d.jsx("div",{className:"ai-strip",children:d.jsx(w.Suspense,{fallback:null,children:d.jsx(r0e,{})})}),d.jsx(e0e,{}),d.jsx(t0e,{}),d.jsx(n0e,{})]})}function G0({activeMode:t}){const e=wt(),{id:n}=ma(),[r,i]=w.useState(!1),a=w.useRef(null),o=w.useRef(null),[c,u]=w.useState(null),[h,m]=w.useState(!1);w.useEffect(()=>{if(!r)return;function b(_){const T=a.current,S=o.current;S&&!S.contains(_.target)&&T&&!T.contains(_.target)&&i(!1)}return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[r]),w.useEffect(()=>{if(!n)return;const b=Ae(se,"boThe",String(n)),_=nt(b,T=>{const S=T.exists()?T.data():null;u(S);const E=JSON.parse(sessionStorage.getItem("session")||"null"),N=lt.currentUser?.uid||E?.idNguoiDung;m(!!(S&&N&&String(S.idNguoiDung)===String(N)))},()=>{u(null),m(!1)});return()=>_()},[n]);const p=async()=>{if(!(!h||!c||!window.confirm(`Xoá bộ thẻ "${c.tenBoThe}"? Hành động này không thể hoàn tác.`)))try{await Tl(Ae(se,"boThe",String(n))),alert("Đã xoá bộ thẻ."),e("/giangvien")}catch(_){console.error(_),alert("Không thể xoá bộ thẻ. Vui lòng thử lại.")}},y=()=>{h&&e(`/suabothe/${n}`)};return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"top-bar",children:[d.jsxs("div",{className:"back",onClick:()=>e(-1),children:[d.jsx(mt,{icon:ol,className:"iconback"}),"Quay lại"]}),h&&d.jsxs("div",{className:"more-wrapper",children:[d.jsx("button",{ref:a,className:"more-btn",onClick:()=>i(b=>!b),"aria-haspopup":"menu","aria-expanded":r,title:"Tùy chọn",children:d.jsx(mt,{icon:FE})}),r&&d.jsxs("div",{ref:o,className:"more-menu",children:[d.jsx("button",{className:"more-item",onClick:y,children:"Sửa bộ thẻ"}),d.jsx("button",{className:"more-item danger",onClick:p,children:"Xoá bộ thẻ"})]})]})]}),d.jsxs("div",{className:"studyChange",children:[d.jsxs("div",{className:`studyBtn ${t==="flashcard"?"active":""}`,onClick:()=>e(`/flashcard/${n}`),children:[d.jsx(mt,{icon:TL}),d.jsx("span",{children:"Flashcards"})]}),d.jsxs("div",{className:`studyBtn ${t==="tracnghiem"?"active":""}`,onClick:()=>e(`/tracnghiem/${n}`),children:[d.jsx(mt,{icon:kee}),d.jsx("span",{children:"Trắc nghiệm"})]}),d.jsxs("div",{className:`studyBtn ${t==="test"?"active":""}`,onClick:()=>e(`/test/${n}`),children:[d.jsx(mt,{icon:Cee}),d.jsx("span",{children:"Test"})]}),d.jsxs("div",{className:`studyBtn ${t==="game"?"active":""}`,onClick:()=>e(`/game/${n}`),children:[d.jsx(mt,{icon:Oee}),d.jsx("span",{children:"Match game"})]})]})]})}function a0e(){const{id:t}=ma(),[e,n]=w.useState(null),[r,i]=w.useState(0),[a,o]=w.useState(!1),[c,u]=w.useState(!0);w.useEffect(()=>{if(!t)return;u(!0),n(null),i(0),o(!1);const b=Ae(se,"boThe",String(t)),_=nt(b,T=>{T.exists()?n(T.data()):n(null),i(0),o(!1),u(!1)},()=>{n(null),u(!1)});return()=>_()},[t]);const h=Array.isArray(e?.danhSachThe)?e.danhSachThe:[],m=h[r],p=()=>{r<h.length-1&&(i(b=>b+1),o(!1))},y=()=>{r>0&&(i(b=>b-1),o(!1))};return d.jsxs("div",{className:"container",children:[d.jsx(G0,{activeMode:"flashcard"}),d.jsxs("div",{className:"main",children:[d.jsx("div",{className:"header",children:d.jsx("h2",{className:"nameCard",children:e?.tenBoThe||"Bộ thẻ"})}),d.jsxs("div",{className:"study",children:[c?d.jsx("p",{children:"Đang tải..."}):e?m?d.jsx("div",{className:`card ${a?"flipped":""}`,onClick:()=>o(!a),children:d.jsxs("div",{className:"card-inner",children:[d.jsxs("div",{className:"card-front",children:[d.jsx("h3",{className:"word",children:m.tu}),d.jsx("div",{className:"acction",children:"Hãy bấm để lật"})]}),d.jsxs("div",{className:"card-back",children:[d.jsx("h3",{className:"word",children:m.nghia}),d.jsx("div",{className:"acction",children:"Hãy bấm để lật"})]})]})}):d.jsx("p",{children:"Không có thẻ nào trong bộ này."}):d.jsx("p",{children:"Không tìm thấy bộ thẻ."}),d.jsxs("div",{className:"btn-group",children:[d.jsx("button",{className:"left",onClick:y,disabled:r===0||c||!e,children:d.jsx(mt,{icon:ol})}),d.jsxs("span",{children:[h.length?r+1:0,"/",h.length]}),d.jsx("button",{className:"right",onClick:p,disabled:r>=h.length-1||c||!e,children:d.jsx(mt,{icon:Aee})})]})]})]})]})}function ZR(t){const e=t.slice();for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e}function s0e(){const{id:t}=ma();wt();const[e,n]=w.useState(null),[r,i]=w.useState([]),[a,o]=w.useState(),[c,u]=w.useState([]),[h,m]=w.useState(0),[p,y]=w.useState(!1),[b,_]=w.useState(!1),[T,S]=w.useState([]),[E,N]=w.useState(!0);w.useEffect(()=>{if(!t)return;N(!0),n(null),i([]),S([]),m(0),u([]),o(void 0);const O=Ae(se,"boThe",String(t)),U=nt(O,$=>{if(!$.exists())n(null),i([]);else{const V=$.data();n(V),i(Array.isArray(V?.danhSachThe)?V.danhSachThe:[])}N(!1)},()=>{n(null),i([]),N(!1)});return()=>U()},[t]);const C=()=>{if(!r.length||T.length===r.length)return null;const O=Math.floor(Math.random()*r.length);return T.includes(O)?C():(S(U=>[...U,O]),r[O])},L=O=>{const U=r.map(V=>V.nghia).filter(V=>String(V).toLowerCase()!==String(O.nghia).toLowerCase()),$=[...new Set(U)];return ZR($).slice(0,3)},D=()=>{const O=C();if(!O)return;const U=L(O),$=ZR([...U,O.nghia]);o(O),u($)};w.useEffect(()=>{r.length&&h<r.length&&h>=0&&D()},[r,h]);const R=O=>{if(!a)return;_(!0);const U=O===a.nghia;y(U),setTimeout(()=>_(!1),1500),m($=>$<r.length-1?$+1:$)},k=r.length,I=Math.min(h+1,k);return d.jsxs("div",{className:"container",children:[d.jsx(G0,{activeMode:"tracnghiem"}),d.jsxs("div",{className:"main",children:[d.jsx("div",{className:"header",children:e?.tenBoThe||"Trắc nghiệm"}),d.jsx("div",{className:"study",children:E?d.jsx("p",{children:"Đang tải..."}):k?d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"questionGroup",children:[d.jsxs("div",{className:"question",children:[a?.tu,d.jsx("br",{}),d.jsx("p",{className:"tittle",children:"Chọn đáp án đúng"})]}),d.jsx("div",{className:"answer",children:c.map((O,U)=>d.jsx("div",{className:"answer-item",onClick:()=>R(O),children:O},U))})]}),b&&(p?d.jsx("p",{children:"ĐÚNG"}):d.jsxs("p",{children:["SAI. Đáp án đúng là ",d.jsx("strong",{children:a?.nghia})]})),d.jsx("div",{className:"progress",children:`${I}/${k}`})]}):d.jsx("p",{children:"Không có dữ liệu để chơi."})})]})]})}function o0e({type:t="text",value:e,onChange:n,placeholder:r}){return d.jsx("div",{className:"ti",children:d.jsx("input",{required:!0,className:"ti-input",type:t,value:e,onChange:n,placeholder:r})})}function l0e(t){const e=t.slice();for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e}function JR(t=""){return t.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\p{L}\p{N}\s]/gu,"").replace(/\s+/g," ").trim()}function c0e(){const{id:t}=ma(),[e,n]=w.useState(null),[r,i]=w.useState([]),[a,o]=w.useState([]),[c,u]=w.useState(null),[h,m]=w.useState([]),[p,y]=w.useState(0),[b,_]=w.useState(!0);w.useEffect(()=>{if(!t)return;_(!0),n(null);const C=Ae(se,"boThe",String(t)),L=nt(C,D=>{const R=D.exists()?D.data():null;n(R),_(!1)},()=>{n(null),_(!1)});return()=>L()},[t]),w.useEffect(()=>{if(!e?.danhSachThe?.length){i([]),o([]),u(null),m([]);return}const C=e.danhSachThe.slice(),D=(e.shuffle?l0e(C):C).map(R=>({tu:R.tu,nghia:R.nghia,isReversed:Math.random()<.5}));i(D),o(Array(D.length).fill("")),u(null),m([])},[e,p]);const T=w.useMemo(()=>a.length&&a.every(C=>C.trim()!==""),[a]),S=(C,L)=>{o(D=>{const R=D.slice();return R[C]=L,R})},E=()=>{if(!r.length)return;let C=0;const L=r.map((D,R)=>{const k=JR(a[R]),I=D.isReversed?D.tu:D.nghia,O=JR(I),U=k===O;return U&&(C+=1),U?{isCorrect:!0}:{isCorrect:!1,correctAnswer:I}});u(C),m(L)},N=()=>{y(C=>C+1)};return d.jsxs("div",{className:"container",children:[d.jsx(G0,{activeMode:"test"}),d.jsxs("div",{className:"main",children:[d.jsxs("h2",{className:"title",children:["Bộ thẻ: ",e?.tenBoThe||"—"]}),b?d.jsx("p",{children:"Đang tải..."}):e?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"question-list",children:r.map((C,L)=>d.jsxs("div",{className:"question-item",children:[d.jsxs("p",{className:"question-text",children:["Câu ",L+1,": Nhập đáp án cho:"," ",d.jsx("strong",{children:C.isReversed?C.nghia:C.tu})]}),d.jsx(o0e,{type:"text",value:a[L],onChange:D=>S(L,D.target.value),disabled:c!==null,onKeyDown:D=>{D.key==="Enter"&&c===null&&D.currentTarget.closest(".question-item")?.nextElementSibling?.querySelector("input")?.focus()}}),c!==null&&d.jsx("p",{className:"feedback",children:h[L]?.isCorrect?d.jsx("span",{className:"correct",children:"✔️ Đúng"}):d.jsxs("span",{className:"incorrect",children:["Sai. Đáp án đúng là:"," ",d.jsx("strong",{children:h[L].correctAnswer})]})})]},L))}),d.jsxs("div",{className:"actions",children:[d.jsx("button",{className:"submit-btn",onClick:E,disabled:c!==null||!T,title:T?"":"Hãy trả lời hết các câu",children:"Nộp bài"}),d.jsx("button",{className:"retry-btn",onClick:N,disabled:!r.length,children:"Làm lại"})]}),c!==null&&d.jsxs("p",{className:"result",children:["Bạn trả lời đúng ",c,"/",r.length," câu."]})]}):d.jsx("p",{children:"Không tìm thấy bộ thẻ."})]})]})}function u0e(t){const e=t.slice();for(let n=e.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[e[n],e[r]]=[e[r],e[n]]}return e}function f0e(){const{id:t}=ma(),[e,n]=w.useState(null),[r,i]=w.useState([]),[a,o]=w.useState([]),[c,u]=w.useState([]),[h,m]=w.useState(new Set),[p,y]=w.useState(new Set),[b,_]=w.useState(""),[T,S]=w.useState(!1),[E,N]=w.useState(!0);w.useEffect(()=>{if(!t)return;N(!0),n(null);const D=Ae(se,"boThe",String(t)),R=nt(D,k=>{const I=k.exists()?k.data():null;n(I),N(!1)},()=>{n(null),N(!1)});return()=>R()},[t]),w.useEffect(()=>{if(!e?.danhSachThe?.length){i([]);return}const D=e.danhSachThe.map((R,k)=>({id:k,tu:R.tu,nghia:R.nghia}));i(D)},[e]),w.useEffect(()=>{if(!r.length){o([]);return}const D=r.map(k=>({id:k.id,loai:"tu",vanBan:k.tu})),R=r.map(k=>({id:k.id,loai:"nghia",vanBan:k.nghia}));o(u0e([...D,...R])),m(new Set),u([]),y(new Set),_(""),S(!1)},[r]);const C=D=>{if(T||!a[D]||p.has(D)||c.includes(D))return;const R=[...c,D].slice(-2);if(u(R),R.length===2){S(!0);const[k,I]=R,O=a[k],U=a[I];O&&U&&O.id===U.id&&O.loai!==U.loai?(_("ĐÚNG"),m(V=>new Set(V).add(O.id)),y(V=>{const B=new Set(V);return B.add(k),B.add(I),B}),u([]),setTimeout(()=>{_(""),S(!1)},300)):(_("SAI"),setTimeout(()=>{u([]),_(""),S(!1)},600))}},L=p.size===a.length&&a.length>0;return d.jsxs("div",{className:"container",children:[d.jsx(G0,{activeMode:"game"}),d.jsxs("div",{className:"main",children:[d.jsx("div",{className:"header",children:d.jsx("h2",{className:"nameCard",children:e?.tenBoThe||"Trò chơi ghép cặp"})}),d.jsx("div",{className:"study",children:E?d.jsx("p",{children:"Đang tải..."}):a.length?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"question",children:a.map((D,R)=>{const k=c.includes(R),I=p.has(R),O=h.has(D.id);return d.jsx("div",{className:`question-item${k?" selected":""}`+(O?" matched":"")+(I?" gone":""),onClick:()=>C(R),"aria-hidden":I,children:D.vanBan},`${D.loai}-${D.id}-${R}`)})}),d.jsx("div",{className:`display ${b==="ĐÚNG"?"correct":b==="SAI"?"wrong":""}`,children:L?d.jsx("span",{className:"feedback",children:"Hoàn thành 🎉"}):b?d.jsx("span",{className:"feedback",children:b}):d.jsx("span",{className:"feedback",style:{opacity:.6},children:"Chọn 2 ô để ghép"})})]}):d.jsx("p",{children:"Không có dữ liệu để chơi."})})]})]})}function h0e(){const{id:t}=ma(),[e,n]=w.useState(null),[r,i]=w.useState(null),[a,o]=w.useState(0),[c,u]=w.useState({}),[h,m]=w.useState({}),[p,y]=w.useState({}),b=w.useRef(null),_=w.useRef([]);w.useEffect(()=>{const E=JSON.parse(localStorage.getItem("selected")||"null");n(E)},[t]),w.useEffect(()=>{i(e?.video||null)},[e]),w.useEffect(()=>{const E=()=>{o(b.current?.currentTime)};return b.current?.addEventListener("timeupdate",E),()=>{b.current?.removeEventListener("timeupdate",E)}},[]),w.useEffect(()=>{r?.transcript?.map((E,N)=>{Math.abs(a-E.t)<.1&&(p[N]||(_.current[N]?.focus(),b.current.pause()))})},[a,p]);const T=(E,N)=>{u(C=>({...C,[E]:N}))},S=(E,N)=>{m(C=>({...C,[N]:E.answers===c[N]})),y(C=>({...C,[N]:!0})),setTimeout(()=>{b.current.play()},1e3)};return d.jsxs("div",{className:"video-container",children:[d.jsx("h3",{children:e?.tenBoThe}),d.jsx("video",{ref:b,src:r?.src,className:"video-element",controls:!0,autoPlay:!0}),d.jsxs("div",{className:"transcript",children:[d.jsx("h4",{children:"Transcript"}),r?.transcript?.map((E,N)=>d.jsxs("div",{className:"transcript-item",children:[d.jsxs("span",{children:["Đoạn ",E.t," giây có đáp án là"]}),d.jsx("input",{ref:C=>_.current[N]=C,className:"answers",value:c[N],onChange:C=>T(N,C.target.value)}),d.jsx("button",{className:"submit",onClick:()=>S(E,N),children:"Nộp"}),p[N]&&(h[N]?d.jsxs("span",{className:"result correct",children:[d.jsx(mt,{icon:Nee})," Đúng"]}):d.jsxs("span",{className:"result wrong",children:[d.jsx(mt,{icon:_ee})," Sai"]}))]},N))]})]})}function d0e(){const[t,e]=w.useState([{id:"ls1",tenBoThe:"Luyện nghe mẫu (mp4)",moTa:"Video nội bộ",video:{src:"/src/assets/video/video.mp4",transcript:[{t:2,answers:"What are you doing today"},{t:5,answers:"I'm working at the National Railway Museum"},{t:7,answers:"Well we've been to a hotel for the night"},{t:11,answers:"As a birthday present from our youngest son, to his mum"}]}},{id:"ls2",tenBoThe:"Luyện nghe mẫu (mp4)",moTa:"Video nội bộ",video:{src:"/src/assets/video/video.mp4",transcript:[{t:2,answers:"What are you doing today"},{t:5,answers:"I'm working at the National Railway Museum"},{t:7,answers:"Well we've been to a hotel for the night"},{t:11,answers:"As a birthday present from our youngest son, to his mum"}]}},{id:"ls3",tenBoThe:"Luyện nghe mẫu (mp4)",moTa:"Video nội bộ",video:{src:"/src/assets/video/video.mp4",transcript:[{t:2,answers:"What are you doing today"},{t:5,answers:"I'm working at the National Railway Museum"},{t:7,answers:"Well we've been to a hotel for the night"},{t:11,answers:"As a birthday present from our youngest son, to his mum"}]}}]),n=wt();w.useEffect(()=>{localStorage.setItem("lessonList",JSON.stringify(t))},[]);const r=i=>{localStorage.setItem("selected",JSON.stringify(i)),n(`/video/${i.id}`)};return d.jsxs("div",{className:"video-page",style:{padding:16},children:[d.jsx("h2",{style:{marginBottom:12},children:"Thư viện bài học video"}),d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:12},children:t.map(i=>d.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:12,background:"#fff"},children:[d.jsx("div",{style:{fontWeight:700},children:i.tenBoThe}),d.jsx("div",{style:{color:"#6b7280",fontSize:14,marginTop:6},children:i.moTa||"Bài học video"}),d.jsx("button",{onClick:()=>r(i),style:{marginTop:10,width:"100%",padding:"8px 10px",background:"#111827",color:"#fff",border:0,borderRadius:8,cursor:"pointer"},children:"Học ngay"})]},i.id))})]})}function m0e(){const t=wt(),[e,n]=w.useState(!1),[r,i]=w.useState(""),[a,o]=w.useState(""),c=y=>(y||"").split(/[\n,]+/g).map(b=>b.trim()).filter(Boolean),u=y=>{const b=Number(String(y??"").replaceAll(",",""));return Number.isFinite(b)?b:0},h=(y,b,_)=>Math.min(Math.max(y,b),_),m=()=>{const y=u(r),b=h(u(a),0,100),_=Math.round(y*(1-b/100));return isNaN(_)?0:_},p=async y=>{try{n(!0);const b=JSON.parse(sessionStorage.getItem("session")||"null"),_=lt.currentUser?.uid||b?.idNguoiDung;if(!_){alert("Bạn cần đăng nhập để tạo khóa học."),t("/dang-nhap");return}const T=Math.max(0,u(y.giaKhoaHoc)),S=h(u(y.giamGia),0,100),E=Math.round(T*(1-S/100)),N=Date.now(),C={idKhoaHoc:N,idNguoiDung:String(_),tenKhoaHoc:y.tenKhoaHoc,moTa:y.moTa||"",kienThuc:c(y.kienThuc),boTheIds:[],folderIds:[],thanhVienIds:[],giaKhoaHoc:T,giamGia:S,giaSauGiam:E};await hi(Ae(se,"khoaHoc",String(N)),C),t("/khoaHoc/"+N)}catch(b){console.error(b),alert("Không thể tạo khóa học. Vui lòng thử lại.")}finally{n(!1)}};return d.jsxs("form",{onSubmit:y=>{y.preventDefault(),p(Object.fromEntries(new FormData(y.target)))},children:[d.jsx("h2",{className:"tittle",children:"Nhập thông tin khóa học"}),d.jsx("label",{children:"Tên khóa học"}),d.jsx("input",{name:"tenKhoaHoc",required:!0,placeholder:"VD: JLPT N5 - Ngữ pháp"}),d.jsx("label",{children:"Kỹ năng/Chủ đề (kiến thức)"}),d.jsx("textarea",{name:"kienThuc",rows:3,placeholder:"Ví dụ: IT, tiếng Nhật, tiếng Anh..."}),d.jsx("label",{children:"Mô tả"}),d.jsx("input",{name:"moTa",placeholder:"Mô tả ngắn..."}),d.jsxs("div",{className:"price-grid",children:[d.jsxs("div",{children:[d.jsx("label",{children:"Giá khóa học (VND)"}),d.jsx("input",{name:"giaKhoaHoc",type:"number",min:"0",step:"1000",placeholder:"Ví dụ: 199000",value:r,onChange:y=>i(y.target.value)})]}),d.jsxs("div",{children:[d.jsx("label",{children:"Giảm giá (%)"}),d.jsx("input",{name:"giamGia",type:"number",min:"0",max:"100",step:"1",placeholder:"0 - 100",value:a,onChange:y=>o(y.target.value)})]})]}),d.jsxs("div",{className:"hint",children:["Giá sau giảm:"," ",d.jsxs("strong",{children:[m().toLocaleString("vi-VN"),"đ"]})]}),d.jsxs("div",{className:"button-group",children:[d.jsx("button",{type:"button",className:"btn-close",onClick:()=>t("/trangchu"),children:"Hủy"}),d.jsx("button",{className:"btn-submit",type:"submit",disabled:e,children:e?"Đang lưu...":"Xác Nhận"})]})]})}function g0e(){const t=wt(),[e,n]=w.useState(""),[r,i]=w.useState([{tu:"",nghia:""}]),[a,o]=w.useState("ca_nhan"),[c,u]=w.useState(""),[h,m]=w.useState(!1),p=w.useMemo(()=>Math.floor(Math.random()*1e6),[]),y=()=>i(S=>[...S,{tu:"",nghia:""}]),b=S=>i(E=>E.filter((N,C)=>C!==S)),_=(S,E,N)=>{i(C=>{const L=[...C];return L[S]={...L[S],[E]:N},L})},T=async()=>{u("");const S=String(e||"").trim();if(!S)return u("Vui lòng nhập tên bộ thẻ.");const E=r.map(C=>({tu:String(C.tu||"").trim(),nghia:String(C.nghia||"").trim()})).filter(C=>C.tu&&C.nghia);if(E.length===0)return u("Bộ thẻ phải có ít nhất 1 thẻ hợp lệ (điền đủ 'từ' và 'nghĩa').");const N=lt.currentUser?.uid||JSON.parse(sessionStorage.getItem("session")||"null")?.idNguoiDung;if(!N){u("Bạn cần đăng nhập để tạo bộ thẻ."),t("/dang-nhap");return}try{m(!0);const C=p,L=jt(),D={idBoThe:C,tenBoThe:S,soTu:E.length,idNguoiDung:String(N),danhSachThe:E,luotHoc:0,cheDo:a,ngayTao:L,ngayChinhSua:L};await hi(Ae(se,"boThe",String(C)),D,{merge:!0}),window.dispatchEvent(new Event("boTheUpdated")),alert("Đã tạo bộ thẻ mới!"),t("/trangchu")}catch(C){console.error(C),u("Có lỗi khi lưu dữ liệu.")}finally{m(!1)}};return d.jsx("div",{className:"sua-container",children:d.jsxs("div",{className:"sua-card",children:[d.jsx("div",{className:"sua-header",children:d.jsx("h2",{children:"Tạo bộ thẻ mới"})}),c&&d.jsx("div",{className:"alert",children:c}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Tên bộ thẻ"}),d.jsx("input",{type:"text",value:e,onChange:S=>n(S.target.value),placeholder:"VD: Từ vựng buổi 1"})]}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Chế độ"}),d.jsxs("select",{value:a,onChange:S=>o(S.target.value),children:[d.jsx("option",{value:"cong_khai",children:"Công khai — ai cũng tìm & học được"}),d.jsx("option",{value:"ca_nhan",children:"Cá nhân — chỉ mình tôi thấy"})]}),d.jsxs("div",{className:"hint",children:["Chọn ",d.jsx("b",{children:"Công khai"})," để mọi người có thể tìm thấy bộ thẻ của bạn trong kết quả tìm kiếm."]})]}),d.jsx("div",{className:"divider"}),d.jsxs("div",{className:"the-list",children:[d.jsxs("div",{className:"the-list-header",children:[d.jsxs("h3",{children:["Danh sách thẻ (",r.length,")"]}),d.jsx("button",{className:"btn",onClick:y,children:"+ Thêm thẻ"})]}),r.length===0&&d.jsx("div",{className:"empty",children:"Chưa có thẻ nào. Nhấn “+ Thêm thẻ”."}),r.map((S,E)=>d.jsxs("div",{className:"the-item",children:[d.jsxs("div",{className:"the-row",children:[d.jsxs("div",{className:"col",children:[d.jsx("label",{children:"Từ"}),d.jsx("input",{type:"text",value:S.tu,onChange:N=>_(E,"tu",N.target.value),placeholder:"Ví dụ: apple"})]}),d.jsxs("div",{className:"col",children:[d.jsx("label",{children:"Nghĩa"}),d.jsx("input",{type:"text",value:S.nghia,onChange:N=>_(E,"nghia",N.target.value),placeholder:"Ví dụ: quả táo"})]})]}),d.jsx("div",{className:"the-actions",children:d.jsx("button",{className:"btn danger ghost",onClick:()=>b(E),children:"Xoá thẻ"})})]},E))]}),d.jsxs("div",{className:"footer-actions",children:[d.jsx("button",{className:"btn ghost",onClick:()=>t(-1),children:"Hủy"}),d.jsx("button",{className:"btn primary",onClick:T,disabled:h,children:h?"Đang lưu...":"Lưu"})]})]})})}const p0e=t=>(t||"").split(/[\n,]+/g).map(e=>e.trim()).filter(Boolean),e3=(t,e)=>{const n=[];if(e<=7){for(let a=1;a<=e;a++)n.push(a);return n}n.push(1);const r=Math.max(2,t-1),i=Math.min(e-1,t+1);r>2&&n.push("…");for(let a=r;a<=i;a++)n.push(a);return i<e-1&&n.push("…"),n.push(e),n},hT=(t,e=10)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n};async function y0e(t){const e=String(t),n=Ae(se,"khoaHoc",e);if((await ht(n)).exists())return n;const i=await ct(Ge(Oe(se,"khoaHoc"),Qe("idKhoaHoc","==",e),vn(1)));return i.empty?null:i.docs[0].ref}async function v0e(t){const e=new Map,n=Array.from(new Set(t.map(String).filter(Boolean)));if(n.length===0)return e;for(const i of hT(n,10))(await ct(Ge(Oe(se,"nguoiDung"),Qe(Ys(),"in",i)))).docs.forEach(o=>{const c=o.data();e.set(o.id,{_key:o.id,idNguoiDung:c?.idNguoiDung??o.id,tenNguoiDung:c?.tenNguoiDung||c?.hoten||c?.email||"Người dùng",email:c?.email||""})});const r=n.filter(i=>!e.has(i));for(const i of hT(r,10))(await ct(Ge(Oe(se,"nguoiDung"),Qe("idNguoiDung","in",i)))).docs.forEach(o=>{const c=o.data(),u=String(c?.idNguoiDung||o.id);e.set(u,{_key:o.id,idNguoiDung:u,tenNguoiDung:c?.tenNguoiDung||c?.hoten||c?.email||"Người dùng",email:c?.email||""})});return e}async function b0e(t){const e=new Map,n=async(c,u)=>{if(u.length)for(const h of hT(u.slice(0,50),10))(await ct(Ge(Oe(se,"nguoiDung"),Qe(c,"in",h)))).docs.forEach(p=>{const y=p.data(),b=String(y?.idNguoiDung||p.id);e.set(b,{_key:p.id,idNguoiDung:b,tenNguoiDung:y?.tenNguoiDung||y?.hoten||y?.email||"Người dùng",email:y?.email||""})})},r=t.filter(c=>c.includes("@")),i=t.filter(c=>!c.includes("@"));await n("email",r),await n("tenNguoiDung",i);const a=r.map(c=>c.toLowerCase()),o=i.map(c=>c.toLowerCase());return await n("emailLower",a),await n("tenNguoiDungLower",o),e}function x0e({idKhoaHoc:t,onCapNhat:e}){const[n,r]=w.useState(""),[i,a]=w.useState(""),[o,c]=w.useState(null),[u,h]=w.useState(null),[m,p]=w.useState(new Map),y=5,b=8,[_,T]=w.useState(1),[S,E]=w.useState(1),N=w.useMemo(()=>Array.isArray(u?.thanhVienIds)?u.thanhVienIds.map(String):[],[u]),C=w.useMemo(()=>Array.isArray(u?.yeuCauThamGiaIds)?u.yeuCauThamGiaIds.map(String):[],[u]),L=w.useMemo(()=>String(u?.idNguoiDung||""),[u]);w.useEffect(()=>{let K=null;return(async()=>{const oe=await y0e(t);if(c(oe),!oe){h(null);return}K=nt(oe,H=>{if(!H.exists()){h(null);return}h({_docId:oe.id,...H.data()})},()=>h(null))})(),()=>{typeof K=="function"&&K()}},[t]),w.useEffect(()=>{(async()=>{const K=Array.from(new Set([...N,...C]));if(K.length===0){p(new Map);return}const oe=await v0e(K);p(oe)})()},[N.join(","),C.join(",")]);const D=C.length,R=N.length,k=Math.max(1,Math.ceil(D/y)),I=Math.max(1,Math.ceil(R/b));w.useEffect(()=>{_>k&&T(k)},[k,_]),w.useEffect(()=>{S>I&&E(I)},[I,S]);const O=(_-1)*y,U=(S-1)*b,$=C.slice(O,O+y),V=N.slice(U,U+b),B=async()=>{a("");const K=p0e(n);if(K.length===0){a("Nhập email hoặc tên người dùng trước đã.");return}try{const oe=await b0e(K),H=Array.from(oe.keys());if(H.length===0){a("Không tìm thấy người dùng phù hợp.");return}if(!o||!u){a("Không tìm thấy khóa học.");return}const Z=Array.isArray(u.thanhVienIds)?u.thanhVienIds.map(String):[],te=H.filter(fe=>!Z.includes(String(fe)));if(te.length===0){a("Tất cả đã có trong khóa học."),r("");return}await yt(o,{thanhVienIds:_f(...te.map(String))}),r(""),a(`Đã thêm ${te.length} thành viên mới.`),e?.({...u,thanhVienIds:Array.from(new Set([...Z,...te]))})}catch(oe){console.error("Mời thành viên thất bại:",oe),a("Không thể mời thành viên. Vui lòng thử lại.")}},Y=async K=>{try{if(!o)return;await yt(o,{yeuCauThamGiaIds:cf(String(K)),thanhVienIds:_f(String(K))}),a("Đã chấp nhận yêu cầu tham gia.")}catch(oe){console.error(oe),a("Không thể chấp nhận yêu cầu.")}},ee=async K=>{try{if(!o)return;await yt(o,{yeuCauThamGiaIds:cf(String(K))}),a("Đã từ chối yêu cầu tham gia.")}catch(oe){console.error(oe),a("Không thể từ chối yêu cầu.")}},q=async K=>{if(String(K)===String(L)){alert("Không thể xóa chủ khóa học.");return}if(window.confirm("Xóa thành viên này khỏi khóa học?"))try{if(!o)return;await yt(o,{thanhVienIds:cf(String(K))}),a("Đã xóa thành viên.")}catch(oe){console.error(oe),a("Không thể xóa thành viên.")}},G=K=>m.get(String(K))||{tenNguoiDung:"Người dùng",email:""};return d.jsxs("div",{className:"mtv-wrap",children:[d.jsxs("section",{className:"mtv-panel",children:[d.jsx("h3",{className:"mtv-title",children:"Mời qua email / tên người dùng"}),d.jsx("textarea",{className:"mtv-textarea",rows:3,placeholder:"Nhập email hoặc tên người dùng (ngăn cách bởi dấu phẩy hoặc xuống dòng)",value:n,onChange:K=>r(K.target.value)}),d.jsx("div",{className:"mtv-actions",children:d.jsx("button",{className:"mtv-btn mtv-btn--primary",onClick:B,children:"Mời"})}),i&&d.jsx("div",{className:"mtv-note",children:i})]}),d.jsxs("section",{className:"mtv-panel",children:[d.jsx("div",{className:"mtv-panel-head",children:d.jsxs("h3",{className:"mtv-title",children:["Yêu cầu tham gia (",D,")"]})}),D===0?d.jsx("div",{className:"mtv-empty",children:"Không có yêu cầu nào."}):d.jsxs(d.Fragment,{children:[d.jsx("ul",{className:"mtv-list",children:$.map(K=>{const oe=G(K);return d.jsxs("li",{className:"mtv-row",children:[d.jsxs("div",{className:"mtv-user",children:[d.jsx("strong",{children:oe.tenNguoiDung}),d.jsxs("span",{className:"mtv-muted",children:["(",oe.email||"—",")"]})]}),d.jsxs("div",{className:"mtv-row-actions",children:[d.jsx("button",{className:"mtv-btn mtv-btn--success",onClick:()=>Y(K),children:"Chấp nhận"}),d.jsx("button",{className:"mtv-btn mtv-btn--danger",onClick:()=>ee(K),children:"Từ chối"})]})]},K)})}),k>1&&d.jsxs("div",{className:"mtv-pagination",children:[d.jsx("button",{className:"mtv-page-btn",onClick:()=>T(K=>Math.max(1,K-1)),disabled:_===1,"aria-label":"Trang trước",children:"«"}),e3(_,k).map((K,oe)=>K==="…"?d.jsx("span",{className:"mtv-page-ellipsis",children:"…"},`pp-ellipsis-${oe}`):d.jsx("button",{className:`mtv-page-btn ${K===_?"active":""}`,onClick:()=>T(K),children:K},`pp-${K}`)),d.jsx("button",{className:"mtv-page-btn",onClick:()=>T(K=>Math.min(k,K+1)),disabled:_===k,"aria-label":"Trang sau",children:"»"})]})]})]}),d.jsxs("section",{className:"mtv-panel",children:[d.jsx("div",{className:"mtv-panel-head",children:d.jsxs("h3",{className:"mtv-title",children:["Thành viên (",R,")"]})}),R===0?d.jsx("div",{className:"mtv-empty",children:"Chưa có thành viên nào."}):d.jsxs(d.Fragment,{children:[d.jsx("ul",{className:"mtv-list",children:V.map(K=>{const oe=G(K),H=String(K)===String(L);return d.jsxs("li",{className:"mtv-row",children:[d.jsxs("div",{className:"mtv-user",children:[d.jsx("strong",{children:oe.tenNguoiDung}),d.jsxs("span",{className:"mtv-muted",children:["(",oe.email||"—",")"]}),H&&d.jsx("span",{className:"mtv-badge",children:"Chủ khóa"})]}),!H&&d.jsx("button",{className:"mtv-btn mtv-btn--danger",onClick:()=>q(K),children:"Xóa"})]},K)})}),I>1&&d.jsxs("div",{className:"mtv-pagination",children:[d.jsx("button",{className:"mtv-page-btn",onClick:()=>E(K=>Math.max(1,K-1)),disabled:S===1,"aria-label":"Trang trước",children:"«"}),e3(S,I).map((K,oe)=>K==="…"?d.jsx("span",{className:"mtv-page-ellipsis",children:"…"},`mp-ellipsis-${oe}`):d.jsx("button",{className:`mtv-page-btn ${K===S?"active":""}`,onClick:()=>E(K),children:K},`mp-${K}`)),d.jsx("button",{className:"mtv-page-btn",onClick:()=>E(K=>Math.min(I,K+1)),disabled:S===I,"aria-label":"Trang sau",children:"»"})]})]})]})]})}function w0e({khoaHoc:t,onCapNhat:e}){const n=wt(),[r,i]=w.useState(!0),[a,o]=w.useState([]),c=w.useMemo(()=>{try{return JSON.parse(sessionStorage.getItem("session")||"null")}catch{return null}},[]),u=lt.currentUser?.uid||c?.idNguoiDung||null;if(!t)return d.jsx("div",{className:"tvl-empty",children:"Không tìm thấy khóa học."});const h=!!u&&String(u)===String(t.idNguoiDung),m=Array.isArray(t.boTheIds)?t.boTheIds:[];w.useEffect(()=>{let b=!1;async function _(){try{if(i(!0),!m.length){b||o([]);return}const S=(await Promise.all(m.map(D=>ht(Ae(se,"boThe",String(D)))))).filter(D=>D.exists()).map(D=>{const R=D.data()||{};return{...R,idBoThe:R.idBoThe??D.id,cheDo:R.cheDo||"cong_khai"}}),E=[...new Set(S.map(D=>D?.idNguoiDung!=null?String(D.idNguoiDung):null).filter(Boolean))],N=await Promise.all(E.map(D=>ht(Ae(se,"nguoiDung",String(D))))),C={};N.forEach(D=>{D.exists()&&(C[D.id]=D.data())});const L=S.map(D=>{const R=C[String(D.idNguoiDung)]||{};return{...D,_tenNguoiTao:R.tenNguoiDung||R.hoten||R.email||"Ẩn danh",_anhNguoiTao:R.anhDaiDien||"",soTu:typeof D.soTu=="number"?D.soTu:Array.isArray(D.danhSachThe)?D.danhSachThe.length:0}});b||o(L)}catch{o([])}finally{i(!1)}}_()},[JSON.stringify(m)]);const p=b=>n(`/flashcard/${b}`),y=async b=>{if(!h)return;const _=b.tenBoThe||`Bộ thẻ #${b.idBoThe}`;if(window.confirm(`Gỡ "${_}" khỏi khóa học?`))try{await yt(Ae(se,"khoaHoc",String(t.idKhoaHoc)),{boTheIds:cf(String(b.idBoThe))}),o(S=>S.filter(E=>String(E.idBoThe)!==String(b.idBoThe))),e&&e({...t,boTheIds:(t.boTheIds||[]).filter(S=>String(S)!==String(b.idBoThe))})}catch(S){console.error(S),alert("Không thể gỡ bộ thẻ. Vui lòng thử lại.")}};return r?d.jsx("div",{className:"tvl-empty",children:"Đang tải..."}):a.length===0?d.jsx("div",{className:"tvl-empty",children:"Chưa có bộ thẻ nào. Bấm “+ → Thêm bộ thẻ”."}):d.jsx("div",{className:"tvl-grid",children:a.map(b=>d.jsx(M2,{item:b,author:{tenNguoiDung:b._tenNguoiTao,anhDaiDien:b._anhNguoiTao},onClick:p,onLearn:p,inCourse:!0,onRemoveFromCourse:h?()=>y(b):void 0},b.idBoThe))})}const _0e=()=>Oe(se,"khoaHoc");async function t3(t){const e=String(t),n=Ae(se,"khoaHoc",e);if((await ht(n)).exists())return n;const i=Ge(_0e(),Qe("idKhoaHoc","==",e),vn(1)),a=await ct(i);return a.empty?null:a.docs[0].ref}async function S0e(t){try{const e=await ht(Ae(se,"nguoiDung",String(t)));return e.exists()?{_docId:e.id,...e.data()}:null}catch{return null}}function T0e({open:t,anchorRef:e,onClose:n,onViewDetail:r,onDelete:i,isOwner:a=!1,idKhoaHoc:o,canLeave:c=!1,onLeft:u}){const h=w.useRef(null),[m,p]=w.useState(0),[y,b]=w.useState(""),[_,T]=w.useState(null),[S,E]=w.useState(null),[N,C]=w.useState(!1);if(w.useEffect(()=>{T(lt.currentUser?.uid||null)},[]),w.useEffect(()=>{(async()=>{if(!_){E(null);return}const R=(await S0e(_))?.idNguoiDung;E(R&&String(R)!==String(_)?String(R):null)})()},[_]),w.useEffect(()=>{(async()=>{if(!o||!_){C(!1);return}const D=await t3(o);if(!D){C(!1);return}const R=await ht(D);if(!R.exists()){C(!1);return}const k=R.data(),I=Array.isArray(k?.thanhVienIds)?k.thanhVienIds.map(String):[],O=String(_),U=S?String(S):null;C(I.includes(O)||(U?I.includes(U):!1))})()},[o,_,S]),w.useEffect(()=>{if(!t)return;function D(R){const k=e?.current,I=h.current;I&&!I.contains(R.target)&&k&&!k.contains(R.target)&&n?.()}return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[t,e,n]),!t)return null;const L=async()=>{if(!(!_||!o)&&window.confirm("Bạn chắc chắn muốn rời khóa học này?"))try{const D=await t3(o);if(!D){alert("Không tìm thấy khóa học.");return}const R=String(_),k=S?String(S):null,I=k?[R,k]:[R];await yt(D,{thanhVienIds:cf(...I),yeuCauThamGiaIds:cf(...I)}),window.dispatchEvent(new Event("khoaHocChanged")),u?.(),n?.()}catch(D){console.error("Rời khóa học thất bại:",D),alert("Không thể rời khóa học. Vui lòng thử lại.")}};return d.jsxs("div",{ref:h,className:"ellipsis-menu",children:[a&&d.jsxs(d.Fragment,{children:[d.jsx("button",{className:"ellipsis-item",onClick:()=>{r?.(),n?.()},children:"Xem chi tiết khóa học / Sửa"}),d.jsx("button",{className:"ellipsis-item danger",onClick:()=>{i?.(),n?.()},children:"Xóa khóa học"})]}),!a&&c&&d.jsx("button",{className:"ellipsis-item danger",onClick:L,children:"Rời khóa học"})]})}const Ku=t=>Array.isArray(t)?t:[],lc=(t,e=0)=>Number.isFinite(Number(t))?Number(t):e;async function E0e(t){if(t==null)return null;const e=String(t),n=Ae(se,"khoaHoc",e);if((await ht(n)).exists())return n;const i=await ct(Ge(Oe(se,"khoaHoc"),Qe("idKhoaHoc","==",e),vn(1)));return i.empty?null:i.docs[0].ref}function A0e({open:t,lop:e,onClose:n,onSaved:r}){const[i,a]=w.useState(!1),[o,c]=w.useState({tenKhoaHoc:"",moTa:"",kienThucText:"",giaKhoaHoc:0,giamGia:0});w.useEffect(()=>{e&&(a(!1),c({tenKhoaHoc:String(e.tenKhoaHoc??""),moTa:String(e.moTa??""),kienThucText:Array.isArray(e.kienThuc)?e.kienThuc.join(", "):"",giaKhoaHoc:lc(e.giaKhoaHoc,0),giamGia:lc(e.giamGia,0)}))},[t,e]);const u=S=>Array.from(new Set(String(S||"").split(/[\n,]+/g).map(E=>E.trim()).filter(Boolean).map(E=>E.toLowerCase()))),h=w.useMemo(()=>{const S=lc(o.giaKhoaHoc,0),E=Math.min(100,Math.max(0,lc(o.giamGia,0)));return Math.round(S*(100-E)/100)},[o.giaKhoaHoc,o.giamGia]),m=Array.isArray(e?.boTheIds)?e.boTheIds.length:0,p=Array.isArray(e?.thanhVienIds)?e.thanhVienIds.length:0,y=S=>{const{name:E,value:N,type:C}=S.target;c(L=>({...L,[E]:N}))},b=async S=>{const E=String(S.idKhoaHoc??e?._docId??e?.id??Date.now());try{let N=await E0e(E);return N?await yt(N,{tenKhoaHoc:S.tenKhoaHoc,moTa:S.moTa,kienThuc:S.kienThuc,giaKhoaHoc:S.giaKhoaHoc,giamGia:S.giamGia,giaSauGiam:S.giaSauGiam,boTheIds:Ku(S.boTheIds).map(String),thanhVienIds:Ku(S.thanhVienIds).map(String),folderIds:Ku(S.folderIds).map(String),updatedAt:jt()}):(N=Ae(se,"khoaHoc",E),await hi(N,{...S,idKhoaHoc:E,createdAt:jt(),updatedAt:jt()})),window.dispatchEvent(new Event("khoaHocChanged")),!0}catch(N){return console.error("Lưu khóa học thất bại:",N),alert("Không thể lưu. Vui lòng thử lại."),!1}},_=async()=>{const S=String(o.tenKhoaHoc||"").trim();if(!S)return alert("Vui lòng nhập tên khóa học.");if(!window.confirm("Bạn có chắc muốn lưu thay đổi?"))return;const E={...e,idKhoaHoc:String(e?.idKhoaHoc??e?._docId??Date.now()),tenKhoaHoc:S,moTa:String(o.moTa||"").trim(),kienThuc:u(o.kienThucText),giaKhoaHoc:lc(o.giaKhoaHoc,0),giamGia:Math.min(100,Math.max(0,lc(o.giamGia,0))),giaSauGiam:h,boTheIds:Ku(e?.boTheIds),thanhVienIds:Ku(e?.thanhVienIds),folderIds:Ku(e?.folderIds)};(r?await r(E)!==!1:await b(E))&&(alert("Đã lưu thay đổi."),a(!1))};if(!t||!e)return null;const T=S=>Number(S||0).toLocaleString("vi-VN");return d.jsx("div",{className:"ctl-overlay",children:d.jsxs("div",{className:"ctl-modal",role:"dialog","aria-modal":"true",children:[d.jsxs("div",{className:"ctl-header",children:[d.jsx("h3",{children:"Thông tin khóa học"}),d.jsx("button",{className:"ctl-close",onClick:n,"aria-label":"Đóng",children:"×"})]}),d.jsxs("div",{className:"ctl-body",children:[d.jsxs("div",{className:"ctl-row",children:[d.jsx("label",{className:"ctl-label",children:"Tên khóa học"}),i?d.jsx("input",{name:"tenKhoaHoc",className:"ctl-input",type:"text",value:o.tenKhoaHoc,onChange:y,placeholder:"Nhập tên khóa học"}):d.jsx("div",{className:"ctl-static",children:o.tenKhoaHoc||"—"})]}),d.jsxs("div",{className:"ctl-row",children:[d.jsx("label",{className:"ctl-label",children:"Kỹ năng/Chủ đề"}),i?d.jsxs(d.Fragment,{children:[d.jsx("textarea",{name:"kienThucText",rows:2,className:"ctl-textarea",value:o.kienThucText,onChange:y,placeholder:"it, tiếng nhật, tiếng anh… (phẩy hoặc xuống dòng)"}),d.jsx("div",{className:"ctl-hint",children:"Nhập mỗi dòng 1 thẻ hoặc dùng dấu phẩy. Hệ thống tự loại trùng & chuẩn hoá chữ thường."})]}):d.jsx("div",{className:"ctl-static",children:Array.isArray(e.kienThuc)&&e.kienThuc.length>0?e.kienThuc.join(", "):"—"})]}),d.jsxs("div",{className:"ctl-row",children:[d.jsx("label",{className:"ctl-label",children:"Mô tả"}),i?d.jsx("textarea",{name:"moTa",rows:3,className:"ctl-textarea",value:o.moTa,onChange:y,placeholder:"Mô tả ngắn…"}):d.jsx("div",{className:"ctl-static",children:o.moTa||"—"})]}),d.jsxs("div",{className:"ctl-grid-2",children:[d.jsxs("div",{className:"ctl-row",children:[d.jsx("label",{className:"ctl-label",children:"Học phí (đ)"}),i?d.jsx("input",{name:"giaKhoaHoc",type:"number",min:"0",className:"ctl-input",value:o.giaKhoaHoc,onChange:y,placeholder:"0"}):d.jsx("div",{className:"ctl-static",children:T(o.giaKhoaHoc)})]}),d.jsxs("div",{className:"ctl-row",children:[d.jsx("label",{className:"ctl-label",children:"% giảm giá"}),i?d.jsx("input",{name:"giamGia",type:"number",min:"0",max:"100",className:"ctl-input",value:o.giamGia,onChange:y,placeholder:"0"}):d.jsxs("div",{className:"ctl-static",children:[lc(o.giamGia),"%"]})]})]}),d.jsx("div",{className:"ctl-grid-2",children:d.jsxs("div",{className:"ctl-row",children:[d.jsx("label",{className:"ctl-label",children:"Giá sau giảm"}),d.jsxs("div",{className:"ctl-static",children:[T(h)," ",o.donViTien]})]})}),d.jsx("div",{className:"ctl-split"}),d.jsxs("div",{className:"ctl-stats",children:[d.jsxs("div",{className:"ctl-stat-item",children:[d.jsx("span",{className:"ctl-stat-label",children:"Bộ thẻ"}),d.jsx("span",{className:"ctl-stat-value",children:m})]}),d.jsxs("div",{className:"ctl-stat-item",children:[d.jsx("span",{className:"ctl-stat-label",children:"Thành viên"}),d.jsx("span",{className:"ctl-stat-value",children:p})]})]})]}),d.jsxs("div",{className:"ctl-footer",children:[d.jsx("button",{className:"btn-cancel-outline",onClick:n,children:"Đóng"}),i?d.jsx("button",{className:"btn-primary",onClick:_,children:"Lưu"}):d.jsx("button",{className:"btn-primary",onClick:()=>a(!0),children:"Chỉnh sửa"})]})]})})}const n3=()=>Oe(se,"boThe"),N0e=()=>Oe(se,"khoaHoc");async function C0e(t){const e=String(t),n=Ae(se,"khoaHoc",e);if((await ht(n)).exists())return n;const i=Ge(N0e(),Qe("idKhoaHoc","==",e),vn(1)),a=await ct(i);return a.empty?null:a.docs[0].ref}async function j0e(t){try{const e=await ht(Ae(se,"nguoiDung",String(t)));return e.exists()?{_docId:e.id,...e.data()}:null}catch{return null}}function D0e({idKhoaHoc:t,onDong:e,onCapNhat:n}){const r=wt(),[i,a]=w.useState(null),[o,c]=w.useState(null),[u,h]=w.useState(null),[m,p]=w.useState(null),[y,b]=w.useState([]),[_,T]=w.useState(!0),[S,E]=w.useState(new Set),[N,C]=w.useState("");w.useEffect(()=>{const O=lt.currentUser?.uid||null;if(!O){alert("Vui lòng đăng nhập."),r("/dang-nhap");return}a(O),(async()=>{const $=(await j0e(O))?.idNguoiDung;c($&&String($)!==String(O)?String($):null)})()},[r]),w.useEffect(()=>{(async()=>{if(!t)return;const O=await C0e(t);if(!O){h(null),p(null);return}h(O);const U=await ht(O);p(U.exists()?{_docId:O.id,...U.data()}:null)})()},[t]),w.useEffect(()=>{(async()=>{if(i){T(!0);try{let O=[];if(o&&String(o)!==String(i)){const Y=Ge(n3(),Qe("idNguoiDung","in",[String(i),String(o)]));O.push(Y)}else{const Y=Ge(n3(),Qe("idNguoiDung","==",String(i)));O.push(Y)}const U=[];for(const Y of O){const ee=await ct(Y);U.push(...ee.docs)}const $=U.map(Y=>{const ee=Y.data(),q=String(ee.idBoThe||Y.id),G=ee.tenBoThe||"",K=Number.isFinite(ee.soTu)?ee.soTu:Array.isArray(ee.danhSachThe)?ee.danhSachThe.length:0;return{idBoThe:q,tenBoThe:G,soTu:K}}),V=new Set,B=[];for(const Y of $)V.has(Y.idBoThe)||(V.add(Y.idBoThe),B.push(Y));b(B)}catch(O){console.error("Lỗi tải bộ thẻ:",O),b([])}finally{T(!1)}}})()},[i,o]);const L=w.useMemo(()=>new Set(Array.isArray(m?.boTheIds)?m.boTheIds.map(String):[]),[m]),D=w.useMemo(()=>{const O=N.trim().toLowerCase();return O?y.filter(U=>U.tenBoThe.toLowerCase().includes(O)||String(U.idBoThe).includes(O)):y},[N,y]),R=O=>{E(U=>{const $=new Set(U);return $.has(O)?$.delete(O):$.add(O),$})},k=async()=>{try{if(!u||!m)return;const O=Array.from(S).filter(V=>!L.has(String(V)));if(O.length===0){e?.();return}await yt(u,{boTheIds:_f(...O.map(String))});const U=await ht(u),$=U.exists()?{_docId:u.id,...U.data()}:null;n?.($),e?.()}catch(O){console.error("Cập nhật khóa học thất bại:",O),alert("Không thể thêm bộ thẻ vào khóa học. Vui lòng thử lại.")}},I=()=>{e?.(),r("/newBoThe")};return m?d.jsx("div",{className:"popup-overlay",children:d.jsxs("div",{className:"popup-content",style:{width:640},children:[d.jsxs("div",{className:"popup-header",children:[d.jsx("h3",{children:"Chọn bộ thẻ để thêm vào khóa học"}),d.jsx("button",{className:"popup-close",onClick:e,children:"✕"})]}),d.jsxs("div",{className:"popup-body",style:{gap:12},children:[d.jsx("input",{className:"popup-input",placeholder:"Tìm theo tên hoặc ID bộ thẻ…",value:N,onChange:O=>C(O.target.value)}),d.jsx("div",{style:{maxHeight:360,overflow:"auto",border:"1px solid #e5e7eb",borderRadius:10,padding:8},children:_?d.jsx("div",{style:{padding:12,opacity:.7},children:"Đang tải…"}):D.length===0?d.jsx("div",{style:{padding:12,opacity:.7},children:"Chưa có bộ thẻ nào."}):d.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:D.map(O=>{const U=L.has(String(O.idBoThe)),$=S.has(String(O.idBoThe));return d.jsxs("li",{style:{display:"grid",gridTemplateColumns:"24px 1fr auto",gap:10,alignItems:"center",padding:"10px 8px",borderBottom:"1px dashed #eee"},children:[d.jsx("input",{type:"checkbox",disabled:U,checked:$||U,onChange:()=>R(String(O.idBoThe))}),d.jsxs("div",{children:[d.jsx("div",{style:{fontWeight:700},children:O.tenBoThe||`Bộ thẻ #${O.idBoThe}`}),d.jsxs("div",{style:{fontSize:12,opacity:.7},children:[O.soTu??0," từ • ID: ",O.idBoThe]})]}),U&&d.jsx("span",{style:{fontSize:12,padding:"4px 8px",background:"#f3f4f6",borderRadius:999},children:"Đã có trong khóa học"})]},O.idBoThe)})})})]}),d.jsxs("div",{className:"popup-footer",style:{gap:8},children:[d.jsx("button",{className:"btn-primary",onClick:I,style:{background:"#6b7280"},children:"Tạo bộ thẻ mới"}),d.jsx("button",{className:"btn-primary",onClick:k,disabled:S.size===0,children:"Thêm vào khóa học"})]})]})}):d.jsx("div",{className:"popup-overlay",children:d.jsxs("div",{className:"popup-content",style:{width:520},children:[d.jsxs("div",{className:"popup-header",children:[d.jsx("h3",{children:"Không tìm thấy khóa học"}),d.jsx("button",{className:"popup-close",onClick:e,children:"✕"})]}),d.jsxs("div",{className:"popup-body",style:{padding:12},children:["Vui lòng kiểm tra lại ",d.jsx("code",{children:"idKhoaHoc"}),"."]})]})})}const r3=t=>t instanceof Date&&!Number.isNaN(t)?t.toLocaleString("vi-VN"):"",f_=t=>{if(!t)return null;if(typeof t?.toDate=="function")return t.toDate();const e=new Date(t);return Number.isNaN(e)?null:e},k0e=(t,e=10)=>{const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n};async function O0e(t){const e=String(t),n=Ae(se,"khoaHoc",e);if((await ht(n)).exists())return n;const i=await ct(Ge(Oe(se,"khoaHoc"),Qe("idKhoaHoc","==",e)));return i.empty?null:i.docs[0].ref}async function I0e(t){try{const e=await ht(Ae(se,"nguoiDung",String(t)));return e.exists()?{_docId:e.id,...e.data()}:null}catch{return null}}function P0e({idKhoaHoc:t}){const[e,n]=w.useState(null),[r,i]=w.useState(null),a=w.useMemo(()=>String(r||e||""),[e,r]),[o,c]=w.useState(null),[u,h]=w.useState(!1),[m,p]=w.useState(!1),[y,b]=w.useState([]),[_,T]=w.useState(new Map),[S,E]=w.useState(0),[N,C]=w.useState(""),[L,D]=w.useState({});w.useEffect(()=>{const V=lt.currentUser?.uid||null;n(V),(async()=>{if(!V){i(null);return}const Y=(await I0e(V))?.idNguoiDung;i(Y&&String(Y)!==String(V)?String(Y):null)})()},[]),w.useEffect(()=>{(async()=>{if(!t)return;const V=await O0e(t);if(!V){c(null),h(!1),p(!1);return}const B=await ht(V);if(!B.exists()){c(null),h(!1),p(!1);return}const Y={_docId:V.id,...B.data()};c(Y);const ee=String(Y.idNguoiDung||""),q=Array.isArray(Y.thanhVienIds)?Y.thanhVienIds.map(String):[];h(ee===String(a)||ee===String(e)),p(q.includes(String(a))||q.includes(String(e)))})()},[t,e,r,a]),w.useEffect(()=>{if(!t)return;const V=Ge(Oe(se,"feedbackKhoaHoc"),Qe("idKhoaHoc","==",String(t))),B=nt(V,Y=>{const ee=Y.docs.map(q=>{const G=q.data()||{},K=f_(G.ngay)||new Date(0),oe=Array.isArray(G.replies)?G.replies.map(H=>({...H,date:f_(H?.date)||null})):[];return{idNguoiDung:String(G.idNguoiDung||""),rating:Number(G.rating||0),comment:String(G.comment||""),ngay:K,replies:oe}});ee.sort((q,G)=>(G.ngay?.getTime?.()||0)-(q.ngay?.getTime?.()||0)),b(ee)},Y=>{console.error("onSnapshot feedbackKhoaHoc error:",Y),b([])});return()=>B()},[t]),w.useEffect(()=>{const V=new Set(y.map(Y=>Y.idNguoiDung));y.forEach(Y=>Y.replies?.forEach(ee=>V.add(String(ee.userId||""))));const B=Array.from(V).filter(Y=>Y&&!_.has(Y));B.length!==0&&(async()=>{const Y=k0e(B,10),ee=new Map(_);for(const q of Y)(await Promise.all(q.map(K=>ht(Ae(se,"nguoiDung",K))))).forEach(K=>{if(K.exists()){const oe=K.data();ee.set(K.id,{tenNguoiDung:oe?.tenNguoiDung||oe?.hoten||oe?.email||"Người dùng",anhDaiDien:oe?.anhDaiDien||""})}else ee.set(K.id,{tenNguoiDung:"Người dùng",anhDaiDien:""})});T(ee)})()},[y,_]);const R=y.length,k=w.useMemo(()=>R?y.reduce((V,B)=>V+(Number(B.rating)||0),0)/R:0,[y,R]),I=Math.max(0,Math.min(100,k/5*100)),O=w.useMemo(()=>!!a&&y.some(V=>String(V.idNguoiDung)===String(a)),[y,a]),U=async V=>{if(V.preventDefault(),!a)return;if(!S)return alert("Vui lòng chọn số sao!");if(!m)return alert("Chỉ thành viên của khóa học mới được đánh giá.");if(u)return alert("Chủ khóa học không thể tự đánh giá khóa học của mình.");const B=`${String(t)}_${a}`;if((await ht(Ae(se,"feedbackKhoaHoc",B))).exists())return alert("Bạn đã đánh giá khóa học này rồi.");try{await hi(Ae(se,"feedbackKhoaHoc",B),{idKhoaHoc:String(t),idNguoiDung:a,rating:Number(S),comment:String(N||"").trim(),ngay:jt()},{merge:!1}),E(0),C("")}catch(ee){console.error("Ghi feedback thất bại:",ee),alert("Không thể gửi đánh giá. Vui lòng thử lại.")}},$=async V=>{const B=(L[V]||"").trim();if(!B)return;if(!u)return alert("Chỉ giảng viên/chủ khóa học mới được phản hồi.");const Y=`${String(t)}_${String(V)}`;try{await yt(Ae(se,"feedbackKhoaHoc",Y),{replies:_f({userId:a||e,text:B,date:jt()})}),D(ee=>({...ee,[V]:""}))}catch(ee){console.error("Gửi phản hồi thất bại:",ee),alert("Không thể gửi phản hồi. Vui lòng thử lại.")}};return d.jsxs("div",{className:"fb-wrap",children:[d.jsxs("div",{className:"fb-head",children:[d.jsx("h3",{children:"Đánh giá & phản hồi"}),d.jsxs("div",{className:"fb-avg","aria-label":`Điểm trung bình ${k.toFixed(1)}/5`,children:[d.jsxs("div",{className:"fb-stars2",children:[d.jsx("div",{className:"stars stars-bg",children:Array.from({length:5}).map((V,B)=>d.jsx(mt,{icon:Uy},`bg-${B}`))}),d.jsx("div",{className:"stars stars-fill",style:{width:`${I}%`},children:Array.from({length:5}).map((V,B)=>d.jsx(mt,{icon:Uy},`fg-${B}`))})]}),d.jsx("span",{className:"fb-avg-num",children:k.toFixed(1)}),d.jsxs("span",{className:"fb-count",children:["(",R,")"]})]})]}),m&&!u&&!O&&d.jsxs("form",{onSubmit:U,className:"fb-form",children:[d.jsxs("div",{className:"fb-stars-picker",children:[[1,2,3,4,5].map(V=>d.jsx("button",{type:"button",className:`fb-star ${V<=S?"active":""}`,onClick:()=>E(V),"aria-label":`Chọn ${V} sao`,children:"★"},V)),S>0&&d.jsxs("span",{className:"fb-picked",children:[S,"/5"]})]}),d.jsx("textarea",{className:"fb-input",value:N,onChange:V=>C(V.target.value),placeholder:"Chia sẻ cảm nhận về khóa học...",rows:3}),d.jsx("div",{className:"fb-row-end",children:d.jsx("button",{type:"submit",className:"fb-btn fb-primary",children:"Gửi đánh giá"})})]}),R===0?d.jsx("p",{className:"fb-empty",children:"Chưa có feedback nào."}):d.jsx("ul",{className:"fb-list",children:y.map(V=>{const B=_.get(V.idNguoiDung)||{},Y=B.tenNguoiDung||"Người dùng",ee=B.anhDaiDien||"";return d.jsxs("li",{className:"fb-item",children:[d.jsx("div",{className:"fb-item-head",children:d.jsxs("div",{className:"fb-user",children:[d.jsx("div",{className:"fb-avatar",children:ee?d.jsx("img",{src:ee,alt:Y}):Y.charAt(0).toUpperCase()}),d.jsxs("div",{children:[d.jsx("div",{className:"fb-user-name",children:Y}),d.jsxs("div",{className:"fb-meta",children:[d.jsxs("span",{className:"fb-stars-inline",children:["★".repeat(V.rating),d.jsx("span",{className:"fb-stars-dim",children:"★".repeat(5-V.rating)})]}),d.jsxs("span",{children:["· ",r3(V.ngay)]})]})]})]})}),d.jsx("div",{className:"fb-body",children:V.comment}),Array.isArray(V.replies)&&V.replies.length>0&&d.jsx("div",{className:"fb-replies",children:V.replies.map((q,G)=>d.jsxs("div",{className:"fb-reply",children:[d.jsx("div",{className:"fb-reply-badge",children:"Phản hồi của giảng viên"}),d.jsx("div",{className:"fb-reply-text",children:q.text}),d.jsx("div",{className:"fb-reply-time",children:r3(f_(q.date))})]},G))}),u&&d.jsxs("div",{className:"fb-reply-box",children:[d.jsx("textarea",{className:"fb-input",rows:2,placeholder:"Phản hồi lại học viên...",value:L[V.idNguoiDung]||"",onChange:q=>D(G=>({...G,[V.idNguoiDung]:q.target.value}))}),d.jsxs("div",{className:"fb-row-end",children:[d.jsx("button",{type:"button",className:"fb-btn fb-secondary",onClick:()=>D(q=>({...q,[V.idNguoiDung]:""})),children:"Hủy"}),d.jsx("button",{type:"button",className:"fb-btn fb-primary",onClick:()=>$(V.idNguoiDung),children:"Gửi phản hồi"})]})]})]},V.idNguoiDung)})})]})}function R0e(){const{id:t}=ma(),e=wt(),[n,r]=w.useState(null),[i,a]=w.useState(!1),[o,c]=w.useState("thuVien"),[u,h]=w.useState(!1),m=w.useRef(null),[p,y]=w.useState(!1),[b,_]=w.useState(!1),[T,S]=w.useState(!1),[E,N]=w.useState(null),[C,L]=w.useState([]),[D,R]=w.useState(!1),[k,I]=w.useState(null),[O,U]=w.useState(null);w.useEffect(()=>{const Ne=ga(lt,we=>I(we?.uid||null));return()=>Ne()},[]),w.useEffect(()=>{(async()=>{if(!k){U(null);return}try{const Ne=await ht(Ae(se,"nguoiDung",String(k))),we=Ne.exists()?Ne.data()?.idNguoiDung:null;U(we?String(we):null)}catch{U(null)}})()},[k]);const $=w.useMemo(()=>[k,O].filter(Boolean).map(String),[k,O]);w.useEffect(()=>{if(!t)return;const Ne=Ae(se,"khoaHoc",String(t)),we=nt(Ne,Le=>{if(!Le.exists()){r(null);return}const xe=Le.data()||null;["thanhVienIds","boTheIds","folderIds","kienThuc","yeuCauThamGiaIds"].forEach(ce=>{Array.isArray(xe[ce])||(xe[ce]=[])}),r(xe)},()=>r(null));return()=>we()},[t]);const V=w.useMemo(()=>String(n?.idNguoiDung||""),[n]),B=w.useMemo(()=>Array.isArray(n?.thanhVienIds)?n.thanhVienIds.map(String):[],[n]),Y=w.useMemo(()=>!n||$.length===0?!1:$.includes(V),[n,$,V]),ee=w.useMemo(()=>!n||$.length===0?!1:B.some(Ne=>$.includes(String(Ne))),[n,$,B]),q=ee&&!Y,G=Y||ee;w.useEffect(()=>{S(!1)},[n,k]);const K=()=>a(Ne=>!Ne),oe=()=>y(!0),H=async()=>{if(!(!n||!Y||!window.confirm(`Xóa khóa học "${n.tenKhoaHoc||""}"?`)))try{await Tl(Ae(se,"khoaHoc",String(n.idKhoaHoc))),alert("Đã xóa khóa học."),e("/thuviencuatoi")}catch(we){console.error(we),alert("Không thể xóa khóa học. Vui lòng thử lại.")}},Z=async Ne=>{try{if(!Ne?.idKhoaHoc)return;await yt(Ae(se,"khoaHoc",String(Ne.idKhoaHoc)),Ne),alert("Đã lưu thay đổi khóa học."),y(!1)}catch(we){console.error(we),alert("Không thể lưu chi tiết khóa học.")}},te=Ne=>{const we=Ne?.giaThamGia??Ne?.hocPhi??Ne?.giaKhoaHoc??0;return Number(we)||0},fe=Ne=>{const we=Ne?.thoiHanNgay??30;return Number(we)||30},Ce=(Ne,we="VND")=>String(we).toUpperCase()==="VND"?(Number(Ne)||0).toLocaleString("vi-VN")+" đ":new Intl.NumberFormat("vi-VN",{style:"currency",currency:we}).format(Number(Ne)||0),Ie=async()=>{if(!k){window.confirm("Bạn cần đăng nhập để thanh toán. Đi đến trang đăng nhập?")&&e("/dang-nhap");return}if(n)try{S(!0);const Ne=te(n),we=fe(n),Le=await Mc(Oe(se,"hoaDon"),{idNguoiDung:String(k),tenGoi:`Tham gia: ${n.tenKhoaHoc||"Khóa học"}`,thoiHanNgay:we,soTienThanhToan:Ne,giamGia:Number(n?.giamGia||0),trangThai:"pending",createdAt:jt(),loaiThanhToan:"muaKhoaHoc",idKhoaHoc:String(n.idKhoaHoc||t)});e("/checkout",{state:{orderId:Le.id}})}catch(Ne){console.error(Ne),S(!1),alert("Không thể tạo đơn tham gia. Vui lòng thử lại.")}};w.useEffect(()=>{(async()=>{try{R(!0),N(null),L([]);const we=Array.isArray(n?.boTheIds)?n.boTheIds:[],Le=we.length?String(we[0]):null;if(!Le){R(!1);return}const xe=await ht(Ae(se,"boThe",Le));if(!xe.exists()){R(!1);return}const ce=xe.data()||{},Pe=Array.isArray(ce.danhSachThe)?ce.danhSachThe:[];N({idBoThe:ce.idBoThe??Le,tenBoThe:ce.tenBoThe||`Bộ thẻ #${Le}`,soTu:ce.soTu??Pe.length});const qe=Ke=>{if(typeof Ke=="string")return{front:Ke,back:""};if(!Ke||typeof Ke!="object")return{front:"—",back:""};const kt=Ke.front||Ke.matTruoc||Ke.tu||Ke.word||Ke.term||Ke.question||Ke.q||"",Rt=Ke.back||Ke.matSau||Ke.nghia||Ke.meaning||Ke.definition||Ke.answer||Ke.a||"",Gr=Object.values(Ke).find(Wr=>typeof Wr=="string")||"";return{front:kt||Gr||"—",back:Rt}};L(Pe.slice(0,6).map(qe))}catch(we){console.error("Load first deck failed:",we),N(null),L([])}finally{R(!1)}})()},[n]);const Fe=()=>{if(!n)return null;const Ne=Array.isArray(n.boTheIds)?n.boTheIds.length:0,we=Array.isArray(n.thanhVienIds)?n.thanhVienIds.length:0,Le=n.kienThuc||[],xe=n.donViTien||"VND",ce=te(n),Pe=Number(n?.giamGia||0),qe=Number(n?.giaSauGiam||(ce&&Pe?Math.round(ce*(100-Pe)/100):0));return d.jsxs("div",{style:{gridColumn:"1 / -1",border:"1px solid #e5e7eb",borderRadius:12,padding:16,background:"#fff",boxShadow:"0 8px 20px rgba(0,0,0,.06)",marginBottom:12},children:[d.jsx("h3",{style:{margin:0,fontSize:18,fontWeight:800},children:"Thông tin khóa học"}),d.jsxs("div",{style:{marginTop:10,color:"#374151",display:"grid",gap:6},children:[d.jsxs("div",{children:[d.jsx("strong",{children:"Tên khóa học:"})," ",n.tenKhoaHoc||"—"]}),d.jsxs("div",{children:[d.jsx("strong",{children:"Mô tả:"})," ",n.moTa||"—"]}),d.jsxs("div",{children:[d.jsx("strong",{children:"Kiến thức:"})," ",Le.length?Le.map((Ke,kt)=>d.jsx("span",{style:{display:"inline-block",padding:"4px 8px",border:"1px solid #e5e7eb",borderRadius:999,fontSize:12,marginRight:6,marginTop:6},children:Ke},kt)):"—"]}),d.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap",marginTop:6},children:[d.jsxs("div",{children:[d.jsx("strong",{children:"Bộ thẻ:"})," ",Ne]}),d.jsxs("div",{children:[d.jsx("strong",{children:"Thành viên:"})," ",we]}),ce>0&&d.jsxs("div",{children:[d.jsx("strong",{children:"Giá:"})," ",Pe>0||qe>0?d.jsxs(d.Fragment,{children:[d.jsx("span",{style:{textDecoration:"line-through",color:"#6b7280",marginRight:6},children:Ce(ce,xe)}),d.jsx("span",{style:{fontWeight:800,color:"#111827"},children:Ce(qe||ce,xe)}),Pe>0&&d.jsxs("span",{style:{marginLeft:8,color:"#ef4444"},children:["-",Pe,"%"]})]}):d.jsx("span",{style:{fontWeight:800},children:Ce(ce,xe)})]})]})]}),!G&&d.jsxs("div",{style:{marginTop:12,display:"flex",gap:8,alignItems:"center"},children:[d.jsx("button",{className:"btn-join",onClick:Ie,disabled:T,children:T?"Đang mở thanh toán...":"Tham gia khóa học"}),d.jsx("span",{style:{color:"#6b7280",fontSize:14},children:"Sau khi thanh toán, bạn sẽ truy cập toàn bộ nội dung."})]})]})},Pt=()=>G?D?d.jsx("div",{style:{gridColumn:"1 / -1",border:"1px solid #e5e7eb",borderRadius:12,padding:16,background:"#fff",boxShadow:"0 8px 20px rgba(0,0,0,.06)",marginBottom:12},children:"Đang tải bộ thẻ đầu tiên…"}):E?d.jsxs("div",{style:{gridColumn:"1 / -1",border:"1px solid #e5e7eb",borderRadius:12,padding:16,background:"#fff",boxShadow:"0 8px 20px rgba(0,0,0,.06)",marginBottom:12},children:[d.jsxs("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"space-between"},children:[d.jsxs("h3",{style:{margin:0,fontSize:18,fontWeight:800},children:["Xem trước bộ thẻ đầu tiên: ",E.tenBoThe]}),d.jsxs("span",{style:{color:"#6b7280"},children:[E.soTu," thẻ"]})]}),C.length===0?d.jsx("div",{style:{marginTop:8,color:"#6b7280"},children:"Bộ thẻ này chưa có thẻ nào."}):d.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:10,marginTop:12},children:C.map((Ne,we)=>d.jsxs("div",{style:{border:"1px solid #e5e7eb",borderRadius:10,padding:10,background:"#fafafa"},children:[d.jsx("div",{style:{fontWeight:700,color:"#111827",marginBottom:6},children:Ne.front||"—"}),Ne.back?d.jsx("div",{style:{color:"#374151",fontSize:14},children:Ne.back}):d.jsx("div",{style:{color:"#9ca3af",fontSize:13},children:"—"})]},we))})]}):null:null;return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"thong-tin-lop",children:[d.jsxs("div",{className:"back",onClick:()=>e(-1),title:"Quay lại",children:[d.jsx(mt,{icon:ol,className:"iconback"}),"Quay lại"]}),d.jsx("div",{className:"ten-lop",children:d.jsx("h1",{children:n?.tenKhoaHoc||"Khóa học"})}),d.jsxs("div",{className:"header-actions",children:[Y&&d.jsxs("div",{style:{position:"relative"},children:[d.jsx("button",{className:"btn-them",onClick:K,children:d.jsx(mt,{icon:jee,className:"icon"})}),i&&d.jsx("div",{className:"dropdown-menu",children:d.jsx("button",{onClick:()=>{a(!1),_(!0)},children:"Thêm bộ thẻ"})})]}),d.jsxs("div",{style:{position:"relative"},children:[d.jsx("button",{ref:m,className:"btn-menu",onClick:()=>h(Ne=>!Ne),"aria-haspopup":"menu","aria-expanded":u,children:d.jsx(mt,{icon:FE,className:"icon"})}),d.jsx(T0e,{open:u,anchorRef:m,onClose:()=>h(!1),onViewDetail:oe,onDelete:H,idKhoaHoc:n?.idKhoaHoc,isOwner:Y,canLeave:q,onLeft:()=>{}})]})]})]}),d.jsxs("div",{className:"noi-dung-lop",children:[d.jsxs("div",{className:"tab-navigation",children:[d.jsx("button",{className:`tab-item ${o==="thuVien"?"active":""} ${G?"":"locked"}`,onClick:()=>c("thuVien"),title:G?"":"Bạn cần tham gia để xem thư viện",children:"Thư viện khóa học"}),Y&&d.jsx("button",{className:`tab-item ${o==="thanhVien"?"active":""}`,onClick:()=>c("thanhVien"),children:"Thành viên"}),d.jsx("button",{className:`tab-item ${o==="feedback"?"active":""}`,onClick:()=>c("feedback"),children:"Feedback"})]}),o==="thuVien"&&n&&d.jsxs("div",{className:"tab-content",children:[d.jsx(Fe,{}),d.jsx(Pt,{}),G?d.jsx(w0e,{khoaHoc:n,onCapNhat:Ne=>r(Ne)}):null]}),o==="feedback"&&n&&d.jsx("div",{className:"tab-content",style:{display:"block"},children:d.jsx(P0e,{idKhoaHoc:n.idKhoaHoc})}),o==="thanhVien"&&Y&&n&&d.jsx("div",{className:"tab-content",style:{display:"block"},children:d.jsx(x0e,{idKhoaHoc:n.idKhoaHoc,onCapNhat:Ne=>r(Ne)})})]}),d.jsx(A0e,{open:p,lop:n,onClose:()=>y(!1),onSave:Z}),b&&n&&d.jsx(D0e,{idKhoaHoc:n.idKhoaHoc,onDong:()=>_(!1),onCapNhat:Ne=>r(Ne)})]})}function M0e(){const t=wt(),[e,n]=w.useState([]),[r,i]=w.useState("boThe"),[a,o]=w.useState([]),[c,u]=w.useState([]),[h,m]=w.useState([]),[p,y]=w.useState({}),b=w.useMemo(()=>{try{return JSON.parse(sessionStorage.getItem("session")||"null")}catch{return null}},[]),_=lt.currentUser?.uid||b?.idNguoiDung||null;w.useEffect(()=>{if(!_){n([]);return}const S=Ge(Oe(se,"boThe"),Qe("idNguoiDung","==",String(_))),E=nt(S,N=>{const C=N.docs.map(L=>{const D=L.data();return{...D,soTu:typeof D.soTu=="number"?D.soTu:Array.isArray(D.danhSachThe)?D.danhSachThe.length:0,luotHoc:Number(D.luotHoc||0)}});n(C)},()=>n([]));return()=>E()},[_]),w.useEffect(()=>{if(!_){o([]);return}const S=Ge(Oe(se,"khoaHoc"),Qe("idNguoiDung","==",String(_))),E=nt(S,N=>{const C=N.docs.map(L=>L.data());o(C)},()=>o([]));return()=>E()},[_]),w.useEffect(()=>{if(!_){u([]);return}const S=Ge(Oe(se,"khoaHoc"),Qe("thanhVienIds","array-contains",String(_))),E=nt(S,N=>{const C=N.docs.map(L=>L.data());u(C)},()=>u([]));return()=>E()},[_]),w.useEffect(()=>{const S=new Map;[...a,...c].forEach(E=>{E?.idKhoaHoc!=null&&S.set(String(E.idKhoaHoc),E)}),m(Array.from(S.values()))},[a,c]),w.useEffect(()=>{const S=[...new Set([...e,...h].map(N=>N?.idNguoiDung!=null?String(N.idNguoiDung):null).filter(Boolean))];if(S.length===0){y({});return}const E=[];for(let N=0;N<S.length;N+=10)E.push(S.slice(N,N+10));(async()=>{const N={};for(const C of E){const L=Ge(Oe(se,"nguoiDung"),Qe(Ys(),"in",C));(await ct(L)).forEach(R=>N[R.id]=R.data())}y(N)})()},[e,h]);const T=S=>t(`/flashcard/${S}`);return d.jsxs("div",{className:"myLib-container",children:[d.jsx("h2",{className:"tittle-lib",children:"Thư viện của tôi"}),d.jsxs("ul",{className:"header-lib",children:[d.jsx("li",{className:`lib-item ${r==="boThe"?"active":""}`,onClick:()=>i("boThe"),children:"Bộ Thẻ"}),d.jsx("li",{className:`lib-item ${r==="khoaHoc"?"active":""}`,onClick:()=>i("khoaHoc"),children:"Khóa học"})]}),r==="boThe"&&d.jsxs("div",{className:"myLibCard",children:[e.map(S=>{const E=p[String(S.idNguoiDung)]||{};return d.jsx(M2,{item:S,author:E,onClick:N=>T(N)},S.idBoThe)}),e.length===0&&d.jsx("p",{className:"emty",children:"Không có bộ thẻ nào cả"})]}),r==="khoaHoc"&&d.jsx("div",{className:"myLop",children:h.map(S=>{const E=p[String(S.idNguoiDung)]||null;return d.jsx(MB,{item:S,author:E,isJoined:!0,onClick:N=>t(`/khoaHoc/${N}`),onEnter:N=>t(`/khoaHoc/${N}`)},S.idKhoaHoc)})})]})}const Wm=({Colums:t=[],Data:e=[],Action:n=[]})=>{const[r,i]=w.useState(5),[a,o]=w.useState(1),c=Math.max(1,Math.ceil((e?.length||0)/r)),u=(a-1)*r,h=u+r;w.useEffect(()=>{const _=Math.max(1,Math.ceil((e?.length||0)/r));o(T=>Math.min(T,_))},[e,r]);const m=w.useMemo(()=>Array.isArray(e)?e.slice(u,h):[],[e,u,h]),p=()=>o(_=>Math.max(1,_-1)),y=()=>o(_=>Math.min(c,_+1)),b=_=>{const T=Number(_.target.value);Number.isFinite(T)&&T>0&&(i(T),o(1))};return d.jsxs("div",{className:"table-wrapper",children:[d.jsxs("table",{className:"user-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[t.map((_,T)=>d.jsx("th",{children:_.name},T)),n?.length>0&&d.jsx("th",{children:"Action"})]})}),d.jsx("tbody",{children:m.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:t.length+(n?.length>0?1:0),style:{textAlign:"center",padding:16,opacity:.7},children:"Không có dữ liệu"})}):m.map(_=>d.jsxs("tr",{children:[t.map((T,S)=>d.jsx("td",{children:_[T.key]},S)),n?.length>0&&d.jsx("td",{children:d.jsx("div",{style:{display:"flex",justifyContent:"center",gap:8,flexWrap:"wrap"},children:n.map((T,S)=>d.jsx("button",{className:T.class,style:T.style,title:T.title||"",onClick:()=>{const E=T.onClick?.(_.id,_);typeof E=="function"&&E()},"aria-label":T.ariaLabel||T.name,children:T.name},S))})})]},_.id))})]}),d.jsxs("div",{className:"user-pagination",children:[d.jsxs("div",{className:"pagination-input",children:[d.jsx("span",{children:"Hiển thị"}),d.jsx("input",{type:"number",value:r,min:1,onChange:b})]}),d.jsxs("div",{className:"pagination-info",children:[d.jsx("span",{children:"Phần tử"}),d.jsx("button",{onClick:p,disabled:a===1,children:"<"}),d.jsxs("span",{style:{margin:"0 8px"},children:[a,"/",c]}),d.jsx("button",{onClick:y,disabled:a===c,children:">"})]})]})]})},Ym=({Data:t,onResult:e})=>{const[n,r]=w.useState(""),i=a=>{r(a.target.value)};return w.useEffect(()=>{const a=n.trim().toLowerCase(),o=(Array.isArray(t)?t:[]).filter(c=>`${c.username||""} ${c.fullname||""} ${c.email||""} ${c.name||""}`.toLowerCase().includes(a));e(o)},[n,t,e]),d.jsx("input",{className:"search-input",placeholder:"Tìm kiếm",value:n,onChange:i})},Xm=({id:t,onClose:e,onConfirm:n,message:r})=>d.jsx("div",{className:"delete-dialog-overlay",children:d.jsxs("div",{className:"delete-dialog",children:[d.jsxs("div",{className:"delete-dialog-header",children:[d.jsx("span",{className:"delete-dialog-title",children:r||"Bạn Có Muốn Xóa Dữ Liệu Này Không"}),d.jsx("button",{className:"delete-dialog-close",onClick:e,children:"X"})]}),d.jsxs("div",{className:"delete-dialog-actions",children:[d.jsx("button",{className:"delete-dialog-btn-cancel",onClick:e,children:"Không"}),d.jsx("button",{className:"delete-dialog-btn-confirm",onClick:()=>n(t),children:"Có"})]})]})}),Qm=({user:t,onClose:e,onSave:n,isEditMode:r=!1,Colums:i=[],showAvatar:a=!1,readOnlyKeys:o=[],selectOptions:c={},validationSchema:u,validateOnChange:h=!1})=>{const[m,p]=w.useState({...t}),[y,b]=w.useState({}),_=w.useRef(null);w.useEffect(()=>{p({...t}),b({})},[t]);const T=Y=>Y&&(typeof Y?.toDate=="function"||typeof Y?.seconds=="number"&&typeof Y?.nanoseconds=="number"),S=Y=>{try{if(typeof Y?.toDate=="function")return Y.toDate();if(typeof Y?.seconds=="number")return new Date(Y.seconds*1e3);if(Y instanceof Date)return Y;const ee=new Date(Y);return Number.isNaN(ee.getTime())?null:ee}catch{return null}},E=Y=>{if(Y==null)return"";if(T(Y)){const ee=S(Y);return ee?ee.toLocaleString("vi-VN"):""}return typeof Y=="object"?JSON.stringify(Y):String(Y)},N=Y=>Y?Y.map(ee=>typeof ee=="string"?{value:ee,label:ee}:{value:String(ee.value),label:ee.label??ee.value}):null,C=(Y,ee)=>N(Array.isArray(ee)?ee:c[Y]),L=(Y,ee)=>{const q=String(Y??""),G=(ee||[]).find(K=>String(K.value)===q);return G?G.label:q},D=(Y,ee)=>b(q=>({...q,[Y]:ee})),R=Y=>b(ee=>{const q={...ee};return delete q[Y],q}),k=w.useCallback(async(Y,ee)=>{if(!(!u||!u.validateAt))try{await u.validateAt(Y,ee),R(Y)}catch(q){D(Y,q?.message||"Giá trị không hợp lệ")}},[u]),I=w.useCallback(async()=>{if(!u)return{ok:!0};try{return await u.validate(m,{abortEarly:!1}),b({}),{ok:!0}}catch(Y){if(Y?.name==="ValidationError"){const ee={};for(const q of Y.inner||[])q.path&&!ee[q.path]&&(ee[q.path]=q.message);b(ee)}return{ok:!1}}},[u,m]),O=Y=>ee=>{const q=ee.target.value;p(G=>{const K={...G,[Y]:q};return h&&k(Y,K),K})},U=Y=>()=>k(Y,m),$=async()=>{const{ok:Y}=await I();Y&&n(m)},V=()=>{r&&_.current?.click()},B=Y=>{const ee=Y.target.files?.[0];if(!ee)return;const q=new FileReader;q.onload=G=>p(K=>({...K,image:G.target.result})),q.readAsDataURL(ee)};return d.jsx("div",{className:"user-detail-modal-overlay",children:d.jsxs("div",{className:"user-detail-modal",children:[d.jsxs("div",{className:"user-detail-modal-header",children:[d.jsx("h2",{children:"Thông tin chi tiết"}),d.jsx("button",{className:"modal-close-btn",onClick:e,children:"×"})]}),d.jsxs("div",{className:"user-detail-modal-content",children:[a&&d.jsxs("div",{className:"user-avatar-section",children:[d.jsxs("div",{className:"user-avatar",children:[d.jsx("div",{className:"avatar-placeholder",onClick:V,children:m.image?d.jsx("img",{src:m.image,alt:"Avatar",className:"avatar-image"}):d.jsx("div",{className:"avatar-icon",children:"👤"})}),r&&d.jsx("div",{className:"avatar-edit-icon",children:"+"})]}),d.jsx("input",{type:"file",ref:_,onChange:B,accept:"image/*",style:{display:"none"}})]}),d.jsx("div",{className:"user-info-section",children:i.map((Y,ee)=>{const q=Y.key,G=o.includes(q),K=m[q],oe=y[q],H=C(q,Y.options);return H?!r||G?d.jsxs("div",{className:"info-row",children:[d.jsx("label",{children:Y.name}),d.jsx("span",{children:L(K,H)})]},ee):d.jsxs("div",{className:"info-row",children:[d.jsx("label",{children:Y.name}),d.jsx("select",{value:K??"",onChange:O(q),onBlur:U(q),className:`edit-input ${oe?"error":""}`,children:H.map(Z=>d.jsx("option",{value:String(Z.value),children:Z.label},String(Z.value)))}),oe&&d.jsx("div",{className:"field-error",children:oe})]},ee):Y.type==="password"?!r||G?d.jsxs("div",{className:"info-row",children:[d.jsx("label",{children:Y.name}),d.jsx("span",{children:"••••••"})]},ee):d.jsxs("div",{className:"info-row",children:[d.jsx("label",{children:Y.name}),d.jsx("input",{type:"password",value:String(K??""),onChange:O(q),onBlur:U(q),className:`edit-input ${oe?"error":""}`}),oe&&d.jsx("div",{className:"field-error",children:oe})]},ee):!r||G?d.jsxs("div",{className:"info-row",children:[d.jsx("label",{children:Y.name}),d.jsx("span",{children:E(K)})]},ee):d.jsxs("div",{className:"info-row",children:[d.jsx("label",{children:Y.name}),d.jsx("input",{type:"text",value:String(K??""),onChange:O(q),onBlur:U(q),className:`edit-input ${oe?"error":""}`}),oe&&d.jsx("div",{className:"field-error",children:oe})]},ee)})})]}),d.jsxs("div",{className:"user-detail-modal-actions",children:[d.jsx("button",{className:"btn-cancel",onClick:e,children:"Đóng"}),r?d.jsx("button",{className:"btn-save",onClick:$,children:"Lưu"}):d.jsx("button",{className:"btn-edit",onClick:()=>n(m,!0),children:"Chỉnh sửa"})]})]})})},L2=({onClose:t,onSave:e,Colums:n,showAvatar:r,validationSchema:i,validateOnChange:a=!1})=>{const o=n.reduce((R,k)=>(R[k.key]="",R),{}),[c,u]=w.useState({...o,created:new Date().toLocaleDateString("vi-VN")}),[h,m]=w.useState({}),p=w.useRef(null),y=(R,k)=>m(I=>({...I,[R]:k})),b=R=>m(k=>{const I={...k};return delete I[R],I}),_=w.useCallback(async(R,k)=>{if(!(!i||!i.validateAt))try{await i.validateAt(R,k),b(R)}catch(I){y(R,I?.message||"Giá trị không hợp lệ")}},[i]),T=w.useCallback(async()=>{if(!i)return{ok:!0};try{return await i.validate(c,{abortEarly:!1}),m({}),{ok:!0}}catch(R){if(R?.name==="ValidationError"){const k={};for(const I of R.inner||[])I.path&&!k[I.path]&&(k[I.path]=I.message);m(k)}return{ok:!1}}},[i,c]),S=R=>k=>{const I=k.target.value;u(O=>{const U={...O,[R]:I};return a&&_(R,U),U})},E=R=>()=>_(R,c),N=R=>{R.key==="Enter"&&(R.preventDefault(),C())},C=async()=>{const{ok:R}=await T();R&&e(c)},L=R=>{const k=R.target.files?.[0];if(k){const I=new FileReader;I.onload=O=>{u(U=>({...U,image:O.target.result}))},I.readAsDataURL(k)}},D=()=>p.current?.click();return d.jsx("div",{className:"user-detail-modal-overlay",children:d.jsxs("div",{className:"user-detail-modal",onKeyDown:N,children:[d.jsxs("div",{className:"user-detail-modal-header",children:[d.jsx("h2",{children:"Thêm mới"}),d.jsx("button",{className:"modal-close-btn",onClick:t,children:"×"})]}),d.jsxs("div",{className:"user-detail-modal-content",children:[r&&d.jsxs("div",{className:"user-avatar-section",children:[d.jsxs("div",{className:"user-avatar",children:[d.jsx("div",{className:"avatar-placeholder",onClick:D,children:c.image?d.jsx("img",{src:c.image,alt:"Avatar",className:"avatar-image"}):d.jsx("div",{className:"avatar-icon",children:"👤"})}),d.jsx("div",{className:"avatar-edit-icon",children:"+"})]}),d.jsx("input",{type:"file",ref:p,onChange:L,accept:"image/*",style:{display:"none"}})]}),d.jsx("div",{className:"user-info-section",children:n.map((R,k)=>{const I=R.key,O=c[I]??"",U=h[I],$=`err-${I}`;return Array.isArray(R.options)?d.jsxs("div",{className:"info-row",children:[d.jsx("label",{htmlFor:I,children:R.name}),d.jsxs("div",{className:"input-col",children:[d.jsxs("select",{id:I,value:O,onChange:S(I),onBlur:E(I),"aria-invalid":!!U,"aria-describedby":U?$:void 0,className:`edit-input ${U?"error":""}`,children:[d.jsx("option",{value:"",children:"-- chọn --"}),R.options.map(V=>d.jsx("option",{value:String(V.value),children:V.label??V.value},String(V.value)))]}),U&&d.jsx("div",{id:$,className:"field-error",children:U})]})]},k):I!=="created"&&I!=="image"&&I!=="id"?d.jsxs("div",{className:"info-row",children:[d.jsx("label",{htmlFor:I,children:R.name}),d.jsxs("div",{className:"input-col",children:[d.jsx("input",{id:I,type:"text",value:O,onChange:S(I),onBlur:E(I),"aria-invalid":!!U,"aria-describedby":U?$:void 0,className:`edit-input ${U?"error":""}`,placeholder:`Nhập ${R.name.toLowerCase()}`}),U&&d.jsx("div",{id:$,className:"field-error",children:U})]})]},k):null})})]}),d.jsxs("div",{className:"user-detail-modal-actions",children:[d.jsx("button",{className:"btn-cancel",onClick:t,children:"Hủy"}),d.jsx("button",{className:"btn-save",onClick:C,children:"Thêm"})]})]})})},W0=({isOpen:t,onClose:e,onExport:n,filteredData:r=[],title:i="Xuất dữ liệu",columns:a=[]})=>{const[o,c]=w.useState("csv"),[u,h]=w.useState({}),[m,p]=w.useState(!1);w.useEffect(()=>{const N={};a.forEach(C=>{N[C.key]=!0}),h(N)},[a]);const y=N=>{c(N)},b=N=>{h(C=>({...C,[N]:!C[N]}))},_=(N,C,L)=>{const D=[],R=[];L.forEach($=>{C[$.key]&&(D.push($.name),R.push($.key))});const k=[D.join(","),...N.map($=>{const V=[];return R.forEach(B=>{const Y=$[B];typeof Y=="string"&&(Y.includes(",")||Y.includes(`
`))?V.push(`"${Y}"`):V.push(Y||"")}),V.join(",")})].join(`
`),I=new Blob([k],{type:"text/csv;charset=utf-8;"}),O=document.createElement("a"),U=URL.createObjectURL(I);O.setAttribute("href",U),O.setAttribute("download",`export_${new Date().toISOString().split("T")[0]}.csv`),O.style.visibility="hidden",document.body.appendChild(O),O.click(),document.body.removeChild(O)},T=(N,C,L)=>{const D=N.map(U=>{const $={};return L.forEach(V=>{C[V.key]&&($[V.key]=U[V.key])}),$}),R=JSON.stringify(D,null,2),k=new Blob([R],{type:"application/json"}),I=document.createElement("a"),O=URL.createObjectURL(k);I.setAttribute("href",O),I.setAttribute("download",`export_${new Date().toISOString().split("T")[0]}.json`),I.style.visibility="hidden",document.body.appendChild(I),I.click(),document.body.removeChild(I)},S=(N,C,L)=>{const D=[],R=[];L.forEach($=>{C[$.key]&&(D.push($.name),R.push($.key))});const k=["DANH SÁCH DỮ LIỆU","=".repeat(50),"",D.join("	"),...N.map($=>{const V=[];return R.forEach(B=>{V.push($[B]||"")}),V.join("	")})].join(`
`),I=new Blob([k],{type:"text/plain;charset=utf-8;"}),O=document.createElement("a"),U=URL.createObjectURL(I);O.setAttribute("href",U),O.setAttribute("download",`export_${new Date().toISOString().split("T")[0]}.txt`),O.style.visibility="hidden",document.body.appendChild(O),O.click(),document.body.removeChild(O)},E=async()=>{if(r.length===0){alert("Không có dữ liệu để xuất!");return}if(a.length===0){alert("Chưa cấu hình cột để xuất!");return}p(!0);try{switch(o){case"csv":_(r,u,a);break;case"json":T(r,u,a);break;case"txt":S(r,u,a);break;default:throw new Error("Định dạng không được hỗ trợ")}n&&n({format:o,columns:u,data:r}),alert(`Đã xuất dữ liệu thành công với định dạng ${o.toUpperCase()}`),e()}catch(N){console.error("Lỗi khi xuất dữ liệu:",N),alert("Có lỗi xảy ra khi xuất dữ liệu. Vui lòng thử lại!")}finally{p(!1)}};return t?d.jsx("div",{className:"export-modal-overlay",children:d.jsxs("div",{className:"export-modal",children:[d.jsxs("div",{className:"export-modal-header",children:[d.jsx("h3",{className:"export-modal-title",children:i}),d.jsx("button",{className:"export-modal-close",onClick:e,children:d.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),d.jsxs("div",{className:"export-modal-content",children:[d.jsx("div",{className:"export-info",children:d.jsxs("b",{children:["Tổng số bản ghi: ",d.jsx("strong",{children:r.length})]})}),d.jsxs("div",{className:"export-section",children:[d.jsxs("div",{className:"section-header",children:[d.jsx("svg",{className:"section-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{d:"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),d.jsx("span",{className:"section-title",children:"Chọn định dạng file"})]}),d.jsxs("div",{className:"format-options",children:[d.jsxs("label",{className:"format-option",children:[d.jsx("input",{type:"radio",name:"format",value:"csv",checked:o==="csv",onChange:()=>y("csv")}),d.jsx("span",{className:"radio-custom"}),d.jsx("span",{children:"CSV"})]}),d.jsxs("label",{className:"format-option",children:[d.jsx("input",{type:"radio",name:"format",value:"json",checked:o==="json",onChange:()=>y("json")}),d.jsx("span",{className:"radio-custom"}),d.jsx("span",{children:"JSON"})]}),d.jsxs("label",{className:"format-option",children:[d.jsx("input",{type:"radio",name:"format",value:"txt",checked:o==="txt",onChange:()=>y("txt")}),d.jsx("span",{className:"radio-custom"}),d.jsx("span",{children:"TXT"})]})]})]}),d.jsxs("div",{className:"export-section",children:[d.jsxs("div",{className:"section-header",children:[d.jsxs("svg",{className:"section-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{d:"M9 11L12 14L22 4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),d.jsx("path",{d:"M21 12V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),d.jsx("span",{className:"section-title",children:"Chọn cột cần xuất"})]}),d.jsx("div",{className:"column-options",children:a.map(N=>d.jsxs("label",{className:"column-option",children:[d.jsx("input",{type:"checkbox",checked:u[N.key]||!1,onChange:()=>b(N.key)}),d.jsx("span",{className:"checkbox-custom"}),d.jsx("span",{children:N.name})]},N.key))})]})]}),d.jsx("div",{className:"export-modal-footer",children:d.jsx("button",{className:"export-button",onClick:E,disabled:m,children:m?"Đang xuất...":"Xuất dữ liệu"})})]})}):null},L0e=t=>t instanceof Date&&!isNaN(t)?t.toLocaleString("vi-VN"):"",cc=t=>typeof t=="string"?t.trim():t??"",i3=t=>Object.fromEntries(Object.entries(t).filter(([,e])=>e!==void 0)),Dd=[{value:"HOC_VIEN",label:"Học viên"},{value:"GIANG_VIEN",label:"Giảng viên"},{value:"ADMIN",label:"Quản trị"}],LB=Dd.map(t=>t.value),V0e=pa({username:Nt().trim().required("Vui lòng nhập Tên đăng nhập").min(3,"Tối thiểu 3 ký tự"),fullname:Nt().trim().required("Vui lòng nhập Họ tên").min(3,"Tối thiểu 3 ký tự"),email:Nt().trim().required("Vui lòng nhập Email").email("Email không hợp lệ"),role:Nt().oneOf(LB,"Vai trò không hợp lệ").required("Vui lòng chọn vai trò")}),B0e=pa({id:Nt().trim().matches(/^[\w-]*$/,"ID chỉ gồm chữ, số, gạch dưới, gạch ngang").max(64,"ID quá dài").notRequired(),username:Nt().trim().required("Vui lòng nhập Tên đăng nhập").min(3,"Tối thiểu 3 ký tự"),fullname:Nt().trim().required("Vui lòng nhập Họ tên").min(3,"Tối thiểu 3 ký tự"),email:Nt().trim().required("Vui lòng nhập Email").email("Email không hợp lệ"),role:Nt().oneOf(LB,"Vai trò không hợp lệ").required("Vui lòng chọn vai trò")});function U0e(){const[t,e]=w.useState([]),[n,r]=w.useState([]),[i,a]=w.useState(!1),[o,c]=w.useState(null),[u,h]=w.useState(!1),[m,p]=w.useState(!1),[y,b]=w.useState(null),[_,T]=w.useState(!1),[S,E]=w.useState(!1);w.useEffect(()=>{const q=nt(Oe(se,"nguoiDung"),G=>{const K=G.docs.map(oe=>{const H=oe.data(),Z=H?.ngayTaoTaiKhoan?.toDate?.()??(typeof H?.ngayTaoTaiKhoan=="string"?new Date(H.ngayTaoTaiKhoan):null);return{id:oe.id,username:H?.tenNguoiDung??"",fullname:H?.hoten??"",email:H?.email??"",role:H?.vaiTro??"",created:Z?L0e(Z):"",_raw:H}});e(K),r(K)},G=>{console.error("Lỗi đọc collection nguoiDung:",G),e([]),r([])});return()=>q()},[]);const N=[{name:"Mã (docId)",key:"id"},{name:"Tên đăng nhập",key:"username"},{name:"Họ tên",key:"fullname"},{name:"Email",key:"email"},{name:"Vai trò",key:"role"},{name:"Ngày tạo",key:"created"}],C=[{name:"Mã (docId)",key:"id"},{name:"Tên đăng nhập",key:"username"},{name:"Họ tên",key:"fullname"},{name:"Email",key:"email"},{name:"Vai trò",key:"role",options:Dd},{name:"Ngày tạo",key:"created"}],L=[{name:"Mã (tùy chọn - để trống sẽ tự tạo)",key:"id"},{name:"Tên đăng nhập",key:"username"},{name:"Họ tên",key:"fullname"},{name:"Email",key:"email"},{name:"Vai trò",key:"role",options:Dd}],D=[{name:"Mã",key:"id"},{name:"Tên đăng nhập",key:"username"},{name:"Họ tên",key:"fullname"},{name:"Email",key:"email"},{name:"Vai trò",key:"role"},{name:"Ngày tạo",key:"created"}],R=q=>{c(q),a(!0)},k=()=>{a(!1),c(null)},I=async q=>{const G=q??o;if(G)try{await Tl(Ae(se,"nguoiDung",G)),k()}catch(K){console.error("Xóa người dùng thất bại:",K),alert(`Không thể xoá người dùng.
Chi tiết: ${K?.message||K}`)}},O=q=>{const G=t.find(K=>String(K.id)===String(q));G&&(b(G),p(!0),T(!1))},U=()=>{p(!1),b(null),T(!1)},$=async(q,G=!1)=>{if(G){T(!0);return}if(!q?.id)return;const K=i3({tenNguoiDung:cc(q.username),hoten:cc(q.fullname),email:cc(q.email),vaiTro:q.role||"HOC_VIEN"});try{await yt(Ae(se,"nguoiDung",q.id),K),U()}catch(oe){console.error("Cập nhật người dùng thất bại:",oe),alert(`Không thể lưu thay đổi.
Chi tiết: ${oe?.message||oe}`)}},V=()=>h(!0),B=()=>h(!1),Y=async q=>{try{const G=cc(q?.id||""),K=i3({tenNguoiDung:cc(q?.username||""),hoten:cc(q?.fullname||""),email:cc(q?.email||""),vaiTro:q?.role||"HOC_VIEN",ngayTaoTaiKhoan:jt()});if(G)await hi(Ae(se,"nguoiDung",G),{...K,idNguoiDung:G});else{const oe=await Mc(Oe(se,"nguoiDung"),K);await yt(oe,{idNguoiDung:oe.id})}B()}catch(G){console.error("Thêm người dùng thất bại:",G),alert(`Không thể thêm người dùng.
Chi tiết: ${G?.message||G}`)}},ee=[{name:"👀",class:"edit-button",style:{cursor:"pointer",marginRight:8,fontSize:"1.2rem"},onClick:q=>()=>O(q)},{name:"🗑️",class:"delete-button",style:{cursor:"pointer",fontSize:"1.2rem"},onClick:q=>()=>R(q)}];return d.jsxs("div",{className:"main-content-admin-user",children:[d.jsx("h1",{children:"Quản lý người dùng"}),d.jsxs("div",{className:"user-actions",children:[d.jsxs("div",{className:"user-actions-buttons",children:[d.jsx("button",{className:"btn btn-primary",onClick:V,children:"Thêm"}),d.jsx("button",{className:"btn btn-secondary",onClick:()=>E(!0),children:"Xuất"})]}),d.jsx(Ym,{Data:t,onResult:r})]}),d.jsx(Wm,{Colums:N,Data:n,Action:ee}),i&&d.jsx(Xm,{id:o,onClose:k,onConfirm:I,message:"Bạn có muốn xóa người dùng này không?"}),m&&y&&d.jsx(Qm,{user:y,onClose:U,onSave:$,isEditMode:_,Colums:C,showAvatar:!1,readOnlyKeys:["id","created"],selectFields:{role:Dd},validationSchema:V0e,validateOnChange:!0}),u&&d.jsx(L2,{onClose:B,onSave:Y,Colums:L,showAvatar:!1,selectFields:{role:Dd},validationSchema:B0e,validateOnChange:!0}),S&&d.jsx(W0,{isOpen:S,onClose:()=>E(!1),filteredData:n,title:"Xuất thông tin người dùng",columns:D})]})}const $0e=()=>{const[t,e]=w.useState([]);return w.useEffect(()=>{const n=nt(Oe(se,"nguoiDung"),r=>{const i=r.docs.map(a=>{const o=a.data();return{...o,_docId:a.id,idNguoiDung:o?.idNguoiDung||a.id,ngayTaoTaiKhoan:o?.ngayTaoTaiKhoan?.toDate?.()??o?.ngayTaoTaiKhoan??null}});e(i)},r=>{console.error("Lỗi đọc nguoiDung:",r),e([])});return()=>n()},[]),d.jsx(U0e,{Data:t})},F0e=t=>t==="cong_khai"?"Công khai":"Cá nhân",z0e=t=>t==="Công khai"?"cong_khai":"ca_nhan",a3=[{name:"ID",key:"id"},{name:"Tên bộ thẻ",key:"name"},{name:"Chế độ",key:"cheDoVN"},{name:"Số thẻ",key:"numBer"},{name:"Lượt học",key:"luotHoc"},{name:"Người tạo",key:"userCreated"}],H0e=[{name:"ID",key:"id"},{name:"Tên bộ thẻ",key:"name"},{name:"Người tạo",key:"userCreated"},{name:"ID người tạo",key:"idNguoiDung"},{name:"Chế độ",key:"cheDoVN"},{name:"Số thẻ",key:"numBer"},{name:"Lượt học",key:"luotHoc"},{name:"Ngày tạo",key:"ngayTao"},{name:"Sửa gần nhất",key:"ngayChinhSua"}];function s3(t){if(!t)return"";try{const e=typeof t?.toDate=="function"?t.toDate():typeof t?.seconds=="number"?new Date(t.seconds*1e3):t instanceof Date?t:new Date(t);return Number.isNaN(e?.getTime?.())?"":e.toLocaleString("vi-VN")}catch{return""}}function o3(t={}){const e=String(t.id??t.docId??t._docId??t.idBoThe??""),n=typeof t.soTu=="number"?t.soTu:Array.isArray(t.danhSachThe)?t.danhSachThe.length:0,r=Number(t.luotHoc||0);return{id:e,name:t.tenBoThe??t.name??"",userCreated:t.userCreated??t.tenNguoiTao??t._tenNguoiTao??"",idNguoiDung:t.idNguoiDung??"",cheDoVN:F0e(t.cheDo),numBer:String(n),luotHoc:String(r),ngayTao:s3(t.ngayTao),ngayChinhSua:s3(t.ngayChinhSua),_raw:t}}async function h_(t){const e=Ae(se,"boThe",String(t));if((await ht(e)).exists())return e;const r=await ct(Ge(Oe(se,"boThe"),Qe("idBoThe","==",String(t)),vn(1)));return r.empty?null:r.docs[0].ref}const q0e=pa({name:Nt().trim().required("Vui lòng nhập tên bộ thẻ").min(2).max(120),numBer:XE().typeError("Số thẻ phải là số").integer("Số thẻ phải là số nguyên").min(0,"Số thẻ không âm").nullable(),cheDoVN:Nt().oneOf(["Công khai","Cá nhân"]).required()}),K0e=({Data:t=[]})=>{const[e,n]=w.useState(t);w.useEffect(()=>n(t),[t]);const r=w.useMemo(()=>(e||[]).map(o3),[e]),[i,a]=w.useState(r);w.useEffect(()=>a(r),[r]);const[o,c]=w.useState(!1),[u,h]=w.useState(null),[m,p]=w.useState(!1),[y,b]=w.useState(null),[_,T]=w.useState(!1),[S,E]=w.useState(!1),N=O=>{h(O),c(!0)},C=()=>{c(!1),h(null)},L=async O=>{const U=O??u;if(U){try{const $=await h_(U);if(!$)return alert("Không tìm thấy bộ thẻ để xoá.");await Tl($)}catch($){console.error($),alert("Xoá bộ thẻ thất bại.")}C()}},D=async O=>{try{T(!1);const U=await h_(O);if(!U)return alert("Không tìm thấy bộ thẻ.");const $=await ht(U);if(!$.exists())return alert("Bộ thẻ đã bị xoá.");const V=o3({id:U.id,...$.data()});b({id:V.id,name:V.name,userCreated:V.userCreated,idNguoiDung:V.idNguoiDung,cheDoVN:V.cheDoVN,numBer:V.numBer,luotHoc:V.luotHoc,ngayTao:V.ngayTao,ngayChinhSua:V.ngayChinhSua}),p(!0)}catch(U){console.error(U),alert("Không thể mở chi tiết.")}},R=()=>{p(!1),b(null),T(!1)},k=async(O,U=!1)=>{if(U){T(!0);return}try{const $=await h_(O.id);if($){const V={tenBoThe:String(O.name||"").trim(),cheDo:z0e(O.cheDoVN),ngayChinhSua:jt()};if(O.numBer!==void 0&&O.numBer!==""){const B=Number(O.numBer);Number.isFinite(B)&&(V.soTu=B)}await yt($,V)}}catch($){console.error($),alert("Cập nhật bộ thẻ thất bại.")}R()},I=[{name:"👀",class:"edit-button",style:{cursor:"pointer",marginRight:8,fontSize:"1.2rem"},onClick:O=>()=>D(O)},{name:"🗑️",class:"delete-button",style:{cursor:"pointer",fontSize:"1.2rem"},onClick:O=>()=>N(O)}];return d.jsxs("div",{className:"main-content-admin-user",children:[d.jsx("h1",{children:"Quản Lý Bộ Thẻ"}),d.jsxs("div",{className:"user-actions",children:[d.jsx("div",{className:"user-actions-buttons",children:d.jsx("button",{className:"btn btn-secondary",onClick:()=>E(!0),children:"Xuất"})}),d.jsx(Ym,{Data:r,onResult:a})]}),d.jsx(Wm,{Colums:a3,Data:i,Action:I}),o&&d.jsx(Xm,{id:u,onClose:C,onConfirm:L,message:"Bạn có muốn xóa bộ thẻ này không?"}),m&&y&&d.jsx(Qm,{user:y,onClose:R,onSave:k,isEditMode:_,Colums:H0e,showAvatar:!1,readOnlyKeys:["id","userCreated","idNguoiDung","luotHoc","ngayTao","ngayChinhSua"],validationSchema:q0e,validateOnChange:!1,selectOptions:{cheDoVN:["Công khai","Cá nhân"]}}),S&&d.jsx(W0,{isOpen:S,onClose:()=>E(!1),filteredData:i,title:"Xuất danh sách bộ thẻ",columns:a3,showAvatar:!1})]})},G0e=()=>{const[t,e]=w.useState([]),[n,r]=w.useState([]);w.useEffect(()=>{const a=nt(Oe(se,"boThe"),c=>{const u=c.docs.map(h=>({_docId:h.id,...h.data()}));e(u)},()=>e([])),o=nt(Oe(se,"nguoiDung"),c=>{const u=c.docs.map(h=>({_docId:h.id,...h.data()}));r(u)},()=>r([]));return()=>{a(),o()}},[]);const i=w.useMemo(()=>{const a=new Map(n.map(o=>[String(o.idNguoiDung??o._docId),o.tenNguoiDung||"Ẩn danh"]));return(Array.isArray(t)?t:[]).map(o=>{const c=o.idBoThe??o._docId??"",u=o.tenBoThe??"",h=String(o.idNguoiDung??""),m=a.get(h)||"Ẩn danh",p=o.soTu??(Array.isArray(o.danhSachThe)?o.danhSachThe.length:0)??0;return{id:c,name:u,userCreated:m,numBer:p}})},[t,n]);return d.jsx(K0e,{Data:i})},l3=t=>t instanceof Date&&!Number.isNaN(t)?t.toLocaleDateString("vi-VN"):"",Gu=t=>{if(!t)return null;if(typeof t?.toDate=="function")return t.toDate();if(typeof t=="string"&&t.includes("/")){const[n,r,i]=t.split("/").map(Number);if(n&&r&&i)return new Date(i,r-1,n)}if(Number.isFinite(Number(t))){const n=Number(t);return new Date(n>1e12?n:n*1e3)}const e=new Date(t);return Number.isNaN(e)?null:e};async function dT(t){const e=Ae(se,"khoaHoc",String(t));if((await ht(e)).exists())return e;const r=Ge(Oe(se,"khoaHoc"),Qe("idKhoaHoc","==",String(t)),vn(1)),i=await ct(r);return i.empty?null:i.docs[0].ref}async function W0e(t){const e=await dT(t);if(!e)return null;const n=await ht(e);return n.exists()?{_docId:n.id,...n.data()}:null}const Y0e=({Data:t=[]})=>{const[e,n]=w.useState([]);w.useEffect(()=>{const G=nt(Oe(se,"nguoiDung"),K=>{const oe=K.docs.map(H=>({_docId:H.id,...H.data()}));n(oe)},()=>n([]));return()=>G()},[]);const r=w.useMemo(()=>e.map(G=>({value:String(G.idNguoiDung??G._docId),label:G.tenNguoiDung||G.username||G.email||`ID: ${G.idNguoiDung??G._docId}`})),[e]),i=w.useMemo(()=>{const G=new Map(r.map(K=>[String(K.value),K.label]));return K=>G.get(String(K))||(K!=null?`ID: ${K}`:"—")},[r]),a=w.useMemo(()=>new Set(r.map(G=>String(G.value))),[r]),o=w.useMemo(()=>(Array.isArray(t)?t:[]).map(G=>{const K=Gu(G.ngayTao)||Gu(G.createdAt)||Gu(G._docId),oe=String(G.idNguoiDung??G.userCreated??""),H=Array.isArray(G.kienThuc)?G.kienThuc:[];return{id:String(G.idKhoaHoc??G._docId??G.id??""),name:G.tenKhoaHoc??G.name??"",userCreated:i(oe),knowledgeText:H.join(", "),description:G.moTa??"",created:l3(K),_creatorId:oe}}),[t,i]),[c,u]=w.useState(o);w.useEffect(()=>u(o),[o]);const h=[{name:"Mã",key:"id"},{name:"Tên khóa học",key:"name"},{name:"Người tạo",key:"userCreated"},{name:"Kiến thức",key:"knowledgeText"},{name:"Mô tả",key:"description"},{name:"Ngày tạo",key:"created"}],[m,p]=w.useState(!1),[y,b]=w.useState(null),[_,T]=w.useState(!1),[S,E]=w.useState(null),[N,C]=w.useState(null),[L,D]=w.useState(!1),[R,k]=w.useState(!1),I=G=>{b(G),p(!0)},O=()=>{p(!1),b(null)},U=async G=>{const K=G??y;if(K){try{const oe=await dT(K);if(!oe){console.warn("Không tìm thấy tài liệu 'khoaHoc' để xoá:",K),O();return}const H=await ht(oe),Z={_docId:oe.id,...H.data()},te=String(Z.idKhoaHoc??Z._docId),fe=Oe(se,"boThe"),Ce=Ge(fe,Qe("idKhoaHoc","==",te)),Ie=te!==Z._docId?Ge(fe,Qe("idKhoaHoc","==",Z._docId)):null,[Fe,Pt]=await Promise.all([ct(Ce),Ie?ct(Ie):Promise.resolve(null)]),Ne=(Fe?.size||0)+(Pt?.size||0);if(Ne>0){alert(`Không thể xoá vì còn ${Ne} bộ thẻ đang tham chiếu tới khóa học này.
Vui lòng xoá/đổi liên kết các bộ thẻ trước.`),O();return}await Tl(oe)}catch(oe){console.error("Xoá khóa học thất bại:",oe),alert("Xoá khóa học thất bại.")}O()}},$=async G=>{try{const K=await W0e(G);if(!K)return;const oe=l3(Gu(K.ngayTao)||Gu(K.createdAt)||Gu(K._docId)),H=String(K.idNguoiDung??""),Z=Array.isArray(K.kienThuc)?K.kienThuc:[];C(K),E({id:K.idKhoaHoc??K._docId,name:K.tenKhoaHoc??"",userCreated:H,description:K.moTa??"",knowledgeText:Z.join(", "),created:oe}),T(!0),D(!1)}catch(K){console.error(K)}},V=()=>{T(!1),E(null),C(null),D(!1)},B=w.useMemo(()=>pa({name:Nt().trim().required("Tên khóa học không được để trống").min(3,"Tên tối thiểu 3 ký tự").max(120,"Tên tối đa 120 ký tự"),userCreated:Nt().required("Vui lòng chọn người tạo").test("valid-creator","Người tạo không hợp lệ",G=>G?a.has(String(G)):!1),description:Nt().max(1e3,"Mô tả tối đa 1000 ký tự").nullable(),knowledgeText:Nt().nullable()}),[a]),Y=G=>String(G||"").split(/[;,]/).map(K=>K.trim()).filter(Boolean),ee=async(G,K=!1)=>{if(K){D(!0);return}if(!N)return;const oe=String(G.name??"").trim(),H=String(G.userCreated??N.idNguoiDung??""),Z=String(G.description??"").trim(),te=Y(G.knowledgeText);try{const fe=await dT(G.id);fe?await yt(fe,{tenKhoaHoc:oe,idNguoiDung:H,moTa:Z,kienThuc:te}):console.warn("Không tìm thấy tài liệu 'khoaHoc' để cập nhật:",G.id)}catch(fe){console.error("Cập nhật khóa học thất bại:",fe),alert("Cập nhật khóa học thất bại.")}V()},q=[{name:"👀",class:"edit-button",style:{cursor:"pointer",marginRight:8,fontSize:"1.2rem"},onClick:G=>()=>$(G)},{name:"🗑️",class:"delete-button",style:{cursor:"pointer",fontSize:"1.2rem"},onClick:G=>()=>I(G)}];return d.jsxs("div",{className:"main-content-admin-user",children:[d.jsx("h1",{children:"Quản lý khóa học"}),d.jsxs("div",{className:"user-actions",children:[d.jsx("div",{className:"user-actions-buttons",children:d.jsx("button",{className:"btn btn-secondary",onClick:()=>k(!0),children:"Xuất"})}),d.jsx(Ym,{Data:o,onResult:u})]}),d.jsx(Wm,{Colums:h,Data:c,Action:q}),m&&d.jsx(Xm,{id:y,onClose:O,onConfirm:U,message:"Bạn có chắc muốn xóa khóa học này không?"}),_&&S&&d.jsx(Qm,{user:S,onClose:V,onSave:ee,isEditMode:L,Colums:[{name:"Mã",key:"id"},{name:"Tên khóa học",key:"name"},{name:"Người tạo",key:"userCreated",options:r},{name:"Mô tả",key:"description"},{name:"Kiến thức (ngăn cách bởi dấu phẩy)",key:"knowledgeText"},{name:"Ngày tạo",key:"created"}],showAvatar:!1,readOnlyKeys:["id","created"],validationSchema:B,validateOnChange:!1,selectFields:{userCreated:r},selectLabels:{userCreated:G=>{const K=r.find(oe=>String(oe.value)===String(G));return K?K.label:G}}}),R&&d.jsx(W0,{isOpen:R,onClose:()=>k(!1),filteredData:c,title:"Xuất danh sách khóa học",columns:h})]})},X0e=t=>t instanceof Date&&!isNaN(t)?t.toLocaleDateString("vi-VN"):"",d_=t=>{if(!t)return null;if(typeof t?.toDate=="function")return t.toDate();if(typeof t=="string"&&t.includes("/")){const[n,r,i]=t.split("/").map(Number);if(n&&r&&i)return new Date(i,r-1,n)}if(Number.isFinite(Number(t))){const n=Number(t);return new Date(n>1e12?n:n*1e3)}const e=new Date(t);return isNaN(e)?null:e},Q0e=()=>{const[t,e]=w.useState([]),[n,r]=w.useState([]);w.useEffect(()=>{const a=nt(Oe(se,"khoaHoc"),o=>{const c=o.docs.map(u=>({_docId:u.id,...u.data()}));e(c)},()=>e([]));return()=>a()},[]),w.useEffect(()=>{const a=nt(Oe(se,"nguoiDung"),o=>{const c=o.docs.map(u=>({_docId:u.id,...u.data()}));r(c)},()=>r([]));return()=>a()},[]);const i=w.useMemo(()=>{const a=new Map(n.map(c=>[String(c.idNguoiDung??c._docId),c.tenNguoiDung||c.username||c.email||"Ẩn danh"])),o=(Array.isArray(t)?t:[]).map((c,u)=>{const h=c.idKhoaHoc??c._docId??`course_${u+1}`,m=c.tenKhoaHoc??c.name??"(Không tên)",p=d_(c.createdAt)||d_(c.ngayTao)||d_(c._docId),y=a.get(String(c.idNguoiDung))||"Ẩn danh";return{id:h,name:m,userCreated:y,created:X0e(p),_sortKey:p?p.getTime():0}});return o.sort((c,u)=>u._sortKey-c._sortKey),o.map(({_sortKey:c,...u})=>u)},[t,n]);return d.jsx(Y0e,{Data:i})};function m_({nhan:t,giaTri:e}){return d.jsxs("div",{className:"info-item",children:[d.jsxs("div",{className:"info-account",children:[d.jsxs("div",{className:"info-label",children:[t," :"]}),d.jsx("div",{className:"info-value",children:String(e??"—")})]}),d.jsx("div",{className:"info-action"})]})}function g_({nhan:t,loai:e="text",giaTriBanDau:n,hienThiGiaTri:r,goiY:i,laMatKhau:a=!1,onLuu:o,xacThuc:c=()=>!0}){const[u,h]=w.useState(!1),[m,p]=w.useState(n??""),[y,b]=w.useState(""),_=()=>{p(a?"":n??""),b(""),h(!0)},T=()=>{p(n??""),b(""),h(!1)},S=()=>{const E=c(m);if(E!==!0){b(E||"Giá trị không hợp lệ");return}o(m),h(!1)};return d.jsxs("div",{className:"info-item",children:[d.jsxs("div",{className:"info-account",children:[d.jsxs("div",{className:"info-label",children:[t," :"]}),u?d.jsxs("div",{style:{width:"100%"},children:[d.jsx("input",{className:"input",type:e,placeholder:i,value:m,onChange:E=>p(E.target.value)}),y&&d.jsx("div",{style:{color:"#dc3545",fontSize:12,marginTop:6},children:y})]}):d.jsx("div",{className:"info-value",children:r!==void 0?r:n??"—"})]}),d.jsx("div",{className:"info-action",style:{display:"flex",gap:8},children:u?d.jsxs(d.Fragment,{children:[d.jsx("button",{className:"btn",onClick:T,children:"Hủy"}),d.jsx("button",{className:"btn btn-primary",onClick:S,children:"Lưu"})]}):d.jsx("button",{className:"btn",onClick:_,children:"Sửa"})})]})}function Z0e({giaTri:t="",onLuu:e}){const n=w.useRef(null),[r,i]=w.useState(""),[a,o]=w.useState(""),c=()=>n.current?.click(),u=y=>{o("");const b=y.target.files?.[0];if(!b)return;if(!/^image\/(png|jpe?g|webp|gif)$/i.test(b.type))return o("Chỉ chấp nhận PNG, JPG, JPEG, WEBP, GIF.");const T=4;if(b.size>T*1024*1024)return o(`Kích thước tối đa ${T}MB.`);const S=new FileReader;S.onload=()=>i(S.result?.toString()||""),S.readAsDataURL(b)},h=()=>{r&&(e?.(r),i(""))},m=()=>{i(""),o(""),n.current&&(n.current.value="")},p=r||t||"";return d.jsxs("div",{className:"chon-anh",children:[d.jsx("div",{className:"avatars",children:p?d.jsx("img",{src:p,alt:"avatar"}):d.jsx("div",{className:"avatar-placeholder"})}),d.jsxs("div",{className:"nhom-nut",children:[d.jsx("button",{type:"button",className:"change-avatars",onClick:c,children:"Đổi ảnh"}),r&&d.jsxs(d.Fragment,{children:[d.jsx("button",{type:"button",className:"btn btn-primary",onClick:h,children:"Lưu ảnh"}),d.jsx("button",{type:"button",className:"btn",onClick:m,children:"Huỷ"})]}),d.jsx("input",{ref:n,type:"file",accept:"image/*",hidden:!0,onChange:u})]}),a&&d.jsx("small",{className:"canh-bao",children:a})]})}const J0e=["idNguoiDung","tenNguoiDung","ngayTaoTaiKhoan","vaiTro"],ebe=()=>Oe(se,"nguoiDung");function tbe(t){try{if(t?.toDate)return t.toDate().toLocaleString();const e=new Date(t);return isNaN(e)?"":e.toLocaleString()}catch{return""}}function nbe(){const t=wt(),[e,n]=w.useState(null);w.useEffect(()=>{const o=JSON.parse(sessionStorage.getItem("session")||"null"),c=lt.currentUser?.uid||o?.idNguoiDung;if(!c){t("/");return}const u=Ae(se,"nguoiDung",String(c)),h=nt(u,m=>{if(!m.exists()){t("/");return}n({idNguoiDung:c,...m.data()})},()=>t("/"));return()=>h()},[t]);const r=async o=>{if(!e?.idNguoiDung)return;const c={...o};if(J0e.forEach(u=>delete c[u]),Object.keys(c).length!==0)try{await yt(Ae(se,"nguoiDung",String(e.idNguoiDung)),c)}catch{alert("Không thể cập nhật thông tin. Vui lòng thử lại.")}},i=async o=>{if(!e?.idNguoiDung)return;const c=String(o||"").trim().toLowerCase();if(!/^\S+@\S+\.\S+$/.test(c)){alert("Email không hợp lệ");return}try{const u=Ge(ebe(),Qe("email","==",c),vn(1)),h=await ct(u);if(!h.empty&&h.docs[0].id!==String(e.idNguoiDung)){alert("Email đã được sử dụng");return}}catch{}try{if(!lt.currentUser)throw new Error("auth-missing");await $q(lt.currentUser,c),await yt(Ae(se,"nguoiDung",String(e.idNguoiDung)),{email:c}),alert("Đã cập nhật email.")}catch(u){const h=u?.code||"";alert(h==="auth/requires-recent-login"?"Bạn cần đăng nhập lại gần đây để đổi email. Vui lòng đăng xuất và đăng nhập lại rồi thử lại.":h==="auth/invalid-email"?"Email không hợp lệ.":"Không thể đổi email. Vui lòng thử lại.")}},a=async o=>{if(!lt.currentUser){alert("Bạn cần đăng nhập lại.");return}if((o?.length??0)<6){alert("Mật khẩu tối thiểu 6 ký tự.");return}try{await Fq(lt.currentUser,o),alert("Đã đổi mật khẩu.")}catch(c){const u=c?.code||"";alert(u==="auth/requires-recent-login"?"Bạn cần đăng nhập lại gần đây để đổi mật khẩu. Vui lòng đăng xuất và đăng nhập lại rồi thử lại.":"Không thể đổi mật khẩu. Vui lòng thử lại.")}};return e?d.jsxs("div",{className:"settings-container",children:[d.jsx("h1",{children:"Cài đặt"}),d.jsxs("section",{className:"personal-info",children:[d.jsx("h2",{children:"Thông tin cá nhân"}),d.jsxs("div",{className:"card personal-info-card",children:[d.jsx("div",{className:"profile-header",children:d.jsx(Z0e,{giaTri:e.anhDaiDien||"",onLuu:o=>r({anhDaiDien:o})})}),d.jsxs("div",{className:"info-list",children:[d.jsx(m_,{nhan:"Tên người dùng",giaTri:e.tenNguoiDung}),d.jsx(m_,{nhan:"Ngày tạo",giaTri:tbe(e.ngayTaoTaiKhoan)}),d.jsx(m_,{nhan:"Vai trò",giaTri:e.vaiTro}),d.jsx(g_,{nhan:"Họ tên",giaTriBanDau:e.hoten||"",goiY:"Nhập họ tên",onLuu:o=>{if(!String(o||"").trim()){alert("Họ tên không được trống");return}r({hoten:o.trim()})}}),d.jsx(g_,{nhan:"Email",loai:"email",giaTriBanDau:e.email||"",goiY:"name@example.com",onLuu:o=>i(o)}),d.jsx(g_,{nhan:"Mật khẩu",loai:"password",giaTriBanDau:"",hienThiGiaTri:"********",laMatKhau:!0,goiY:"Nhập mật khẩu mới",onLuu:o=>a(o)})]})]})]})]}):null}function rbe(){const{id:t}=ma(),e=wt(),[n,r]=w.useState(!0),[i,a]=w.useState(null),[o,c]=w.useState(""),[u,h]=w.useState([]),[m,p]=w.useState(""),[y,b]=w.useState(!1);w.useEffect(()=>{if(!t)return;r(!0);const N=Ae(se,"boThe",String(t)),C=nt(N,L=>{if(!L.exists()){a(null),r(!1);return}const D=L.data();a(D||null),c(D?.tenBoThe||""),h(Array.isArray(D?.danhSachThe)?D.danhSachThe.map(R=>({tu:R.tu||"",nghia:R.nghia||""})):[]),r(!1)},()=>{a(null),r(!1)});return()=>C()},[t]);const _=()=>h(N=>[...N,{tu:"",nghia:""}]),T=N=>h(C=>C.filter((L,D)=>D!==N)),S=(N,C,L)=>h(D=>{const R=[...D];return R[N]={...R[N],[C]:L},R}),E=async()=>{p("");const N=o.trim();if(!N){p("Vui lòng nhập tên bộ thẻ.");return}const C=u.map(D=>({tu:D.tu.trim(),nghia:D.nghia.trim()})).filter(D=>D.tu&&D.nghia);if(C.length===0){p("Bộ thẻ phải có ít nhất 1 thẻ hợp lệ (đủ 'từ' và 'nghĩa').");return}if(!i){p("Không tìm thấy bộ thẻ để cập nhật.");return}const L=lt.currentUser?.uid||JSON.parse(sessionStorage.getItem("session")||"null")?.idNguoiDung;if(!L||String(L)!==String(i.idNguoiDung)){p("Bạn không có quyền sửa bộ thẻ này.");return}try{b(!0),await yt(Ae(se,"boThe",String(i.idBoThe)),{tenBoThe:N,danhSachThe:C,soTu:C.length}),window.dispatchEvent(new Event("boTheUpdated")),alert("Đã lưu bộ thẻ!"),e(`/flashcard/${i.idBoThe}`)}catch(D){console.error(D),p("Có lỗi khi lưu dữ liệu.")}finally{b(!1)}};return n?d.jsx("div",{className:"sua-container",children:"Đang tải…"}):i?d.jsx("div",{className:"sua-container",children:d.jsxs("div",{className:"sua-card",children:[d.jsxs("div",{className:"sua-header",children:[d.jsx("h2",{children:"Sửa bộ thẻ"}),d.jsxs("div",{className:"sua-actions",children:[d.jsx("button",{className:"btn ghost",onClick:()=>e(-1),children:"Hủy"}),d.jsx("button",{className:"btn primary",onClick:E,disabled:y,children:y?"Đang lưu...":"Lưu"})]})]}),m&&d.jsx("div",{className:"alert",children:m}),d.jsxs("div",{className:"form-group",children:[d.jsx("label",{children:"Tên bộ thẻ"}),d.jsx("input",{type:"text",value:o,onChange:N=>c(N.target.value),placeholder:"Nhập tên bộ thẻ"})]}),d.jsx("div",{className:"divider"}),d.jsxs("div",{className:"the-list",children:[d.jsxs("div",{className:"the-list-header",children:[d.jsxs("h3",{children:["Danh sách thẻ (",u.length,")"]}),d.jsx("button",{className:"btn",onClick:_,children:"+ Thêm thẻ"})]}),u.length===0&&d.jsx("div",{className:"empty",children:"Chưa có thẻ nào. Nhấn “+ Thêm thẻ”."}),u.map((N,C)=>d.jsxs("div",{className:"the-item",children:[d.jsxs("div",{className:"the-row",children:[d.jsxs("div",{className:"col",children:[d.jsx("label",{children:"Từ"}),d.jsx("input",{type:"text",value:N.tu,onChange:L=>S(C,"tu",L.target.value),placeholder:"Ví dụ: apple"})]}),d.jsxs("div",{className:"col",children:[d.jsx("label",{children:"Nghĩa"}),d.jsx("input",{type:"text",value:N.nghia,onChange:L=>S(C,"nghia",L.target.value),placeholder:"Ví dụ: quả táo"})]})]}),d.jsx("div",{className:"the-actions",children:d.jsx("button",{className:"btn danger ghost",onClick:()=>T(C),children:"Xoá thẻ"})})]},C))]}),d.jsxs("div",{className:"footer-actions",children:[d.jsx("button",{className:"btn ghost",onClick:()=>e(-1),children:"Hủy"}),d.jsx("button",{className:"btn primary",onClick:E,disabled:y,children:y?"Đang lưu...":"Lưu"})]})]})}):d.jsx("div",{className:"sua-container",children:d.jsxs("div",{className:"sua-card",children:[d.jsx("h2",{children:"Không tìm thấy bộ thẻ"}),d.jsx("button",{className:"btn",onClick:()=>e("/giangvien"),children:"Về trang giảng viên"})]})})}function ibe(){const t=wt(),e=()=>{const r=document.querySelector(".features-grid");r.scrollLeft-=r.offsetWidth},n=()=>{const r=document.querySelector(".features-grid");r.scrollLeft+=r.offsetWidth};return d.jsxs("div",{className:"container",children:[d.jsxs("section",{className:"hero-section",children:[d.jsx("h1",{children:"Bạn muốn học từ mới như thế nào ?"}),d.jsx("p",{children:"Học mọi lúc với H bằng nhiều hình thức khác nhau như: Thẻ ghi nhớ (Flashcards), Trắc nghiệm, Bài kiểm tra, Học bằng video."}),d.jsxs("div",{className:"cta-buttons",children:[d.jsx("button",{className:"btn-primary",onClick:()=>t("/dang-ky"),children:"Đăng ký miễn phí"}),d.jsx("a",{href:"#",className:"link-secondary",onClick:()=>t("/dang-ky"),children:"Tôi là giảng viên"})]})]}),d.jsxs("section",{className:"features-section",children:[d.jsx("button",{className:"slider-arrow arrow-left",onClick:e,children:"‹"}),d.jsxs("div",{className:"features-grid",children:[d.jsxs("div",{className:"feature-card card-blue",children:[d.jsx("h3",{children:"Thẻ ghi nhớ"}),d.jsx("p",{style:{color:"white"},children:"Thẻ ghi nhớ của các bộ thẻ được giảng viên tổng hợp và sắp xếp hợp lý"})]}),d.jsxs("div",{className:"feature-card card-orange",children:[d.jsx("h3",{children:"Trắc nghiệm"}),d.jsx("p",{children:"Các câu hỏi trắc nghiệm cơ bản cho từng bộ thẻ giúp bạn luyện tập tăng cường ghi nhớ"})]}),d.jsxs("div",{className:"feature-card card-green",children:[d.jsx("h3",{children:"Bài kiểm tra"}),d.jsx("p",{children:"Thử thách các bài kiểm tra để tự đánh giá bản thân"})]}),d.jsxs("div",{className:"feature-card card-lightblue",children:[d.jsx("h3",{children:"Học bằng video"}),d.jsx("p",{children:"Xem các ví dụ bằng video và trả lời một cách hợp lý"})]}),d.jsxs("div",{className:"feature-card card-pink",children:[d.jsx("h3",{children:"Nhiều học phần tổng hợp"}),d.jsx("p",{children:"Các học phần tổng hợp nhiều bộ thẻ cùng chủ đề cho học viên sử dụng"})]}),d.jsxs("div",{className:"feature-card card-yellow",children:[d.jsx("h3",{children:"Trò chơi ghép nối"}),d.jsx("p",{children:"Giải trí và thử thách trí nhớ với trò chơi nối thẻ"})]})]}),d.jsx("button",{className:"slider-arrow arrow-right",onClick:n,children:"›"})]}),d.jsxs("section",{className:"ai-section",children:[d.jsx("h2",{children:"AI Hỗ Trợ Học Tập"}),d.jsx("p",{children:"Hệ thống được tích hợp AI giúp bạn học tập thông minh và nhanh chóng hơn"})]})]})}function If({children:t,onClick:e,variant:n="register",disabled:r=!1}){return d.jsx("button",{className:`btn ${n}`,onClick:e,disabled:r,children:t})}const fy="vi-VN",c3=t=>new Date(t).toLocaleDateString(fy),mT=()=>{const t=new Date;return t.setHours(0,0,0,0),t},abe=()=>{const t=mT();return t.setDate(t.getDate()-1),t},sbe=t=>{if(!t||typeof t!="string")return null;const[e,n,r]=t.split("/").map(Number);return!e||!n||!r?null:new Date(r,(n||1)-1,e||1)},Wu=t=>t?t instanceof Date?t:typeof t?.toDate=="function"?t.toDate():typeof t=="string"?sbe(t)||new Date(t):null:null;function obe(){const t=wt(),[e,n]=w.useState(null),[r,i]=w.useState([]),[a,o]=w.useState(null),[c,u]=w.useState(!1),h=(_,T)=>{const S=Number(_||0),E=Math.min(100,Math.max(0,Number(T||0)));return Math.max(0,Math.round(S*(1-E/100)))};w.useEffect(()=>{const _=JSON.parse(sessionStorage.getItem("session")||"null"),T=lt.currentUser?.uid||_?.idNguoiDung||null;if(!T){alert("Vui lòng đăng nhập để sử dụng tính năng trả phí."),t("/dang-nhap");return}n(String(T))},[t]),w.useEffect(()=>{const _=Ge(Oe(se,"goiTraPhi"),Iy("giaGoi","asc")),T=nt(_,S=>{const E=S.docs.map(N=>{const C=N.data();return{...C,idGoi:C.idGoi??N.id}});i(E)},()=>i([]));return()=>T()},[]),w.useEffect(()=>{if(!e)return;const _=Ge(Oe(se,"goiTraPhiCuaNguoiDung"),Qe("idNguoiDung","==",String(e))),T=nt(_,S=>{const E=mT(),C=S.docs.map(L=>({...L.data(),_docId:L.id})).filter(L=>{if(String(L?.status||"").toLowerCase().includes("hủy"))return!1;const D=Wu(L?.NgayKetThuc);return D?(D.setHours(0,0,0,0),D>=E):!1}).sort((L,D)=>(Wu(D.NgayKetThuc)?.getTime()||0)-(Wu(L.NgayKetThuc)?.getTime()||0))[0];o(C||null)},()=>o(null));return()=>T()},[e]);const m=!!a,p=async _=>{if(e){if(m){alert("Bạn đã có gói đang hoạt động. Hãy hủy hoặc chờ hết hạn mới đăng ký gói khác.");return}try{const T=h(_.giaGoi,_.giamGia),S={idHoaDon:"",idNguoiDung:String(e),idGoi:String(_.idGoi),tenGoi:_.tenGoi||"",giaGoc:Number(_.giaGoi||0),giamGia:Number(_.giamGia||0),soTienThanhToan:T,thoiHanNgay:Number(_.thoiHan||0),trangThai:"pending",createdAt:jt(),loaiThanhToan:"nangCapTraPhi"},E=await Mc(Oe(se,"hoaDon"),S);await yt(Ae(se,"hoaDon",E.id),{idHoaDon:E.id}),t("/checkout",{state:{orderId:E.id}})}catch(T){console.error(T),alert("Không thể tạo hóa đơn. Vui lòng thử lại.")}}},y=w.useMemo(()=>a&&r.find(_=>String(_.idGoi)===String(a.idGoi))||null,[a,r]),b=async()=>{if(!(!e||c)){u(!0),o(null);try{const _=await ct(Ge(Oe(se,"goiTraPhiCuaNguoiDung"),Qe("idNguoiDung","==",String(e)))),T=mT(),S=abe(),E=_.docs.filter(C=>{const L=C.data();if(String(L?.status||"").toLowerCase().includes("hủy"))return!1;const D=Wu(L?.NgayKetThuc);return D?(D.setHours(0,0,0,0),D>=T):!1});if(E.length===0)return u(!1),alert("Bạn không còn gói hoạt động.");const N=hX(se);E.forEach(C=>{N.update(C.ref,{status:"Đã hủy",NgayKetThuc:S})}),await N.commit(),alert("Đã hủy gói thành công!")}catch(_){console.error(_),alert("Không thể hủy gói. Vui lòng thử lại.")}finally{u(!1)}}};return d.jsxs("div",{className:"traphi-container",children:[d.jsx("h2",{children:"Danh sách gói trả phí"}),m&&y&&d.jsxs("div",{className:"active-sub",children:[d.jsx("div",{className:"active-sub__title",children:"Gói đang hoạt động"}),d.jsxs("div",{className:"active-sub__row",children:[d.jsxs("div",{children:[d.jsx("div",{className:"active-sub__name",children:y.tenGoi}),d.jsxs("div",{className:"active-sub__desc",children:["Hiệu lực từ"," ",d.jsx("strong",{children:typeof a.NgayBatDau=="string"?a.NgayBatDau:c3(Wu(a.NgayBatDau))})," ","đến"," ",d.jsx("strong",{children:typeof a.NgayKetThuc=="string"?a.NgayKetThuc:c3(Wu(a.NgayKetThuc))})]})]}),d.jsx(If,{variant:"cancel",onClick:b,disabled:c,title:c?"Đang hủy...":"Hủy gói hiện tại",children:c?"Đang hủy...":"Hủy gói hiện tại"})]})]}),d.jsx("div",{className:"traphi-pricing",children:r.length===0?d.jsx("div",{className:"pricing-empty",children:"Chưa có gói để đăng ký."}):r.map(_=>{const T=h(_.giaGoi,_.giamGia),S=Number(_.giamGia||0)>0;return d.jsxs("div",{className:"pricing-card",children:[d.jsx("h3",{className:"pricing-title",children:_.tenGoi}),_.moTa&&d.jsx("p",{className:"pricing-desc",children:_.moTa}),d.jsx("div",{className:"pricing-price",children:S?d.jsxs(d.Fragment,{children:[d.jsxs("span",{className:"price-old",children:[Number(_.giaGoi||0).toLocaleString(fy)," đ"]}),d.jsxs("span",{className:"price-new",children:[T.toLocaleString(fy)," đ"]}),d.jsxs("span",{className:"price-badge",children:["-",_.giamGia,"%"]})]}):d.jsxs("span",{className:"price-new",children:[Number(_.giaGoi||0).toLocaleString(fy)," đ"]})}),d.jsx("p",{className:"pricing-term",children:d.jsxs("small",{children:["Thời hạn: ",_.thoiHan," ngày"]})}),d.jsx(If,{variant:"register",onClick:()=>p(_),disabled:m,title:m?"Bạn đang có gói hoạt động":"Đăng ký gói này",children:m?"Đang có gói hoạt động":"Đăng ký"})]},_.idGoi)})})]})}const _c=t=>{if(!t||typeof t!="string")return null;const e=t.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(!e)return null;const n=Number(e[1]),r=Number(e[2])-1,i=Number(e[3]),a=new Date(i,r,n);return Number.isNaN(a.getTime())?null:a},VB=t=>t?t instanceof Date?t:typeof t?.toDate=="function"?t.toDate():typeof t=="string"?_c(t)||new Date(t):null:null,Hp=t=>t instanceof Date&&!Number.isNaN(t)?t.toLocaleDateString("vi-VN"):"",qp=t=>{const e=VB(t);return e&&!Number.isNaN(e)?e.toLocaleDateString("vi-VN"):""},gT=()=>{const t=new Date;return t.setHours(0,0,0,0),t},lbe=()=>`SUB_${Date.now()}`,u3=t=>{if(t?.status==="Đã hủy")return"Đã hủy";const e=VB(t?.NgayKetThuc);return e&&e>=gT()?"Đang hoạt động":"Hết hạn"},pT=Nt().required("Bắt buộc").test("ddmmyyyy","Ngày phải dạng dd/mm/yyyy",t=>!!_c(t||"")),f3=pa({idNguoiDung:Nt().trim().required("Thiếu người dùng"),idGoi:Nt().trim().required("Thiếu gói"),NgayBatDau:pT,NgayKetThuc:Nt().trim().test("empty-or-date","Ngày phải dạng dd/mm/yyyy",t=>!t||!!_c(t))}),h3=pa({id:Nt().required(),idGoi:Nt().trim().required("Thiếu gói"),status:Nt().oneOf(["Đang hoạt động","Hết hạn","Đã hủy"]).required(),NgayBatDau:pT,NgayKetThuc:pT});function cbe(){const[t,e]=w.useState([]),[n,r]=w.useState([]),[i,a]=w.useState([]);w.useEffect(()=>{const xe=nt(Oe(se,"goiTraPhiCuaNguoiDung"),ce=>{const Pe=ce.docs.map(qe=>{const Ke=qe.data();return{_docId:qe.id,...Ke,_NgayBatDauStr:qp(Ke.NgayBatDau),_NgayKetThucStr:qp(Ke.NgayKetThuc)}});e(Pe)});return()=>xe?.()},[]),w.useEffect(()=>{(async()=>{const[xe,ce]=await Promise.all([ct(Oe(se,"nguoiDung")),ct(Oe(se,"goiTraPhi"))]);r(xe.docs.map(Pe=>({_docId:Pe.id,...Pe.data()}))),a(ce.docs.map(Pe=>({_docId:Pe.id,...Pe.data()})))})()},[]);const o=w.useMemo(()=>new Map(n.map(xe=>[String(xe.idNguoiDung),xe])),[n]),c=w.useMemo(()=>{const xe=new Map;for(const ce of i){const Pe=String(ce.idGoi??ce._docId),qe=String(ce._docId);xe.set(Pe,ce),xe.set(qe,ce)}return xe},[i]),u=w.useMemo(()=>t.map(xe=>{const ce=o.get(String(xe.idNguoiDung)),Pe=c.get(String(xe.idGoi));return{id:xe._docId,idGTPCND:xe.idGTPCND||xe._docId,username:ce?.tenNguoiDung||`User ${xe.idNguoiDung}`,package:Pe?.tenGoi||xe.idGoi,status:u3(xe),created:xe._NgayBatDauStr||"",endDate:xe._NgayKetThucStr||"",_raw:xe}}),[t,o,c]),[h,m]=w.useState(u);w.useEffect(()=>m(u),[u]);const[p,y]=w.useTransition(),b=w.useDeferredValue(h),_=w.useCallback(xe=>y(()=>m(xe)),[]),T=w.useMemo(()=>[{name:"Mã đăng ký",key:"idGTPCND"},{name:"Tên người dùng",key:"username"},{name:"Gói học",key:"package"},{name:"Trạng thái",key:"status"},{name:"Ngày bắt đầu",key:"created"},{name:"Ngày hết hạn",key:"endDate"}],[]),S=w.useMemo(()=>i.map(xe=>({value:String(xe.idGoi??xe._docId),label:String(xe.tenGoi||xe.idGoi||xe._docId),thoiHan:Number(xe.thoiHan||0)})),[i]),E=w.useMemo(()=>n.map(xe=>({value:String(xe.idNguoiDung),label:String(xe.tenNguoiDung||xe.email||xe.idNguoiDung)})),[n]),N=w.useMemo(()=>new Set(S.map(xe=>String(xe.value))),[S]),C=w.useMemo(()=>new Set(n.map(xe=>String(xe.idNguoiDung))),[n]),L=w.useMemo(()=>[{value:"Đang hoạt động",label:"Đang hoạt động"},{value:"Hết hạn",label:"Hết hạn"},{value:"Đã hủy",label:"Đã hủy"}],[]),D=w.useMemo(()=>[{name:"Gói học",key:"idGoi",options:S},{name:"Trạng thái",key:"status",options:L},{name:"Ngày bắt đầu (dd/mm/yyyy)",key:"NgayBatDau"},{name:"Ngày hết hạn (dd/mm/yyyy)",key:"NgayKetThuc"}],[S,L]),R=w.useMemo(()=>[{name:"Người dùng",key:"idNguoiDung",options:E},{name:"Gói học",key:"idGoi",options:S},{name:"Ngày bắt đầu (dd/mm/yyyy)",key:"NgayBatDau"},{name:"Ngày hết hạn (dd/mm/yyyy) (có thể để trống)",key:"NgayKetThuc"}],[E,S]),[k,I]=w.useState(!1),[O,U]=w.useState(null),$=w.useCallback(xe=>{U(xe),I(!0)},[]),V=w.useCallback(()=>{I(!1),U(null)},[]),B=w.useCallback(async xe=>{const ce=xe??O;if(ce)try{await Tl(Ae(se,"goiTraPhiCuaNguoiDung",ce)),V()}catch(Pe){console.error(Pe),alert("Xóa đăng ký thất bại.")}},[O,V]),[Y,ee]=w.useState(!1),[q,G]=w.useState(!1),[K,oe]=w.useState(null),H=w.useCallback(xe=>{const ce=u.find(qe=>String(qe.id)===String(xe));if(!ce)return;const Pe=ce._raw||{};oe({id:ce.id,idNguoiDung:Pe.idNguoiDung,idGoi:Pe.idGoi,status:u3(Pe),NgayBatDau:qp(Pe.NgayBatDau),NgayKetThuc:qp(Pe.NgayKetThuc)}),ee(!0),G(!1)},[u]),Z=w.useCallback(()=>{ee(!1),oe(null),G(!1)},[]),te=w.useCallback(async(xe,ce=!1)=>{if(ce){G(!0);return}try{const Pe=await h3.validate(xe,{abortEarly:!1});if(!N.has(String(Pe.idGoi)))return alert("Gói không hợp lệ.");let qe=_c(Pe.NgayBatDau),Ke=_c(Pe.NgayKetThuc);const kt=gT();if(Pe.status==="Đang hoạt động"&&Ke<kt&&(Ke=kt),Pe.status==="Hết hạn"&&Ke>=kt){const Rt=new Date(kt);Rt.setDate(Rt.getDate()-1),Ke=Rt}await yt(Ae(se,"goiTraPhiCuaNguoiDung",Pe.id),{idGoi:String(Pe.idGoi),NgayBatDau:Hp(qe),NgayKetThuc:Hp(Ke),status:Pe.status}),Z()}catch(Pe){Pe?.name==="ValidationError"?alert(Pe.errors.join(`
`)):(console.error(Pe),alert("Cập nhật đăng ký thất bại."))}},[N,Z]),[fe,Ce]=w.useState(!1),Ie=w.useCallback(()=>Ce(!0),[]),Fe=w.useCallback(()=>Ce(!1),[]),Pt=w.useCallback(async xe=>{try{const ce=await f3.validate(xe,{abortEarly:!1});if(!N.has(String(ce.idGoi)))return alert("Gói không hợp lệ.");if(!C.has(String(ce.idNguoiDung)))return alert("Người dùng không hợp lệ.");let Pe=_c(ce.NgayBatDau),qe=ce.NgayKetThuc?_c(ce.NgayKetThuc):null;if(!qe){const kt=i.find(Wr=>String(Wr.idGoi??Wr._docId)===String(ce.idGoi)),Rt=Number(kt?.thoiHan||0),Gr=new Date(Pe);Gr.setDate(Gr.getDate()+Rt),qe=Gr}const Ke=qe>=gT()?"Đang hoạt động":"Hết hạn";await Mc(Oe(se,"goiTraPhiCuaNguoiDung"),{idGTPCND:lbe(),idNguoiDung:String(ce.idNguoiDung),idGoi:String(ce.idGoi),NgayBatDau:Hp(Pe),NgayKetThuc:Hp(qe),status:Ke,createdAt:jt()}),Fe()}catch(ce){ce?.name==="ValidationError"?alert(ce.errors.join(`
`)):(console.error(ce),alert("Thêm đăng ký thất bại."))}},[N,C,i,Fe]),Ne=w.useMemo(()=>[{name:"👀",class:"edit-button",style:{cursor:"pointer",marginRight:8,fontSize:"1.2rem"},onClick:xe=>()=>H(xe),title:"Xem/Sửa"},{name:"🗑️",class:"delete-button",style:{cursor:"pointer",fontSize:"1.2rem"},onClick:xe=>()=>$(xe),title:"Xoá"}],[$,H]),[we,Le]=w.useState(!1);return d.jsxs("div",{className:"main-content-admin-user",children:[d.jsx("h1",{children:"Quản Lý Trả Phí (Theo Người Dùng)"}),d.jsxs("div",{className:"user-actions",children:[d.jsxs("div",{className:"user-actions-buttons",children:[d.jsx("button",{className:"btn btn-primary",onClick:Ie,children:"Thêm"}),d.jsx("button",{className:"btn btn-secondary",onClick:()=>Le(!0),children:"Xuất"})]}),d.jsx(Ym,{Data:u,onResult:_})]}),d.jsx(Wm,{Colums:T,Data:b,Action:Ne}),k&&d.jsx(Xm,{id:O,onClose:V,onConfirm:B,message:"Bạn có muốn xóa đăng ký trả phí này không?"}),Y&&K&&d.jsx(Qm,{user:K,onClose:Z,onSave:te,isEditMode:q,Colums:D,showAvatar:!1,validationSchema:h3,validateOnChange:!1}),fe&&d.jsx(L2,{onClose:Fe,onSave:Pt,Colums:R,showAvatar:!1,validationSchema:f3,validateOnChange:!1}),we&&d.jsx(W0,{isOpen:we,onClose:()=>Le(!1),filteredData:b,title:"Xuất danh sách trả phí của người dùng",columns:T})]})}const d3="vi-VN",ube=()=>"GOI_"+Date.now(),p_=(t,e=0)=>{const n=Number(t);return Number.isFinite(n)?n:e},fbe=t=>{if(!t||typeof t!="string")return null;const[e,n,r]=t.split("/").map(Number);if(!e||!n||!r)return null;const i=new Date(r,(n||1)-1,e||1);return Number.isNaN(i.getTime())?null:i},hbe=t=>t?t instanceof Date?t:typeof t?.toDate=="function"?t.toDate():typeof t=="string"?fbe(t)||new Date(t):null:null,dbe=()=>{const t=new Date;return t.setHours(0,0,0,0),t},mbe=t=>{if(String(t?.status||"").toLowerCase().includes("hủy"))return!1;const e=hbe(t?.NgayKetThuc);return!!e&&e>=dbe()},gbe=t=>t.map(e=>{const n=p_(e.giaGoi),r=p_(e.giamGia),i=Math.max(0,Math.round(n*(1-r/100)));return{id:e._docId,idGoi:e.idGoi||e._docId,tenGoi:e.tenGoi||"",moTa:e.moTa||"",giaGoi:n,giamGia:r,thoiHan:p_(e.thoiHan),giaGoiFmt:n.toLocaleString(d3),giaSauGiamFmt:i.toLocaleString(d3)}}),y_=t=>XE().transform((e,n)=>{const r=String(n??"").trim();if(r==="")return NaN;const i=Number(r);return Number.isFinite(i)?i:NaN}).typeError(t),BB=pa({tenGoi:Nt().trim().required("Nhập tên gói"),moTa:Nt().trim().max(500,"Mô tả tối đa 500 ký tự").nullable(),giaGoi:y_("Giá phải là số").min(0,"Giá ≥ 0").required("Nhập giá"),giamGia:y_("Giảm giá phải là số").min(0,"Giảm giá ≥ 0").max(100,"Giảm giá ≤ 100").required("Nhập giảm giá"),thoiHan:y_("Thời hạn (ngày) phải là số").integer("Thời hạn phải là số nguyên").min(1,"Thời hạn ≥ 1 ngày").required("Nhập thời hạn")}),m3=BB.shape({id:Nt().required()}),g3=BB;function pbe(){const t=w.useMemo(()=>[{name:"ID gói",key:"idGoi"},{name:"Tên gói",key:"tenGoi"},{name:"Mô tả",key:"moTa"},{name:"Giá (đ)",key:"giaGoiFmt"},{name:"Giảm (%)",key:"giamGia"},{name:"Giá sau giảm (đ)",key:"giaSauGiamFmt"},{name:"Thời hạn (ngày)",key:"thoiHan"}],[]),e=w.useMemo(()=>[{name:"Tên gói",key:"tenGoi"},{name:"Mô tả",key:"moTa"},{name:"Giá (đ)",key:"giaGoi"},{name:"Giảm giá (%)",key:"giamGia"},{name:"Thời hạn (ngày)",key:"thoiHan"}],[]),[n,r]=w.useState([]),[i,a]=w.useState([]),[o,c]=w.useState(!1),[u,h]=w.useState(null),[m,p]=w.useState(!1),[y,b]=w.useState(null),[_,T]=w.useState(!1),[S,E]=w.useState(!1);w.useEffect(()=>{const V=nt(Oe(se,"goiTraPhi"),B=>{const Y=B.docs.map(q=>({_docId:q.id,...q.data()})),ee=gbe(Y);r(ee),a(ee)});return()=>V()},[]);const N=V=>{h(V),c(!0)},C=()=>{c(!1),h(null)},L=async V=>{const B=V??u;if(B)try{const Y=await ht(Ae(se,"goiTraPhi",B));if(!Y.exists()){C();return}const ee={_docId:Y.id,...Y.data()},q=String(ee.idGoi||ee._docId),G=Oe(se,"goiTraPhiCuaNguoiDung"),K=Ge(G,Qe("idGoi","==",q)),H=q!==ee._docId?Ge(G,Qe("idGoi","==",ee._docId)):null,[Z,te]=await Promise.all([ct(K),H?ct(H):Promise.resolve(null)]),Ce=[...Z?.docs||[],...te&&te.docs||[]].map(Ie=>({_docId:Ie.id,...Ie.data()})).filter(mbe);if(Ce.length>0){alert(`Không thể xoá vì còn ${Ce.length} đăng ký đang hoạt động cho gói này.
Hãy huỷ hoặc chờ hết hạn các đăng ký trước.`),C();return}await Tl(Ae(se,"goiTraPhi",B)),C()}catch(Y){console.error(Y),alert("Xoá gói thất bại.")}},D=V=>{const B=n.find(Y=>String(Y.id)===String(V));B&&(b({id:B.id,tenGoi:B.tenGoi,moTa:B.moTa,giaGoi:String(B.giaGoi),giamGia:String(B.giamGia),thoiHan:String(B.thoiHan)}),T(!1),p(!0))},R=()=>{p(!1),b(null),T(!1)},k=async(V,B)=>{if(B){T(!0);return}try{const Y=await m3.validate(V,{abortEarly:!1});await yt(Ae(se,"goiTraPhi",Y.id),{tenGoi:String(Y.tenGoi||"").trim(),moTa:String(Y.moTa||"").trim(),giaGoi:Number(Y.giaGoi),giamGia:Number(Y.giamGia),thoiHan:Number(Y.thoiHan)}),R()}catch(Y){if(Y?.name==="ValidationError")return;console.error(Y),alert("Cập nhật gói thất bại.")}},I=()=>E(!0),O=()=>E(!1),U=async V=>{try{const B=await g3.validate(V,{abortEarly:!1});await Mc(Oe(se,"goiTraPhi"),{idGoi:ube(),tenGoi:String(B.tenGoi||"").trim(),moTa:String(B.moTa||"").trim(),giaGoi:Number(B.giaGoi),giamGia:Number(B.giamGia),thoiHan:Number(B.thoiHan)}),O()}catch(B){if(B?.name==="ValidationError"){alert(B.errors?.[0]||"Dữ liệu không hợp lệ.");return}console.error(B),alert("Thêm gói thất bại.")}},$=[{name:"👀",title:"Sửa",onClick:V=>D(V)},{name:"🗑️",title:"Xoá",onClick:V=>N(V)}];return d.jsxs("div",{className:"main-content-admin-user",children:[d.jsx("h2",{children:"Quản lý gói trả phí"}),d.jsxs("div",{className:"user-actions",children:[d.jsx("div",{className:"user-actions-buttons",children:d.jsx("button",{className:"btn btn-primary",onClick:I,children:"Thêm gói"})}),d.jsx(Ym,{Data:n,onResult:a})]}),d.jsx(Wm,{Colums:t,Data:i,Action:$}),o&&d.jsx(Xm,{id:u,onClose:C,onConfirm:L,message:"Bạn có muốn xoá gói trả phí này không?"}),m&&y&&d.jsx(Qm,{user:y,onClose:R,onSave:k,isEditMode:_,Colums:e,showAvatar:!1,validationSchema:m3,validateOnChange:!0}),S&&d.jsx(L2,{onClose:O,onSave:U,Colums:e,showAvatar:!1,validationSchema:g3,validateOnChange:!0})]})}function ybe(){const[t,e]=w.useState("nguoidung");return d.jsxs("div",{className:"main-content-admin-user",children:[d.jsx("h2",{children:"Quản Lý Trả Phí"}),d.jsxs("div",{className:"qltp-tabs",children:[d.jsx("button",{className:t==="nguoidung"?"active":"",onClick:()=>e("nguoidung"),children:"Gói trả phí của người dùng"}),d.jsx("button",{className:t==="goi"?"active":"",onClick:()=>e("goi"),children:"Các gói trả phí"})]}),d.jsx("div",{className:"qltp-content",children:t==="nguoidung"?d.jsx(cbe,{}):d.jsx(pbe,{})})]})}const vbe=()=>d.jsx(ybe,{});function p3({item:t,dsNguoiDung:e,onClick:n}){const r=e.find(o=>String(o.idNguoiDung)===String(t.idNguoiDung)),i=r?.tenNguoiDung||"Ẩn danh",a=r?.anhDaiDien||"";return d.jsxs("div",{className:"item-Search",onClick:()=>n(t.idKhoaHoc),children:[d.jsx("h1",{children:t.tenKhoaHoc||"Khóa học"}),d.jsxs("p",{children:[t.boTheIds?.length||0," bộ thẻ • ",t.thanhVienIds?.length||0," thành viên"]}),Array.isArray(t.kienThuc)&&t.kienThuc.length>0&&d.jsx("div",{className:"tags",children:t.kienThuc.map((o,c)=>d.jsx("span",{className:"tag",children:o},c))}),d.jsxs("div",{className:"user-item",children:[d.jsx("div",{className:"mini-avatar",style:a?{backgroundImage:`url(${a})`}:{}}),d.jsx("span",{children:i})]})]})}function y3({item:t,onClick:e}){return d.jsx("div",{className:"item-Search",onClick:()=>e(t.idNguoiDung),style:{cursor:"pointer"},title:"Xem hồ sơ",children:d.jsxs("div",{className:"user-item",children:[d.jsx("div",{className:"mini-avatar",style:t.anhDaiDien?{backgroundImage:`url(${t.anhDaiDien})`}:{}}),d.jsx("span",{children:t.tenNguoiDung})]})})}function v3({item:t,dsNguoiDung:e,onClick:n}){const r=e.find(o=>String(o.idNguoiDung)===String(t.idNguoiDung)),i=r?.tenNguoiDung||"Ẩn danh",a=r?.anhDaiDien||"";return d.jsxs("div",{className:"item-Search",onClick:()=>n(t.idBoThe),children:[d.jsx("h1",{children:t.tenBoThe||"Không tên"}),d.jsxs("p",{children:[t.soTu??(t.danhSachThe?.length||0)," thẻ"]}),d.jsxs("div",{className:"user-item",children:[d.jsx("div",{className:"mini-avatar",style:a?{backgroundImage:`url(${a})`}:{}}),d.jsx("span",{children:i})]}),d.jsx("button",{className:"btn-hoc",onClick:o=>{o.stopPropagation(),n(t.idBoThe)},children:"Học"})]})}function bbe(){const{id:t}=ma(),e=wt(),[n,r]=w.useState("All"),[i,a]=w.useState([]),[o,c]=w.useState([]),[u,h]=w.useState([]);w.useEffect(()=>{const E=nt(Ge(Oe(se,"boThe"),Qe("cheDo","==","cong_khai"),vn(200)),L=>{const D=L.docs.map(R=>{const k=R.data();return{...k,soTu:typeof k.soTu=="number"?k.soTu:Array.isArray(k.danhSachThe)?k.danhSachThe.length:0}});a(D)},()=>a([])),N=nt(Ge(Oe(se,"nguoiDung"),vn(200)),L=>c(L.docs.map(D=>{const R=D.data();return{...R,idNguoiDung:R.idNguoiDung??D.id}})),()=>c([])),C=nt(Ge(Oe(se,"khoaHoc"),vn(200)),L=>{const D=L.docs.map(R=>{const k=R.data();return{...k,boTheIds:Array.isArray(k.boTheIds)?k.boTheIds:[],thanhVienIds:Array.isArray(k.thanhVienIds)?k.thanhVienIds:[],kienThuc:Array.isArray(k.kienThuc)?k.kienThuc:[]}});h(D)},()=>h([]));return()=>{E(),N(),C()}},[]);const m=w.useMemo(()=>String(t||"").trim().toLowerCase(),[t]),p=w.useMemo(()=>m?i.filter(E=>(E.tenBoThe||"").toLowerCase().includes(m)):i,[i,m]),y=w.useMemo(()=>m?o.filter(E=>(E.tenNguoiDung||"").toLowerCase().includes(m)):o,[o,m]),b=w.useMemo(()=>m?u.filter(E=>{const N=(E.tenKhoaHoc||"").toLowerCase().includes(m),C=Array.isArray(E.kienThuc)?E.kienThuc.some(L=>String(L).toLowerCase().includes(m)):!1;return N||C}):u,[u,m]),_=E=>e(`/flashcard/${E}`),T=E=>e(`/khoaHoc/${E}`),S=E=>e(`/nguoiDung/${E}`);return d.jsxs("div",{className:"search-container",children:[d.jsx("div",{className:"type-search",children:d.jsxs("ul",{children:[d.jsx("li",{className:n==="All"?"active":"",onClick:()=>r("All"),children:"All"}),d.jsx("li",{className:n==="BoThe"?"active":"",onClick:()=>r("BoThe"),children:"Bộ thẻ"}),d.jsx("li",{className:n==="User"?"active":"",onClick:()=>r("User"),children:"Người dùng"}),d.jsx("li",{className:n==="KhoaHoc"?"active":"",onClick:()=>r("KhoaHoc"),children:"Khóa học"})]})}),d.jsxs("div",{className:"list-Search",children:[n==="All"&&d.jsxs(d.Fragment,{children:[d.jsx("h3",{className:"list-Search-title",children:"Bộ thẻ"}),p.length>0?p.map(E=>d.jsx(v3,{item:E,dsNguoiDung:o,onClick:_},E.idBoThe)):"Không tìm thấy bộ thẻ nào",d.jsx("h3",{className:"list-Search-title",children:"Người dùng"}),y.length>0?y.map(E=>d.jsx(y3,{item:E,onClick:S},`user-${E.idNguoiDung}`)):"Không tìm thấy người dùng nào",d.jsx("h3",{className:"list-Search-title",children:"Khóa học"}),b.length>0?b.map(E=>d.jsx(p3,{item:E,dsNguoiDung:o,onClick:T},`kh-${E.idKhoaHoc}`)):"Không tìm thấy khóa học nào"]}),n==="BoThe"&&(p.length>0?p.map(E=>d.jsx(v3,{item:E,dsNguoiDung:o,onClick:_},E.idBoThe)):"Không tìm thấy bộ thẻ nào"),n==="User"&&(y.length>0?y.map(E=>d.jsx(y3,{item:E,onClick:S},`user-${E.idNguoiDung}`)):"Không tìm thấy người dùng nào"),n==="KhoaHoc"&&(b.length>0?b.map(E=>d.jsx(p3,{item:E,dsNguoiDung:o,onClick:T},`kh-${E.idKhoaHoc}`)):"Không tìm thấy khóa học nào")]})]})}function v_({nhan:t,giaTri:e}){return d.jsxs("div",{className:"info-item",children:[d.jsxs("div",{className:"info-account",children:[d.jsxs("div",{className:"info-label",children:[t," :"]}),d.jsx("div",{className:"info-value",children:String(e??"—")})]}),d.jsx("div",{className:"info-action"})]})}function b_({nhan:t,loai:e="text",giaTriBanDau:n,hienThiGiaTri:r,goiY:i,laMatKhau:a=!1,onLuu:o,xacThuc:c=()=>!0}){const[u,h]=w.useState(!1),[m,p]=w.useState(n??""),[y,b]=w.useState(""),_=()=>{p(a?"":n??""),b(""),h(!0)},T=()=>{p(n??""),b(""),h(!1)},S=()=>{const E=c(m);if(E!==!0){b(E||"Giá trị không hợp lệ");return}o(m),h(!1)};return d.jsxs("div",{className:"info-item",children:[d.jsxs("div",{className:"info-account",children:[d.jsxs("div",{className:"info-label",children:[t," :"]}),u?d.jsxs("div",{style:{width:"100%"},children:[d.jsx("input",{className:"input",type:e,placeholder:i,value:m,onChange:E=>p(E.target.value)}),y&&d.jsx("div",{style:{color:"#dc3545",fontSize:12,marginTop:6},children:y})]}):d.jsx("div",{className:"info-value",children:r!==void 0?r:n??"—"})]}),d.jsx("div",{className:"info-action",style:{display:"flex",gap:8},children:u?d.jsxs(d.Fragment,{children:[d.jsx("button",{className:"btn",onClick:T,children:"Hủy"}),d.jsx("button",{className:"btn btn-primary",onClick:S,children:"Lưu"})]}):d.jsx("button",{className:"btn",onClick:_,children:"Sửa"})})]})}function xbe({giaTri:t="",onLuu:e}){const n=w.useRef(null),[r,i]=w.useState(""),[a,o]=w.useState(""),c=()=>n.current?.click(),u=y=>{o("");const b=y.target.files?.[0];if(!b)return;if(!/^image\/(png|jpe?g|webp|gif)$/i.test(b.type))return o("Chỉ chấp nhận PNG, JPG, JPEG, WEBP, GIF.");const T=4;if(b.size>T*1024*1024)return o(`Kích thước tối đa ${T}MB.`);const S=new FileReader;S.onload=()=>i(S.result?.toString()||""),S.readAsDataURL(b)},h=()=>{r&&(e?.(r),i(""))},m=()=>{i(""),o(""),n.current&&(n.current.value="")},p=r||t||"";return d.jsxs("div",{className:"chon-anh",children:[d.jsx("div",{className:"avatars",children:p?d.jsx("img",{src:p,alt:"avatar"}):d.jsx("div",{className:"avatar-placeholder"})}),d.jsxs("div",{className:"nhom-nut",children:[d.jsx("button",{type:"button",className:"change-avatars",onClick:c,children:"Đổi ảnh"}),r&&d.jsxs(d.Fragment,{children:[d.jsx("button",{type:"button",className:"btn btn-primary",onClick:h,children:"Lưu ảnh"}),d.jsx("button",{type:"button",className:"btn",onClick:m,children:"Huỷ"})]}),d.jsx("input",{ref:n,type:"file",accept:"image/*",hidden:!0,onChange:u})]}),a&&d.jsx("small",{className:"canh-bao",children:a})]})}const wbe=["idNguoiDung","tenNguoiDung","ngayTaoTaiKhoan","vaiTro"];function _be(){const t=wt(),[e,n]=w.useState(null);w.useEffect(()=>{(async()=>{try{const o=JSON.parse(sessionStorage.getItem("session")||"null");if(!o?.idNguoiDung)return t("/dang-nhap");const c=await ht(Ae(se,"nguoiDung",o.idNguoiDung));if(!c.exists())return t("/dang-nhap");n({idNguoiDung:o.idNguoiDung,...c.data()})}catch(o){console.error("Lỗi load user:",o),t("/dang-nhap")}})()},[t]);const r=async a=>{if(e?.idNguoiDung)try{const o={...a};wbe.forEach(c=>delete o[c]),await yt(Ae(se,"nguoiDung",e.idNguoiDung),o),n(c=>({...c,...o}))}catch(o){console.error("Lỗi cập nhật user:",o)}},i=async a=>{try{return!0}catch{return"Lỗi kiểm tra email"}};return e?d.jsxs("div",{className:"settings-container",children:[d.jsx("h1",{children:"Cài đặt"}),d.jsxs("section",{className:"personal-info",children:[d.jsx("h2",{children:"Thông tin cá nhân"}),d.jsxs("div",{className:"card personal-info-card",children:[d.jsx("div",{className:"profile-header",children:d.jsx(xbe,{giaTri:e.anhDaiDien||"",onLuu:a=>r({anhDaiDien:a})})}),d.jsxs("div",{className:"info-list",children:[d.jsx(v_,{nhan:"Tên người dùng",giaTri:e.tenNguoiDung}),d.jsx(v_,{nhan:"Ngày tạo",giaTri:new Date(e.ngayTaoTaiKhoan).toLocaleString()}),d.jsx(v_,{nhan:"Vai trò",giaTri:e.vaiTro}),d.jsx(b_,{nhan:"Họ tên",giaTriBanDau:e.hoten||"",goiY:"Nhập họ tên",onLuu:a=>r({hoten:a}),xacThuc:a=>a.trim().length>0||"Họ tên không được trống"}),d.jsx(b_,{nhan:"Email",loai:"email",giaTriBanDau:e.email||"",goiY:"name@example.com",onLuu:a=>r({email:a}),xacThuc:async a=>{if(!/^\S+@\S+\.\S+$/.test(a))return"Email không hợp lệ";const o=await i();return o===!0?!0:o}}),d.jsx(b_,{nhan:"Mật khẩu",loai:"password",giaTriBanDau:"",hienThiGiaTri:"********",laMatKhau:!0,goiY:"Nhập mật khẩu mới",onLuu:a=>r({matkhau:a}),xacThuc:a=>(a?.length??0)>=6||"Mật khẩu tối thiểu 6 ký tự"})]})]})]})]}):d.jsx("p",{children:"Đang tải..."})}const Sbe=t=>String(t||"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),Tbe=t=>{const e=String(t||"").toLowerCase(),n=Sbe(t);return e==="đã hủy"||n==="da huy"||e.includes("hủy")||e.includes("huỷ")||n.includes("huy")||/cancel|canceled|cancelled/.test(n)},Ebe=t=>{if(!t)return null;if(t instanceof Date)return t;if(typeof t?.toDate=="function")return t.toDate();if(typeof t=="string"){const e=t.split("/");if(e.length===3){const[r,i,a]=e.map(Number);if(a)return new Date(a,(i||1)-1,r||1)}const n=new Date(t);return isNaN(n)?null:n}return null};function Abe(){const t=Ir(),[e,n]=w.useState(!1),[r,i]=w.useState(null),[a,o]=w.useState(null);return w.useEffect(()=>{const c=ga(lt,u=>{i(u?.uid||null),n(!0)});return()=>c()},[]),w.useEffect(()=>{if(!r){o(!1);return}const c=Ge(Oe(se,"goiTraPhiCuaNguoiDung"),Qe("idNguoiDung","==",String(r))),u=nt(c,h=>{const m=new Date;m.setHours(0,0,0,0);const p=h.docs.some(y=>{const b=y.data();if(Tbe(b?.status))return!1;const _=Ebe(b?.NgayKetThuc);return!(_ instanceof Date)||isNaN(_)?!1:(_.setHours(0,0,0,0),_>=m)});o(p)},()=>o(!1));return()=>u()},[r]),e?r?a===null?null:a?d.jsx(Vf,{}):d.jsx(qd,{to:"/tra-phi",replace:!0,state:{from:t,reason:"no_active_sub"}}):d.jsx(qd,{to:"/dang-nhap",replace:!0,state:{from:t}}):null}const Nbe="vi-VN",Cbe=t=>String(t).replace(/[^0-9a-zA-Z_-]/g,"").slice(0,34),jbe=t=>(t?.loaiThanhToan||"").toLowerCase()==="muakhoahoc"?!0:(t?.loaiDon||"").toUpperCase()==="JOIN_CLASS",Dbe=t=>{if((t?.loaiThanhToan||"").toLowerCase()==="nangcaptraphi")return!0;const n=(t?.loaiDon||"").toUpperCase();return n==="UPGRADE"||n==="NANG_CAP"};function kbe(){const t=Ir(),e=wt(),[n,r]=w.useState(null),[i,a]=w.useState(null),[o,c]=w.useState(!1),u=w.useRef(!1),h=w.useRef(!1);w.useEffect(()=>{try{const E=JSON.parse(sessionStorage.getItem("session")||"null"),N=lt.currentUser?.uid||E?.idNguoiDung||null;if(!N){alert("Vui lòng đăng nhập."),e("/dang-nhap");return}r(String(N))}catch{alert("Vui lòng đăng nhập."),e("/dang-nhap")}},[e]);const m=async E=>{try{if(!E||!n||!E.idKhoaHoc)return;const N=Ae(se,"khoaHoc",String(E.idKhoaHoc));await yt(N,{thanhVienIds:_f(String(n))})}catch(N){console.error("Cấp quyền vào lớp thất bại:",N)}},p=async E=>{try{if(!n)return;const N=Ae(se,"nguoiDung",String(n));await yt(N,{daNangCapTraPhi:!0,nangCapAt:jt()})}catch(N){console.error("Cập nhật nâng cấp trả phí thất bại:",N)}},y=async E=>{jbe(E)?await m(E):Dbe(E)&&await p()};w.useEffect(()=>{if(!n)return;let E=null;return(async()=>{const N=new URLSearchParams(t.search).get("orderId"),C=t?.state?.orderId,L=async D=>{const R=Ae(se,"hoaDon",D),k=await ht(R);if(!k.exists())return!1;if((k.data()?.idHoaDon||k.data()?.idDonHang)!==k.id)try{await yt(R,{idHoaDon:k.id})}catch{}return E=nt(R,O=>{if(!O.exists())return;const U=O.data()||{};a({...U,idHoaDon:U.idHoaDon||U.idDonHang||O.id,_docId:O.id})}),!0};if(!(N&&await L(String(N)))&&!(C&&await L(String(C))))try{const D=Ge(Oe(se,"hoaDon"),Qe("idNguoiDung","==",String(n)),Qe("trangThai","==","pending"),Iy("createdAt","desc"),vn(1)),k=(await ct(D)).docs[0];if(!k){alert("Không tìm thấy hóa đơn đang chờ thanh toán."),e("/tra-phi");return}await L(k.id)}catch(D){if(D?.code==="failed-precondition"){console.warn("Thiếu composite index (idNguoiDung, trangThai, createdAt). Dùng fallback client.");const R=Ge(Oe(se,"hoaDon"),Qe("idNguoiDung","==",String(n)),vn(50)),O=(await ct(R)).docs.map(U=>({id:U.id,...U.data()})).filter(U=>U.trangThai==="pending").sort((U,$)=>{const V=U?.createdAt?.seconds||0;return($?.createdAt?.seconds||0)-V})[0];if(!O){alert("Không tìm thấy hóa đơn đang chờ thanh toán."),e("/tra-phi");return}await L(O.id)}else console.error("Lỗi tải hóa đơn:",D),alert("Không thể tải hóa đơn. Vui lòng thử lại."),e("/tra-phi")}})(),()=>{typeof E=="function"&&E()}},[n,t,e]),w.useEffect(()=>{(async()=>{if(!(!i||u.current||Number(i.soTienThanhToan||0)>0)){if(i.trangThai==="paid"){u.current=!0;try{await y(i)}catch{}e("/checkout/result",{state:{orderId:i.idHoaDon||i._docId,status:"success"},replace:!0});return}try{u.current=!0,c(!0);const C=Ae(se,"hoaDon",i._docId);await yt(C,{trangThai:"paid",kenhThanhToan:"MIEN_PHI",soTienThanhToanThucTe:0,paidAt:jt()});try{await y(i)}catch{}e("/checkout/result",{state:{orderId:i.idHoaDon||i._docId,status:"success"},replace:!0})}catch(C){console.error("Xác nhận hóa đơn 0đ thất bại:",C),c(!1),u.current=!1,alert("Không thể xác nhận hóa đơn 0đ.")}}})()},[i,e]),w.useEffect(()=>{(async()=>{if(!(!i||h.current)&&i.trangThai==="paid"){h.current=!0;try{await y(i)}catch{}e("/checkout/result",{state:{orderId:i.idHoaDon||i._docId,status:"success"},replace:!0})}})()},[i,e]);const b=w.useMemo(()=>i?Number(i.soTienThanhToan||0).toLocaleString(Nbe)+" đ":"",[i]),_=async()=>{if(!(!i||o))try{c(!0);const E=Number(i.soTienThanhToan||0);if(E<=0){const D=Ae(se,"hoaDon",i._docId);await yt(D,{trangThai:"paid",kenhThanhToan:"MIEN_PHI",soTienThanhToanThucTe:0,paidAt:jt()});try{await y(i)}catch{}e("/checkout/result",{state:{orderId:i.idHoaDon||i._docId,status:"success"},replace:!0});return}const N=Cbe(i.idHoaDon||i._docId),L=await(await fetch("http://localhost:3001/create_payment_url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:E,orderId:N})})).json();L?.paymentUrl?window.location.href=L.paymentUrl:(c(!1),alert("Không tạo được liên kết thanh toán."))}catch(E){console.error(E),c(!1),alert("Lỗi tạo thanh toán VNPay.")}};if(!i)return null;const T=Number(i.soTienThanhToan||0)<=0,S=i.trangThai==="paid";return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"back",onClick:()=>e(-1),children:[d.jsx(mt,{icon:ol,className:"iconback"}),d.jsx("span",{children:"Quay lại"})]}),d.jsx("h2",{className:"checkout-title",children:"Thanh toán"}),d.jsxs("div",{className:"checkout-card",children:[d.jsxs("div",{className:"row",children:[d.jsx("span",{className:"label",children:"Gói:"}),d.jsx("span",{className:"value",children:i.tenGoi})]}),d.jsxs("div",{className:"row",children:[d.jsx("span",{className:"label",children:"Thời hạn:"}),d.jsxs("span",{className:"value",children:[i.thoiHanNgay," ngày"]})]}),d.jsxs("div",{className:"row",children:[d.jsx("span",{className:"label",children:"Thanh toán:"}),d.jsxs("span",{className:"value",children:[b,Number(i.giamGia||0)>0&&d.jsxs("small",{className:"muted",children:[" (đã áp dụng -",i.giamGia,"%)"]})]})]}),d.jsxs("div",{className:"row",children:[d.jsx("span",{className:"label",children:"Mã hóa đơn:"}),d.jsx("span",{className:"value code",children:i.idHoaDon||i._docId})]}),d.jsxs("div",{className:"row",children:[d.jsx("span",{className:"label",children:"Trạng thái:"}),d.jsx("span",{className:"value status",children:i.trangThai==="pending"?"Đang chờ":i.trangThai==="paid"?"Đã thanh toán":"Đã hủy"})]}),!T&&!S&&d.jsx("div",{className:"checkout-actions",children:d.jsx(If,{onClick:_,disabled:o,children:o?"Đang chuyển tới VNPay...":"Thanh toán"})})]})]})}const UB="vi-VN",Obe=t=>new Date(t).toLocaleDateString(UB),Ibe=(t,e)=>{const n=new Date(t);return n.setDate(n.getDate()+Number(e||0)),n},b3=t=>String(t||"").replace(/[^0-9a-zA-Z_-]/g,""),x3={"00":"Giao dịch thành công","07":"Trừ tiền thành công. Giao dịch nghi ngờ (liên hệ ngân hàng)","09":"Thẻ/Tài khoản chưa đăng ký InternetBanking",10:"Xác thực OTP sai quá số lần",11:"Hết hạn mức giao dịch",12:"Tài khoản/Thẻ bị khóa",24:"Khách hàng huỷ giao dịch",51:"Tài khoản không đủ số dư",65:"Vượt quá hạn mức giao dịch",75:"Ngân hàng thanh toán đang bảo trì",79:"Khách không nhập OTP",99:"Lỗi khác"},Pbe=(t,e)=>`${String(t)}_${String(e)}`;async function x_({idVi:t,idHoaDon:e,trangThai:n}){const r=Pbe(t,e);return await hi(Ae(se,"bienDongCuaVi",r),{idBDCV:r,idVi:String(t),idHoaDon:String(e),trangThai:String(n),ngayTao:jt()},{merge:!0}),r}function Rbe(){const t=wt(),e=Ir(),[n,r]=w.useState("processing"),[i,a]=w.useState({orderId:"",responseCode:"",message:"",amount:0,paidAt:""}),o=w.useMemo(()=>i.amount?Number(i.amount).toLocaleString(UB)+" đ":"—",[i.amount]),c=async T=>{const S=String(T.idNguoiDung||""),E=String(T.idGoi||""),N=Number(T.thoiHanNgay||0);if(!S||!E||N<=0)return;const C=Ge(Oe(se,"goiTraPhiCuaNguoiDung"),Qe("idNguoiDung","==",S),Qe("idGoi","==",E),vn(50)),L=await ct(C),D=new Date;L.docs.some(k=>{const I=k.data(),O=I?.status||"",U=typeof I?.NgayKetThuc?.toDate=="function"?I.NgayKetThuc.toDate():typeof I?.NgayKetThuc=="string"?new Date(I.NgayKetThuc):null;return O!=="Đã hủy"&&U&&U>=D})||await Mc(Oe(se,"goiTraPhiCuaNguoiDung"),{idNguoiDung:S,idGoi:E,NgayBatDau:jt(),NgayKetThuc:Ibe(D,N),status:"Đang hoạt động"})},u=async T=>{const S=String(T.idNguoiDung||""),E=String(T.idKhoaHoc||"");if(!S||!E)return;const N=Ae(se,"khoaHoc",E);(await ht(N)).exists()&&await yt(N,{thanhVienIds:_f(S)})},h=async(T,S,E)=>{try{if(S.loaiThanhToan!=="muaKhoaHoc")return;const N=Number(E||0);if(N<=0||((await ht(T)).data()||{}).daChiaTienChoChuKhoaHoc===!0)return;const D=String(S.idKhoaHoc||"");if(!D){await yt(T,{daChiaTienChoChuKhoaHoc:!1,ghiChuChiaTien:"missing_idKhoaHoc"});return}const R=Ae(se,"khoaHoc",D),k=await ht(R);if(!k.exists()){await yt(T,{daChiaTienChoChuKhoaHoc:!1,ghiChuChiaTien:"khoaHoc_not_found"});return}const I=String(k.data()?.idNguoiDung||"");if(!I){await yt(T,{daChiaTienChoChuKhoaHoc:!1,ghiChuChiaTien:"owner_not_found"});return}await x_({idVi:I,idHoaDon:T.id,trangThai:"pending"});const O=Ae(se,"vi",I);try{await yt(O,{soDu:i0(N),updatedAt:jt()})}catch{await hi(O,{idNguoiDung:I,soDu:N,updatedAt:jt()},{merge:!0})}await Mc(Oe(se,"bienDongSoDu"),{idVi:I,soTien:N,moTa:`Doanh thu từ hóa đơn ${T.id} (khóa học ${D})`,maThamChieu:T.id,loai:"thu_ban_khoa_hoc",ngayTao:jt()}),await x_({idVi:I,idHoaDon:T.id,trangThai:"done"}),await yt(T,{daChiaTienChoChuKhoaHoc:!0})}catch(N){console.error("creditOwnerWalletOnce error:",N)}},m=async(T,S)=>{try{if(T.loaiThanhToan!=="muaKhoaHoc")return;const E=String(T.idKhoaHoc||"");if(!E)return;const N=await ht(Ae(se,"khoaHoc",E));if(!N.exists())return;const C=String(N.data()?.idNguoiDung||"");if(!C)return;await x_({idVi:C,idHoaDon:S,trangThai:"canceled"})}catch(E){console.error("cancelBDCVIfNeeded error:",E)}};w.useEffect(()=>{(async()=>{const T=new URLSearchParams(e.search),S=e.state?.orderId||"",E=e.state?.status||"",N=T.get("vnp_ResponseCode"),C=b3(T.get("vnp_TxnRef")),L=Number(T.get("vnp_Amount")||0)/100,D=b3(T.get("orderId")),R=C||S||D;if(!R){r("error"),a({orderId:"",responseCode:"",message:"Thiếu mã hóa đơn.",amount:0,paidAt:""});return}let k=Ae(se,"hoaDon",R),I=await ht(k);if(!I.exists()){const ee=Ge(Oe(se,"hoaDon"),Qe("idHoaDon","==",R),vn(1)),q=await ct(ee);if(q.empty){r("error"),a({orderId:R,responseCode:N||"",message:"Không tìm thấy hóa đơn tương ứng.",amount:L||0,paidAt:""});return}const G=q.docs[0];k=Ae(se,"hoaDon",G.id),I=await ht(k)}const O=I.data()||{},U=Number(O.soTienThanhToan||0),$=O.trangThai==="paid",V=U<=0,B=U>0?L===U:!0;if(N==="00"&&B||V||E==="success"){$||await yt(k,{trangThai:"paid",paidAt:jt(),soTienThanhToanThucTe:V?0:L,kenhThanhToan:V?"MIEN_PHI":O.kenhThanhToan||"VNPAY"});try{O.loaiThanhToan==="nangCapTraPhi"?await c(O):O.loaiThanhToan==="muaKhoaHoc"&&(await u(O),await h(k,O,V?0:L||U))}catch(ee){console.error("Hậu thanh toán thất bại:",ee)}r("success"),a({orderId:R,responseCode:"00",message:V?"Giao dịch 0đ — đã kích hoạt quyền.":x3["00"],amount:V?0:L||U,paidAt:new Date().toISOString()})}else{$||await yt(k,{trangThai:"canceled",canceledAt:jt()});try{await m(O,k.id)}catch{}r("fail"),a({orderId:R,responseCode:N||"",message:x3[N||""]||"Thanh toán không thành công hoặc đã bị hủy.",amount:L||U||0,paidAt:""})}})()},[e]);const p=n==="success",y=n==="fail",b=n==="error",_=n==="processing";return d.jsx("div",{className:"cr-container",children:d.jsxs("div",{className:"cr-card",children:[d.jsxs("div",{className:"cr-header",children:[_&&d.jsx("h2",{className:"cr-title",children:"Đang xử lý giao dịch…"}),p&&d.jsx("h2",{className:"cr-title cr-title--success",children:"Thanh toán thành công"}),y&&d.jsx("h2",{className:"cr-title cr-title--fail",children:"Thanh toán không thành công"}),b&&d.jsx("h2",{className:"cr-title cr-title--fail",children:"Có lỗi xảy ra"})]}),!_&&d.jsxs("div",{className:"cr-details",children:[d.jsx("div",{className:"cr-label",children:"Mã hóa đơn"}),d.jsx("div",{className:"cr-value",children:d.jsx("strong",{children:i.orderId||"—"})}),d.jsx("div",{className:"cr-label",children:"Số tiền"}),d.jsx("div",{className:"cr-value",children:o}),d.jsx("div",{className:"cr-label",children:"Lý do"}),d.jsx("div",{className:"cr-value",children:i.message||"—"}),i.paidAt?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"cr-label",children:"Thời gian"}),d.jsx("div",{className:"cr-value",children:Obe(i.paidAt)})]}):null]}),d.jsx("div",{className:"cr-actions",children:d.jsx(If,{variant:"secondary",onClick:()=>t("/trangchu"),children:"Quay lại trang chủ"})})]})})}const V2="vi-VN",w3=t=>Number(t||0).toLocaleString(V2)+" đ",Dv=t=>{if(!t)return null;if(t instanceof Date)return t;if(typeof t?.toDate=="function")return t.toDate();if(typeof t=="string"){const e=t.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/);if(e){const r=Number(e[1]),i=Number(e[2])-1,a=Number(e[3]);return new Date(a,i,r)}const n=new Date(t);return isNaN(n)?null:n}return null},w_=t=>{const e=Dv(t);return e?e.toLocaleString(V2):"—"},Mbe=(t,e)=>{const n=Dv(t);if(!n)return null;const r=new Date(n);return r.setDate(r.getDate()+Number(e||0)),r};function Lbe(){const t=wt(),[e,n]=w.useState(null),[r,i]=w.useState([]),[a,o]=w.useState({});w.useEffect(()=>{const S=JSON.parse(sessionStorage.getItem("session")||"null"),E=lt.currentUser?.uid||S?.idNguoiDung||null;if(!E){t("/",{replace:!0});return}n(String(E))},[t]),w.useEffect(()=>{if(!e)return;const S=Ge(Oe(se,"donHangTraPhi"),Qe("idNguoiDung","==",String(e))),E=nt(S,N=>{const C=N.docs.map(L=>({_docId:L.id,...L.data()}));C.sort((L,D)=>(Dv(D.createdAt)?.getTime()||0)-(Dv(L.createdAt)?.getTime()||0)),i(C)},()=>i([]));return()=>E()},[e]),w.useEffect(()=>{const S=[...new Set(r.map(N=>N?.idGoi!=null?String(N.idGoi):null).filter(Boolean))];if(S.length===0){o({});return}const E=[];for(let N=0;N<S.length;N+=10)E.push(S.slice(N,N+10));(async()=>{const N={};for(const C of E)(await ct(Ge(Oe(se,"goiTraPhi"),Qe(Ys(),"in",C)))).forEach(D=>{N[D.id]={idGoi:D.id,...D.data()}});o(N)})()},[r]);const c=w.useMemo(()=>r.map(S=>{const E=a[String(S.idGoi)]||{};return{...S,tenGoi:S.tenGoi||E.tenGoi||"(gói không xác định)",thoiHanNgay:S.thoiHanNgay!=null?S.thoiHanNgay:E.thoiHan!=null?E.thoiHan:0}}),[r,a]),u=c.length>0,h=w.useMemo(()=>c.filter(S=>S.trangThai==="paid").reduce((S,E)=>S+Number(E.soTienThanhToanThucTe??E.soTienThanhToan??0),0),[c]),[m,p]=w.useState(1),y=10,b=Math.max(1,Math.ceil(c.length/y));w.useEffect(()=>{m>b&&p(b)},[b,m]);const _=w.useMemo(()=>{const S=(m-1)*y;return c.slice(S,S+y)},[c,m]),T=S=>p(Math.min(b,Math.max(1,S)));return d.jsxs("div",{className:"ph-container",children:[d.jsxs("div",{className:"back",onClick:()=>t(-1),children:[d.jsx(mt,{icon:ol,className:"iconback"}),d.jsx("span",{children:"Quay lại"})]}),d.jsx("h2",{className:"ph-title",children:"Lịch sử thanh toán"}),d.jsxs("div",{className:"ph-summary",children:[d.jsxs("div",{className:"ph-card",children:[d.jsx("div",{className:"ph-card__label",children:"Tổng giao dịch"}),d.jsx("div",{className:"ph-card__value",children:c.length})]}),d.jsxs("div",{className:"ph-card",children:[d.jsx("div",{className:"ph-card__label",children:"Đã thanh toán"}),d.jsxs("div",{className:"ph-card__value",children:[c.filter(S=>S.trangThai==="paid").length," giao dịch • ",w3(h)]})]})]}),u?d.jsxs("div",{className:"ph-table-wrap",children:[d.jsxs("table",{className:"ph-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Mã đơn"}),d.jsx("th",{children:"Gói"}),d.jsx("th",{children:"Số tiền"}),d.jsx("th",{children:"Trạng thái"}),d.jsx("th",{children:"Tạo lúc"}),d.jsx("th",{children:"Thanh toán/Hủy lúc"}),d.jsx("th",{children:"Ngày hết hạn"})]})}),d.jsx("tbody",{children:_.map(S=>{const E=S.trangThai==="paid"?"is-paid":S.trangThai==="pending"?"is-pending":"is-canceled",N=S.soTienThanhToanThucTe??S.soTienThanhToan??0,C=S.trangThai==="paid"?w_(S.paidAt):w_(S.canceledAt);let L="—";if(S.trangThai==="paid"&&S.thoiHanNgay>0){const D=Mbe(S.paidAt,S.thoiHanNgay);L=D?D.toLocaleDateString(V2):"—"}return d.jsxs("tr",{children:[d.jsx("td",{className:"ph-code",children:S.idDonHang||S._docId}),d.jsxs("td",{children:[d.jsx("div",{className:"ph-pack-name",children:S.tenGoi}),d.jsxs("div",{className:"ph-pack-term",children:["Thời hạn: ",S.thoiHanNgay," ngày"]})]}),d.jsxs("td",{children:[w3(N),Number(S.giamGia||0)>0&&d.jsxs("div",{className:"ph-discount",children:["Đã áp dụng -",S.giamGia,"%"]})]}),d.jsx("td",{children:d.jsx("span",{className:`ph-badge ${E}`,children:S.trangThai==="paid"?"Đã thanh toán":S.trangThai==="pending"?"Đang chờ":"Đã hủy"})}),d.jsx("td",{children:w_(S.createdAt)}),d.jsx("td",{children:C}),d.jsx("td",{children:L})]},S.idDonHang||S._docId)})})]}),d.jsxs("div",{className:"ph-pagination",children:[d.jsx("div",{className:"ph-actions",children:d.jsx(If,{onClick:()=>t("/tra-phi"),variant:"blue",children:"Nâng cấp gói trả phí mới"})}),d.jsx("button",{className:"ph-page-btn",onClick:()=>T(m-1),disabled:m<=1,children:"← Trước"}),d.jsx("div",{className:"ph-page-numbers",children:Array.from({length:b}).map((S,E)=>{const N=E+1;return d.jsx("button",{className:`ph-page-number ${N===m?"active":""}`,onClick:()=>T(N),children:N},N)})}),d.jsx("button",{className:"ph-page-btn",onClick:()=>T(m+1),disabled:m>=b,children:"Sau →"})]})]}):d.jsxs("div",{className:"ph-empty",children:["Chưa có giao dịch nào.",d.jsx("div",{className:"ph-empty__actions",children:d.jsx(If,{onClick:()=>t("/tra-phi"),children:"Mua gói ngay"})})]})]})}const Vbe={HOC_VIEN:"Học viên",GIANG_VIEN:"Giảng viên",ADMIN:"Quản trị"},Bbe=t=>Vbe[t]||"Người dùng",Ube=t=>({HOC_VIEN:"hoc_vien",GIANG_VIEN:"giang_vien",ADMIN:"admin"})[t]||"khac";function $be(){const{uid:t}=ma(),e=wt(),[n,r]=w.useState(null),[i,a]=w.useState([]),[o,c]=w.useState([]),[u,h]=w.useState(!0),[m,p]=w.useState(!0),[y,b]=w.useState(!0);w.useEffect(()=>{if(!t)return;h(!0);const R=nt(Ae(se,"nguoiDung",String(t)),k=>{r(k.exists()?k.data():null),h(!1)},()=>h(!1));return()=>R()},[t]),w.useEffect(()=>{if(!t)return;p(!0);const R=nt(Ge(Oe(se,"boThe"),Qe("idNguoiDung","==",String(t)),vn(300)),k=>{const I=k.docs.map(O=>{const U=O.data();return{...U,soTu:typeof U.soTu=="number"?U.soTu:Array.isArray(U.danhSachThe)?U.danhSachThe.length:0,luotHoc:Number(U.luotHoc||0)}});a(I),p(!1)},()=>p(!1));return()=>R()},[t]),w.useEffect(()=>{if(!t)return;if(n?.vaiTro!=="GIANG_VIEN"){c([]),b(!1);return}b(!0);const R=nt(Ge(Oe(se,"khoaHoc"),Qe("idNguoiDung","==",String(t)),vn(200)),k=>{const I=k.docs.map(O=>{const U=O.data();return{...U,boTheIds:Array.isArray(U.boTheIds)?U.boTheIds:[],thanhVienIds:Array.isArray(U.thanhVienIds)?U.thanhVienIds:[],kienThuc:Array.isArray(U.kienThuc)?U.kienThuc:[]}});c(I),b(!1)},()=>b(!1));return()=>R()},[t,n?.vaiTro]);const _=w.useMemo(()=>i.filter(R=>R.cheDo==="cong_khai").sort((R,k)=>Number(k.luotHoc||0)-Number(R.luotHoc||0)),[i]),T=n?.hoten||"",S=n?.tenNguoiDung||"",E=n?.email||"",N=n?.anhDaiDien||"",C=n?.vaiTro||"",L=R=>e(`/flashcard/${R}`),D=R=>e(`/khoaHoc/${R}`);return d.jsxs("div",{className:"userpage-wrap",children:[d.jsxs("section",{className:"user-head",children:[d.jsx("div",{className:"avatar",style:N?{backgroundImage:`url(${N})`}:{}}),d.jsxs("div",{className:"user-info",children:[d.jsx("h2",{className:"user-username",children:u?"Đang tải...":S||"Người dùng"}),d.jsx("div",{className:"user-fullname",children:T}),d.jsx("div",{className:"user-email",children:E}),d.jsx("div",{className:`user-role ${Ube(C)}`,children:Bbe(C)})]})]}),d.jsxs("section",{className:"block",children:[d.jsxs("div",{className:"block-head",children:[d.jsx("h3",{className:"block-title",children:"Bộ thẻ công khai"}),!m&&d.jsxs("div",{className:"block-sub",children:[_.length," bộ thẻ"]})]}),m?d.jsx("div",{className:"empty",children:"Đang tải bộ thẻ..."}):_.length===0?d.jsx("div",{className:"empty",children:"Chưa có bộ thẻ công khai nào."}):d.jsx("div",{className:"grid-cards",children:_.map(R=>d.jsxs("div",{className:"card",onClick:()=>L(R.idBoThe),children:[d.jsx("div",{className:"card-title",children:R.tenBoThe||"Không tên"}),d.jsxs("div",{className:"card-sub",children:[R.soTu??0," thẻ • ",R.luotHoc??0," lượt học"]}),d.jsx("div",{className:"card-actions",children:d.jsx("button",{className:"btn ghost",onClick:k=>{k.stopPropagation(),L(R.idBoThe)},children:"Học"})})]},R.idBoThe))})]}),C==="GIANG_VIEN"&&d.jsxs("section",{className:"block",children:[d.jsxs("div",{className:"block-head",children:[d.jsx("h3",{className:"block-title",children:"Khóa học"}),!y&&d.jsxs("div",{className:"block-sub",children:[o.length," khóa"]})]}),y?d.jsx("div",{className:"empty",children:"Đang tải khóa học..."}):o.length===0?d.jsx("div",{className:"empty",children:"Chưa có khóa học nào."}):d.jsx("div",{className:"grid-courses",children:o.map(R=>d.jsxs("div",{className:"course",onClick:()=>D(R.idKhoaHoc),children:[d.jsx("div",{className:"course-title",children:R.tenKhoaHoc||"Khóa học"}),d.jsxs("div",{className:"course-sub",children:[R.boTheIds?.length||0," bộ thẻ • ",R.thanhVienIds?.length||0," thành viên"]}),Array.isArray(R.kienThuc)&&R.kienThuc.length>0&&d.jsx("div",{className:"tags",children:R.kienThuc.map((k,I)=>d.jsx("span",{className:"tag",children:k},I))}),d.jsx("div",{className:"course-actions",children:d.jsx("button",{className:"btn ghost",onClick:k=>{k.stopPropagation(),D(R.idKhoaHoc)},children:"Xem"})})]},R.idKhoaHoc))})]})]})}function Fbe(){const{id:t}=ma(),e=wt(),[n,r]=w.useState(null),[i,a]=w.useState(null),[o,c]=w.useState(!0),[u,h]=w.useState(!1),[m,p]=w.useState(!1),[y,b]=w.useState(!1),_=w.useRef(null),T=w.useRef(null);w.useEffect(()=>{if(!y)return;function K(oe){const H=_.current,Z=T.current;Z&&!Z.contains(oe.target)&&H&&!H.contains(oe.target)&&b(!1)}return document.addEventListener("mousedown",K),()=>document.removeEventListener("mousedown",K)},[y]);const S=w.useMemo(()=>{try{return JSON.parse(sessionStorage.getItem("session")||"null")}catch{return null}},[]),E=lt.currentUser?.uid||S?.idNguoiDung||null,N=w.useMemo(()=>!E||!n?.idNguoiDung?!1:String(E)===String(n.idNguoiDung),[E,n?.idNguoiDung]),C=K=>{if(!K)return"";const oe=typeof K?.toDate=="function"?K.toDate():K instanceof Date?K:new Date(K);return Number.isNaN(oe?.getTime?.())?"":oe.toLocaleString("vi-VN")};w.useEffect(()=>{if(!t)return;c(!0);const K=nt(Ae(se,"boThe",String(t)),async oe=>{if(!oe.exists()){h(!0),c(!1);return}const H=oe.data();r(H),c(!1);try{if(H?.idNguoiDung){const Z=await ht(Ae(se,"nguoiDung",String(H.idNguoiDung)));a(Z.exists()?Z.data():null)}else a(null)}catch{a(null)}},()=>{h(!0),c(!1)});return()=>K()},[t]);const L=n?.cheDo==="ca_nhan"&&!N,D=async()=>{if(!E){e("/dang-nhap");return}const K=Number.isFinite(Number(t))?Number(t):String(t),oe=`${E}_${K}`;try{await hi(Ae(se,"tienDoHoc",oe),{idTDH:oe,idBoThe:K,idNguoiDung:String(E),ngayHocGanDay:jt()},{merge:!0}),await yt(Ae(se,"boThe",String(t)),{luotHoc:i0(1),ngayChinhSua:jt()}),window.dispatchEvent(new Event("tienDoHocUpdated"))}catch(H){console.error("Cập nhật tiến độ/luotHoc thất bại:",H)}e(`/flashcard/${t}`)},R=()=>{N&&e(`/suabothe/${t}`)},k=async()=>{if(!(!N||!n||!window.confirm(`Xoá bộ thẻ "${n.tenBoThe||n.idBoThe}"? Hành động này không thể hoàn tác.`)))try{await Tl(Ae(se,"boThe",String(t))),alert("Đã xoá bộ thẻ."),e("/giangvien")}catch(oe){console.error(oe),alert("Không thể xoá bộ thẻ. Vui lòng thử lại.")}};if(o)return d.jsx("div",{className:"bt-wrap",children:d.jsx("div",{className:"bt-card",children:"Đang tải bộ thẻ..."})});if(u||!n)return d.jsx("div",{className:"bt-wrap",children:d.jsxs("div",{className:"bt-card",children:[d.jsxs("div",{className:"back",onClick:()=>e(-1),style:{marginBottom:12},children:[d.jsx(mt,{icon:ol,className:"iconback"}),"Quay lại"]}),d.jsx("h2",{children:"Không tìm thấy bộ thẻ"})]})});if(L)return d.jsx("div",{className:"bt-wrap",children:d.jsxs("div",{className:"bt-card",children:[d.jsxs("div",{className:"back",onClick:()=>e(-1),style:{marginBottom:12},children:[d.jsx(mt,{icon:ol,className:"iconback"}),"Quay lại"]}),d.jsxs("h2",{children:["Bộ thẻ ở chế độ ",d.jsx("em",{children:"cá nhân"})]}),d.jsx("p",{children:"Bạn không có quyền xem bộ thẻ này."})]})});const{tenBoThe:I,soTu:O,idBoThe:U,idNguoiDung:$,danhSachThe:V=[],cheDo:B,luotHoc:Y=0,ngayTao:ee,ngayChinhSua:q}=n,G=m?V:V.slice(0,10);return d.jsx(d.Fragment,{children:d.jsxs("div",{className:"bt-card",children:[d.jsxs("div",{className:"bt-top-row",style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},children:[d.jsxs("div",{className:"back",onClick:()=>e(-1),children:[d.jsx(mt,{icon:ol,className:"iconback"}),"Quay lại"]}),N&&d.jsxs("div",{className:"more-wrapper",style:{position:"relative"},children:[d.jsx("button",{ref:_,className:"more-btn",onClick:()=>b(K=>!K),"aria-haspopup":"menu","aria-expanded":y,title:"Tùy chọn",style:{width:36,height:36,borderRadius:8,border:"1px solid var(--line,#e5e7eb)",background:"white",display:"grid",placeItems:"center",cursor:"pointer"},children:d.jsx(mt,{icon:FE})}),y&&d.jsxs("div",{ref:T,className:"more-menu",style:{position:"absolute",top:44,right:0,background:"white",border:"1px solid var(--line,#e5e7eb)",borderRadius:10,boxShadow:"0 6px 18px rgba(0,0,0,0.08)",minWidth:160,zIndex:20,overflow:"hidden"},children:[d.jsx("button",{className:"more-item",onClick:R,style:{width:"100%",textAlign:"left",padding:"10px 12px",background:"white",border:"none",cursor:"pointer"},children:"Sửa bộ thẻ"}),d.jsx("button",{className:"more-item danger",onClick:k,style:{width:"100%",textAlign:"left",padding:"10px 12px",background:"white",border:"none",color:"#dc2626",cursor:"pointer"},children:"Xoá bộ thẻ"})]})]})]}),d.jsxs("div",{className:"bt-head-only",children:[d.jsx("h2",{className:"bt-title",children:I||`Bộ thẻ #${U}`}),d.jsxs("div",{className:"bt-sub",children:[d.jsx("span",{className:`chip ${B==="cong_khai"?"pub":"pri"}`,children:B==="cong_khai"?"Công khai":"Cá nhân"}),d.jsx("span",{className:"sep",children:"•"}),d.jsxs("span",{children:[O??V.length," thẻ"]}),d.jsx("span",{className:"sep",children:"•"}),d.jsxs("span",{children:[Y," lượt học"]})]})]}),d.jsxs("div",{className:"bt-grid",children:[d.jsxs("div",{className:"bt-row",children:[d.jsx("span",{className:"bt-label",children:"Mã bộ thẻ"}),d.jsx("span",{children:U})]}),d.jsxs("div",{className:"bt-row",children:[d.jsx("span",{className:"bt-label",children:"Người tạo"}),d.jsx("span",{children:i?.tenNguoiDung||i?.gmail||i?.email||"Ẩn danh"})]}),d.jsxs("div",{className:"bt-row",children:[d.jsx("span",{className:"bt-label",children:"Ngày tạo"}),d.jsx("span",{children:C(ee)})]}),d.jsxs("div",{className:"bt-row",children:[d.jsx("span",{className:"bt-label",children:"Chỉnh sửa"}),d.jsx("span",{children:C(q)})]})]}),d.jsxs("div",{className:"bt-list",children:[d.jsxs("div",{className:"bt-list-head",children:[d.jsx("h3",{children:"Từ vựng"}),V.length>10&&d.jsx("button",{className:"btn xs",onClick:()=>p(K=>!K),children:m?"Thu gọn":`Xem tất cả (${V.length})`})]}),V.length===0?d.jsx("div",{className:"empty",children:"Bộ thẻ chưa có mục nào."}):d.jsxs("div",{className:"table",children:[d.jsxs("div",{className:"tr head",children:[d.jsx("div",{className:"td idx",children:"#"}),d.jsx("div",{className:"td",children:"Từ"}),d.jsx("div",{className:"td",children:"Nghĩa"})]}),G.map((K,oe)=>d.jsxs("div",{className:"tr",children:[d.jsx("div",{className:"td idx",children:oe+1}),d.jsx("div",{className:"td",children:K?.tu}),d.jsx("div",{className:"td",children:K?.nghia})]},`${oe}-${K?.tu}-${K?.nghia}`))]})]}),d.jsx("div",{className:"bt-foot center",children:d.jsx("button",{className:"btn primary",onClick:D,children:"Học ngay"})})]})})}const zbe="vi-VN",_3=t=>`${Number(t||0).toLocaleString("vi-VN")}đ`,yT=t=>{if(!t)return null;if(typeof t?.toDate=="function")return t.toDate();if(t instanceof Date)return t;const e=new Date(t);return Number.isNaN(e.getTime())?null:e},S3=t=>{const e=yT(t);return e?e.toLocaleString(zbe):""};function Hbe(){const t=wt(),[e,n]=w.useState(null),[r,i]=w.useState(!1);w.useEffect(()=>{const T=ga(lt,S=>{if(S?.uid)n(S.uid);else try{const E=JSON.parse(sessionStorage.getItem("session")||"null");E?.idNguoiDung&&n(String(E.idNguoiDung))}catch{}i(!0)});return()=>T()},[]),w.useEffect(()=>{r&&!e&&t("/dang-nhap",{replace:!0})},[r,e,t]);const[a,o]=w.useState({soDu:0,ngayCapNhat:null}),[c,u]=w.useState(!0);w.useEffect(()=>{if(!e)return;u(!0);const T=nt(Ae(se,"vi",String(e)),S=>{if(S.exists()){const E=S.data()||{};o({idVi:S.id,soDu:Number(E.soDu||0),ngayCapNhat:E.ngayCapNhat||E.updatedAt||null})}else o({idVi:String(e),soDu:0,ngayCapNhat:null});u(!1)},()=>u(!1));return()=>T()},[e]);const[h,m]=w.useState([]),[p,y]=w.useState(!0);w.useEffect(()=>{if(!e)return;y(!0);const T=Ge(Oe(se,"bienDongCuaVi"),Qe("idVi","==",String(e)),vn(200)),S=nt(T,E=>{const N=E.docs.map(C=>({id:C.id,...C.data()}));N.sort((C,L)=>{const D=yT(C.ngayTao)?.getTime()||0;return(yT(L.ngayTao)?.getTime()||0)-D}),m(N),y(!1)},()=>{m([]),y(!1)});return()=>S()},[e]);const[b,_]=w.useState([]);return w.useEffect(()=>{let T=!1;return(async()=>{if(!h.length){_([]);return}const S=Array.from(new Set(h.map(D=>String(D.idHoaDon||"")).filter(Boolean))),E={};for(let D=0;D<S.length;D+=10){const R=S.slice(D,D+10);try{(await ct(Ge(Oe(se,"hoaDon"),Qe(Ys(),"in",R)))).forEach(I=>E[I.id]={id:I.id,...I.data()||{}})}catch{}}const N=Array.from(new Set(Object.values(E).map(D=>String(D.idNguoiDung||"")).filter(Boolean))),C={};for(let D=0;D<N.length;D+=10){const R=N.slice(D,D+10);try{(await ct(Ge(Oe(se,"nguoiDung"),Qe(Ys(),"in",R)))).forEach(I=>C[I.id]={id:I.id,...I.data()||{}})}catch{}}if(T)return;const L=h.map(D=>{const R=E[String(D.idHoaDon)]||{},k=C[String(R.idNguoiDung)]||{},I=Number(R.soTienThanhToanThucTe??R.soTienThanhToan??0)||0,O=String(D.trangThai||"").toLowerCase(),U=O==="done"?"+":O==="canceled"?"":"+";return{id:D.id,ngayTao:D.ngayTao,trangThai:O,tenGoi:R.tenGoi||"—",buyerName:k.tenNguoiDung||k.hoTen||"Người dùng",soTien:I,sign:U}});_(L)})(),()=>{T=!0}},[h]),r?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"vi-back",onClick:()=>t(-1),children:"← Quay lại"}),d.jsx("h1",{className:"vi-title",children:"Ví của tôi"}),d.jsxs("div",{className:"vi-balance-card",children:[d.jsx("div",{className:"vi-balance-label",children:"Số dư hiện tại"}),d.jsx("div",{className:"vi-balance-value",children:c?"…":_3(a.soDu)}),d.jsxs("div",{className:"vi-balance-sub",children:["Cập nhật: ",S3(a.ngayCapNhat)]}),d.jsx("div",{className:"vi-actions",children:d.jsx("button",{className:"vi-btn-primary",onClick:()=>t("/rut-tien",{state:{soDu:a.soDu}}),children:"Yêu cầu rút"})})]}),d.jsxs("div",{className:"vi-table-wrap",children:[d.jsxs("div",{className:"vi-table-headline",children:[d.jsx("h2",{children:"Biến động của ví"}),d.jsxs("span",{className:"vi-muted",children:[b.length," dòng gần nhất"]})]}),p?d.jsx("div",{className:"vi-empty",children:"Đang tải…"}):b.length===0?d.jsx("div",{className:"vi-empty",children:"Chưa có đối soát nào."}):d.jsxs("table",{className:"vi-table",children:[d.jsx("thead",{children:d.jsxs("tr",{children:[d.jsx("th",{children:"Trạng thái"}),d.jsx("th",{children:"Người mua"}),d.jsx("th",{children:"Số tiền"}),d.jsx("th",{children:"Nội dung"})," ",d.jsx("th",{children:"Thời gian"})]})}),d.jsx("tbody",{children:b.map(T=>{const S=T.trangThai==="done"?"vi-amount--plus":T.trangThai==="canceled"?"vi-amount--minus":"vi-amount--pending",E=T.trangThai==="done"?"vi-badge--plus":T.trangThai==="canceled"?"vi-badge--minus":"vi-badge--pending";return d.jsxs("tr",{children:[d.jsx("td",{"data-label":"Trạng thái",children:d.jsx("span",{className:`vi-badge ${E}`,children:T.trangThai==="done"?"Hoàn tất":T.trangThai==="canceled"?"Hủy":"Đang xử lý"})}),d.jsx("td",{"data-label":"Người mua",children:T.buyerName}),d.jsx("td",{"data-label":"Số tiền",className:`vi-amount ${S}`,children:T.trangThai==="canceled"?"0đ":`${T.sign}${_3(T.soTien)}`}),d.jsx("td",{"data-label":"Tên gói",children:T.tenGoi})," ",d.jsx("td",{"data-label":"Thời gian",children:S3(T.ngayTao)})]},T.id)})})]})]})]}):d.jsx("div",{className:"vi-container",children:d.jsx("div",{className:"vi-empty",children:"Đang kiểm tra đăng nhập…"})})}function qbe(){return d.jsxs(dF,{children:[d.jsxs(at,{element:d.jsx(mX,{}),children:[d.jsx(at,{path:"/dang-nhap",element:d.jsx(bte,{})}),d.jsx(at,{path:"/dang-ky",element:d.jsx(sne,{})}),d.jsx(at,{path:"/quen-mat-khau",element:d.jsx(cne,{})}),d.jsx(at,{path:"/",element:d.jsx(ibe,{})})]}),d.jsxs(at,{element:d.jsx(WF,{}),children:[d.jsx(at,{element:d.jsx(ex,{allowed:["GIANG_VIEN","HOC_VIEN","ADMIN"]}),children:d.jsxs(at,{element:d.jsx(CO,{}),children:[d.jsx(at,{path:"/trangchu",element:d.jsx(i0e,{})}),d.jsx(at,{path:"/tra-phi",element:d.jsx(obe,{})}),d.jsx(at,{path:"/flashcard/:id",element:d.jsx(a0e,{})}),d.jsx(at,{path:"/tracnghiem/:id",element:d.jsx(s0e,{})}),d.jsx(at,{path:"/test/:id",element:d.jsx(c0e,{})}),d.jsx(at,{path:"/game/:id",element:d.jsx(f0e,{})}),d.jsx(at,{path:"/newBoThe",element:d.jsx(g0e,{})}),d.jsx(at,{path:"/khoaHoc/:id",element:d.jsx(R0e,{})}),d.jsx(at,{path:"/thuviencuatoi",element:d.jsx(M0e,{})}),d.jsx(at,{path:"/setting",element:d.jsx(nbe,{})}),d.jsx(at,{path:"/suabothe/:id",element:d.jsx(rbe,{})}),d.jsx(at,{path:"/timkiem/:id",element:d.jsx(bbe,{})}),d.jsx(at,{path:"/checkout",element:d.jsx(kbe,{})}),d.jsx(at,{path:"/checkout/result",element:d.jsx(Rbe,{})}),d.jsx(at,{path:"/lichSuThanhToan",element:d.jsx(Lbe,{})}),d.jsx(at,{path:"/nguoiDung/:uid",element:d.jsx($be,{})}),d.jsx(at,{path:"/bothe/:id",element:d.jsx(Fbe,{})}),d.jsx(at,{path:"/vi",element:d.jsx(Hbe,{})}),d.jsxs(at,{element:d.jsx(Abe,{}),children:[d.jsx(at,{path:"/video",element:d.jsx(d0e,{})}),d.jsx(at,{path:"/video/:id",element:d.jsx(h0e,{})})]})]})}),d.jsx(at,{element:d.jsx(ex,{allowed:["GIANG_VIEN","ADMIN"]}),children:d.jsx(at,{element:d.jsx(CO,{}),children:d.jsx(at,{path:"/newKhoaHoc",element:d.jsx(m0e,{})})})}),d.jsx(at,{element:d.jsx(ex,{allowed:["ADMIN"]}),children:d.jsxs(at,{element:d.jsx(b5,{}),children:[d.jsx(at,{path:"/admin",element:d.jsx(Yve,{})}),d.jsx(at,{path:"/admin/setting",element:d.jsx(_be,{})}),d.jsx(at,{path:"/admin/quan-ly-user",element:d.jsx($0e,{})}),d.jsx(at,{path:"/admin/thong-ke",element:d.jsx(Xve,{})}),d.jsx(at,{path:"/admin/quan-ly-tra-phi",element:d.jsx(vbe,{})}),d.jsx(at,{path:"/admin/quan-ly-bo-the",element:d.jsx(G0e,{})}),d.jsx(at,{path:"/admin/quan-ly-khoa-hoc",element:d.jsx(Q0e,{})})]})})]}),d.jsx(at,{path:"*",element:d.jsx("div",{children:"404 Not Found"})})]})}w$.createRoot(document.getElementById("root")).render(d.jsx(w.StrictMode,{children:d.jsx(LF,{children:d.jsx(qbe,{})})}));
